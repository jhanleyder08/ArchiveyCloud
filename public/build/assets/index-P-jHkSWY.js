import{r as m,b as y,j as e,H as de,L as J}from"./app-Cl0FOawM.js";import{A as le}from"./app-layout-DmBWywAa.js";import{B as u}from"./button-DtR6BkFB.js";import{I as l}from"./input-BIaS0EAz.js";import{L as r}from"./label-CbT9r7o4.js";import{S as A,a as O,b as I,c as q,d as b}from"./select-CRHmP9X5.js";import{t as $,D as M,g as oe,a as k,b as L,c as B,d as P,T as z,e as G,k as xe,l as S,m as E,n as F}from"./app-sidebar-layout-C6Q0w7Bq.js";import{F as W}from"./Combination-C5IUXXYh.js";import{P as me}from"./plus-BKC1dWv8.js";import{T as X,a as he}from"./toggle-right-CfcP3tAy.js";import{S as Y}from"./square-pen-D_2v4yPQ.js";import{C as ge}from"./circle-check-big-DhkCLoOD.js";import{S as pe}from"./search-Dy3uqUBg.js";import{E as ue}from"./eye-DCN7i_dg.js";import{C as je}from"./copy-C2xt6bBM.js";import{T as ve}from"./trash-2-DJ1KrITR.js";/* empty css            */import"./index-D7qm94Yl.js";import"./index-BO3GgK9t.js";import"./index-BI--RP87.js";import"./check-B0U8qkUS.js";import"./index-exm1JAg4.js";import"./x-RnAAca9d.js";import"./index-BBKsozoC.js";import"./app-logo-icon-DhSh7KcS.js";import"./user-CFwvzY-o.js";import"./mail-DXR72C52.js";import"./users-D2N-KHHv.js";import"./folder-WM0Q2jqL.js";import"./triangle-alert-DMJQlJHA.js";const o={success:g=>{$.success(g,{style:{background:"#10b981",color:"#ffffff",border:"none"}})},error:g=>{$.error(g,{style:{background:"#ef4444",color:"#ffffff",border:"none"}})},info:g=>{$.info(g,{style:{background:"#3b82f6",color:"#ffffff",border:"none"}})},warning:g=>{$.warning(g,{style:{background:"#f59e0b",color:"#ffffff",border:"none"}})}};function Ke({trds:g,stats:Z,flash:p}){const R=Z||{total:0,vigentes:0,borradores:0,aprobadas:0},v=g||{data:[],total:0,from:0,to:0,links:[]},[w,ee]=m.useState(""),[_,se]=m.useState(""),[D,ae]=m.useState(""),[C,f]=m.useState(null),[re,H]=m.useState(!1),[c,T]=m.useState(null),[t,Q]=m.useState(null);m.useEffect(()=>{p?.success&&o.success(p.success),p?.error&&o.error(p.error)},[p]);const[a,x]=m.useState({codigo:"",nombre:"",descripcion:"",entidad:"",dependencia:"",fecha_aprobacion:"",fecha_vigencia_inicio:"",fecha_vigencia_fin:"",observaciones_generales:"",version:1,estado:"borrador"}),[n,h]=m.useState({codigo:"",nombre:"",descripcion:"",entidad:"",dependencia:"",fecha_aprobacion:"",fecha_vigencia_inicio:"",fecha_vigencia_fin:"",observaciones_generales:"",version:1,estado:"borrador"});m.useEffect(()=>{c&&h({codigo:c.codigo||"",nombre:c.nombre||"",descripcion:c.descripcion||"",entidad:c.entidad||"",dependencia:c.dependencia||"",fecha_aprobacion:c.fecha_aprobacion?new Date(c.fecha_aprobacion).toISOString().split("T")[0]:"",fecha_vigencia_inicio:c.fecha_vigencia_inicio?new Date(c.fecha_vigencia_inicio).toISOString().split("T")[0]:"",fecha_vigencia_fin:c.fecha_vigencia_fin?new Date(c.fecha_vigencia_fin).toISOString().split("T")[0]:"",observaciones_generales:c.observaciones_generales||"",version:c.version||1,estado:c.estado||"borrador"})},[c]);const ie=[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Tablas de Retención Documental",href:"/admin/trd"}],V={borrador:"Borrador",revision:"En Revisión",aprobada:"Aprobada",vigente:"Vigente",historica:"Histórica"};m.useEffect(()=>{const s=setTimeout(()=>{if(w!==""||_!==""||D!==""){const i=new URLSearchParams;w&&i.append("search",w),_&&i.append("estado",_),D&&i.append("vigencia",D),y.visit(`/admin/trd?${i.toString()}`,{preserveState:!0,preserveScroll:!0,replace:!0})}},500);return()=>clearTimeout(s)},[w,_,D]);const te=s=>{y.delete(`/admin/trd/${s.id}`,{onSuccess:()=>{f(null),o.success("TRD eliminada exitosamente")},onError:i=>{const d=Object.values(i)[0];o.error(d||"Error al eliminar la TRD"),f(null)},onFinish:()=>f(null)})},ne=s=>{if(s.estado==="borrador"){o.error("No se puede activar la vigencia de una TRD en estado Borrador. Debe estar Aprobada primero.");return}if(s.estado==="revision"){o.error("No se puede activar la vigencia de una TRD en Revisión. Debe estar Aprobada primero.");return}y.patch(`/admin/trd/${s.id}/vigencia`,{},{preserveScroll:!0,onSuccess:()=>{o.success(s.estado==="vigente"?"Vigencia desactivada exitosamente":"Vigencia activada exitosamente")},onError:i=>{const d=Object.values(i)[0];o.error(d||"Error al cambiar el estado de vigencia")}})},ce=s=>{y.post(`/admin/trd/${s.id}/duplicate`,{},{onSuccess:()=>{o.success("TRD duplicada exitosamente")},onError:i=>{const d=Object.values(i)[0];o.error(d||"Error al duplicar la TRD")}})},N=s=>new Date(s).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),K=s=>{const i=s==="vigente"?"aprobada":s,d={borrador:"bg-gray-100 text-gray-800",revision:"bg-yellow-100 text-yellow-800",aprobada:"bg-green-100 text-green-800",rechazada:"bg-red-100 text-red-800",obsoleta:"bg-red-100 text-red-800"},j=V[i]||i,U=d[i]||"bg-gray-100 text-gray-800";return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${U}`,children:j})};return e.jsxs(le,{breadcrumbs:ie,children:[e.jsx(de,{title:"Gestión de Tablas de Retención Documental"}),e.jsxs("div",{className:"space-y-6",children:[p?.success&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:p.success}),p?.error&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:p.error}),e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-6 w-6 text-[#2a3d83]"}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Gestión de Tablas de Retención Documental"})]}),e.jsxs(M,{open:re,onOpenChange:H,children:[e.jsx(oe,{asChild:!0,children:e.jsxs(u,{className:"flex items-center gap-2 px-4 py-2 bg-[#2a3d83] text-white rounded-lg hover:bg-[#1e2b5f] transition-colors",children:[e.jsx(me,{className:"h-4 w-4"}),"Nueva TRD"]})}),e.jsxs(k,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-scroll [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:[e.jsxs(L,{children:[e.jsx(B,{className:"text-xl font-semibold text-gray-900",children:"Crear Nueva TRD"}),e.jsx(P,{className:"text-sm text-gray-600",children:"Complete los siguientes datos para crear una nueva Tabla de Retención Documental."})]}),e.jsxs("form",{onSubmit:s=>{if(s.preventDefault(),!a.codigo||!a.nombre||!a.descripcion||!a.entidad||!a.fecha_aprobacion||!a.fecha_vigencia_inicio){o.error("Por favor complete todos los campos requeridos");return}const i={codigo:a.codigo.trim(),nombre:a.nombre.trim(),descripcion:a.descripcion.trim(),entidad:a.entidad.trim(),dependencia:a.dependencia?.trim()||"",fecha_aprobacion:a.fecha_aprobacion,fecha_vigencia_inicio:a.fecha_vigencia_inicio,fecha_vigencia_fin:a.fecha_vigencia_fin||null,observaciones_generales:a.observaciones_generales?.trim()||null,version:String(a.version||1),estado:a.estado};console.log("Enviando datos:",i),y.post("/admin/trd",i,{onSuccess:()=>{H(!1),x({codigo:"",nombre:"",descripcion:"",entidad:"",dependencia:"",fecha_aprobacion:"",fecha_vigencia_inicio:"",fecha_vigencia_fin:"",observaciones_generales:"",version:1,estado:"borrador"})},onError:d=>{console.error("Error al crear TRD:",d),d&&Object.keys(d).forEach(j=>{const U=Array.isArray(d[j])?d[j][0]:d[j];o.error(`Error en ${j}: ${U}`)})}})},className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"create-codigo",children:"Código *"}),e.jsx(l,{id:"create-codigo",type:"text",value:a.codigo,onChange:s=>x({...a,codigo:s.target.value}),placeholder:"Ej: TRD-001",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"create-entidad",children:"Entidad *"}),e.jsx(l,{id:"create-entidad",type:"text",value:a.entidad,onChange:s=>x({...a,entidad:s.target.value}),placeholder:"Nombre de la entidad",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"create-nombre",children:"Nombre *"}),e.jsx(l,{id:"create-nombre",type:"text",value:a.nombre,onChange:s=>x({...a,nombre:s.target.value}),placeholder:"Nombre de la TRD",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"create-descripcion",children:"Descripción *"}),e.jsx(z,{id:"create-descripcion",value:a.descripcion,onChange:s=>x({...a,descripcion:s.target.value}),placeholder:"Descripción de la TRD",rows:3,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"create-dependencia",children:"Dependencia"}),e.jsx(l,{id:"create-dependencia",type:"text",value:a.dependencia,onChange:s=>x({...a,dependencia:s.target.value}),placeholder:"Dependencia responsable"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"create-fecha-aprobacion",children:"Fecha de Aprobación *"}),e.jsx(l,{id:"create-fecha-aprobacion",type:"date",value:a.fecha_aprobacion,onChange:s=>x({...a,fecha_aprobacion:s.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"create-fecha-vigencia-inicio",children:"Fecha Vigencia Inicio *"}),e.jsx(l,{id:"create-fecha-vigencia-inicio",type:"date",value:a.fecha_vigencia_inicio,onChange:s=>x({...a,fecha_vigencia_inicio:s.target.value}),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"create-fecha-vigencia-fin",children:"Fecha Vigencia Fin"}),e.jsx(l,{id:"create-fecha-vigencia-fin",type:"date",value:a.fecha_vigencia_fin,onChange:s=>x({...a,fecha_vigencia_fin:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"create-observaciones",children:"Observaciones Generales"}),e.jsx(z,{id:"create-observaciones",value:a.observaciones_generales,onChange:s=>x({...a,observaciones_generales:s.target.value}),placeholder:"Observaciones adicionales",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"create-version",children:"Versión *"}),e.jsx(l,{id:"create-version",type:"number",min:"1",value:a.version,onChange:s=>x({...a,version:parseInt(s.target.value)||1}),placeholder:"1",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"create-estado",children:"Estado *"}),e.jsxs(A,{value:a.estado,onValueChange:s=>x({...a,estado:s}),children:[e.jsx(O,{children:e.jsx(I,{placeholder:"Seleccionar estado"})}),e.jsx(q,{children:Object.entries(V).filter(([s])=>s!=="vigente").map(([s,i])=>e.jsx(b,{value:s,children:i},s))})]})]})]}),e.jsxs(G,{children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>H(!1),children:"Cancelar"}),e.jsx(u,{type:"submit",className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",children:"Crear TRD"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total TRDs"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:R.total}),e.jsx("p",{className:"text-xs text-gray-400",children:"Tablas registradas"})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(W,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Vigentes"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:R.vigentes}),e.jsx("p",{className:"text-xs text-gray-400",children:"En funcionamiento"})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(X,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Borradores"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:R.borradores}),e.jsx("p",{className:"text-xs text-gray-400",children:"En elaboración"})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(Y,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Aprobadas"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:R.aprobadas}),e.jsx("p",{className:"text-xs text-gray-400",children:"Listas para uso"})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(ge,{className:"h-6 w-6 text-[#2a3d83]"})})]})})]}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4 w-full sm:w-auto",children:e.jsxs("div",{className:"relative flex-1 sm:w-80",children:[e.jsx(pe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(l,{type:"text",value:w,onChange:s=>ee(s.target.value),placeholder:"Buscar TRDs...",className:"pl-10"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(A,{value:_||"all",onValueChange:s=>se(s==="all"?"":s),children:[e.jsx(O,{className:"w-[180px]",children:e.jsx(I,{placeholder:"Todos los estados"})}),e.jsxs(q,{children:[e.jsx(b,{value:"all",children:"Todos los estados"}),Object.entries(V).map(([s,i])=>e.jsx(b,{value:s,children:i},s))]})]}),e.jsxs(A,{value:D||"all",onValueChange:s=>ae(s==="all"?"":s),children:[e.jsx(O,{className:"w-[180px]",children:e.jsx(I,{placeholder:"Todas las vigencias"})}),e.jsxs(q,{children:[e.jsx(b,{value:"all",children:"Todas las vigencias"}),e.jsx(b,{value:"true",children:"Vigentes"}),e.jsx(b,{value:"false",children:"No vigentes"})]})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg border overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"TRD"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Estado"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Vigencia"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Series"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Actualización"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:v.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"py-8 px-6 text-center text-gray-500",children:"No se encontraron TRDs."})}):v.data.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.nombre}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.codigo," • v",s.version]}),e.jsx("div",{className:"text-xs text-gray-400",children:s.identificador_unico})]})}),e.jsx("td",{className:"py-4 px-6",children:K(s.estado)}),e.jsx("td",{className:"py-4 px-6",children:s.vigente?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Vigente"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Inactiva"})}),e.jsx("td",{className:"py-4 px-6 text-gray-600",children:s.series_count||0}),e.jsx("td",{className:"py-4 px-6 text-gray-600",children:N(s.updated_at)}),e.jsx("td",{className:"py-4 px-6",children:e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(S,{children:[e.jsx(E,{asChild:!0,children:e.jsx("button",{onClick:()=>Q(s),className:"p-2 rounded-md text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50 transition-colors",children:e.jsx(ue,{className:"h-4 w-4"})})}),e.jsx(F,{children:e.jsx("p",{children:"Ver detalles"})})]}),e.jsxs(S,{children:[e.jsx(E,{asChild:!0,children:e.jsx("button",{onClick:()=>T(s),className:"p-2 rounded-md text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50 transition-colors",children:e.jsx(Y,{className:"h-4 w-4"})})}),e.jsx(F,{children:e.jsx("p",{children:"Editar TRD"})})]}),e.jsxs(S,{children:[e.jsx(E,{asChild:!0,children:e.jsx("button",{onClick:()=>ce(s),className:"p-2 rounded-md text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50 transition-colors",children:e.jsx(je,{className:"h-4 w-4"})})}),e.jsx(F,{children:e.jsx("p",{children:"Duplicar TRD"})})]}),e.jsxs(S,{children:[e.jsx(E,{asChild:!0,children:e.jsx("button",{onClick:()=>ne(s),className:`p-2 rounded-md transition-colors ${s.estado==="vigente"?"text-orange-600 hover:text-orange-800 hover:bg-orange-50":"text-green-600 hover:text-green-800 hover:bg-green-50"}`,children:s.estado==="vigente"?e.jsx(he,{className:"h-4 w-4"}):e.jsx(X,{className:"h-4 w-4"})})}),e.jsx(F,{children:e.jsx("p",{children:s.estado==="vigente"?"Desactivar vigencia":"Activar vigencia"})})]}),e.jsxs(S,{children:[e.jsx(E,{asChild:!0,children:e.jsx("button",{onClick:()=>f(s),className:"p-2 rounded-md text-red-600 hover:text-red-800 hover:bg-red-50 transition-colors",children:e.jsx(ve,{className:"h-4 w-4"})})}),e.jsx(F,{children:e.jsx("p",{children:"Eliminar TRD"})})]})]})})})]},s.id))})]})}),v.data.length>0&&e.jsxs("div",{className:"flex items-center justify-between bg-white border rounded-lg px-6 py-3",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando ",e.jsx("span",{className:"font-medium",children:v.from||0})," a"," ",e.jsx("span",{className:"font-medium",children:v.to||0})," de"," ",e.jsx("span",{className:"font-medium",children:v.total||0})," TRDs"]}),e.jsx("div",{className:"flex items-center gap-2",children:v.links.map((s,i)=>s.label.includes("Previous")?e.jsx(J,{href:s.url||"#",preserveState:!0,className:`px-3 py-2 border border-gray-300 rounded-md text-sm font-medium ${s.url?"text-gray-700 hover:bg-gray-50":"text-gray-300 cursor-not-allowed"}`,children:"Anterior"},i):s.label.includes("Next")?e.jsx(J,{href:s.url||"#",preserveState:!0,className:`px-3 py-2 border border-gray-300 rounded-md text-sm font-medium ${s.url?"text-gray-700 hover:bg-gray-50":"text-gray-300 cursor-not-allowed"}`,children:"Siguiente"},i):isNaN(Number(s.label))?null:e.jsx(J,{href:s.url||"#",preserveState:!0,className:`px-3 py-2 rounded-md text-sm font-medium ${s.active?"bg-[#2a3d83] text-white":"border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:s.label},i))})]})]}),e.jsx(M,{open:!!C,onOpenChange:s=>{s||f(null)},children:e.jsxs(k,{className:"sm:max-w-[425px]",children:[e.jsxs(L,{children:[e.jsx(B,{className:"text-xl font-semibold text-gray-900",children:"Eliminar TRD"}),e.jsx(P,{className:"text-sm text-gray-600",children:"Esta acción no se puede deshacer. La TRD será eliminada permanentemente del sistema."})]}),e.jsxs("div",{className:"py-4",children:[e.jsxs("p",{className:"text-gray-700",children:["¿Estás seguro de que deseas eliminar la TRD ",e.jsx("strong",{children:C?.nombre}),"?"]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["Código: ",e.jsx("strong",{children:C?.codigo})]})]}),e.jsxs(G,{children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>f(null),children:"Cancelar"}),e.jsx(u,{type:"button",variant:"destructive",onClick:()=>C&&te(C),children:"Eliminar TRD"})]})]})}),e.jsx(M,{open:!!c,onOpenChange:s=>{s||T(null)},children:e.jsxs(k,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-scroll [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:[e.jsxs(L,{children:[e.jsx(B,{className:"text-xl font-semibold text-gray-900",children:"Editar TRD"}),e.jsx(P,{className:"text-sm text-gray-600",children:"Modifique los datos de la Tabla de Retención Documental según sea necesario."})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),c&&y.put(`/admin/trd/${c.id}`,n,{onSuccess:()=>{T(null),o.success("TRD actualizada exitosamente")},onError:i=>{Object.keys(i).forEach(d=>{const j=Array.isArray(i[d])?i[d][0]:i[d];o.error(`Error en ${d}: ${j}`)})}})},className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-codigo",children:"Código *"}),e.jsx(l,{id:"edit-codigo",type:"text",value:n.codigo,onChange:s=>h({...n,codigo:s.target.value}),placeholder:"Ej: TRD-001",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-entidad",children:"Entidad *"}),e.jsx(l,{id:"edit-entidad",type:"text",value:n.entidad,onChange:s=>h({...n,entidad:s.target.value}),placeholder:"Nombre de la entidad",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-nombre",children:"Nombre *"}),e.jsx(l,{id:"edit-nombre",type:"text",value:n.nombre,onChange:s=>h({...n,nombre:s.target.value}),placeholder:"Nombre de la TRD",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-descripcion",children:"Descripción *"}),e.jsx(z,{id:"edit-descripcion",value:n.descripcion,onChange:s=>h({...n,descripcion:s.target.value}),placeholder:"Descripción de la TRD",rows:3,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-dependencia",children:"Dependencia"}),e.jsx(l,{id:"edit-dependencia",type:"text",value:n.dependencia,onChange:s=>h({...n,dependencia:s.target.value}),placeholder:"Dependencia responsable"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-fecha-aprobacion",children:"Fecha de Aprobación *"}),e.jsx(l,{id:"edit-fecha-aprobacion",type:"date",value:n.fecha_aprobacion,onChange:s=>h({...n,fecha_aprobacion:s.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-fecha-vigencia-inicio",children:"Fecha Vigencia Inicio *"}),e.jsx(l,{id:"edit-fecha-vigencia-inicio",type:"date",value:n.fecha_vigencia_inicio,onChange:s=>h({...n,fecha_vigencia_inicio:s.target.value}),required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-fecha-vigencia-fin",children:"Fecha Vigencia Fin"}),e.jsx(l,{id:"edit-fecha-vigencia-fin",type:"date",value:n.fecha_vigencia_fin,onChange:s=>h({...n,fecha_vigencia_fin:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-estado",children:"Estado *"}),e.jsxs(A,{value:n.estado,onValueChange:s=>h({...n,estado:s}),children:[e.jsx(O,{children:e.jsx(I,{placeholder:"Seleccionar estado"})}),e.jsx(q,{children:Object.entries(V).filter(([s])=>s!=="vigente").map(([s,i])=>e.jsx(b,{value:s,children:i},s))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-observaciones",children:"Observaciones Generales"}),e.jsx(z,{id:"edit-observaciones",value:n.observaciones_generales,onChange:s=>h({...n,observaciones_generales:s.target.value}),placeholder:"Observaciones adicionales",rows:2})]}),e.jsxs(G,{children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>T(null),children:"Cancelar"}),e.jsx(u,{type:"submit",className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",children:"Actualizar TRD"})]})]})]})}),e.jsx(M,{open:!!t,onOpenChange:()=>Q(null),children:e.jsxs(k,{className:"sm:max-w-[800px] max-h-[80vh] overflow-y-scroll [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:[e.jsxs(L,{children:[e.jsx(B,{className:"text-xl font-semibold text-gray-900",children:"Detalles de TRD"}),e.jsx(P,{className:"text-sm text-gray-600",children:"Información completa de la Tabla de Retención Documental."})]}),t&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-[#2a3d83] mb-3",children:"Información Básica"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{className:"font-medium text-gray-700",children:"Código"}),e.jsx("p",{className:"text-gray-900 bg-white p-2 rounded border",children:t.codigo})]}),e.jsxs("div",{children:[e.jsx(r,{className:"font-medium text-gray-700",children:"Estado"}),e.jsx("div",{className:"mt-1",children:K(t.estado)})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(r,{className:"font-medium text-gray-700",children:"Nombre"}),e.jsx("p",{className:"text-gray-900 bg-white p-2 rounded border",children:t.nombre})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(r,{className:"font-medium text-gray-700",children:"Descripción"}),e.jsx("p",{className:"text-gray-900 bg-white p-3 rounded border min-h-[60px]",children:t.descripcion})]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-[#2a3d83] mb-3",children:"Información Organizacional"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{className:"font-medium text-gray-700",children:"Entidad"}),e.jsx("p",{className:"text-gray-900 bg-white p-2 rounded border",children:t.entidad})]}),e.jsxs("div",{children:[e.jsx(r,{className:"font-medium text-gray-700",children:"Dependencia"}),e.jsx("p",{className:"text-gray-900 bg-white p-2 rounded border",children:t.dependencia||"No especificada"})]})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-[#2a3d83] mb-3",children:"Versión y Vigencia"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{className:"font-medium text-gray-700",children:"Versión"}),e.jsx("p",{className:"text-gray-900 bg-white p-2 rounded border font-semibold",children:t.version})]}),e.jsxs("div",{children:[e.jsx(r,{className:"font-medium text-gray-700",children:"Fecha Aprobación"}),e.jsx("p",{className:"text-gray-900 bg-white p-2 rounded border",children:N(t.fecha_aprobacion)})]}),e.jsxs("div",{children:[e.jsx(r,{className:"font-medium text-gray-700",children:"Estado Vigencia"}),e.jsx("div",{className:"mt-1",children:t.vigente?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Vigente"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"No Vigente"})})]}),e.jsxs("div",{children:[e.jsx(r,{className:"font-medium text-gray-700",children:"Fecha Vigencia Inicio"}),e.jsx("p",{className:"text-gray-900 bg-white p-2 rounded border",children:N(t.fecha_vigencia_inicio)})]}),e.jsxs("div",{children:[e.jsx(r,{className:"font-medium text-gray-700",children:"Fecha Vigencia Fin"}),e.jsx("p",{className:"text-gray-900 bg-white p-2 rounded border",children:t.fecha_vigencia_fin?N(t.fecha_vigencia_fin):"No definida"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"font-medium text-gray-700",children:"Series Documentales"}),e.jsx("p",{className:"text-gray-900 bg-white p-2 rounded border font-semibold",children:t.series_count||0})]})]})]}),t.observaciones_generales&&e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-[#2a3d83] mb-3",children:"Observaciones Generales"}),e.jsx("p",{className:"text-gray-900 bg-white p-3 rounded border whitespace-pre-wrap",children:t.observaciones_generales})]}),e.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-[#2a3d83] mb-3",children:"Información de Sistema"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{className:"font-medium text-gray-700",children:"Identificador Único"}),e.jsx("p",{className:"text-gray-900 bg-white p-2 rounded border font-mono text-sm",children:t.identificador_unico||"No asignado"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"font-medium text-gray-700",children:"Formato de Archivo"}),e.jsx("p",{className:"text-gray-900 bg-white p-2 rounded border",children:t.formato_archivo||"No especificado"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"font-medium text-gray-700",children:"Fecha de Creación"}),e.jsx("p",{className:"text-gray-900 bg-white p-2 rounded border",children:N(t.created_at)})]}),e.jsxs("div",{children:[e.jsx(r,{className:"font-medium text-gray-700",children:"Última Modificación"}),e.jsx("p",{className:"text-gray-900 bg-white p-2 rounded border",children:N(t.updated_at)})]})]})]})]}),e.jsxs(G,{children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>Q(null),children:"Cerrar"}),e.jsx(u,{type:"button",onClick:()=>T(t),className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",children:"Editar TRD"})]})]})})]})]})}export{Ke as default};
