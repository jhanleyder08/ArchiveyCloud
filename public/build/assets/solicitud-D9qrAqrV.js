import{r as C,j as e,H as T,L as g,b as f}from"./app-DOeYTPnE.js";import{A as D}from"./app-layout-CKT_ksyH.js";import{B as r}from"./button-BB3j1qH9.js";import{C as l,a as i,b as c,c as n}from"./card-BEZSel9K.js";import{B as d}from"./badge-BDHWk-Qv.js";import{T as S,a as F,b as x,c as m}from"./tabs-CZodpFxR.js";import{A as L}from"./arrow-left-Cvz8oF6O.js";import{P as _}from"./pen-tool-ChUCFMZj.js";import{U as B}from"./app-sidebar-layout-83PL_wom.js";import{F as u}from"./index-Cl_hWV--.js";import{T as P}from"./triangle-alert-B7e9hRq_.js";import{C as k}from"./user-BiSWd6pJ.js";import{C as A}from"./circle-x-CwiZ-nCX.js";import{C as E}from"./circle-check-big-BQYxJNiA.js";/* empty css            */import"./index-B5i9qy2Y.js";import"./index-BuQaqXjb.js";import"./index-C7D1JV-H.js";import"./x-BHxLkKP3.js";import"./index-sj4qH-fg.js";import"./app-logo-icon-BTiqVlKS.js";import"./label-BvABT9uR.js";function re({solicitud:s,puede_firmar:o,puede_cancelar:h}){const[j,t]=C.useState(!1),p=a=>({pendiente:"bg-yellow-500 text-white",en_proceso:"bg-blue-500 text-white",completada:"bg-green-500 text-white",cancelada:"bg-red-500 text-white",vencida:"bg-red-600 text-white"})[a]||"bg-gray-500 text-white",N=a=>({urgente:"bg-red-500 text-white",alta:"bg-orange-500 text-white",normal:"bg-blue-500 text-white",baja:"bg-gray-500 text-white"})[a]||"bg-gray-500 text-white",b=a=>{switch(a){case"firmado":return e.jsx(E,{className:"w-4 h-4 text-green-600"});case"rechazado":return e.jsx(A,{className:"w-4 h-4 text-red-600"});case"pendiente":return e.jsx(k,{className:"w-4 h-4 text-yellow-600"});default:return e.jsx(P,{className:"w-4 h-4 text-gray-600"})}},v=async()=>{t(!0);try{f.post(route("admin.firmas.solicitud.firmar",s.id))}finally{t(!1)}},y=async()=>{if(confirm("¿Estás seguro de cancelar esta solicitud?")){t(!0);try{f.post(route("admin.firmas.solicitud.cancelar",s.id))}finally{t(!1)}}};return e.jsxs(D,{children:[e.jsx(T,{title:`Solicitud: ${s.titulo}`}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex items-center space-x-3 mb-2",children:e.jsx(g,{href:route("admin.firmas.solicitudes"),children:e.jsxs(r,{variant:"outline",size:"sm",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Volver"]})})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s.titulo}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Solicitud #",s.id]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(d,{className:p(s.estado),children:s.estado}),e.jsx(d,{className:N(s.prioridad),children:s.prioridad})]})]})]}),(o||h)&&e.jsxs("div",{className:"mb-6 flex space-x-3",children:[o&&e.jsxs(r,{onClick:v,disabled:j,children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),"Firmar Documento"]}),h&&e.jsx(r,{variant:"destructive",onClick:y,disabled:j,children:"Cancelar Solicitud"})]}),e.jsxs(S,{defaultValue:"general",className:"space-y-6",children:[e.jsxs(F,{children:[e.jsx(x,{value:"general",children:"General"}),e.jsx(x,{value:"firmantes",children:"Firmantes"}),e.jsx(x,{value:"documento",children:"Documento"})]}),e.jsx(m,{value:"general",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(l,{children:[e.jsx(i,{children:e.jsx(c,{children:"Información General"})}),e.jsxs(n,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Solicitante"}),e.jsx("p",{className:"text-sm",children:s.solicitante.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.solicitante.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Descripción"}),e.jsx("p",{className:"text-sm",children:s.descripcion||"Sin descripción"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Tipo de Flujo"}),e.jsx("p",{className:"text-sm",children:s.tipo_flujo})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Fecha Límite"}),e.jsx("p",{className:"text-sm",children:s.fecha_limite?new Date(s.fecha_limite).toLocaleDateString():"Sin límite"})]})]})]}),e.jsxs(l,{children:[e.jsx(i,{children:e.jsx(c,{children:"Progreso"})}),e.jsx(n,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"Completado"}),e.jsxs("span",{children:[s.progreso.porcentaje,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${s.progreso.porcentaje}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.progreso.completadas}),e.jsx("div",{className:"text-xs text-gray-500",children:"Firmadas"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:s.progreso.pendientes}),e.jsx("div",{className:"text-xs text-gray-500",children:"Pendientes"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.progreso.total}),e.jsx("div",{className:"text-xs text-gray-500",children:"Total"})]})]})]})})]})]})}),e.jsx(m,{value:"firmantes",children:e.jsxs(l,{children:[e.jsx(i,{children:e.jsxs(c,{className:"flex items-center",children:[e.jsx(B,{className:"w-5 h-5 mr-2"}),"Firmantes (",s.firmantes.length,")"]})}),e.jsx(n,{children:e.jsx("div",{className:"space-y-4",children:s.firmantes.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[b(a.estado),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.usuario.name}),e.jsx("div",{className:"text-sm text-gray-500",children:a.usuario.email}),s.tipo_flujo==="secuencial"&&e.jsxs("div",{className:"text-xs text-gray-400",children:["Orden: #",a.orden]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(d,{className:p(a.estado),children:a.estado}),a.fecha_firma&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(a.fecha_firma).toLocaleDateString()})]})]},a.id))})})]})}),e.jsx(m,{value:"documento",children:e.jsxs(l,{children:[e.jsx(i,{children:e.jsxs(c,{className:"flex items-center",children:[e.jsx(u,{className:"w-5 h-5 mr-2"}),"Documento"]})}),e.jsx(n,{children:e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(u,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-blue-900",children:s.documento.nombre}),e.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Tipo: ",s.documento.tipo_documento]})]}),e.jsx(g,{href:route("admin.documentos.show",s.documento.id),children:e.jsx(r,{size:"sm",variant:"outline",children:"Ver Documento"})})]})})})]})})]})]})})]})}export{re as default};
