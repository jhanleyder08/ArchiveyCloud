import{b as X,r as o,j as e,H as J,a as c,L as y}from"./app-BAaRFKCE.js";import{A as K,a as U,T as Q,b as w,c as C,d as S}from"./app-layout-BkZKgO0H.js";import{b as W,B as m}from"./app-logo-icon-CRu_6WDm.js";import{I as x}from"./input-BbBpRMsa.js";import{S as E,a as T,b as A,c as F,d as g}from"./select-COydJ_1f.js";import{D as q,a as Y,b as P,c as L,d as M,e as $,f as I}from"./dialog-Bul2Tegp.js";import{L as l}from"./label-D08h-VMZ.js";import{P as Z}from"./plus-CbTR48RT.js";import{S as ee}from"./square-pen-D0qhqqDk.js";import{U as se,a as ae}from"./user-x-BWpwmP4i.js";import{T as _}from"./trash-2-DgMOpCcU.js";/* empty css            */import"./index-D2AugiGI.js";import"./index-DZ-wJQli.js";import"./index-B8KDMt0s.js";import"./index-D8C8_OyU.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],R=W("Search",re),te=[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Gestión de usuarios",href:"/admin/users"}];function Ne({users:a,stats:j,filters:h}){const{flash:u}=X().props,[D,k]=o.useState(h.search||""),[f,b]=o.useState(null),[B,v]=o.useState(!1),[N,p]=o.useState(null),[r,i]=o.useState({name:"",email:"",role:"user",password:""}),[t,d]=o.useState({name:"",email:"",role:"user"}),G=s=>{s.preventDefault(),c.get("/admin/users",{search:D,status:h.status},{preserveState:!0,replace:!0})},H=s=>{c.patch(`/admin/users/${s.id}/toggle-status`,{},{preserveState:!0})},V=s=>{c.delete(`/admin/users/${s.id}`,{preserveState:!0}),b(null)},O=s=>new Date(s).toLocaleDateString("es-ES"),z=s=>s.active?s.email_verified_at?{text:"Activo",color:"bg-green-100 text-green-800"}:{text:"Pendiente",color:"bg-yellow-100 text-yellow-800"}:{text:"Inactivo",color:"bg-red-100 text-red-800"};return e.jsxs(K,{breadcrumbs:te,children:[e.jsx(J,{title:"Gestión de Usuarios"}),e.jsxs("div",{className:"space-y-6",children:[u?.success&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:u.success}),u?.error&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:u.error}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-6 w-6 text-[#2a3d83]"}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Gestión de Usuarios"})]}),e.jsxs(q,{open:B,onOpenChange:v,children:[e.jsx(Y,{asChild:!0,children:e.jsxs(m,{className:"flex items-center gap-2 px-4 py-2 bg-[#2a3d83] text-white rounded-lg hover:bg-[#1e2b5f] transition-colors",children:[e.jsx(Z,{className:"h-4 w-4"}),"Nuevo Usuario"]})}),e.jsxs(P,{className:"sm:max-w-[425px]",children:[e.jsxs(L,{children:[e.jsx(M,{className:"text-xl font-semibold text-gray-900",children:"Crear Nuevo Usuario"}),e.jsx($,{className:"text-sm text-gray-600",children:"Complete los siguientes datos para crear un nuevo usuario en el sistema."})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),c.post("/admin/users",r,{onSuccess:()=>{v(!1),i({name:"",email:"",role:"user",password:""})}})},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"create-name",children:"Nombre Completo"}),e.jsx(x,{id:"create-name",type:"text",value:r.name,onChange:s=>i({...r,name:s.target.value}),placeholder:"Nombre completo del usuario",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"create-email",children:"Email"}),e.jsx(x,{id:"create-email",type:"email",value:r.email,onChange:s=>i({...r,email:s.target.value}),placeholder:"usuario@ejemplo.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"create-password",children:"Contraseña"}),e.jsx(x,{id:"create-password",type:"password",value:r.password,onChange:s=>i({...r,password:s.target.value}),placeholder:"Contraseña temporal",required:!0,minLength:8})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"create-role",children:"Rol"}),e.jsxs(E,{value:r.role,onValueChange:s=>i({...r,role:s}),children:[e.jsx(T,{children:e.jsx(A,{placeholder:"Selecciona un rol"})}),e.jsxs(F,{children:[e.jsx(g,{value:"user",children:"Usuario"}),e.jsx(g,{value:"admin",children:"Administrador"})]})]})]}),e.jsxs(I,{children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>{v(!1),i({name:"",email:"",role:"user",password:""})},children:"Cancelar"}),e.jsx(m,{type:"submit",className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",children:"Crear Usuario"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Usuarios"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:j.total})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(U,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Usuarios Activos"}),e.jsx("p",{className:"text-2xl font-semibold text-green-600",children:j.active})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx("div",{className:"h-6 w-6 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"h-2 w-2 bg-white rounded-full"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pendientes"}),e.jsx("p",{className:"text-2xl font-semibold text-yellow-600",children:j.pending})]}),e.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:e.jsx("div",{className:"h-6 w-6 bg-yellow-500 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"h-2 w-2 bg-white rounded-full"})})})]})})]}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("form",{onSubmit:G,className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4 w-full sm:w-auto",children:e.jsxs("div",{className:"relative flex-1 sm:w-80",children:[e.jsx(R,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",value:D,onChange:s=>k(s.target.value),placeholder:"Buscar usuarios...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2a3d83] focus:border-[#2a3d83]"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:h.status||"",onChange:s=>c.get("/admin/users",{search:h.search,status:s.target.value||void 0},{preserveState:!0,replace:!0}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2a3d83] focus:border-[#2a3d83]",children:[e.jsx("option",{value:"",children:"Todos los estados"}),e.jsx("option",{value:"active",children:"Activos"}),e.jsx("option",{value:"inactive",children:"Inactivos"}),e.jsx("option",{value:"pending",children:"Pendientes"})]}),e.jsxs("button",{type:"submit",className:"flex items-center gap-2 px-4 py-2 bg-gray-100 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(R,{className:"h-4 w-4"}),"Buscar"]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Usuario"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Email"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Rol"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Estado"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Registro"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:a.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"py-8 px-6 text-center text-gray-500",children:"No se encontraron usuarios."})}):a.data.map(s=>{const n=z(s);return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-8 w-8 bg-[#2a3d83] rounded-full flex items-center justify-center text-white text-sm font-medium",children:s.name.charAt(0).toUpperCase()}),e.jsx("span",{className:"font-medium text-gray-900",children:s.name})]})}),e.jsx("td",{className:"py-4 px-6 text-gray-600",children:s.email}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-[#2a3d83]",children:s.role.name})}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n.color}`,children:n.text})}),e.jsx("td",{className:"py-4 px-6 text-gray-600",children:O(s.created_at)}),e.jsx("td",{className:"py-4 px-6",children:e.jsx(Q,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(w,{children:[e.jsx(C,{asChild:!0,children:e.jsx("button",{onClick:()=>{d({name:s.name,email:s.email,role:typeof s.role=="object"?s.role.name:s.role}),p(s)},className:"p-2 rounded-md text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50 transition-colors",children:e.jsx(ee,{className:"h-4 w-4"})})}),e.jsx(S,{children:e.jsx("p",{children:"Editar usuario"})})]}),e.jsxs(w,{children:[e.jsx(C,{asChild:!0,children:e.jsx("button",{onClick:()=>H(s),className:`p-2 rounded-md transition-colors ${s.active?"text-orange-600 hover:text-orange-800 hover:bg-orange-50":"text-green-600 hover:text-green-800 hover:bg-green-50"}`,children:s.active?e.jsx(se,{className:"h-4 w-4"}):e.jsx(ae,{className:"h-4 w-4"})})}),e.jsx(S,{children:e.jsx("p",{children:s.active?"Desactivar usuario":"Activar usuario"})})]}),e.jsxs(w,{children:[e.jsx(C,{asChild:!0,children:e.jsx("button",{onClick:()=>b(s),className:"p-2 rounded-md text-red-600 hover:text-red-800 hover:bg-red-50 transition-colors",children:e.jsx(_,{className:"h-4 w-4"})})}),e.jsx(S,{children:e.jsx("p",{children:"Eliminar usuario"})})]})]})})})]},s.id)})})]})})}),a.data.length>0&&e.jsxs("div",{className:"flex items-center justify-between bg-white border rounded-lg px-6 py-3",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando ",e.jsx("span",{className:"font-medium",children:a.meta?.from||a.from||0})," a"," ",e.jsx("span",{className:"font-medium",children:a.meta?.to||a.to||0})," de"," ",e.jsx("span",{className:"font-medium",children:a.meta?.total||a.total||0})," usuarios"]}),e.jsx("div",{className:"flex items-center gap-2",children:a.links.map((s,n)=>s.label.includes("Previous")?e.jsx(y,{href:s.url||"#",preserveState:!0,className:`px-3 py-2 border border-gray-300 rounded-md text-sm font-medium ${s.url?"text-gray-700 hover:bg-gray-50":"text-gray-300 cursor-not-allowed"}`,children:"Anterior"},n):s.label.includes("Next")?e.jsx(y,{href:s.url||"#",preserveState:!0,className:`px-3 py-2 border border-gray-300 rounded-md text-sm font-medium ${s.url?"text-gray-700 hover:bg-gray-50":"text-gray-300 cursor-not-allowed"}`,children:"Siguiente"},n):isNaN(Number(s.label))?null:e.jsx(y,{href:s.url||"#",preserveState:!0,className:`px-3 py-2 rounded-md text-sm font-medium ${s.active?"bg-[#2a3d83] text-white":"border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:s.label},n))})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:e.jsx(_,{className:"h-5 w-5 text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Confirmar eliminación"})]}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["¿Estás seguro de que deseas eliminar al usuario"," ",e.jsx("span",{className:"font-medium",children:f.name}),"?"," ","Esta acción no se puede deshacer."]}),e.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[e.jsx("button",{onClick:()=>b(null),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:()=>V(f),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Eliminar"})]})]})}),e.jsx(q,{open:!!N,onOpenChange:s=>!s&&p(null),children:e.jsxs(P,{className:"sm:max-w-[425px]",children:[e.jsxs(L,{children:[e.jsx(M,{className:"text-xl font-semibold text-gray-900",children:"Editar Usuario"}),e.jsx($,{className:"text-sm text-gray-600",children:"Modifique los datos del usuario según sea necesario."})]}),N&&e.jsxs("form",{onSubmit:s=>{s.preventDefault(),c.put(`/admin/users/${N.id}`,t,{onSuccess:()=>{p(null),d({name:"",email:"",role:"user"})}})},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"edit-name",children:"Nombre Completo"}),e.jsx(x,{id:"edit-name",type:"text",value:t.name,onChange:s=>d({...t,name:s.target.value}),placeholder:"Nombre completo del usuario",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"edit-email",children:"Email"}),e.jsx(x,{id:"edit-email",type:"email",value:t.email,onChange:s=>d({...t,email:s.target.value}),placeholder:"usuario@ejemplo.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"edit-role",children:"Rol"}),e.jsxs(E,{value:t.role,onValueChange:s=>d({...t,role:s}),children:[e.jsx(T,{children:e.jsx(A,{placeholder:"Selecciona un rol"})}),e.jsxs(F,{children:[e.jsx(g,{value:"user",children:"Usuario"}),e.jsx(g,{value:"admin",children:"Administrador"})]})]})]}),e.jsxs(I,{children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>{p(null),d({name:"",email:"",role:"user"})},children:"Cancelar"}),e.jsx(m,{type:"submit",className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",children:"Guardar Cambios"})]})]})]})})]})]})}export{Ne as default};
