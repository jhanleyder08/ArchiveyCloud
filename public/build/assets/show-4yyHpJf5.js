import{r as p,u as w,j as s,H as G,L as x}from"./app-JwgH7fJx.js";import{A as J}from"./app-layout-D20pifTo.js";import{B as t}from"./button-Cjj82jEq.js";import{C as i,a as c,b as l,c as r,d as K}from"./card-7tojpRmh.js";import{B as n}from"./badge-Cv1Y_W6j.js";import{T as Q,a as W,b as o,c as m}from"./tabs-BW5ikNay.js";import{D as C,g as D,S as y,a as _,b as E,c as S,d as T,e as A,j as k}from"./app-sidebar-layout-Br3BnsV7.js";import{A as L,a as F}from"./alert-DUmOatM4.js";import{S as I,T as Y}from"./triangle-alert-CPuhcq_l.js";import{S as Z}from"./square-pen-CLcPaQXg.js";import{D as ss}from"./users-BEJv0c5Y.js";import{T as es}from"./trash-2-QmR2AQnL.js";import{I as g}from"./info-Bnis2PUd.js";import{C as as}from"./calendar-Dc8j1jQU.js";import{M as is}from"./map-pin-CQPkf_p9.js";import{U as rs}from"./user-Rhg3RUSJ.js";import{F as z}from"./Combination-knBqfxod.js";import{T as cs}from"./tag-jbrulwSJ.js";import{E as ls}from"./eye-rfeJsmlC.js";import{C as q}from"./folder-rl7uLIZU.js";import{C as ts}from"./circle-x-aFJ05WwE.js";import{C as ns}from"./circle-check-big-CR0ClzXy.js";/* empty css            */import"./index-BzEbrGzy.js";import"./index-BCuVt-Cl.js";import"./index-DU0AnDMx.js";import"./x-D_uhydLd.js";import"./index-BQRiyf7_.js";import"./app-logo-icon-4Xbnxovr.js";import"./input-DCwrhWX4.js";import"./label-0AfHNJVG.js";import"./search-CoxLWjz_.js";const B={abierto:"bg-green-100 text-green-800",tramite:"bg-blue-100 text-blue-800",revision:"bg-yellow-100 text-yellow-800",cerrado:"bg-gray-100 text-gray-800",archivado:"bg-purple-100 text-purple-800",eliminado:"bg-red-100 text-red-800"},H={abierto:s.jsx(ns,{className:"h-4 w-4"}),tramite:s.jsx(q,{className:"h-4 w-4"}),revision:s.jsx(Y,{className:"h-4 w-4"}),cerrado:s.jsx(k,{className:"h-4 w-4"}),archivado:s.jsx(k,{className:"h-4 w-4"}),eliminado:s.jsx(ts,{className:"h-4 w-4"})},ds={publico:"bg-green-100 text-green-800",restringido:"bg-yellow-100 text-yellow-800",confidencial:"bg-red-100 text-red-800",secreto:"bg-red-200 text-red-900"};function Us({expediente:e,can:d}){const[O,h]=p.useState(!1),[P,j]=p.useState(!1),[u,N]=p.useState(""),{delete:R,processing:v}=w(),{post:U,processing:b}=w(),V=()=>{R(route("admin.expedientes.destroy",e.id),{onSuccess:()=>h(!1)})},$=()=>{U(route("admin.expedientes.cambiar-estado",e.id),{data:{estado:u},onSuccess:()=>{j(!1),N("")}})},M=()=>{window.open(route("admin.expedientes.exportar-directorio",e.id))},X=()=>{window.open(route("admin.expedientes.verificar-integridad",e.id))};return s.jsxs(J,{children:[s.jsx(G,{title:`Expediente: ${e.nombre}`}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(x,{href:route("admin.expedientes.index"),className:"text-sm text-muted-foreground hover:text-foreground",children:"Expedientes"}),s.jsx("span",{className:"text-muted-foreground",children:"/"}),s.jsx("span",{className:"font-medium",children:e.codigo})]}),s.jsx("h1",{className:"text-2xl font-bold mt-1",children:e.nombre}),s.jsx("p",{className:"text-muted-foreground",children:e.descripcion})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(n,{variant:"secondary",className:`${B[e.estado]} flex items-center space-x-1`,children:[H[e.estado],s.jsx("span",{className:"capitalize",children:e.estado})]}),s.jsxs(n,{variant:"outline",className:`${ds[e.nivel_acceso]} flex items-center space-x-1`,children:[s.jsx(I,{className:"h-3 w-3"}),s.jsx("span",{className:"capitalize",children:e.nivel_acceso})]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.edit&&s.jsx(t,{asChild:!0,children:s.jsxs(x,{href:route("admin.expedientes.edit",e.id),children:[s.jsx(Z,{className:"h-4 w-4 mr-2"}),"Editar"]})}),d.cambiar_estado&&s.jsxs(C,{open:P,onOpenChange:j,children:[s.jsx(D,{asChild:!0,children:s.jsxs(t,{variant:"outline",children:[s.jsx(y,{className:"h-4 w-4 mr-2"}),"Cambiar Estado"]})}),s.jsxs(_,{children:[s.jsxs(E,{children:[s.jsx(S,{children:"Cambiar Estado del Expediente"}),s.jsxs(T,{children:['Selecciona el nuevo estado para el expediente "',e.nombre,'".']})]}),s.jsx("div",{className:"space-y-4",children:s.jsx("div",{className:"grid grid-cols-2 gap-2",children:["abierto","tramite","revision","cerrado","archivado"].map(a=>s.jsxs(t,{variant:u===a?"default":"outline",onClick:()=>N(a),className:"justify-start",children:[H[a],s.jsx("span",{className:"ml-2 capitalize",children:a})]},a))})}),s.jsxs(A,{children:[s.jsx(t,{variant:"outline",onClick:()=>j(!1),children:"Cancelar"}),s.jsx(t,{onClick:$,disabled:!u||b,children:b?"Cambiando...":"Cambiar Estado"})]})]})]}),d.exportar&&s.jsxs(t,{variant:"outline",onClick:M,children:[s.jsx(ss,{className:"h-4 w-4 mr-2"}),"Exportar Directorio"]}),d.verificar_integridad&&s.jsxs(t,{variant:"outline",onClick:X,children:[s.jsx(I,{className:"h-4 w-4 mr-2"}),"Verificar Integridad"]}),d.delete&&s.jsxs(C,{open:O,onOpenChange:h,children:[s.jsx(D,{asChild:!0,children:s.jsxs(t,{variant:"destructive",children:[s.jsx(es,{className:"h-4 w-4 mr-2"}),"Eliminar"]})}),s.jsxs(_,{children:[s.jsxs(E,{children:[s.jsx(S,{children:"¿Eliminar expediente?"}),s.jsxs(T,{children:['Esta acción no se puede deshacer. Se eliminará permanentemente el expediente "',e.nombre,'" y todos sus documentos asociados.']})]}),s.jsxs(A,{children:[s.jsx(t,{variant:"outline",onClick:()=>h(!1),children:"Cancelar"}),s.jsx(t,{variant:"destructive",onClick:V,disabled:v,children:v?"Eliminando...":"Eliminar"})]})]})]})]}),s.jsxs(Q,{defaultValue:"informacion",className:"space-y-4",children:[s.jsxs(W,{className:"grid w-full grid-cols-5",children:[s.jsx(o,{value:"informacion",children:"Información"}),s.jsxs(o,{value:"documentos",children:["Documentos (",e.estadisticas.total_documentos,")"]}),s.jsx(o,{value:"configuracion",children:"Configuración"}),s.jsx(o,{value:"actividad",children:"Actividad"}),s.jsx(o,{value:"estadisticas",children:"Estadísticas"})]}),s.jsx(m,{value:"informacion",className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(i,{children:[s.jsx(c,{children:s.jsxs(l,{className:"flex items-center space-x-2",children:[s.jsx(g,{className:"h-5 w-5"}),s.jsx("span",{children:"Información Básica"})]})}),s.jsxs(r,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Código"}),s.jsx("p",{className:"font-mono",children:e.codigo})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Nombre"}),s.jsx("p",{children:e.nombre})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Descripción"}),s.jsx("p",{children:e.descripcion})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Estado"}),s.jsx(n,{className:`${B[e.estado]} mt-1`,children:e.estado})]})]})]}),s.jsxs(i,{children:[s.jsx(c,{children:s.jsxs(l,{className:"flex items-center space-x-2",children:[s.jsx(as,{className:"h-5 w-5"}),s.jsx("span",{children:"Fechas"})]})}),s.jsxs(r,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Fecha de Apertura"}),s.jsx("p",{children:new Date(e.fecha_apertura).toLocaleDateString()})]}),e.fecha_cierre&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Fecha de Cierre"}),s.jsx("p",{children:new Date(e.fecha_cierre).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Creado"}),s.jsx("p",{children:new Date(e.created_at).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Actualizado"}),s.jsx("p",{children:new Date(e.updated_at).toLocaleDateString()})]})]})]}),s.jsxs(i,{children:[s.jsx(c,{children:s.jsxs(l,{className:"flex items-center space-x-2",children:[s.jsx(is,{className:"h-5 w-5"}),s.jsx("span",{children:"Ubicación"})]})}),s.jsxs(r,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Ubicación Física"}),s.jsx("p",{children:e.ubicacion_fisica})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Ubicación Digital"}),s.jsx("p",{className:"font-mono text-sm break-all",children:e.ubicacion_digital})]})]})]}),s.jsxs(i,{children:[s.jsx(c,{children:s.jsxs(l,{className:"flex items-center space-x-2",children:[s.jsx(rs,{className:"h-5 w-5"}),s.jsx("span",{children:"Responsabilidad"})]})}),s.jsxs(r,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Responsable"}),s.jsx("p",{children:e.responsable})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Departamento"}),s.jsx("p",{children:e.departamento})]})]})]}),s.jsxs(i,{className:"md:col-span-2",children:[s.jsx(c,{children:s.jsxs(l,{className:"flex items-center space-x-2",children:[s.jsx(z,{className:"h-5 w-5"}),s.jsx("span",{children:"Clasificación Archivística"})]})}),s.jsx(r,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Serie"}),s.jsx("p",{children:e.clasificacion_serie})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Subserie"}),s.jsx("p",{children:e.clasificacion_subserie})]})]})})]}),s.jsxs(i,{className:"md:col-span-2",children:[s.jsx(c,{children:s.jsxs(l,{className:"flex items-center space-x-2",children:[s.jsx(cs,{className:"h-5 w-5"}),s.jsx("span",{children:"Palabras Clave"})]})}),s.jsx(r,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:e.palabras_clave.map((a,f)=>s.jsx(n,{variant:"secondary",children:a},f))})})]}),e.observaciones&&s.jsxs(i,{className:"md:col-span-2",children:[s.jsx(c,{children:s.jsx(l,{children:"Observaciones"})}),s.jsx(r,{children:s.jsx("p",{className:"text-sm",children:e.observaciones})})]})]})}),s.jsxs(m,{value:"documentos",className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-medium",children:["Documentos (",e.estadisticas.total_documentos,")"]}),s.jsx(t,{asChild:!0,children:s.jsx(x,{href:route("admin.documentos.create",{expediente:e.id}),children:"Agregar Documento"})})]}),e.documentos&&e.documentos.length>0?s.jsx("div",{className:"grid gap-4",children:e.documentos.map(a=>s.jsx(i,{children:s.jsx(r,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(z,{className:"h-8 w-8 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:a.nombre}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[s.jsxs("span",{children:["Tipo: ",a.tipo]}),s.jsxs("span",{children:["Tamaño: ",a.tamaño]}),s.jsxs("span",{children:["Versión: ",a.version]}),s.jsx("span",{children:new Date(a.fecha_creacion).toLocaleDateString()})]})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx(t,{variant:"outline",size:"sm",asChild:!0,children:s.jsxs(x,{href:route("admin.documentos.show",a.id),children:[s.jsx(ls,{className:"h-4 w-4 mr-1"}),"Ver"]})})})]})})},a.id))}):s.jsxs(L,{children:[s.jsx(g,{className:"h-4 w-4"}),s.jsx(F,{children:"No hay documentos asociados a este expediente."})]})]}),s.jsx(m,{value:"configuracion",className:"space-y-4",children:s.jsxs(i,{children:[s.jsx(c,{children:s.jsxs(l,{className:"flex items-center space-x-2",children:[s.jsx(y,{className:"h-5 w-5"}),s.jsx("span",{children:"Configuración del Expediente"})]})}),s.jsx(r,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Documentos Electrónicos"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Permite agregar documentos digitales"})]}),s.jsx(n,{variant:e.configuracion.permite_documentos_electronicos?"default":"secondary",children:e.configuracion.permite_documentos_electronicos?"Habilitado":"Deshabilitado"})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Firma Digital"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Requiere firma digital para documentos"})]}),s.jsx(n,{variant:e.configuracion.requiere_firma_digital?"default":"secondary",children:e.configuracion.requiere_firma_digital?"Requerido":"Opcional"})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Control de Versiones"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Mantiene historial de versiones"})]}),s.jsx(n,{variant:e.configuracion.control_versiones?"default":"secondary",children:e.configuracion.control_versiones?"Activo":"Inactivo"})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Notificaciones"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Envía notificaciones automáticas"})]}),s.jsx(n,{variant:e.configuracion.notificaciones_automaticas?"default":"secondary",children:e.configuracion.notificaciones_automaticas?"Activas":"Inactivas"})]})]})})]})}),s.jsx(m,{value:"actividad",className:"space-y-4",children:s.jsxs(i,{children:[s.jsx(c,{children:s.jsxs(l,{className:"flex items-center space-x-2",children:[s.jsx(q,{className:"h-5 w-5"}),s.jsx("span",{children:"Historial de Actividad"})]})}),s.jsx(r,{children:e.actividades&&e.actividades.length>0?s.jsx("div",{className:"space-y-4",children:e.actividades.map(a=>s.jsxs("div",{className:"flex items-start space-x-3 pb-3 border-b last:border-b-0",children:[s.jsx("div",{className:"flex-shrink-0 w-2 h-2 bg-primary rounded-full mt-2"}),s.jsxs("div",{className:"flex-grow",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"font-medium",children:a.accion}),s.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(a.fecha).toLocaleDateString()})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Por: ",a.usuario]}),a.detalles&&s.jsx("p",{className:"text-sm mt-1",children:a.detalles})]})]},a.id))}):s.jsxs(L,{children:[s.jsx(g,{className:"h-4 w-4"}),s.jsx(F,{children:"No hay actividad registrada para este expediente."})]})})]})}),s.jsxs(m,{value:"estadisticas",className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(i,{children:[s.jsx(c,{className:"pb-2",children:s.jsx(l,{className:"text-sm font-medium",children:"Total Documentos"})}),s.jsxs(r,{children:[s.jsx("div",{className:"text-2xl font-bold",children:e.estadisticas.total_documentos}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"documentos en el expediente"})]})]}),s.jsxs(i,{children:[s.jsx(c,{className:"pb-2",children:s.jsx(l,{className:"text-sm font-medium",children:"Tamaño Total"})}),s.jsxs(r,{children:[s.jsx("div",{className:"text-2xl font-bold",children:e.estadisticas.tamaño_total}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"espacio utilizado"})]})]}),s.jsxs(i,{children:[s.jsx(c,{className:"pb-2",children:s.jsx(l,{className:"text-sm font-medium",children:"Última Actividad"})}),s.jsxs(r,{children:[s.jsx("div",{className:"text-sm font-bold",children:new Date(e.estadisticas.ultima_actividad).toLocaleDateString()}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"última modificación"})]})]})]}),s.jsxs(i,{children:[s.jsxs(c,{children:[s.jsx(l,{children:"Documentos por Tipo"}),s.jsx(K,{children:"Distribución de documentos según su tipo"})]}),s.jsx(r,{children:s.jsx("div",{className:"space-y-3",children:Object.entries(e.estadisticas.documentos_por_tipo).map(([a,f])=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"capitalize",children:a}),s.jsx(n,{variant:"secondary",children:f})]},a))})})]})]})]})]})]})}export{Us as default};
