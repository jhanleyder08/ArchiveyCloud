import{j as e,H as z,L as $}from"./app-DyjZO5jj.js";import{A as L}from"./app-layout-CIaSKpEX.js";import{B as K}from"./button-BDpOSzem.js";import{C as i,c as t,a as c,b as r,d as n}from"./card-HvsWIqdm.js";import{F as O,B as d}from"./Combination-DJyQ0pUC.js";import{A as R,h as x,i as U}from"./app-sidebar-layout-C_GZcBzp.js";import{T as y,U as k}from"./users-9LFUlpN0.js";import{S as v}from"./star-DVdgatXf.js";import{H as P}from"./hard-drive-D0YyToFu.js";import{T as b,S as H}from"./triangle-alert-Py5ZhKdg.js";import{R as o,T as m}from"./CategoricalChart-Ct6dl_Hf.js";import{P as w,a as _}from"./PieChart-DjkI41b3.js";import{C as h}from"./tooltipContext-BU_hTYrg.js";import{B as C,a as B}from"./BarChart-D3merEMa.js";import{C as j,X as p,Y as N}from"./CartesianChart-AXJLme0E.js";import{A as I,a as V}from"./AreaChart-dom5m14m.js";import{C as X}from"./folder-c0_WrsOz.js";/* empty css            */import"./index-BjmZJ9zr.js";import"./index-BOu6Kk11.js";import"./index-CJU42caY.js";import"./x-BXa13Oug.js";import"./app-logo-icon-DvefdaCc.js";import"./input-DWIA3fpi.js";import"./label-CYKfv9Rz.js";import"./user-CRHhgD-B.js";import"./mail-r9sbyL42.js";import"./search-DVA9gPxa.js";import"./BrandingProvider-BoXsXA66.js";import"./ActivePoints-k1_MZRyz.js";const F=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316"];function be({estadisticas:l}){const f=Object.entries(l.por_tipo).map(([s,a])=>({name:s==="expediente"?"Expedientes":"Documentos",value:a,icon:s==="expediente"?"folder":"file"})),E=Object.entries(l.por_serie).slice(0,10).map(([s,a])=>({name:s.length>20?s.substring(0,20)+"...":s,total:a})),g=Object.entries(l.por_estado_conservacion).map(([s,a])=>({name:s.charAt(0).toUpperCase()+s.slice(1),value:a,estado:s})),u=Object.entries(l.por_nivel_acceso).map(([s,a])=>({name:s.charAt(0).toUpperCase()+s.slice(1),value:a,nivel:s})),A=l.indices_por_mes.map(s=>({mes:`${s.mes}/${s.año}`,total:s.total,fecha:new Date(s.año,s.mes-1)})).sort((s,a)=>s.fecha.getTime()-a.fecha.getTime()),D=s=>({excelente:"#10B981",bueno:"#3B82F6",regular:"#F59E0B",malo:"#F97316",critico:"#EF4444"})[s]||"#6B7280",T=s=>({publico:"#10B981",restringido:"#F59E0B",confidencial:"#F97316",secreto:"#EF4444"})[s]||"#6B7280",S=()=>{const{ultima_semana:s,ultimo_mes:a}=l.crecimiento_indices;return a===0?0:((s*4-a)/a*100).toFixed(1)};return e.jsxs(L,{children:[e.jsx(z,{title:"Estadísticas - Índices Electrónicos"}),e.jsxs("div",{className:"container mx-auto py-6",children:[e.jsx("div",{className:"flex justify-between items-start mb-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx($,{href:"/admin/indices",children:e.jsxs(K,{variant:"outline",size:"sm",children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Volver"]})}),e.jsx(x,{className:"w-8 h-8 text-indigo-600"})]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Estadísticas de Índices Electrónicos"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Dashboard completo con métricas y análisis de indexación"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsx(i,{children:e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(x,{className:"h-8 w-8 text-indigo-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Índices"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.total_indices.toLocaleString()})]})]})})}),e.jsx(i,{children:e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(y,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Crecimiento Semanal"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.crecimiento_indices.ultima_semana}),e.jsxs("p",{className:"text-xs text-green-600",children:["+",S(),"%"]})]})]})})}),e.jsx(i,{children:e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(v,{className:"h-8 w-8 text-yellow-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Documentos Vitales"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.documentos_vitales.toLocaleString()}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(l.documentos_vitales/l.total_indices*100).toFixed(1),"% del total"]})]})]})})}),e.jsx(i,{children:e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tamaño Total"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.tamaño_total})]})]})})})]}),l.indices_desactualizados>0&&e.jsx(i,{className:"mb-6 border-yellow-200 bg-yellow-50",children:e.jsx(t,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(b,{className:"h-5 w-5 text-yellow-600 mr-3"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-yellow-800 font-medium",children:[l.indices_desactualizados," índices necesitan actualización"]}),e.jsx("p",{className:"text-yellow-700 text-sm",children:"Estos índices no han sido actualizados en más de 6 meses."})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs(i,{children:[e.jsxs(c,{children:[e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5"}),"Distribución por Tipo"]}),e.jsx(n,{children:"Índices de expedientes vs documentos"})]}),e.jsx(t,{children:e.jsx(o,{width:"100%",height:300,children:e.jsxs(w,{children:[e.jsx(_,{data:f,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:a})=>`${s} ${(a*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:f.map((s,a)=>e.jsx(h,{fill:F[a%F.length]},`cell-${a}`))}),e.jsx(m,{})]})})})]}),e.jsxs(i,{children:[e.jsxs(c,{children:[e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5"}),"Estado de Conservación"]}),e.jsx(n,{children:"Distribución por estado de conservación"})]}),e.jsx(t,{children:e.jsx(o,{width:"100%",height:300,children:e.jsxs(C,{data:g,children:[e.jsx(j,{strokeDasharray:"3 3"}),e.jsx(p,{dataKey:"name"}),e.jsx(N,{}),e.jsx(m,{}),e.jsx(B,{dataKey:"value",fill:"#3B82F6",children:g.map((s,a)=>e.jsx(h,{fill:D(s.estado)},`cell-estado-${a}`))})]})})})]})]}),e.jsxs(i,{className:"mb-8",children:[e.jsxs(c,{children:[e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5"}),"Crecimiento de Índices (Últimos 12 meses)"]}),e.jsx(n,{children:"Evolución temporal de la indexación"})]}),e.jsx(t,{children:e.jsx(o,{width:"100%",height:400,children:e.jsxs(I,{data:A,children:[e.jsx(j,{strokeDasharray:"3 3"}),e.jsx(p,{dataKey:"mes"}),e.jsx(N,{}),e.jsx(m,{}),e.jsx(V,{type:"monotone",dataKey:"total",stroke:"#3B82F6",fill:"#3B82F6",fillOpacity:.3})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs(i,{children:[e.jsxs(c,{children:[e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5"}),"Top 10 Series Documentales"]}),e.jsx(n,{children:"Series con mayor cantidad de índices"})]}),e.jsx(t,{children:e.jsx(o,{width:"100%",height:400,children:e.jsxs(C,{data:E,layout:"horizontal",children:[e.jsx(j,{strokeDasharray:"3 3"}),e.jsx(p,{type:"number"}),e.jsx(N,{dataKey:"name",type:"category",width:100}),e.jsx(m,{}),e.jsx(B,{dataKey:"total",fill:"#10B981"})]})})})]}),e.jsxs(i,{children:[e.jsxs(c,{children:[e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-5 h-5"}),"Distribución por Nivel de Acceso"]}),e.jsx(n,{children:"Clasificación de seguridad de documentos"})]}),e.jsx(t,{children:e.jsx(o,{width:"100%",height:300,children:e.jsxs(w,{children:[e.jsx(_,{data:u,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:a})=>`${s} ${(a*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:u.map((s,a)=>e.jsx(h,{fill:T(s.nivel)},`cell-${a}`))}),e.jsx(m,{})]})})})]})]}),e.jsxs(i,{className:"mb-8",children:[e.jsxs(c,{children:[e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-5 h-5"}),"Top Usuarios Indexadores"]}),e.jsx(n,{children:"Usuarios más activos en la indexación"})]}),e.jsx(t,{children:e.jsx("div",{className:"space-y-4",children:l.top_usuarios_indexadores.slice(0,10).map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ${a===0?"bg-yellow-500":a===1?"bg-gray-400":a===2?"bg-amber-600":"bg-blue-500"}`,children:a+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.usuario_indexacion.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.total," índice",s.total!==1?"s":""," creado",s.total!==1?"s":""]})]})]}),e.jsxs(d,{variant:"outline",children:[(s.total/l.total_indices*100).toFixed(1),"%"]})]},s.usuario_indexacion_id))})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5"}),"Actividad Reciente"]})}),e.jsx(t,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Última semana"}),e.jsx("span",{className:"font-medium",children:l.crecimiento_indices.ultima_semana})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Último mes"}),e.jsx("span",{className:"font-medium",children:l.crecimiento_indices.ultimo_mes})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Último año"}),e.jsx("span",{className:"font-medium",children:l.crecimiento_indices.ultimo_año})]})]})})]}),e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5"}),"Información Especial"]})}),e.jsx(t,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Documentos vitales"}),e.jsx(d,{className:"bg-yellow-100 text-yellow-800",children:l.documentos_vitales})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Valor histórico"}),e.jsx(d,{className:"bg-purple-100 text-purple-800",children:l.documentos_historicos})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"% Especiales"}),e.jsxs("span",{className:"font-medium",children:[((l.documentos_vitales+l.documentos_historicos)/l.total_indices*100).toFixed(1),"%"]})]})]})})]}),e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-5 h-5"}),"Mantenimiento"]})}),e.jsx(t,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Índices recientes"}),e.jsx(d,{className:"bg-green-100 text-green-800",children:l.indices_recientes})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Desactualizados"}),e.jsx(d,{className:"bg-yellow-100 text-yellow-800",children:l.indices_desactualizados})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"% Actualizados"}),e.jsxs("span",{className:"font-medium",children:[((l.total_indices-l.indices_desactualizados)/l.total_indices*100).toFixed(1),"%"]})]})]})})]})]})]})]})}export{be as default};
