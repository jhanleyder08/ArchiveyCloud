import{r as U,j as e,H as A,L as o,b as d}from"./app-DOeYTPnE.js";import{A as k}from"./app-sidebar-layout-83PL_wom.js";import{B as n}from"./button-BB3j1qH9.js";import{C as g,a as f,b as v,c as N,d as M}from"./card-BEZSel9K.js";import{I as z}from"./index-C7D1JV-H.js";import{S as b,a as y,b as w,c as T,d as c}from"./select-D2zOlv3c.js";import{B as m}from"./badge-BDHWk-Qv.js";import{T as O,a as R,b as C,c as l,d as q,e as i}from"./table-TW3yL78Z.js";import{T as G,a as X,b as x,c as $}from"./tabs-CZodpFxR.js";import{P as S}from"./plus-Dfkec5yu.js";import{F as J}from"./filter-kze0nvip.js";import{S as K,F}from"./index-Cl_hWV--.js";import{U as Q,C as B}from"./user-BiSWd6pJ.js";import{E as W}from"./eye-I-PfQi00.js";import{C as Y}from"./circle-x-CwiZ-nCX.js";import{T as Z}from"./triangle-alert-B7e9hRq_.js";import{C as ee}from"./circle-check-big-BQYxJNiA.js";/* empty css            */import"./index-B5i9qy2Y.js";import"./index-BuQaqXjb.js";import"./x-BHxLkKP3.js";import"./index-sj4qH-fg.js";import"./app-logo-icon-BTiqVlKS.js";import"./label-BvABT9uR.js";import"./index-pqvegj4w.js";import"./check-C4IDWgVr.js";function Fe({solicitudes:a,filtros:t,estados:h}){const[j,_]=U.useState(t.vista||"general"),V=s=>{switch(s){case"completada":return"secondary";case"en_proceso":return"default";case"pendiente":return"outline";case"cancelada":case"vencida":return"destructive";default:return"outline"}},E=s=>{switch(s){case"urgente":return"text-red-600 bg-red-100";case"alta":return"text-orange-600 bg-orange-100";case"normal":return"text-blue-600 bg-blue-100";case"baja":return"text-gray-600 bg-gray-100";default:return"text-gray-600 bg-gray-100"}},L=s=>{switch(s){case"completada":return e.jsx(ee,{className:"h-4 w-4 text-green-500"});case"en_proceso":return e.jsx(B,{className:"h-4 w-4 text-blue-500"});case"pendiente":return e.jsx(Z,{className:"h-4 w-4 text-yellow-500"});case"cancelada":case"vencida":return e.jsx(Y,{className:"h-4 w-4 text-red-500"});default:return e.jsx(B,{className:"h-4 w-4 text-gray-500"})}},u=(s,r)=>{const I=route("admin.firmas.solicitudes",{...t,[s]:r==="all"?"":r,page:1});d.get(I)},P=s=>{const r=route("admin.firmas.solicitudes",{...t,buscar:s,page:1});d.get(r)},D=s=>{_(s);const r=route("admin.firmas.solicitudes",{...t,vista:s,page:1});d.get(r)},H=s=>new Date(s).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),p=s=>new Date(s)<new Date;return e.jsxs(k,{children:[e.jsx(A,{title:"Solicitudes de Firma"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Solicitudes de Firma"}),e.jsx("p",{className:"text-muted-foreground",children:"Gestiona las solicitudes de firma digital de documentos"})]}),e.jsx(o,{href:route("admin.firmas.solicitudes.crear"),children:e.jsxs(n,{children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Nueva Solicitud"]})})]}),e.jsxs(G,{value:j,onValueChange:D,children:[e.jsxs(X,{children:[e.jsx(x,{value:"general",children:"Todas"}),e.jsx(x,{value:"pendientes",children:"Pendientes de Firmar"}),e.jsx(x,{value:"mis_solicitudes",children:"Mis Solicitudes"})]}),e.jsxs($,{value:j,className:"space-y-4",children:[e.jsxs(g,{children:[e.jsx(f,{children:e.jsxs(v,{className:"flex items-center",children:[e.jsx(J,{className:"h-5 w-5 mr-2"}),"Filtros"]})}),e.jsx(N,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Búsqueda"}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(z,{placeholder:"Buscar solicitudes...",defaultValue:t.buscar,className:"pl-9",onChange:s=>{clearTimeout(window.searchTimeout),window.searchTimeout=setTimeout(()=>{P(s.target.value)},500)}})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Estado"}),e.jsxs(b,{value:t.estado||"all",onValueChange:s=>u("estado",s),children:[e.jsx(y,{children:e.jsx(w,{placeholder:"Todos los estados"})}),e.jsxs(T,{children:[e.jsx(c,{value:"all",children:"Todos los estados"}),Object.entries(h).map(([s,r])=>e.jsx(c,{value:s,children:r},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Prioridad"}),e.jsxs(b,{value:t.prioridad||"all",onValueChange:s=>u("prioridad",s),children:[e.jsx(y,{children:e.jsx(w,{placeholder:"Todas las prioridades"})}),e.jsxs(T,{children:[e.jsx(c,{value:"all",children:"Todas las prioridades"}),e.jsx(c,{value:"urgente",children:"Urgente"}),e.jsx(c,{value:"alta",children:"Alta"}),e.jsx(c,{value:"normal",children:"Normal"}),e.jsx(c,{value:"baja",children:"Baja"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(n,{variant:"outline",onClick:()=>window.location.reload(),children:"Limpiar Filtros"})})]})})]}),e.jsxs(g,{children:[e.jsxs(f,{children:[e.jsxs(v,{children:["Solicitudes (",a.meta?.total||0,")"]}),e.jsxs(M,{children:["Mostrando ",a.meta?.from||0," a ",a.meta?.to||0," de ",a.meta?.total||0," solicitudes"]})]}),e.jsxs(N,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(O,{children:[e.jsx(R,{children:e.jsxs(C,{children:[e.jsx(l,{children:"Estado"}),e.jsx(l,{children:"Título"}),e.jsx(l,{children:"Documento"}),e.jsx(l,{children:"Solicitante"}),e.jsx(l,{children:"Prioridad"}),e.jsx(l,{children:"Progreso"}),e.jsx(l,{children:"Fecha Límite"}),e.jsx(l,{children:"Acciones"})]})}),e.jsx(q,{children:a.data.map(s=>e.jsxs(C,{children:[e.jsx(i,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[L(s.estado),e.jsx(m,{variant:V(s.estado),children:h[s.estado]||s.estado})]})}),e.jsx(i,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.titulo}),s.descripcion&&e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:s.descripcion})]})}),e.jsx(i,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium",children:s.documento.nombre})]})}),e.jsx(i,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{children:s.solicitante.name})]})}),e.jsx(i,{children:e.jsx(m,{className:E(s.prioridad),children:s.prioridad})}),e.jsx(i,{children:s.progreso&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-sm",children:[s.progreso.completadas,"/",s.progreso.total," firmantes"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${s.progreso.porcentaje}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.progreso.porcentaje,"%"]})]})}),e.jsx(i,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:p(s.fecha_limite)?"text-red-600 font-medium":"",children:H(s.fecha_limite)}),p(s.fecha_limite)&&e.jsx(m,{variant:"destructive",className:"text-xs",children:"Vencida"})]})}),e.jsx(i,{children:e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(o,{href:route("admin.firmas.solicitud",s.id),children:e.jsxs(n,{variant:"outline",size:"sm",children:[e.jsx(W,{className:"h-4 w-4 mr-1"}),"Ver"]})})})})]},s.id))})]})}),a.data.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(F,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay solicitudes"}),e.jsx("p",{className:"text-gray-600 mb-4",children:Object.keys(t).length>0?"No se encontraron solicitudes con los filtros aplicados":"No hay solicitudes de firma registradas"}),e.jsx(o,{href:route("admin.firmas.solicitudes.crear"),children:e.jsxs(n,{children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Crear Primera Solicitud"]})})]}),(a.meta?.last_page||0)>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Mostrando ",a.meta?.from||0," a ",a.meta?.to||0," de ",a.meta?.total||0," resultados"]}),e.jsx("div",{className:"flex space-x-1",children:(a.links||[]).map((s,r)=>e.jsx(n,{variant:s.active?"default":"outline",size:"sm",onClick:()=>s.url&&d.get(s.url),disabled:!s.url,dangerouslySetInnerHTML:{__html:s.label}},r))})]})]})]})]})]})]})]})}export{Fe as default};
