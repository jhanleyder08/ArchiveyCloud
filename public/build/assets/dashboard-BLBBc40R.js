import{r as N,j as e,H as M,L as o}from"./app-DOeYTPnE.js";import{A as R,f as E,j as b,e as k,h as B}from"./app-sidebar-layout-83PL_wom.js";import{B as x}from"./button-BB3j1qH9.js";import{C as t,a as r,b as i,c as l,d as c}from"./card-BEZSel9K.js";import{B as v}from"./badge-BDHWk-Qv.js";import{P as O}from"./progress-Dx-cP85h.js";import{A as V}from"./activity-BLJcHynw.js";import{P as w}from"./plus-Dfkec5yu.js";import{P as j}from"./play-DLz3MKrv.js";import{C as A}from"./circle-check-big-BQYxJNiA.js";import{R as y,T as C}from"./CategoricalChart-Dajg-Im1.js";import{P as z,a as G}from"./PieChart-723s3Ajo.js";import{C as H}from"./tooltipContext-B4UnQMjc.js";import{A as K,a as X}from"./AreaChart-WWHRVCMu.js";import{C as U,X as Y,Y as J}from"./CartesianChart-D-tVo_OX.js";import{C as D}from"./user-BiSWd6pJ.js";import{T as q}from"./triangle-alert-B7e9hRq_.js";import{C as Q}from"./circle-x-CwiZ-nCX.js";import{F as _}from"./index-Cl_hWV--.js";/* empty css            */import"./index-B5i9qy2Y.js";import"./index-BuQaqXjb.js";import"./index-C7D1JV-H.js";import"./x-BHxLkKP3.js";import"./index-sj4qH-fg.js";import"./app-logo-icon-BTiqVlKS.js";import"./label-BvABT9uR.js";import"./ActivePoints-B4M48u6W.js";const F=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"],h={expedientes:"Expedientes",documentos:"Documentos",series:"Series Documentales",subseries:"Subseries",usuarios:"Usuarios",trd:"TRD",certificados:"Certificados",mixto:"Mixto"},W={pendiente:{icon:D,color:"bg-yellow-100 text-yellow-800",label:"Pendiente"},procesando:{icon:j,color:"bg-blue-100 text-blue-800",label:"Procesando"},completada:{icon:A,color:"bg-green-100 text-green-800",label:"Completada"},fallida:{icon:Q,color:"bg-red-100 text-red-800",label:"Fallida"},cancelada:{icon:q,color:"bg-gray-100 text-gray-800",label:"Cancelada"}};function Ae({estadisticas:n,estadisticasPorTipo:P,velocidad:p,importacionesRecientes:u,importacionesProcesando:f}){const[d,I]=N.useState(!0);N.useEffect(()=>{if(!d)return;const s=setInterval(()=>{window.location.reload()},3e4);return()=>clearInterval(s)},[d]);const g=Object.entries(P).map(([s,a])=>({name:h[s]||s,value:a,tipo:s})),T=[{dia:"Lun",importaciones:12},{dia:"Mar",importaciones:8},{dia:"Mié",importaciones:15},{dia:"Jue",importaciones:20},{dia:"Vie",importaciones:18},{dia:"Sáb",importaciones:5},{dia:"Dom",importaciones:3}],S=s=>{if(s<60)return`${s}s`;if(s<3600){const $=Math.floor(s/60),L=s%60;return`${$}m ${L}s`}const a=Math.floor(s/3600),m=Math.floor(s%3600/60);return`${a}h ${m}m`};return e.jsxs(R,{children:[e.jsx(M,{title:"Sistema de Migración e Importación"}),e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx(E,{className:"h-8 w-8 text-blue-600"}),"Sistema de Migración e Importación"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Gestiona la importación de datos desde diferentes fuentes y formatos"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:`h-4 w-4 ${d?"text-green-500":"text-gray-400"}`}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Auto-refresh ",d?"ON":"OFF"]}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>I(!d),children:d?"Pausar":"Activar"})]}),e.jsx(x,{asChild:!0,children:e.jsxs(o,{href:"/admin/importaciones/crear",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Nueva Importación"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Total Importaciones"}),e.jsx(b,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.total}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",n.hoy," hoy"]})]})]}),e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"En Procesamiento"}),e.jsx(j,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n.procesando}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.pendientes," pendientes"]})]})]}),e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Completadas"}),e.jsx(A,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.completadas}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(n.completadas/n.total*100).toFixed(1),"% del total"]})]})]}),e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Velocidad Promedio"}),e.jsx(k,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:p.registros_por_minuto?Math.round(p.registros_por_minuto):0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"registros/min"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(i,{children:"Distribución por Tipo"}),e.jsx(c,{children:"Importaciones por tipo de datos"})]}),e.jsx(l,{children:e.jsx(y,{width:"100%",height:300,children:e.jsxs(z,{children:[e.jsx(G,{data:g,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:a})=>`${s} ${(a*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:g.map((s,a)=>e.jsx(H,{fill:F[a%F.length]},`cell-${a}`))}),e.jsx(C,{})]})})})]}),e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(i,{children:"Actividad de la Semana"}),e.jsx(c,{children:"Importaciones realizadas por día"})]}),e.jsx(l,{children:e.jsx(y,{width:"100%",height:300,children:e.jsxs(K,{data:T,children:[e.jsx(U,{strokeDasharray:"3 3"}),e.jsx(Y,{dataKey:"dia"}),e.jsx(J,{}),e.jsx(C,{}),e.jsx(X,{type:"monotone",dataKey:"importaciones",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6})]})})})]})]}),f.length>0&&e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5 text-blue-600"}),"Importaciones en Procesamiento"]}),e.jsx(c,{children:"Estado actual de las importaciones en curso"})]}),e.jsx(l,{children:e.jsx("div",{className:"space-y-4",children:f.map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o,{href:`/admin/importaciones/${s.id}`,className:"font-medium hover:underline",children:s.nombre}),e.jsx(v,{variant:"outline",children:h[s.tipo]})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.usuario.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{children:["Progreso: ",s.registros_procesados," / ",s.total_registros]}),e.jsxs("span",{className:"font-medium",children:[s.porcentaje_avance.toFixed(1),"%"]})]}),e.jsx(O,{value:s.porcentaje_avance,className:"h-2"}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Tiempo transcurrido: ",S(s.tiempo_transcurrido||0)]}),e.jsxs("span",{children:["Iniciado: ",new Date(s.fecha_inicio).toLocaleString()]})]})]})]},s.id))})})]}),e.jsxs(t,{children:[e.jsx(r,{children:e.jsxs(i,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5"}),"Importaciones Recientes"]}),e.jsx(o,{href:"/admin/importaciones/listado",children:e.jsx(x,{variant:"outline",size:"sm",children:"Ver todas"})})]})}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-3",children:[u.map(s=>{const a=W[s.estado],m=a?.icon||_;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(m,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx(o,{href:`/admin/importaciones/${s.id}`,className:"font-medium hover:underline",children:s.nombre}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{children:h[s.tipo]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:s.usuario.name}),e.jsx("span",{children:"•"}),e.jsx("span",{children:new Date(s.created_at).toLocaleDateString()})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right text-sm",children:[s.estado==="completada"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-green-600 font-medium",children:[s.registros_exitosos," exitosos"]}),s.registros_fallidos>0&&e.jsxs("div",{className:"text-red-600",children:[s.registros_fallidos," fallidos"]})]}),s.estado==="procesando"&&e.jsxs("div",{className:"text-blue-600 font-medium",children:[s.porcentaje_avance.toFixed(1),"%"]})]}),e.jsx(v,{className:a?.color,children:a?.label||s.estado})]})]},s.id)}),u.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(b,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No hay importaciones recientes"}),e.jsx("p",{className:"text-sm",children:"Crea tu primera importación para comenzar"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(t,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(o,{href:"/admin/importaciones/crear",children:e.jsxs(r,{className:"text-center",children:[e.jsx(w,{className:"h-8 w-8 mx-auto text-blue-600"}),e.jsx(i,{className:"text-lg",children:"Nueva Importación"}),e.jsx(c,{children:"Crear una nueva importación de datos"})]})})}),e.jsx(t,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(o,{href:"/admin/importaciones/listado",children:e.jsxs(r,{className:"text-center",children:[e.jsx(B,{className:"h-8 w-8 mx-auto text-green-600"}),e.jsx(i,{className:"text-lg",children:"Ver Todas"}),e.jsx(c,{children:"Gestionar todas las importaciones"})]})})}),e.jsx(t,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(o,{href:"/admin/documentos",children:e.jsxs(r,{className:"text-center",children:[e.jsx(_,{className:"h-8 w-8 mx-auto text-purple-600"}),e.jsx(i,{className:"text-lg",children:"Ver Documentos"}),e.jsx(c,{children:"Revisar documentos importados"})]})})})]})]})]})}export{Ae as default};
