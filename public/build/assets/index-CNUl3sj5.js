import{r as v,b as f,j as e,H as O,L as b}from"./app-BuJooCB2.js";import{A as U}from"./app-layout-CSvwa8Xt.js";import{C as c,a as n,b as d,c as o,d as A}from"./card-Dm8Sxxxu.js";import{B as y}from"./badge-CLhckl5I.js";import{B as j}from"./button-o7sDTR10.js";import{I as M}from"./input-BTIJ4r9q.js";import{S as w,a as C,b as S,c as T,d as m}from"./select-C_00d0nr.js";import{T as R,a as G,b as B,c as r,d as J,e as l}from"./table-C0z6qpZe.js";import{P as z}from"./plus-B_jJsZ3d.js";import{F as L}from"./Combination-BNwokkeO.js";import{U as H}from"./user-yB-EHhJt.js";import{C as K}from"./folder-Cr7M8TWf.js";import{T as Q}from"./users-B1PaIWsM.js";import{F as W}from"./filter-DtM44Zks.js";import{S as X}from"./search-BRBLXc6Q.js";import{F as Y}from"./folder-open-DUj5ZYQn.js";import{E as Z}from"./eye-B4IYdVtt.js";import{S as $}from"./square-pen--eiS-5J3.js";import{C as ee}from"./copy-IKoPjpkg.js";/* empty css            */import"./app-sidebar-layout-CNDt14fj.js";import"./index-Bdl-WcJK.js";import"./index-DmZWXubS.js";import"./index-CCv8Isyn.js";import"./x-BWy7YUo4.js";import"./index-B32rHSx8.js";import"./app-logo-icon-BDSQZXaI.js";import"./label-zUIVNhJD.js";import"./triangle-alert-DGPIiAMo.js";import"./index-9ThOp0oj.js";import"./check-CSAT8V4U.js";const se=a=>({borrador:"bg-gray-100 text-gray-800",revision:"bg-yellow-100 text-yellow-800",activa:"bg-green-100 text-green-800",archivada:"bg-blue-100 text-blue-800",obsoleta:"bg-red-100 text-red-800"})[a]||"bg-gray-100 text-gray-800",I=a=>({memorando:"游닇",oficio:"游늯",resolucion:"丘뒲잺",acta:"游늶",informe:"游늵",circular:"游댃",comunicacion:"游눫",otro:"游늹"})[a]||"游늹";function ze({plantillas:a,estadisticas:x,series:q,filtros:N,categorias:_,estados:P}){const F={total:0,activas:0,borradores:0,publicas:0,por_categoria:{},mas_usadas:[]},i=x&&typeof x=="object"?{...F,...x}:F,[h,D]=v.useState(N),[u,E]=v.useState(N.buscar||"");v.useEffect(()=>{const s=setTimeout(()=>{u!==N.buscar&&p("buscar",u)},500);return()=>clearTimeout(s)},[u]);const p=(s,t)=>{const g={...h};g[s]=t,(!t||t==="all")&&delete g[s],D(g),f.get(route("admin.plantillas.index"),g,{preserveState:!0,preserveScroll:!0})},V=()=>{D({}),E(""),f.get(route("admin.plantillas.index"))},k=s=>{f.post(route("admin.plantillas.duplicar",s),{},{onSuccess:()=>{}})};return e.jsxs(U,{children:[e.jsx(O,{title:"Plantillas Documentales"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Plantillas Documentales"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Gesti칩n y creaci칩n de plantillas para documentos estandarizados"})]}),e.jsxs(b,{href:route("admin.plantillas.create"),className:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 active:bg-blue-900 focus:outline-none focus:border-blue-900 focus:ring ring-blue-300 transition ease-in-out duration-150",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Nueva Plantilla"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsxs(c,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Total Plantillas"}),e.jsx(L,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.total}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[i.activas," activas"]})]})]}),e.jsxs(c,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Plantillas P칰blicas"}),e.jsx(H,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.publicas}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Disponibles para todos"})]})]}),e.jsxs(c,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"En Desarrollo"}),e.jsx(K,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.borradores}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Borradores pendientes"})]})]}),e.jsxs(c,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"M치s Usada"}),e.jsx(Q,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.mas_usadas[0]?.documentos_generados_count||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:i.mas_usadas[0]?.nombre||"Sin uso"})]})]})]}),e.jsxs(c,{className:"mb-6",children:[e.jsx(n,{children:e.jsxs(d,{className:"text-lg flex items-center",children:[e.jsx(W,{className:"w-5 h-5 mr-2"}),"Filtros de b칰squeda"]})}),e.jsxs(o,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"B칰squeda"}),e.jsxs("div",{className:"relative",children:[e.jsx(X,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(M,{placeholder:"Buscar plantillas...",value:u,onChange:s=>E(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Categor칤a"}),e.jsxs(w,{value:h.categoria||"all",onValueChange:s=>p("categoria",s),children:[e.jsx(C,{children:e.jsx(S,{placeholder:"Todas las categor칤as"})}),e.jsxs(T,{children:[e.jsx(m,{value:"all",children:"Todas las categor칤as"}),Object.entries(_).map(([s,t])=>e.jsxs(m,{value:s,children:[I(s)," ",t]},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Estado"}),e.jsxs(w,{value:h.estado||"all",onValueChange:s=>p("estado",s),children:[e.jsx(C,{children:e.jsx(S,{placeholder:"Todos los estados"})}),e.jsxs(T,{children:[e.jsx(m,{value:"all",children:"Todos los estados"}),Object.entries(P).map(([s,t])=>e.jsx(m,{value:s,children:t},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Serie Documental"}),e.jsxs(w,{value:h.serie_documental_id?.toString()||"all",onValueChange:s=>p("serie_documental_id",s),children:[e.jsx(C,{children:e.jsx(S,{placeholder:"Todas las series"})}),e.jsxs(T,{children:[e.jsx(m,{value:"all",children:"Todas las series"}),q.map(s=>e.jsxs(m,{value:s.id.toString(),children:[s.codigo," - ",s.nombre]},s.id))]})]})]})]}),Object.keys(h).length>0&&e.jsx("div",{className:"mt-4",children:e.jsx(j,{variant:"outline",size:"sm",onClick:V,className:"text-gray-600",children:"Limpiar filtros"})})]})]}),e.jsxs(c,{children:[e.jsxs(n,{children:[e.jsx(d,{children:"Plantillas Documentales"}),e.jsxs(A,{children:[a?.meta?.total||0," plantilla",(a?.meta?.total||0)!==1?"s":""," encontrada",(a?.meta?.total||0)!==1?"s":""]})]}),e.jsxs(o,{children:[e.jsxs(R,{children:[e.jsx(G,{children:e.jsxs(B,{children:[e.jsx(r,{children:"Plantilla"}),e.jsx(r,{children:"Categor칤a"}),e.jsx(r,{children:"Estado"}),e.jsx(r,{children:"Serie Documental"}),e.jsx(r,{children:"Creador"}),e.jsx(r,{children:"Versi칩n"}),e.jsx(r,{children:"Fecha"}),e.jsx(r,{className:"text-right",children:"Acciones"})]})}),e.jsx(J,{children:a.data.map(s=>e.jsxs(B,{children:[e.jsx(l,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:s.nombre}),s.es_publica&&e.jsx(y,{variant:"secondary",className:"text-xs",children:"P칰blica"})]}),e.jsx("div",{className:"text-sm text-gray-500",children:s.codigo}),s.descripcion&&e.jsx("div",{className:"text-sm text-gray-400 max-w-xs truncate",children:s.descripcion})]})}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-lg",children:I(s.categoria)}),e.jsx("span",{className:"capitalize",children:_[s.categoria]})]})}),e.jsx(l,{children:e.jsx(y,{className:se(s.estado),children:P[s.estado]})}),e.jsx(l,{children:s.serie_documental?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Y,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:s.serie_documental.codigo})]}):e.jsx("span",{className:"text-gray-400 text-sm",children:"Sin serie"})}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(H,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:s.usuario_creador.name})]})}),e.jsx(l,{children:e.jsxs(y,{variant:"outline",children:["v",s.version]})}),e.jsx(l,{children:e.jsx("div",{className:"text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString("es-ES")})}),e.jsx(l,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(j,{variant:"ghost",size:"sm",asChild:!0,children:e.jsx(b,{href:route("admin.plantillas.show",s.id),children:e.jsx(Z,{className:"w-4 h-4"})})}),e.jsx(j,{variant:"ghost",size:"sm",asChild:!0,children:e.jsx(b,{href:route("admin.plantillas.edit",s.id),children:e.jsx($,{className:"w-4 h-4"})})}),e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>k(s.id),children:e.jsx(ee,{className:"w-4 h-4"})})]})})]},s.id))})]}),a.data.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(L,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No se encontraron plantillas"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Comienza creando tu primera plantilla documental"}),e.jsxs(b,{href:route("admin.plantillas.create"),className:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Crear Primera Plantilla"]})]}),a.links&&a.links.length>3&&e.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Mostrando ",a?.meta?.from||0," a ",a?.meta?.to||0," de ",a?.meta?.total||0," resultados"]}),e.jsx("div",{className:"flex space-x-1",children:a.links.map((s,t)=>e.jsx(j,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url,onClick:()=>s.url&&f.get(s.url),dangerouslySetInnerHTML:{__html:s.label}},t))})]})]})]})]})})]})}export{ze as default};
