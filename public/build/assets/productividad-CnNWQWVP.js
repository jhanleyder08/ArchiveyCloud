import{u as H,j as e,H as I,L as O}from"./app-DdzhGUu9.js";import{A as P,g as q,p as w,o as V,U as X}from"./app-layout-OoaY7b31.js";import{c as Y,B as A}from"./app-logo-icon-DFseab02.js";import{C as a,a as r,b as l,c,d}from"./card-C75-QnNJ.js";import{B as f}from"./badge-DbP4NXaO.js";import{S as G,a as J,b as Q,c as W,d as i}from"./select-CA6nQp8g.js";import{D as Z}from"./download-T5OPDl81.js";import{A as C}from"./activity-BPHoGQ_Y.js";import{A as D}from"./award-BJHX9FFZ.js";import{S as ee}from"./star-ChPEZ22h.js";import{R as g,b as T,X as S,Y as E,T as N,B as L,P as se,a as te,C as ae}from"./PieChart-DGK7ULaO.js";import{A as re,a as le}from"./AreaChart-DKrvQ2Zc.js";import{B as ce}from"./BarChart-BDkeJEED.js";import{L as de}from"./Legend-CSwa1cjW.js";/* empty css            */import"./index-BzXMePeL.js";import"./label-KKFnnNzh.js";import"./index-CZotI1gq.js";import"./index-BQ1GAx1M.js";import"./check-C9xOIHS6.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ne=Y("Target",ie),h=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"];function Re({documentosPorUsuario:n,expedientesPorUsuario:o,actividadPorDia:j,accionesFrecuentes:p,periodo:u,fechaInicio:oe}){const{data:v,setData:R,get:k,processing:y}=H({periodo:u}),_=()=>{k(route("admin.reportes.productividad"),{data:{periodo:v.periodo},preserveState:!0})},B=()=>{console.log("Exportar reporte de productividad")},F=n.reduce((s,t)=>s+t.total,0),K=o.reduce((s,t)=>s+t.total,0),b=j.reduce((s,t)=>s+t.total_acciones,0),$=Math.round(b/j.length)||0,x=n[0],m=o[0],z=j.map(s=>({fecha:new Date(s.fecha).toLocaleDateString("es-ES",{month:"short",day:"numeric"}),actividad:s.total_acciones})),M=n.slice(0,10).map((s,t)=>({usuario:s.creator.name,documentos:s.total,expedientes:o.find(U=>U.created_by===s.created_by)?.total||0,color:h[t%h.length]}));return e.jsxs(P,{children:[e.jsx(I,{title:"Productividad - Reportes"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(O,{href:route("admin.reportes.dashboard"),className:"text-sm text-muted-foreground hover:text-foreground",children:"Reportes"}),e.jsx("span",{className:"text-muted-foreground",children:"/"}),e.jsx("span",{className:"font-medium",children:"Productividad"})]}),e.jsx("h1",{className:"text-2xl font-bold mt-1",children:"Reporte de Productividad"}),e.jsxs("p",{className:"text-muted-foreground",children:["Análisis de productividad de usuarios en los últimos ",u," días"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(G,{value:v.periodo,onValueChange:s=>R("periodo",s),children:[e.jsx(J,{className:"w-40",children:e.jsx(Q,{placeholder:"Período"})}),e.jsxs(W,{children:[e.jsx(i,{value:"7",children:"7 días"}),e.jsx(i,{value:"15",children:"15 días"}),e.jsx(i,{value:"30",children:"30 días"}),e.jsx(i,{value:"60",children:"60 días"}),e.jsx(i,{value:"90",children:"90 días"})]})]}),e.jsx(A,{onClick:_,disabled:y,children:y?"Aplicando...":"Aplicar"}),e.jsxs(A,{variant:"outline",onClick:B,children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Exportar"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(a,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Total Documentos"}),e.jsx(q,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:F.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["En los últimos ",u," días"]})]})]}),e.jsxs(a,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Total Expedientes"}),e.jsx(w,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:K.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Creados en el período"})]})]}),e.jsxs(a,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Total Actividad"}),e.jsx(C,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Acciones realizadas"})]})]}),e.jsxs(a,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Promedio Diario"}),e.jsx(V,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:$}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Acciones por día"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(a,{children:[e.jsxs(r,{children:[e.jsxs(l,{className:"flex items-center space-x-2",children:[e.jsx(D,{className:"h-5 w-5 text-yellow-500"}),e.jsx("span",{children:"Usuario Más Productivo - Documentos"})]}),e.jsx(d,{children:"Usuario que ha creado más documentos"})]}),e.jsx(c,{children:x?e.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-yellow-500 text-white rounded-full",children:e.jsx(ee,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:x.creator.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:x.creator.email})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:x.total}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"documentos"})]})]}):e.jsx("p",{className:"text-muted-foreground",children:"No hay datos disponibles"})})]}),e.jsxs(a,{children:[e.jsxs(r,{children:[e.jsxs(l,{className:"flex items-center space-x-2",children:[e.jsx(D,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{children:"Usuario Más Productivo - Expedientes"})]}),e.jsx(d,{children:"Usuario que ha creado más expedientes"})]}),e.jsx(c,{children:m?e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-500 text-white rounded-full",children:e.jsx(ne,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:m.creator.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:m.creator.email})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:m.total}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"expedientes"})]})]}):e.jsx("p",{className:"text-muted-foreground",children:"No hay datos disponibles"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(a,{children:[e.jsxs(r,{children:[e.jsx(l,{children:"Actividad Diaria"}),e.jsx(d,{children:"Número de acciones realizadas por día"})]}),e.jsx(c,{children:e.jsx(g,{width:"100%",height:300,children:e.jsxs(re,{data:z,children:[e.jsx(T,{strokeDasharray:"3 3"}),e.jsx(S,{dataKey:"fecha"}),e.jsx(E,{}),e.jsx(N,{}),e.jsx(le,{type:"monotone",dataKey:"actividad",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6})]})})})]}),e.jsxs(a,{children:[e.jsxs(r,{children:[e.jsx(l,{children:"Top 10 Usuarios - Documentos"}),e.jsx(d,{children:"Usuarios más productivos creando documentos"})]}),e.jsx(c,{children:e.jsx(g,{width:"100%",height:300,children:e.jsxs(ce,{data:M,children:[e.jsx(T,{strokeDasharray:"3 3"}),e.jsx(S,{dataKey:"usuario",angle:-45,textAnchor:"end",height:80}),e.jsx(E,{}),e.jsx(N,{}),e.jsx(de,{}),e.jsx(L,{dataKey:"documentos",fill:"#8884d8",name:"Documentos"}),e.jsx(L,{dataKey:"expedientes",fill:"#82ca9d",name:"Expedientes"})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(a,{children:[e.jsxs(r,{children:[e.jsxs(l,{className:"flex items-center space-x-2",children:[e.jsx(X,{className:"h-5 w-5"}),e.jsx("span",{children:"Ranking - Documentos"})]}),e.jsx(d,{children:"Top 15 usuarios por documentos creados"})]}),e.jsx(c,{children:e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:n.slice(0,15).map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full text-sm font-bold text-white ${t===0?"bg-yellow-500":t===1?"bg-gray-400":t===2?"bg-amber-600":"bg-gray-300 text-gray-700"}`,children:t+1}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.creator.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.creator.email})]})]}),e.jsxs(f,{variant:"secondary",children:[s.total," documentos"]})]},s.created_by))})})]}),e.jsxs(a,{children:[e.jsxs(r,{children:[e.jsxs(l,{className:"flex items-center space-x-2",children:[e.jsx(w,{className:"h-5 w-5"}),e.jsx("span",{children:"Ranking - Expedientes"})]}),e.jsx(d,{children:"Top 15 usuarios por expedientes creados"})]}),e.jsx(c,{children:e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:o.slice(0,15).map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full text-sm font-bold text-white ${t===0?"bg-yellow-500":t===1?"bg-gray-400":t===2?"bg-amber-600":"bg-gray-300 text-gray-700"}`,children:t+1}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.creator.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.creator.email})]})]}),e.jsxs(f,{variant:"secondary",children:[s.total," expedientes"]})]},s.created_by))})})]})]}),e.jsxs(a,{children:[e.jsxs(r,{children:[e.jsxs(l,{className:"flex items-center space-x-2",children:[e.jsx(C,{className:"h-5 w-5"}),e.jsx("span",{children:"Acciones Más Frecuentes"})]}),e.jsx(d,{children:"Tipos de acciones realizadas con mayor frecuencia"})]}),e.jsx(c,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-3",children:p.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-primary text-primary-foreground rounded-full text-sm",children:t+1}),e.jsx("h4",{className:"font-medium capitalize",children:s.accion.replace("_"," ")})]}),e.jsxs(f,{variant:"outline",children:[s.total," veces"]})]},s.accion))}),e.jsx("div",{children:e.jsx(g,{width:"100%",height:300,children:e.jsxs(se,{children:[e.jsx(te,{data:p.slice(0,6),cx:"50%",cy:"50%",labelLine:!1,label:({accion:s,percent:t})=>`${s}: ${(t*100).toFixed(1)}%`,outerRadius:80,fill:"#8884d8",dataKey:"total",children:p.slice(0,6).map((s,t)=>e.jsx(ae,{fill:h[t%h.length]},`cell-${t}`))}),e.jsx(N,{})]})})})]})})]})]})]})}export{Re as default};
