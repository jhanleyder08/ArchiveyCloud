import{r as T,j as e,H as D,L as l}from"./app-B-PXR1Ni.js";import{A as V}from"./app-layout-DJutQZnN.js";import{c as z,B as d}from"./app-logo-icon-BLsuM4IN.js";import{C as i,a as t,b as r,d as c,c as b}from"./card-Dmlm_cpt.js";import{B as n}from"./badge-CNo-IL5x.js";import{T as E,a as L,b as m,c as x}from"./tabs-Dnq90kir.js";import{A as M,a as k}from"./alert-CjcJnkq6.js";import{P as A}from"./plus-DmrOjBIx.js";import{K as o,b as B,S as q,U,F as y}from"./app-sidebar-layout-D9ulO2li.js";import{C as H}from"./circle-alert-DQvq-mpa.js";import{P as K}from"./pen-tool-ByFhlR6L.js";/* empty css            */import"./index-DsJw0RIA.js";import"./label-CcIhawib.js";import"./index-DARluDlH.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],G=z("FileCheck",I);function le({estadisticas:u,solicitudes_pendientes:w,mis_solicitudes:C,certificados:_,certificados_proximos_vencer:S}){const[p,R]=T.useState(u?.usuario),h=w||[],j=C||[],f=_||[],N=S||[],a=u||{firmas:{total:0,hoy:0,este_mes:0,validas:0,con_certificado:0,porcentaje_validez:0},certificados:{activos:0},solicitudes:{pendientes:0,completadas:0,vencidas:0}},g=s=>new Date(s).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),F=s=>({urgente:"bg-red-500 text-white",alta:"bg-orange-500 text-white",normal:"bg-blue-500 text-white",baja:"bg-gray-500 text-white"})[s]||"bg-gray-500 text-white",v=s=>({pendiente:"bg-yellow-500 text-white",en_proceso:"bg-blue-500 text-white",completada:"bg-green-500 text-white",cancelada:"bg-red-500 text-white",vencida:"bg-red-600 text-white"})[s]||"bg-gray-500 text-white";return e.jsxs(V,{children:[e.jsx(D,{title:"Dashboard de Firmas Digitales"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"md:flex md:items-center md:justify-between mb-6",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate",children:"Dashboard de Firmas Digitales 🔐"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Sistema PKI avanzado para firma electrónica empresarial"})]}),e.jsxs("div",{className:"mt-4 flex md:mt-0 md:ml-4 space-x-3",children:[e.jsx(l,{href:route("admin.firmas.solicitudes.crear"),children:e.jsxs(d,{children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Nueva Solicitud"]})}),e.jsx(l,{href:route("admin.firmas.certificados"),children:e.jsxs(d,{variant:"outline",children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),"Certificados"]})})]})]}),N.length>0&&e.jsxs(M,{className:"mb-6 border-orange-200 bg-orange-50",children:[e.jsx(H,{className:"h-4 w-4 text-orange-600"}),e.jsxs(k,{className:"text-orange-800",children:["Tienes ",N.length," certificado(s) próximo(s) a vencer.",e.jsx(l,{href:route("admin.firmas.certificados"),className:"ml-2 underline font-medium",children:"Ver certificados"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs(i,{children:[e.jsxs(t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Firmas Totales"}),e.jsx(G,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.firmas.total}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.firmas.hoy," hoy"]})]})]}),e.jsxs(i,{children:[e.jsxs(t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Este Mes"}),e.jsx(B,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.firmas.este_mes}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[p?.firmas_realizadas_mes||0," tuyas"]})]})]}),e.jsxs(i,{children:[e.jsxs(t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Firmas Válidas"}),e.jsx(q,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.firmas.validas}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.firmas.porcentaje_validez.toFixed(1),"% validez"]})]})]}),e.jsxs(i,{children:[e.jsxs(t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Certificados"}),e.jsx(o,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.certificados.activos}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[p?.certificados_activos||0," tuyos"]})]})]})]}),e.jsxs(E,{defaultValue:"pendientes",className:"space-y-6",children:[e.jsxs(L,{children:[e.jsxs(m,{value:"pendientes",children:["Pendientes de Firma (",h.length,")"]}),e.jsxs(m,{value:"mis-solicitudes",children:["Mis Solicitudes (",j.length,")"]}),e.jsxs(m,{value:"certificados",children:["Mis Certificados (",f.length,")"]}),e.jsx(m,{value:"stats",children:"Estadísticas"})]}),e.jsx(x,{value:"pendientes",className:"space-y-4",children:e.jsxs(i,{children:[e.jsxs(t,{children:[e.jsxs(r,{className:"flex items-center",children:[e.jsx(U,{className:"w-5 h-5 mr-2"}),"Solicitudes Pendientes de Tu Firma"]}),e.jsx(b,{children:"Documentos que requieren tu firma digital"})]}),e.jsx(c,{children:h.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(K,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No tienes solicitudes pendientes de firma"})]}):e.jsx("div",{className:"space-y-4",children:h.map(s=>e.jsxs("div",{className:"border rounded-lg p-4 hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:s.titulo}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.documento.nombre}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Solicitado por: ",s.solicitante.name]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{className:F(s.prioridad),children:s.prioridad}),e.jsx(n,{className:v(s.estado),children:s.estado})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["Límite: ",g(s.fecha_limite)]}),e.jsx(l,{href:route("admin.firmas.solicitud",s.id),children:e.jsx(d,{size:"sm",children:"Ver Solicitud"})})]})]},s.id))})})]})}),e.jsx(x,{value:"mis-solicitudes",className:"space-y-4",children:e.jsxs(i,{children:[e.jsxs(t,{children:[e.jsxs(r,{className:"flex items-center",children:[e.jsx(y,{className:"w-5 h-5 mr-2"}),"Mis Solicitudes de Firma"]}),e.jsx(b,{children:"Solicitudes que has creado"})]}),e.jsx(c,{children:j.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(y,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No has creado solicitudes de firma"}),e.jsx(l,{href:route("admin.firmas.solicitudes.crear"),className:"mt-4",children:e.jsx(d,{children:"Crear Primera Solicitud"})})]}):e.jsx("div",{className:"space-y-4",children:j.map(s=>e.jsxs("div",{className:"border rounded-lg p-4 hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:s.titulo}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.documento.nombre}),s.progreso&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["Progreso: ",s.progreso.completadas,"/",s.progreso.total," firmantes"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${s.progreso.porcentaje}%`}})})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(n,{className:v(s.estado),children:s.estado})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:[s.firmantes.length," firmante(s)"]}),e.jsx(l,{href:route("admin.firmas.solicitud",s.id),children:e.jsx(d,{size:"sm",variant:"outline",children:"Ver Detalles"})})]})]},s.id))})})]})}),e.jsx(x,{value:"certificados",className:"space-y-4",children:e.jsxs(i,{children:[e.jsx(t,{children:e.jsxs(r,{className:"flex items-center",children:[e.jsx(o,{className:"w-5 h-5 mr-2"}),"Mis Certificados Digitales"]})}),e.jsx(c,{children:f.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(o,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No tienes certificados digitales"}),e.jsx(l,{href:route("admin.firmas.certificados"),className:"mt-4",children:e.jsx(d,{children:"Ver Certificados"})})]}):e.jsx("div",{className:"space-y-4",children:f.map(s=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:s.nombre_certificado}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Tipo: ",s.tipo_certificado]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Vence: ",g(s.fecha_vencimiento)]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(n,{variant:s.vigente?"default":"destructive",children:s.vigente?"Vigente":"Vencido"})})]})},s.id))})})]})}),e.jsx(x,{value:"stats",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(i,{children:[e.jsx(t,{children:e.jsx(r,{children:"Estadísticas Generales"})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total de firmas:"}),e.jsx("span",{className:"font-medium",children:a.firmas.total})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Con certificado PKI:"}),e.jsx("span",{className:"font-medium",children:a.firmas.con_certificado})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Porcentaje de validez:"}),e.jsxs("span",{className:"font-medium",children:[a.firmas.porcentaje_validez.toFixed(1),"%"]})]})]})]}),e.jsxs(i,{children:[e.jsx(t,{children:e.jsx(r,{children:"Solicitudes"})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Pendientes:"}),e.jsx("span",{className:"font-medium",children:a.solicitudes.pendientes})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Completadas:"}),e.jsx("span",{className:"font-medium",children:a.solicitudes.completadas})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Vencidas:"}),e.jsx("span",{className:"font-medium text-red-600",children:a.solicitudes.vencidas})]})]})]})]})})]})]})})]})}export{le as default};
