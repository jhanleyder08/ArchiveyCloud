import{r as C,j as e,H as P,b as g}from"./app-CIbq8dG2.js";import{A as H,S as y,h as z,t as b}from"./app-sidebar-layout-BpaB1NRw.js";import{c as R,B as d}from"./button-Ds3NJ_jG.js";import{C as l,a as i,b as n,c,d as U}from"./card-B0eJE_mf.js";import{T as V,a as G,b as W,c as $}from"./tabs-CppPnZYT.js";import{I as f}from"./input-D0db2BbK.js";import{L as v}from"./label-CBk5ZueX.js";import{S as J,a as K,b as q,c as Q,d as m}from"./select-DMHb1Bui.js";import{S as X}from"./switch-DKtYbmeD.js";import{S as h}from"./save-MKVZQD8-.js";import{R as Y}from"./refresh-cw-DUOiCme-.js";import{U as _,D as Z}from"./users-BbmbdbM1.js";import{P as T}from"./palette-BRyeXkaT.js";import{B as ee}from"./bell--LLfh0kj.js";import{S as se,M as ae}from"./triangle-alert-bOfOdHqD.js";import{S as re}from"./smartphone-BiCBdRpP.js";/* empty css            */import"./index-jcsUFG5G.js";import"./Combination-DTJg1Lyy.js";import"./index-xFswVsEi.js";import"./index-BtKy2JJi.js";import"./x-CrQkj4FF.js";import"./index-iinmUp0B.js";import"./app-logo-icon-CgzeobtO.js";import"./user-tlh-YUrK.js";import"./folder-C8jHFRA7.js";import"./search-DBEug6xS.js";import"./index-BaY39JIM.js";import"./check-B3UOWcW_.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],le=R("Wrench",te);function Oe({configuraciones:ce={},estadisticas:B,categorias:M,roles:ie=[]}){const[F,E]=C.useState("sistema"),[o,w]=C.useState({}),[x,N]=C.useState(!1),j=B||{configuraciones_total:0,configuraciones_activas:0,usuarios_total:0,roles_total:0,cache_size:0,storage_size:0},S=M||{sistema:[],email:[],sms:[],seguridad:[],branding:[],notificaciones:[]},k=s=>{if(s===0)return"0 Bytes";const a=1024,r=["Bytes","KB","MB","GB"],t=Math.floor(Math.log(s)/Math.log(a));return parseFloat((s/Math.pow(a,t)).toFixed(2))+" "+r[t]},u=(s,a)=>{w(r=>({...r,[s]:a}))},p=async s=>{if(o[s]){N(!0);try{await g.put(route("admin.configuracion.actualizar",s),{valor:o[s],activo:!0}),w(a=>{const r={...a};return delete r[s],r}),b.success("Configuración actualizada exitosamente")}catch(a){console.error("Error saving configuration:",a),b.error("Error al actualizar configuración")}finally{N(!1)}}},L=async()=>{N(!0);const s=Object.keys(o).map(a=>g.put(route("admin.configuracion.actualizar",a),{valor:o[a],activo:!0}));try{await Promise.all(s),w({}),b.success("Todas las configuraciones guardadas exitosamente")}catch(a){console.error("Error saving all configurations:",a),b.error("Error al guardar configuraciones")}finally{N(!1)}},A=()=>{window.open(route("admin.configuracion.exportar"),"_blank")},I=s=>{const a=o[s.clave]??s.valor,r=o[s.clave]!==void 0;switch(s.tipo){case"boolean":return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(v,{children:s.descripcion}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.clave})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{checked:a==="true"||a===!0,onCheckedChange:t=>u(s.clave,t?"true":"false")}),r&&e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>p(s.clave),disabled:x,children:e.jsx(h,{className:"h-4 w-4"})})]})]});case"numero":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:s.clave,children:s.descripcion}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{id:s.clave,type:"number",value:a,onChange:t=>u(s.clave,t.target.value),className:r?"border-orange-500":""}),r&&e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>p(s.clave),disabled:x,children:e.jsx(h,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.clave})]});case"color":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:s.clave,children:s.descripcion}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{id:s.clave,type:"color",value:a,onChange:t=>u(s.clave,t.target.value),className:`w-20 h-10 ${r?"border-orange-500":""}`}),e.jsx(f,{value:a,onChange:t=>u(s.clave,t.target.value),className:`flex-1 ${r?"border-orange-500":""}`,placeholder:"#000000"}),r&&e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>p(s.clave),disabled:x,children:e.jsx(h,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.clave})]});case"seleccion":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:s.clave,children:s.descripcion}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(J,{value:a,onValueChange:t=>u(s.clave,t),children:[e.jsx(K,{className:r?"border-orange-500":"",children:e.jsx(q,{})}),e.jsxs(Q,{children:[s.clave==="tema_predeterminado"&&e.jsxs(e.Fragment,{children:[e.jsx(m,{value:"light",children:"Claro"}),e.jsx(m,{value:"dark",children:"Oscuro"}),e.jsx(m,{value:"auto",children:"Automático"})]}),s.clave==="mail_mailer"&&e.jsxs(e.Fragment,{children:[e.jsx(m,{value:"smtp",children:"SMTP"}),e.jsx(m,{value:"sendmail",children:"Sendmail"})]}),s.clave==="mail_encryption"&&e.jsxs(e.Fragment,{children:[e.jsx(m,{value:"tls",children:"TLS"}),e.jsx(m,{value:"ssl",children:"SSL"}),e.jsx(m,{value:"null",children:"Sin cifrado"})]})]})]}),r&&e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>p(s.clave),disabled:x,children:e.jsx(h,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.clave})]});case"password":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:s.clave,children:s.descripcion}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{id:s.clave,type:"password",value:a,onChange:t=>u(s.clave,t.target.value),className:r?"border-orange-500":"",placeholder:"••••••••"}),r&&e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>p(s.clave),disabled:x,children:e.jsx(h,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.clave})]});default:return e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:s.clave,children:s.descripcion}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{id:s.clave,value:a,onChange:t=>u(s.clave,t.target.value),className:r?"border-orange-500":""}),r&&e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>p(s.clave),disabled:x,children:e.jsx(h,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.clave})]})}},O=s=>{switch(s){case"sistema":return e.jsx(y,{className:"h-5 w-5"});case"branding":return e.jsx(T,{className:"h-5 w-5"});case"email":return e.jsx(ae,{className:"h-5 w-5"});case"sms":return e.jsx(re,{className:"h-5 w-5"});case"seguridad":return e.jsx(se,{className:"h-5 w-5"});case"notificaciones":return e.jsx(ee,{className:"h-5 w-5"});default:return e.jsx(y,{className:"h-5 w-5"})}},D=s=>{switch(s){case"sistema":return"Sistema";case"branding":return"Branding";case"email":return"Email";case"sms":return"SMS";case"seguridad":return"Seguridad";case"notificaciones":return"Notificaciones";default:return s}};return e.jsxs(H,{title:"Configuración del Sistema",children:[e.jsx(P,{title:"Configuración del Sistema"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Configuración del Sistema"}),e.jsx("p",{className:"text-muted-foreground",children:"Gestiona la configuración avanzada, branding y personalización del sistema"})]}),e.jsxs("div",{className:"flex gap-2",children:[Object.keys(o).length>0&&e.jsxs(d,{onClick:L,disabled:x,children:[e.jsx(h,{className:"mr-2 h-4 w-4"}),"Guardar Todo (",Object.keys(o).length,")"]}),e.jsxs(d,{variant:"outline",onClick:()=>g.reload(),children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"Actualizar"]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Configuraciones"}),e.jsx(y,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:j.configuraciones_total}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[j.configuraciones_activas," activas"]})]})]}),e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Usuarios"}),e.jsx(_,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:j.usuarios_total}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[j.roles_total," roles configurados"]})]})]}),e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Cache"}),e.jsx(z,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:k(j.cache_size)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tamaño en memoria"})]})]}),e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Storage"}),e.jsx(z,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:k(j.storage_size)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Archivos almacenados"})]})]})]}),e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsx(n,{children:"Configuraciones por Categoría"}),e.jsx(U,{children:"Ajusta las configuraciones del sistema organizadas por categorías"})]}),e.jsx(c,{children:e.jsxs(V,{value:F,onValueChange:E,children:[e.jsx(G,{className:"grid w-full grid-cols-6",children:Object.keys(S).map(s=>e.jsxs(W,{value:s,className:"flex items-center gap-2",children:[O(s),e.jsx("span",{className:"hidden sm:inline",children:D(s)})]},s))}),Object.entries(S).map(([s,a])=>e.jsxs($,{value:s,className:"space-y-4 mt-6",children:[e.jsx("div",{className:"grid gap-6 md:grid-cols-1 lg:grid-cols-2",children:a.map(r=>e.jsx(l,{children:e.jsx(c,{className:"pt-6",children:I(r)})},r.clave))}),a.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No hay configuraciones disponibles en esta categoría"})]},s))]})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(l,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>g.get(route("admin.configuracion.branding")),children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Branding"}),e.jsx(T,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(c,{children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Personaliza logos, colores y temas"})})]}),e.jsxs(l,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>g.get(route("admin.configuracion.roles")),children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Roles"}),e.jsx(_,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(c,{children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Configuraciones específicas por rol"})})]}),e.jsxs(l,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>g.get(route("admin.configuracion.mantenimiento")),children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Mantenimiento"}),e.jsx(le,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(c,{children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Herramientas del sistema y optimización"})})]}),e.jsxs(l,{className:"cursor-pointer hover:bg-muted/50",onClick:A,children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Exportar"}),e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(c,{children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Descargar configuraciones en JSON"})})]})]})]})]})}export{Oe as default};
