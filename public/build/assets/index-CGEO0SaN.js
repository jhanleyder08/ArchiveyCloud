import{r as v,u as P,j as e,H as q,L as g,b as w}from"./app-91m9kwyU.js";import{A as M}from"./app-layout-DZp0sNzN.js";import{B as j}from"./button-CoFcodqQ.js";import{I as n}from"./input-JBRHZ7QZ.js";import{L as o}from"./label-BZUr6K3X.js";import{F as _,D as G,f as K,a as R,b as U,c as z,d as J,T as Q,e as W,t as f}from"./app-sidebar-layout-CLv5ko0D.js";import{B as x}from"./badge-Dw7CG6bs.js";import{S as D,a as S,b as E,c as F,d as m}from"./select-Wrwv2RZt.js";import{P as X}from"./plus-B3qVF68_.js";import{S as Y}from"./save-CttH1uaj.js";import{C as Z}from"./circle-check-big-GF6EQRBn.js";import{C as ee}from"./circle-alert-D5HoHwZa.js";import{T as se}from"./users-DKdb_1gz.js";import{S as $}from"./search-DaK7IuzH.js";import{E as ae}from"./eye-xXNHm9-c.js";import{S as re}from"./square-pen-Ctxckn8q.js";/* empty css            */import"./index-Dt_6hCNO.js";import"./index-CGEZD_4Y.js";import"./Combination-CDT0PLPo.js";import"./index-Dc4Xr8Yn.js";import"./x-CyP9uxNW.js";import"./index-Baz-24-5.js";import"./app-logo-icon-CUlPqTXW.js";import"./user-aQnMVpKS.js";import"./mail-CViPbZpD.js";import"./folder-C92Ox93S.js";import"./triangle-alert-B8VDP-oe.js";import"./index-CeBSh6Va.js";import"./check-Cn3I3pUy.js";function Ve({ccds:r,estadisticas:h,filters:b,opciones:T}){const[i,A]=v.useState(b?.search||""),[c,B]=v.useState(b?.estado||"all"),[I,u]=v.useState(!1),{data:l,setData:d,post:V,processing:N,errors:a,reset:y}=P({codigo:"",nombre:"",descripcion:"",version:"",fecha_vigencia_inicio:"",fecha_vigencia_fin:"",estado:"borrador"}),k=T||{estados:[{value:"borrador",label:"Borrador"},{value:"activo",label:"Activo"},{value:"inactivo",label:"Inactivo"},{value:"historico",label:"Histórico"}]},C=()=>{const s={};i.trim()&&(s.search=i.trim()),c&&c!=="all"&&(s.estado=c),w.get("/admin/ccd",s,{preserveState:!1,preserveScroll:!1,replace:!0})},H=s=>{B(s);const t={};i.trim()&&(t.search=i.trim()),s&&s!=="all"&&(t.estado=s),w.get("/admin/ccd",t,{preserveState:!1,preserveScroll:!1,replace:!0})},L=s=>({borrador:e.jsx(x,{variant:"secondary",className:"bg-gray-100 text-gray-800",children:"Borrador"}),activo:e.jsx(x,{variant:"default",className:"bg-green-100 text-green-800",children:"Activo"}),inactivo:e.jsx(x,{variant:"destructive",className:"bg-red-100 text-red-800",children:"Inactivo"}),historico:e.jsx(x,{variant:"outline",className:"bg-blue-100 text-blue-800",children:"Histórico"})})[s]||e.jsx(x,{children:s});return e.jsxs(M,{breadcrumbs:[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Cuadros de Clasificación Documental",href:"/admin/ccd"}],children:[e.jsx(q,{title:"Cuadros de Clasificación Documental"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-6 w-6 text-[#2a3d83]"}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Gestión de Cuadros de Clasificación Documental"})]}),e.jsxs(G,{open:I,onOpenChange:u,children:[e.jsx(K,{asChild:!0,children:e.jsxs(j,{className:"flex items-center gap-2 px-4 py-2 bg-[#2a3d83] text-white rounded-lg hover:bg-[#1e2b5f] transition-colors",children:[e.jsx(X,{className:"h-4 w-4"}),"Nuevo CCD"]})}),e.jsxs(R,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(U,{children:[e.jsx(z,{className:"text-xl font-semibold text-gray-900",children:"Crear Nuevo Cuadro de Clasificación Documental"}),e.jsx(J,{className:"text-sm text-gray-600",children:"Complete los siguientes datos para crear un nuevo CCD."})]}),e.jsxs("form",{onSubmit:s=>{if(s.preventDefault(),!l.codigo||!l.nombre){f.error("Por favor complete los campos requeridos");return}V("/admin/ccd",{onSuccess:()=>{u(!1),y(),f.success("CCD creado exitosamente")},onError:t=>{console.error("Error al crear CCD:",t),t&&Object.keys(t).forEach(p=>{const O=Array.isArray(t[p])?t[p][0]:t[p];f.error(`Error en ${p}: ${O}`)})}})},className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"create-codigo",children:"Código *"}),e.jsx(n,{id:"create-codigo",type:"text",value:l.codigo,onChange:s=>d("codigo",s.target.value),placeholder:"Ej: CCD-001",required:!0,className:a.codigo?"border-red-500":""}),a.codigo&&e.jsx("p",{className:"text-sm text-red-600",children:a.codigo})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"create-version",children:"Versión"}),e.jsx(n,{id:"create-version",type:"text",value:l.version,onChange:s=>d("version",s.target.value),placeholder:"Ej: 1.0",className:a.version?"border-red-500":""}),a.version&&e.jsx("p",{className:"text-sm text-red-600",children:a.version})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"create-nombre",children:"Nombre *"}),e.jsx(n,{id:"create-nombre",type:"text",value:l.nombre,onChange:s=>d("nombre",s.target.value),placeholder:"Nombre del CCD",required:!0,className:a.nombre?"border-red-500":""}),a.nombre&&e.jsx("p",{className:"text-sm text-red-600",children:a.nombre})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"create-descripcion",children:"Descripción"}),e.jsx(Q,{id:"create-descripcion",value:l.descripcion,onChange:s=>d("descripcion",s.target.value),placeholder:"Descripción del CCD",rows:3,className:a.descripcion?"border-red-500":""}),a.descripcion&&e.jsx("p",{className:"text-sm text-red-600",children:a.descripcion})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"create-fecha-vigencia-inicio",children:"Fecha Vigencia Inicio"}),e.jsx(n,{id:"create-fecha-vigencia-inicio",type:"date",value:l.fecha_vigencia_inicio,onChange:s=>d("fecha_vigencia_inicio",s.target.value),className:a.fecha_vigencia_inicio?"border-red-500":""}),a.fecha_vigencia_inicio&&e.jsx("p",{className:"text-sm text-red-600",children:a.fecha_vigencia_inicio})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"create-fecha-vigencia-fin",children:"Fecha Vigencia Fin"}),e.jsx(n,{id:"create-fecha-vigencia-fin",type:"date",value:l.fecha_vigencia_fin,onChange:s=>d("fecha_vigencia_fin",s.target.value),className:a.fecha_vigencia_fin?"border-red-500":""}),a.fecha_vigencia_fin&&e.jsx("p",{className:"text-sm text-red-600",children:a.fecha_vigencia_fin})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"create-estado",children:"Estado *"}),e.jsxs(D,{value:l.estado,onValueChange:s=>d("estado",s),children:[e.jsx(S,{className:a.estado?"border-red-500":"",children:e.jsx(E,{placeholder:"Seleccionar estado"})}),e.jsx(F,{children:k.estados.map(s=>e.jsx(m,{value:s.value,children:s.label},s.value))})]}),a.estado&&e.jsx("p",{className:"text-sm text-red-600",children:a.estado})]}),e.jsxs(W,{children:[e.jsx(j,{type:"button",variant:"outline",onClick:()=>{u(!1),y()},children:"Cancelar"}),e.jsxs(j,{type:"submit",disabled:N,className:"bg-[#2a3d83] hover:bg-[#1e2b5f] flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),N?"Guardando...":"Crear CCD"]})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total CCDs"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:h?.total||0})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(_,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Activos"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:h?.activos||0})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(Z,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Borradores"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:h?.borradores||0})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(ee,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Vigentes"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:h?.vigentes||0})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(se,{className:"h-6 w-6 text-[#2a3d83]"})})]})})]}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4 w-full sm:w-auto",children:e.jsxs("div",{className:"relative flex-1 sm:w-80",children:[e.jsx($,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(n,{type:"text",placeholder:"Buscar CCDs...",value:i,onChange:s=>A(s.target.value),onKeyPress:s=>{s.key==="Enter"&&(s.preventDefault(),C())},className:"pl-10"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(D,{value:c,onValueChange:H,children:[e.jsx(S,{className:"w-[180px]",children:e.jsx(E,{placeholder:"Todos los estados"})}),e.jsxs(F,{children:[e.jsx(m,{value:"all",children:"Todos los estados"}),e.jsx(m,{value:"borrador",children:"Borrador"}),e.jsx(m,{value:"activo",children:"Activo"}),e.jsx(m,{value:"inactivo",children:"Inactivo"}),e.jsx(m,{value:"historico",children:"Histórico"})]})]}),e.jsxs(j,{onClick:C,type:"button",className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"Buscar"]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Código"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Nombre"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Estado"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Niveles"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Creado"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:r.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"py-8 px-6 text-center text-gray-500",children:"No se encontraron CCDs."})}):r.data.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-4 px-6 font-medium text-gray-900",children:s.codigo}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.nombre}),s.descripcion&&e.jsx("div",{className:"text-sm text-gray-500",children:s.descripcion})]})}),e.jsx("td",{className:"py-4 px-6",children:L(s.estado)}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-[#2a3d83]",children:[s.niveles_count||0," niveles"]})}),e.jsx("td",{className:"py-4 px-6 text-gray-600",children:new Date(s.created_at).toLocaleDateString("es-ES")}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{href:`/admin/ccd/${s.id}`,children:e.jsx("button",{className:"p-2 rounded-md text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50 transition-colors",children:e.jsx(ae,{className:"h-4 w-4"})})}),e.jsx(g,{href:`/admin/ccd/${s.id}/edit`,children:e.jsx("button",{className:"p-2 rounded-md text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50 transition-colors",children:e.jsx(re,{className:"h-4 w-4"})})})]})})]},s.id))})]})})}),r.data.length>0&&r.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between bg-white border rounded-lg px-6 py-3",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando ",e.jsx("span",{className:"font-medium",children:(r.current_page-1)*r.per_page+1})," a"," ",e.jsx("span",{className:"font-medium",children:Math.min(r.current_page*r.per_page,r.total)})," de"," ",e.jsx("span",{className:"font-medium",children:r.total})," resultados"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[r.current_page>1&&e.jsx(g,{href:`/admin/ccd?page=${r.current_page-1}${i?`&search=${i}`:""}${c!=="all"?`&estado=${c}`:""}`,preserveState:!0,className:"px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Anterior"}),r.current_page<r.last_page&&e.jsx(g,{href:`/admin/ccd?page=${r.current_page+1}${i?`&search=${i}`:""}${c!=="all"?`&estado=${c}`:""}`,preserveState:!0,className:"px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Siguiente"})]})]})]})]})}export{Ve as default};
