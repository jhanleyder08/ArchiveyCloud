import{r,j as e,H as V,L as _,a as b}from"./app-xP5nJVeF.js";import{A as q}from"./app-layout-52tIb-IE.js";import{C as c,a as d,b as o,d as S,c as m}from"./card-CWOinnut.js";import{B as x}from"./button-B_iUXIQd.js";import{I as D}from"./input-DQqwP0kM.js";import{L as y}from"./label-CXywCScm.js";import{S as F,a as O,b as W,c as G,d as J}from"./select-CeZZq-kY.js";import{A as w,a as C}from"./alert-BVrZsLZW.js";import{B as K}from"./Combination-BMQq9fx8.js";import{A as Q,q as E,M}from"./app-sidebar-layout-Bv9w89yC.js";import{T as X}from"./test-tube-B9L05l06.js";import{T as P}from"./triangle-alert-3Hg381hi.js";import{M as h}from"./mail-C5oL3AE1.js";import{U as L}from"./user-OU0Y1c1r.js";import{L as A}from"./loader-circle--copFJNU.js";import{P as Y}from"./phone-BFr06Wrs.js";import{C as Z}from"./circle-check-big-C9Zhhz8Y.js";/* empty css            */import"./index-Blg4NNxt.js";import"./index-DbDMva29.js";import"./index-B00g0JPb.js";import"./check-C5qgcy3h.js";import"./index-D2eHBSbe.js";import"./x-CBQbsaML.js";import"./app-logo-icon-8EdVYcX9.js";import"./users-DpyCPIO9.js";import"./folder-Ck8Tq3sH.js";import"./search-eio2uEn4.js";import"./BrandingProvider-BV5yFGOU.js";function Pe({usuarios:p}){const[l,R]=r.useState(""),[a,I]=r.useState(""),[j,u]=r.useState(!1),[f,g]=r.useState(!1),[T,i]=r.useState(null),[U,n]=r.useState(null),t=p.find(s=>s.id.toString()===l),B=async()=>{if(!l){i({success:!1,message:"Por favor selecciona un usuario"});return}u(!0),i(null);try{const s=await b.post("/admin/servicios-externos/test-email",{user_id:l});i(s.data)}catch(s){i({success:!1,message:s.response?.data?.message||"Error enviando email de prueba"})}finally{u(!1)}},k=async()=>{if(!a){n({success:!1,message:"Por favor ingresa un n√∫mero de tel√©fono"});return}g(!0),n(null);try{const s=await b.post("/admin/servicios-externos/test-sms",{telefono:a});n(s.data)}catch(s){n({success:!1,message:s.response?.data?.message||"Error enviando SMS de prueba"})}finally{g(!1)}},v=(s,z)=>s?e.jsx(w,{className:s.success?"border-green-200 bg-green-50":"border-red-200 bg-red-50",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[s.success?e.jsx(Z,{className:"h-4 w-4 text-green-600"}):e.jsx(P,{className:"h-4 w-4 text-red-600"}),e.jsxs(C,{className:s.success?"text-green-800":"text-red-800",children:[e.jsxs("strong",{children:[z,":"]})," ",s.message,s.detalles&&e.jsx("div",{className:"mt-2 text-sm space-y-1",children:Object.entries(s.detalles).map(([N,H])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"capitalize",children:[N.replace("_"," "),":"]}),e.jsx("span",{className:"font-mono text-xs",children:String(H)})]},N))})]})]})}):null;return e.jsxs(q,{children:[e.jsx(V,{title:"Probar Servicios Externos - ArchiveyCloud"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(_,{href:"/admin/servicios-externos",children:e.jsxs(x,{variant:"outline",size:"sm",children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),"Volver"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Probar Servicios Externos"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Env√≠a emails y SMS de prueba para verificar la configuraci√≥n"})]})]}),e.jsx(X,{className:"h-8 w-8 text-blue-600"})]}),e.jsxs(w,{children:[e.jsx(P,{className:"h-4 w-4"}),e.jsxs(C,{children:[e.jsx("strong",{children:"Importante:"})," Los emails y SMS de prueba se env√≠an realmente a los destinatarios seleccionados. Usa esta funcionalidad solo para testing en ambientes de desarrollo o con usuarios de prueba."]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsxs(o,{className:"flex items-center space-x-2",children:[e.jsx(h,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:"Probar Email"})]}),e.jsx(S,{children:"Env√≠a un email de prueba a un usuario espec√≠fico"})]}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"usuario-select",children:"Usuario Destinatario"}),e.jsxs(F,{value:l,onValueChange:R,children:[e.jsx(O,{id:"usuario-select",children:e.jsx(W,{placeholder:"Selecciona un usuario..."})}),e.jsx(G,{children:p.map(s=>e.jsx(J,{value:s.id.toString(),children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx("span",{children:s.name}),e.jsx(K,{variant:"outline",className:"ml-auto",children:s.email})]})},s.id))})]})]}),t&&e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"font-medium",children:t.name})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(h,{className:"h-3 w-3"}),e.jsx("span",{children:t.email})]})]}),e.jsxs(x,{onClick:B,disabled:j||!l,className:"w-full",children:[j?e.jsx(A,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(E,{className:"h-4 w-4 mr-2"}),"Enviar Email de Prueba"]}),v(T,"Email"),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Asunto:"})," üìã Prueba desde Interfaz Web - ArchiveyCloud"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contenido:"})," Email de prueba enviado desde la interfaz de administraci√≥n"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Prioridad:"})," Media"]})]})]})]}),e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsxs(o,{className:"flex items-center space-x-2",children:[e.jsx(M,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{children:"Probar SMS"})]}),e.jsx(S,{children:"Env√≠a un SMS de prueba a un n√∫mero espec√≠fico"})]}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"telefono-input",children:"N√∫mero de Tel√©fono"}),e.jsx(D,{id:"telefono-input",type:"tel",placeholder:"+573001234567",value:a,onChange:s=>I(s.target.value),className:"font-mono"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Incluye el c√≥digo de pa√≠s (ej: +57 para Colombia)"})]}),a&&e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"font-medium font-mono",children:a})]}),e.jsx("div",{className:"text-sm text-gray-600",children:"SMS ser√° enviado a este n√∫mero"})]}),e.jsxs(x,{onClick:k,disabled:f||!a,className:"w-full",children:[f?e.jsx(A,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(E,{className:"h-4 w-4 mr-2"}),"Enviar SMS de Prueba"]}),v(U,"SMS"),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Mensaje:"})," üö® ArchiveyCloud: Prueba SMS - Ver: [URL]"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Longitud:"})," ~60 caracteres"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Ambiente:"})," ","Env√≠o real"]})]})]})]})]}),e.jsxs(c,{children:[e.jsx(d,{children:e.jsx(o,{children:"Informaci√≥n sobre las Pruebas"})}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center",children:[e.jsx(h,{className:"h-4 w-4 mr-2 text-blue-600"}),"Email de Prueba"]}),e.jsxs("ul",{className:"space-y-1 text-gray-600",children:[e.jsx("li",{children:"‚Ä¢ Se env√≠a usando la configuraci√≥n actual de email"}),e.jsx("li",{children:"‚Ä¢ Respeta los l√≠mites de throttling (5 emails/hora)"}),e.jsx("li",{children:"‚Ä¢ Crea una notificaci√≥n real en el sistema"}),e.jsx("li",{children:"‚Ä¢ Incluye informaci√≥n del remitente y timestamp"}),e.jsx("li",{children:"‚Ä¢ Usa el template HTML profesional"})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center",children:[e.jsx(M,{className:"h-4 w-4 mr-2 text-green-600"}),"SMS de Prueba"]}),e.jsxs("ul",{className:"space-y-1 text-gray-600",children:[e.jsx("li",{children:"‚Ä¢ Solo funciona en ambiente de producci√≥n"}),e.jsx("li",{children:"‚Ä¢ En desarrollo se simula el env√≠o"}),e.jsx("li",{children:"‚Ä¢ Respeta los l√≠mites de throttling (3 SMS/d√≠a)"}),e.jsx("li",{children:"‚Ä¢ Formatea autom√°ticamente el n√∫mero"}),e.jsx("li",{children:"‚Ä¢ Requiere configuraci√≥n del proveedor SMS"})]})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Resoluci√≥n de Problemas"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("p",{children:"‚Ä¢ Si el email falla, verifica la configuraci√≥n SMTP en el archivo .env"}),e.jsx("p",{children:"‚Ä¢ Si el SMS falla, revisa la API key del proveedor en config/services.php"}),e.jsx("p",{children:"‚Ä¢ Los l√≠mites de throttling pueden impedir m√∫ltiples env√≠os seguidos"}),e.jsx("p",{children:"‚Ä¢ Revisa los logs de Laravel para m√°s detalles sobre errores"})]})]})]})]})]})]})}export{Pe as default};
