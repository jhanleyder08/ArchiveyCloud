import{c as j,r as b,u as _,j as e,H as C}from"./app-CHnw1Otu.js";import{A as N}from"./app-layout-CuT-d-Kj.js";import{B as l}from"./button-C-xLxQaq.js";import{I as o}from"./input-D7OlGi1Y.js";import{L as c}from"./label-B876V5Ll.js";import{F as y,A as h,T as D}from"./app-sidebar-layout-qJskkUB1.js";import{S,a as F,b as E,c as I,d as A}from"./select-keRbUdf9.js";import{C as w,a as T,b as V,c as L}from"./card-DozfcExK.js";import{A as B,a as $}from"./alert-D0_C0t6M.js";import{I as q}from"./info-DGewC-mb.js";import{S as H}from"./save-6AV1N9fU.js";/* empty css            */import"./index-DMlO92Da.js";import"./index-B1IB6se-.js";import"./Combination-P4biBln1.js";import"./index-x0w82Q_8.js";import"./x-5VENWWoD.js";import"./app-logo-icon-CB3NeKDA.js";import"./user-C7w9hXZD.js";import"./mail-CPZm1UwU.js";import"./users-D7r2jdsx.js";import"./folder-fojkbMEc.js";import"./triangle-alert-DdrSZh6I.js";import"./search-CjJY0d2n.js";import"./BrandingProvider-BC7T-tLl.js";import"./index-8FZHIa88.js";import"./check-B8h8cfZl.js";function he({ccd:s,opciones:x}){const n=j({only:["ccd"]}),[m,d]=b.useState(!1),{data:r,setData:t,processing:p,errors:i}=_({codigo:s.codigo||"",nombre:s.nombre||"",descripcion:s.descripcion||"",version:s.version||"1.0",estado:s.estado||"borrador",fecha_vigencia_inicio:s.fecha_vigencia_inicio?s.fecha_vigencia_inicio.split("T")[0]:"",fecha_vigencia_fin:s.fecha_vigencia_fin?s.fecha_vigencia_fin.split("T")[0]:""}),v=[{title:"Inicio",href:"/dashboard"},{title:"Administración",href:"/admin"},{title:"CCD",href:"/admin/ccd"},{title:`Editar: ${s.codigo}`,href:`/admin/ccd/${s.id}/edit`}],f=a=>{a.preventDefault(),d(!0),n.update(`/admin/ccd/${s.id}`,r,{successMessage:"Cuadro de Clasificación Documental actualizado exitosamente",errorMessage:"Error al actualizar el CCD. Revisa los campos marcados.",onSuccess:()=>{d(!1),n.visit("/admin/ccd")},onError:u=>{d(!1),console.error("Errores de validación:",u)}})},g=x?.estados||[{value:"borrador",label:"Borrador"},{value:"activo",label:"Activo"},{value:"inactivo",label:"Inactivo"},{value:"archivado",label:"Archivado"}];return e.jsxs(N,{breadcrumbs:v,children:[e.jsx(C,{title:`Editar CCD: ${s.codigo}`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(y,{className:"h-6 w-6 text-[#2a3d83]"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Editar Cuadro de Clasificación Documental"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Código: ",e.jsx("span",{className:"font-medium",children:s.codigo})]})]})]}),e.jsxs(l,{type:"button",variant:"outline",onClick:()=>n.visit("/admin/ccd"),className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-4 w-4"}),"Volver"]})]}),e.jsxs(B,{children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx($,{children:"Modificando información del Cuadro de Clasificación Documental. Los cambios se aplicarán inmediatamente."})]}),e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs(w,{children:[e.jsx(T,{children:e.jsx(V,{children:"Información Básica"})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"codigo",children:"Código *"}),e.jsx(o,{id:"codigo",type:"text",value:r.codigo,onChange:a=>t("codigo",a.target.value),placeholder:"Ej: CCD-001",className:i.codigo?"border-red-500":"",required:!0}),i.codigo&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:i.codigo})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"version",children:"Versión *"}),e.jsx(o,{id:"version",type:"text",value:r.version,onChange:a=>t("version",a.target.value),placeholder:"Ej: 1.0",className:i.version?"border-red-500":"",required:!0}),i.version&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:i.version})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"nombre",children:"Nombre *"}),e.jsx(o,{id:"nombre",type:"text",value:r.nombre,onChange:a=>t("nombre",a.target.value),placeholder:"Nombre del CCD",className:i.nombre?"border-red-500":"",required:!0}),i.nombre&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:i.nombre})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"descripcion",children:"Descripción"}),e.jsx(D,{id:"descripcion",value:r.descripcion,onChange:a=>t("descripcion",a.target.value),placeholder:"Descripción del CCD",className:i.descripcion?"border-red-500":"",rows:3}),i.descripcion&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:i.descripcion})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"estado",children:"Estado *"}),e.jsxs(S,{value:r.estado,onValueChange:a=>t("estado",a),children:[e.jsx(F,{id:"estado",className:i.estado?"border-red-500":"",children:e.jsx(E,{placeholder:"Seleccionar estado"})}),e.jsx(I,{children:g.map(a=>e.jsx(A,{value:a.value,children:a.label},a.value))})]}),i.estado&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:i.estado})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"fecha_vigencia_inicio",children:"Fecha Vigencia Inicio"}),e.jsx(o,{id:"fecha_vigencia_inicio",type:"date",value:r.fecha_vigencia_inicio,onChange:a=>t("fecha_vigencia_inicio",a.target.value),className:i.fecha_vigencia_inicio?"border-red-500":""}),i.fecha_vigencia_inicio&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:i.fecha_vigencia_inicio})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"fecha_vigencia_fin",children:"Fecha Vigencia Fin"}),e.jsx(o,{id:"fecha_vigencia_fin",type:"date",value:r.fecha_vigencia_fin,onChange:a=>t("fecha_vigencia_fin",a.target.value),className:i.fecha_vigencia_fin?"border-red-500":""}),i.fecha_vigencia_fin&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:i.fecha_vigencia_fin})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(l,{type:"button",variant:"outline",onClick:()=>n.visit("/admin/ccd"),children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Cancelar"]}),e.jsxs(l,{type:"submit",disabled:p||m,className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),m?"Guardando...":"Guardar Cambios"]})]})]})]})]})}export{he as default};
