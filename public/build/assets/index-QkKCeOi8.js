import{r as M,j as e,H as V,L as w,b as m}from"./app-DHUDg1FP.js";import{A as z}from"./app-layout-Bp344BQS.js";import{B as t}from"./button-BVFf8C52.js";import{L as g}from"./label-kdrV46vC.js";import{C as l,c as d,a as T,b as S}from"./card-DTevuzAv.js";import{B as A}from"./badge-HJvt83sp.js";import{S as N,a as v,b as y,c as b,d as r}from"./select-XBfjIJc8.js";import{T as K,a as O,b as _,c,d as U,e as o}from"./table-S5CWG4Ex.js";import{C as h}from"./circle-check-big-ZlFS7gI5.js";import{S as F,B as X,j as f}from"./app-sidebar-layout-9OOmJlRt.js";import{B as j}from"./bell-DqDMKgg6.js";import{T as L}from"./triangle-alert-DwjD4EIS.js";import{F as D}from"./filter-nrnU2b0D.js";import{S as $}from"./search-BF1N_A4V.js";import{E as G}from"./eye-B11B9mFl.js";import{U as J}from"./user-BSeM7qvB.js";import{C as k}from"./folder-Cy6t7yXX.js";import{C as E}from"./calendar-DkwIaGyd.js";/* empty css            */import"./index-CTeQcmgu.js";import"./index-CbHzO7Gh.js";import"./Combination-DOImp98s.js";import"./index-BVW45oqa.js";import"./check-DkAroBwY.js";import"./index-CZ-V7pi7.js";import"./x-CpToe7dr.js";import"./index-BA-27lZl.js";import"./app-logo-icon-DsOMsETx.js";import"./input-eku7kcvS.js";import"./users-ClmAyYek.js";const Q={baja:"bg-blue-100 text-blue-800 border-blue-200",media:"bg-yellow-100 text-yellow-800 border-yellow-200",alta:"bg-orange-100 text-orange-800 border-orange-200",critica:"bg-red-100 text-red-800 border-red-200"},W={pendiente:"bg-gray-100 text-gray-800 border-gray-200",leida:"bg-green-100 text-green-800 border-green-200",archivada:"bg-gray-100 text-gray-600 border-gray-200"},Y={"calendar-x":E,"calendar-warning":E,"clock-x":k,"clock-warning":k,archive:f,"check-circle":h,"file-plus":f,"user-plus":J,settings:F,"shield-alert":L,bell:j};function ke({notificaciones:p,estadisticas:n,filtros:u}){const[a,x]=M.useState({estado:u.estado||"todos",tipo:u.tipo||"todos",prioridad:u.prioridad||"todos"}),P=()=>{const s={estado:a.estado==="todos"?"":a.estado,tipo:a.tipo==="todos"?"":a.tipo,prioridad:a.prioridad==="todos"?"":a.prioridad};m.get(route("admin.notificaciones.index"),s,{preserveState:!0,preserveScroll:!0})},B=()=>{x({estado:"todos",tipo:"todos",prioridad:"todos"}),m.visit(route("admin.notificaciones.index"))},H=async s=>{try{await fetch(route("admin.notificaciones.marcar-leida",s),{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}}),m.reload({preserveScroll:!0})}catch(i){console.error("Error al marcar como leída:",i)}},I=async()=>{try{await fetch(route("admin.notificaciones.marcar-todas-leidas"),{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}}),m.reload()}catch(s){console.error("Error al marcar todas como leídas:",s)}},R=async s=>{try{await fetch(route("admin.notificaciones.archivar",s),{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}}),m.reload({preserveScroll:!0})}catch(i){console.error("Error al archivar:",i)}},C=s=>new Date(s).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),q=s=>Y[s]||j;return e.jsxs(z,{children:[e.jsx(V,{title:"Notificaciones"}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"Centro de Notificaciones"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gestiona tus notificaciones y alertas del sistema"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[n.pendientes>0&&e.jsxs(t,{onClick:I,variant:"outline",children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Marcar todas como leídas"]}),e.jsx(t,{variant:"outline",asChild:!0,children:e.jsxs(w,{href:route("admin.notificaciones.admin"),children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Panel Admin"]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(l,{children:e.jsx(d,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-100 rounded-lg",children:e.jsx(j,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.total})]})]})})}),e.jsx(l,{children:e.jsx(d,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-yellow-100 rounded-lg",children:e.jsx(X,{className:"h-6 w-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pendientes"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:n.pendientes})]})]})})}),e.jsx(l,{children:e.jsx(d,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-green-100 rounded-lg",children:e.jsx(h,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Leídas"}),e.jsx("p",{className:"text-2xl font-bold text-green-700",children:n.leidas})]})]})})}),e.jsx(l,{children:e.jsx(d,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 rounded-lg",children:e.jsx(L,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Críticas"}),e.jsx("p",{className:"text-2xl font-bold text-red-700",children:n.criticas})]})]})})})]}),e.jsxs(l,{children:[e.jsx(T,{children:e.jsxs(S,{className:"flex items-center space-x-2",children:[e.jsx(D,{className:"h-5 w-5"}),e.jsx("span",{children:"Filtros"})]})}),e.jsxs(d,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"Estado"}),e.jsxs(N,{value:a.estado,onValueChange:s=>x({...a,estado:s}),children:[e.jsx(v,{children:e.jsx(y,{})}),e.jsxs(b,{children:[e.jsx(r,{value:"todos",children:"Todos los estados"}),e.jsx(r,{value:"pendiente",children:"Pendientes"}),e.jsx(r,{value:"leida",children:"Leídas"}),e.jsx(r,{value:"archivada",children:"Archivadas"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"Tipo"}),e.jsxs(N,{value:a.tipo,onValueChange:s=>x({...a,tipo:s}),children:[e.jsx(v,{children:e.jsx(y,{})}),e.jsxs(b,{children:[e.jsx(r,{value:"todos",children:"Todos los tipos"}),e.jsx(r,{value:"expediente_vencido",children:"Expedientes vencidos"}),e.jsx(r,{value:"expediente_proximo_vencer",children:"Expedientes próximos"}),e.jsx(r,{value:"prestamo_vencido",children:"Préstamos vencidos"}),e.jsx(r,{value:"prestamo_proximo_vencer",children:"Préstamos próximos"}),e.jsx(r,{value:"disposicion_pendiente",children:"Disposiciones pendientes"}),e.jsx(r,{value:"sistema",children:"Sistema"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"Prioridad"}),e.jsxs(N,{value:a.prioridad,onValueChange:s=>x({...a,prioridad:s}),children:[e.jsx(v,{children:e.jsx(y,{})}),e.jsxs(b,{children:[e.jsx(r,{value:"todos",children:"Todas las prioridades"}),e.jsx(r,{value:"baja",children:"Baja"}),e.jsx(r,{value:"media",children:"Media"}),e.jsx(r,{value:"alta",children:"Alta"}),e.jsx(r,{value:"critica",children:"Crítica"})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[e.jsxs(t,{onClick:P,children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Aplicar Filtros"]}),e.jsx(t,{variant:"outline",onClick:B,children:"Limpiar"})]})]})]}),e.jsxs(l,{children:[e.jsx(T,{children:e.jsxs(S,{children:["Mis Notificaciones (",p.total,")"]})}),e.jsx(d,{children:p.data.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(K,{children:[e.jsx(O,{children:e.jsxs(_,{children:[e.jsx(c,{className:"w-12"}),e.jsx(c,{children:"Notificación"}),e.jsx(c,{children:"Prioridad"}),e.jsx(c,{children:"Estado"}),e.jsx(c,{children:"Fecha"}),e.jsx(c,{className:"text-right",children:"Acciones"})]})}),e.jsx(U,{children:p.data.map(s=>{const i=q(s.icono);return e.jsxs(_,{className:s.estado==="pendiente"?"bg-blue-50":"",children:[e.jsx(o,{children:e.jsx("div",{className:`p-2 rounded-lg ${s.prioridad==="critica"?"bg-red-100":s.prioridad==="alta"?"bg-orange-100":s.prioridad==="media"?"bg-yellow-100":"bg-blue-100"}`,children:e.jsx(i,{className:`h-4 w-4 ${s.color_prioridad}`})})}),e.jsx(o,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.titulo}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s.mensaje}),s.creado_por&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Por: ",s.creado_por.name]})]})}),e.jsx(o,{children:e.jsx(A,{variant:"outline",className:Q[s.prioridad],children:s.prioridad.charAt(0).toUpperCase()+s.prioridad.slice(1)})}),e.jsx(o,{children:e.jsx(A,{variant:"outline",className:W[s.estado],children:s.estado==="pendiente"?"Pendiente":s.estado==="leida"?"Leída":"Archivada"})}),e.jsx(o,{children:e.jsxs("div",{className:"text-sm",children:[C(s.created_at),s.leida_en&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Leída: ",C(s.leida_en)]})]})}),e.jsx(o,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[s.accion_url&&e.jsx(t,{variant:"outline",size:"sm",asChild:!0,children:e.jsx(w,{href:s.accion_url,children:e.jsx(G,{className:"h-4 w-4"})})}),s.estado==="pendiente"&&e.jsx(t,{variant:"outline",size:"sm",onClick:()=>H(s.id),children:e.jsx(h,{className:"h-4 w-4"})}),e.jsx(t,{variant:"outline",size:"sm",onClick:()=>R(s.id),children:e.jsx(f,{className:"h-4 w-4"})})]})})]},s.id)})})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(j,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay notificaciones"}),e.jsx("p",{className:"text-gray-500",children:"No tienes notificaciones que coincidan con los criterios seleccionados."})]})})]})]})]})}export{ke as default};
