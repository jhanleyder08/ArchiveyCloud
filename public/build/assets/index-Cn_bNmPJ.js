import{r as h,a as u,j as e,H as ne}from"./app-jALHNhDI.js";import{t as V,A as te,f as J,D as A,a as de,b as I,c as O,d as k,e as q,T as M,g as $,h as le,i as D,j as C,k as T}from"./app-layout-COoWnlqV.js";import{B as g}from"./app-logo-icon-Cv9IqzPW.js";import{L as s,I as l}from"./label-Jh6GhPL8.js";import{S as B,a as L,b as P,c as z,d as v}from"./select-Z1OOtqlk.js";import{B as K}from"./badge--7R3qYcc.js";import{P as oe,S as xe}from"./search-DsAvJOfB.js";import{T as Q,a as W}from"./toggle-right-DwPqwCoS.js";import{S as X,T as he}from"./trash-2-bzSgwv-U.js";import{C as me}from"./circle-check-big-Cix5ik-T.js";import{E as ge}from"./eye-CQpIwrL1.js";import{C as pe}from"./copy-vgqyJuZj.js";/* empty css            */import"./index-B-eHe9w-.js";import"./index-DWl9Ae9w.js";import"./index-Bw4EXyTQ.js";import"./check-CYQTRUDz.js";const p={success:d=>{V.success(d,{style:{background:"#10b981",color:"#ffffff",border:"none"}})},error:d=>{V.error(d,{style:{background:"#ef4444",color:"#ffffff",border:"none"}})},info:d=>{V.info(d,{style:{background:"#3b82f6",color:"#ffffff",border:"none"}})},warning:d=>{V.warning(d,{style:{background:"#f59e0b",color:"#ffffff",border:"none"}})}};function Ae({trds:d,stats:S,flash:j}){const[f,Y]=h.useState(""),[N,Z]=h.useState(""),[y,ee]=h.useState(""),[F,E]=h.useState(null),[ae,G]=h.useState(!1),[t,w]=h.useState(null),[r,H]=h.useState(null);h.useEffect(()=>{j?.success&&p.success(j.success),j?.error&&p.error(j.error)},[j]);const[c,x]=h.useState({codigo:"",nombre:"",descripcion:"",entidad:"",dependencia:"",fecha_aprobacion:"",fecha_vigencia_inicio:"",fecha_vigencia_fin:"",observaciones_generales:"",version:1,estado:"borrador"}),[n,m]=h.useState({codigo:"",nombre:"",descripcion:"",entidad:"",dependencia:"",fecha_aprobacion:"",fecha_vigencia_inicio:"",fecha_vigencia_fin:"",observaciones_generales:"",version:1,estado:"borrador"});h.useEffect(()=>{t&&m({codigo:t.codigo||"",nombre:t.nombre||"",descripcion:t.descripcion||"",entidad:t.entidad||"",dependencia:t.dependencia||"",fecha_aprobacion:t.fecha_aprobacion?new Date(t.fecha_aprobacion).toISOString().split("T")[0]:"",fecha_vigencia_inicio:t.fecha_vigencia_inicio?new Date(t.fecha_vigencia_inicio).toISOString().split("T")[0]:"",fecha_vigencia_fin:t.fecha_vigencia_fin?new Date(t.fecha_vigencia_fin).toISOString().split("T")[0]:"",observaciones_generales:t.observaciones_generales||"",version:t.version||1,estado:t.estado||"borrador"})},[t]);const se=[{title:"Dashboard",href:"/admin"},{title:"Tablas de Retención Documental",href:"/admin/trd"}],R={borrador:"Borrador",revision:"En Revisión",aprobada:"Aprobada",vigente:"Vigente",historica:"Histórica"};h.useEffect(()=>{const a=setTimeout(()=>{if(f!==""||N!==""||y!==""){const i=new URLSearchParams;f&&i.append("search",f),N&&i.append("estado",N),y&&i.append("vigencia",y),u.visit(`/admin/trd?${i.toString()}`,{preserveState:!0,preserveScroll:!0,replace:!0})}},500);return()=>clearTimeout(a)},[f,N,y]);const ie=a=>{u.delete(`/admin/trd/${a.id}`,{onFinish:()=>E(null)})},re=a=>{if(a.estado==="borrador"){p.error("No se puede activar la vigencia de una TRD en estado Borrador. Debe estar Aprobada primero.");return}if(a.estado==="revision"){p.error("No se puede activar la vigencia de una TRD en Revisión. Debe estar Aprobada primero.");return}u.patch(`/admin/trd/${a.id}/vigencia`,{},{preserveScroll:!0,onSuccess:()=>{p.success(a.estado==="vigente"?"Vigencia desactivada exitosamente":"Vigencia activada exitosamente")},onError:i=>{const o=Object.values(i)[0];p.error(o||"Error al cambiar el estado de vigencia")}})},ce=a=>{u.post(`/admin/trd/${a.id}/duplicate`)},b=a=>new Date(a).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),U=a=>{const i=a==="vigente"?"aprobada":a,o=i==="aprobada"?"default":"secondary",_=R[i]||i;return e.jsx(K,{variant:o,children:_})};return e.jsxs(te,{breadcrumbs:se,children:[e.jsx(ne,{title:"Gestión de Tablas de Retención Documental"}),e.jsxs("div",{className:"space-y-6",children:[j?.success&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:j.success}),j?.error&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:j.error}),e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-6 w-6 text-[#2a3d83]"}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Gestión de Tablas de Retención Documental"})]}),e.jsxs(A,{open:ae,onOpenChange:G,children:[e.jsx(de,{asChild:!0,children:e.jsxs(g,{className:"flex items-center gap-2 px-4 py-2 bg-[#2a3d83] text-white rounded-lg hover:bg-[#1e2b5f] transition-colors",children:[e.jsx(oe,{className:"h-4 w-4"}),"Nueva TRD"]})}),e.jsxs(I,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-scroll [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:[e.jsxs(O,{children:[e.jsx(k,{className:"text-xl font-semibold text-gray-900",children:"Crear Nueva TRD"}),e.jsx(q,{className:"text-sm text-gray-600",children:"Complete los siguientes datos para crear una nueva Tabla de Retención Documental."})]}),e.jsxs("form",{onSubmit:a=>{a.preventDefault(),u.post("/admin/trd",c,{onSuccess:()=>{G(!1),x({codigo:"",nombre:"",descripcion:"",entidad:"",dependencia:"",fecha_aprobacion:"",fecha_vigencia_inicio:"",fecha_vigencia_fin:"",observaciones_generales:"",version:1,estado:"borrador"}),p.success("TRD creada exitosamente")},onError:i=>{Object.keys(i).forEach(o=>{const _=Array.isArray(i[o])?i[o][0]:i[o];p.error(`Error en ${o}: ${_}`)})}})},className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"create-codigo",children:"Código *"}),e.jsx(l,{id:"create-codigo",type:"text",value:c.codigo,onChange:a=>x({...c,codigo:a.target.value}),placeholder:"Ej: TRD-001",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"create-entidad",children:"Entidad *"}),e.jsx(l,{id:"create-entidad",type:"text",value:c.entidad,onChange:a=>x({...c,entidad:a.target.value}),placeholder:"Nombre de la entidad",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"create-nombre",children:"Nombre *"}),e.jsx(l,{id:"create-nombre",type:"text",value:c.nombre,onChange:a=>x({...c,nombre:a.target.value}),placeholder:"Nombre de la TRD",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"create-descripcion",children:"Descripción *"}),e.jsx(M,{id:"create-descripcion",value:c.descripcion,onChange:a=>x({...c,descripcion:a.target.value}),placeholder:"Descripción de la TRD",rows:3,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"create-dependencia",children:"Dependencia"}),e.jsx(l,{id:"create-dependencia",type:"text",value:c.dependencia,onChange:a=>x({...c,dependencia:a.target.value}),placeholder:"Dependencia responsable"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"create-fecha-aprobacion",children:"Fecha de Aprobación *"}),e.jsx(l,{id:"create-fecha-aprobacion",type:"date",value:c.fecha_aprobacion,onChange:a=>x({...c,fecha_aprobacion:a.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"create-fecha-vigencia-inicio",children:"Fecha Vigencia Inicio *"}),e.jsx(l,{id:"create-fecha-vigencia-inicio",type:"date",value:c.fecha_vigencia_inicio,onChange:a=>x({...c,fecha_vigencia_inicio:a.target.value}),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"create-fecha-vigencia-fin",children:"Fecha Vigencia Fin"}),e.jsx(l,{id:"create-fecha-vigencia-fin",type:"date",value:c.fecha_vigencia_fin,onChange:a=>x({...c,fecha_vigencia_fin:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"create-observaciones",children:"Observaciones Generales"}),e.jsx(M,{id:"create-observaciones",value:c.observaciones_generales,onChange:a=>x({...c,observaciones_generales:a.target.value}),placeholder:"Observaciones adicionales",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"create-version",children:"Versión *"}),e.jsx(l,{id:"create-version",type:"number",min:"1",value:c.version,onChange:a=>x({...c,version:parseInt(a.target.value)||1}),placeholder:"1",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"create-estado",children:"Estado *"}),e.jsxs(B,{value:c.estado,onValueChange:a=>x({...c,estado:a}),children:[e.jsx(L,{children:e.jsx(P,{placeholder:"Seleccionar estado"})}),e.jsx(z,{children:Object.entries(R).filter(([a])=>a!=="vigente").map(([a,i])=>e.jsx(v,{value:a,children:i},a))})]})]})]}),e.jsxs($,{children:[e.jsx(g,{type:"button",variant:"outline",onClick:()=>G(!1),children:"Cancelar"}),e.jsx(g,{type:"submit",className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",children:"Crear TRD"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total TRDs"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:S.total}),e.jsx("p",{className:"text-xs text-gray-400",children:"Tablas registradas"})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(J,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Vigentes"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:S.vigentes}),e.jsx("p",{className:"text-xs text-gray-400",children:"En funcionamiento"})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(Q,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Borradores"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:S.borradores}),e.jsx("p",{className:"text-xs text-gray-400",children:"En elaboración"})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(X,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Aprobadas"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:S.aprobadas}),e.jsx("p",{className:"text-xs text-gray-400",children:"Listas para uso"})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(me,{className:"h-6 w-6 text-[#2a3d83]"})})]})})]}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4 w-full sm:w-auto",children:e.jsxs("div",{className:"relative flex-1 sm:w-80",children:[e.jsx(xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(l,{type:"text",value:f,onChange:a=>Y(a.target.value),placeholder:"Buscar TRDs...",className:"pl-10"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(B,{value:N||"all",onValueChange:a=>Z(a==="all"?"":a),children:[e.jsx(L,{className:"w-[180px]",children:e.jsx(P,{placeholder:"Todos los estados"})}),e.jsxs(z,{children:[e.jsx(v,{value:"all",children:"Todos los estados"}),Object.entries(R).map(([a,i])=>e.jsx(v,{value:a,children:i},a))]})]}),e.jsxs(B,{value:y||"all",onValueChange:a=>ee(a==="all"?"":a),children:[e.jsx(L,{className:"w-[180px]",children:e.jsx(P,{placeholder:"Todas las vigencias"})}),e.jsxs(z,{children:[e.jsx(v,{value:"all",children:"Todas las vigencias"}),e.jsx(v,{value:"true",children:"Vigentes"}),e.jsx(v,{value:"false",children:"No vigentes"})]})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg border overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"TRD"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Estado"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Vigencia"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Series"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Actualización"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:d.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"py-8 px-6 text-center text-gray-500",children:"No se encontraron TRDs."})}):d.data.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:a.nombre}),e.jsxs("div",{className:"text-sm text-gray-500",children:[a.codigo," • v",a.version]}),e.jsx("div",{className:"text-xs text-gray-400",children:a.identificador_unico})]})}),e.jsx("td",{className:"py-4 px-6",children:U(a.estado)}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[a.vigente?e.jsx(Q,{className:"h-5 w-5 text-green-600"}):e.jsx(W,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:`text-sm font-medium ${a.vigente?"text-green-600":"text-gray-500"}`,children:a.vigente?"Vigente":"Inactiva"})]})}),e.jsx("td",{className:"py-4 px-6 text-gray-600",children:a.series_count||0}),e.jsx("td",{className:"py-4 px-6 text-gray-600",children:b(a.updated_at)}),e.jsx("td",{className:"py-4 px-6",children:e.jsx(le,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(D,{children:[e.jsx(C,{asChild:!0,children:e.jsx("button",{onClick:()=>H(a),className:"p-2 rounded-md text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50 transition-colors",children:e.jsx(ge,{className:"h-4 w-4"})})}),e.jsx(T,{children:e.jsx("p",{children:"Ver detalles"})})]}),e.jsxs(D,{children:[e.jsx(C,{asChild:!0,children:e.jsx("button",{onClick:()=>w(a),className:"p-2 rounded-md text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50 transition-colors",children:e.jsx(X,{className:"h-4 w-4"})})}),e.jsx(T,{children:e.jsx("p",{children:"Editar TRD"})})]}),e.jsxs(D,{children:[e.jsx(C,{asChild:!0,children:e.jsx("button",{onClick:()=>ce(a),className:"p-2 rounded-md text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50 transition-colors",children:e.jsx(pe,{className:"h-4 w-4"})})}),e.jsx(T,{children:e.jsx("p",{children:"Duplicar TRD"})})]}),e.jsxs(D,{children:[e.jsx(C,{asChild:!0,children:e.jsx("button",{onClick:()=>re(a),className:`p-2 rounded-md transition-colors ${a.estado==="vigente"?"text-orange-600 hover:text-orange-800 hover:bg-orange-50":"text-green-600 hover:text-green-800 hover:bg-green-50"}`,children:a.estado==="vigente"?e.jsx(W,{className:"h-4 w-4"}):e.jsx(Q,{className:"h-4 w-4"})})}),e.jsx(T,{children:e.jsx("p",{children:a.estado==="vigente"?"Desactivar vigencia":"Activar vigencia"})})]}),e.jsxs(D,{children:[e.jsx(C,{asChild:!0,children:e.jsx("button",{onClick:()=>E(a),className:"p-2 rounded-md text-red-600 hover:text-red-800 hover:bg-red-50 transition-colors",children:e.jsx(he,{className:"h-4 w-4"})})}),e.jsx(T,{children:e.jsx("p",{children:"Eliminar TRD"})})]})]})})})]},a.id))})]})}),d.total>d.per_page&&e.jsx("div",{className:"px-6 py-4 border-t bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando ",d.from," a ",d.to," de ",d.total," TRDs"]}),e.jsx("div",{className:"flex items-center gap-2",children:d.links.map((a,i)=>e.jsx(g,{variant:a.active?"default":"outline",size:"sm",onClick:()=>a.url&&u.visit(a.url),disabled:!a.url,dangerouslySetInnerHTML:{__html:a.label},className:a.active?"bg-[#2a3d83] hover:bg-[#1e2b5f]":""},i))})]})})]}),e.jsx(A,{open:!!F,onOpenChange:a=>{a||E(null)},children:e.jsxs(I,{children:[e.jsxs(O,{children:[e.jsx(k,{children:"Confirmar Eliminación"}),e.jsxs(q,{children:['¿Estás seguro de que deseas eliminar la TRD "',F?.nombre,'"? Esta acción no se puede deshacer.']})]}),e.jsxs($,{children:[e.jsx(g,{type:"button",variant:"outline",onClick:()=>E(null),children:"Cancelar"}),e.jsx(g,{type:"button",variant:"destructive",onClick:()=>F&&ie(F),children:"Eliminar"})]})]})}),e.jsx(A,{open:!!t,onOpenChange:a=>{a||w(null)},children:e.jsxs(I,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-scroll [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:[e.jsxs(O,{children:[e.jsx(k,{className:"text-[#2a3d83]",children:"Editar TRD"}),e.jsx(q,{children:"Modifica los datos de la Tabla de Retención Documental"})]}),e.jsxs("form",{onSubmit:a=>{a.preventDefault(),t&&u.put(`/admin/trd/${t.id}`,n,{onSuccess:()=>{w(null),p.success("TRD actualizada exitosamente")},onError:i=>{Object.keys(i).forEach(o=>{const _=Array.isArray(i[o])?i[o][0]:i[o];p.error(`Error en ${o}: ${_}`)})}})},className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"edit-codigo",children:"Código *"}),e.jsx(l,{id:"edit-codigo",type:"text",value:n.codigo,onChange:a=>m({...n,codigo:a.target.value}),placeholder:"Ej: TRD-001",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"edit-entidad",children:"Entidad *"}),e.jsx(l,{id:"edit-entidad",type:"text",value:n.entidad,onChange:a=>m({...n,entidad:a.target.value}),placeholder:"Nombre de la entidad",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"edit-nombre",children:"Nombre *"}),e.jsx(l,{id:"edit-nombre",type:"text",value:n.nombre,onChange:a=>m({...n,nombre:a.target.value}),placeholder:"Nombre de la TRD",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"edit-descripcion",children:"Descripción *"}),e.jsx(M,{id:"edit-descripcion",value:n.descripcion,onChange:a=>m({...n,descripcion:a.target.value}),placeholder:"Descripción de la TRD",rows:3,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"edit-dependencia",children:"Dependencia"}),e.jsx(l,{id:"edit-dependencia",type:"text",value:n.dependencia,onChange:a=>m({...n,dependencia:a.target.value}),placeholder:"Dependencia responsable"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"edit-fecha-aprobacion",children:"Fecha de Aprobación *"}),e.jsx(l,{id:"edit-fecha-aprobacion",type:"date",value:n.fecha_aprobacion,onChange:a=>m({...n,fecha_aprobacion:a.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"edit-fecha-vigencia-inicio",children:"Fecha Vigencia Inicio *"}),e.jsx(l,{id:"edit-fecha-vigencia-inicio",type:"date",value:n.fecha_vigencia_inicio,onChange:a=>m({...n,fecha_vigencia_inicio:a.target.value}),required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"edit-fecha-vigencia-fin",children:"Fecha Vigencia Fin"}),e.jsx(l,{id:"edit-fecha-vigencia-fin",type:"date",value:n.fecha_vigencia_fin,onChange:a=>m({...n,fecha_vigencia_fin:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"edit-estado",children:"Estado *"}),e.jsxs(B,{value:n.estado,onValueChange:a=>m({...n,estado:a}),children:[e.jsx(L,{children:e.jsx(P,{placeholder:"Seleccionar estado"})}),e.jsx(z,{children:Object.entries(R).filter(([a])=>a!=="vigente").map(([a,i])=>e.jsx(v,{value:a,children:i},a))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"edit-observaciones",children:"Observaciones Generales"}),e.jsx(M,{id:"edit-observaciones",value:n.observaciones_generales,onChange:a=>m({...n,observaciones_generales:a.target.value}),placeholder:"Observaciones adicionales",rows:2})]}),e.jsxs($,{children:[e.jsx(g,{type:"button",variant:"outline",onClick:()=>w(null),children:"Cancelar"}),e.jsx(g,{type:"submit",className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",children:"Actualizar TRD"})]})]})]})}),e.jsx(A,{open:!!r,onOpenChange:()=>H(null),children:e.jsxs(I,{className:"sm:max-w-[800px] max-h-[80vh] overflow-y-scroll [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:[e.jsxs(O,{children:[e.jsx(k,{className:"text-[#2a3d83]",children:"Detalles de TRD"}),e.jsx(q,{children:"Información completa de la Tabla de Retención Documental"})]}),r&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-[#2a3d83] mb-3",children:"Información Básica"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(s,{className:"font-medium text-gray-700",children:"Código"}),e.jsx("p",{className:"text-gray-900 bg-white p-2 rounded border",children:r.codigo})]}),e.jsxs("div",{children:[e.jsx(s,{className:"font-medium text-gray-700",children:"Estado"}),e.jsx("div",{className:"mt-1",children:U(r.estado)})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(s,{className:"font-medium text-gray-700",children:"Nombre"}),e.jsx("p",{className:"text-gray-900 bg-white p-2 rounded border",children:r.nombre})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(s,{className:"font-medium text-gray-700",children:"Descripción"}),e.jsx("p",{className:"text-gray-900 bg-white p-3 rounded border min-h-[60px]",children:r.descripcion})]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-[#2a3d83] mb-3",children:"Información Organizacional"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(s,{className:"font-medium text-gray-700",children:"Entidad"}),e.jsx("p",{className:"text-gray-900 bg-white p-2 rounded border",children:r.entidad})]}),e.jsxs("div",{children:[e.jsx(s,{className:"font-medium text-gray-700",children:"Dependencia"}),e.jsx("p",{className:"text-gray-900 bg-white p-2 rounded border",children:r.dependencia||"No especificada"})]})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-[#2a3d83] mb-3",children:"Versión y Vigencia"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(s,{className:"font-medium text-gray-700",children:"Versión"}),e.jsx("p",{className:"text-gray-900 bg-white p-2 rounded border font-semibold",children:r.version})]}),e.jsxs("div",{children:[e.jsx(s,{className:"font-medium text-gray-700",children:"Fecha Aprobación"}),e.jsx("p",{className:"text-gray-900 bg-white p-2 rounded border",children:b(r.fecha_aprobacion)})]}),e.jsxs("div",{children:[e.jsx(s,{className:"font-medium text-gray-700",children:"Estado Vigencia"}),e.jsx("div",{className:"mt-1",children:e.jsx(K,{variant:r.vigente?"default":"secondary",children:r.vigente?"Vigente":"No Vigente"})})]}),e.jsxs("div",{children:[e.jsx(s,{className:"font-medium text-gray-700",children:"Fecha Vigencia Inicio"}),e.jsx("p",{className:"text-gray-900 bg-white p-2 rounded border",children:b(r.fecha_vigencia_inicio)})]}),e.jsxs("div",{children:[e.jsx(s,{className:"font-medium text-gray-700",children:"Fecha Vigencia Fin"}),e.jsx("p",{className:"text-gray-900 bg-white p-2 rounded border",children:r.fecha_vigencia_fin?b(r.fecha_vigencia_fin):"No definida"})]}),e.jsxs("div",{children:[e.jsx(s,{className:"font-medium text-gray-700",children:"Series Documentales"}),e.jsx("p",{className:"text-gray-900 bg-white p-2 rounded border font-semibold",children:r.series_count||0})]})]})]}),r.observaciones_generales&&e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-[#2a3d83] mb-3",children:"Observaciones Generales"}),e.jsx("p",{className:"text-gray-900 bg-white p-3 rounded border whitespace-pre-wrap",children:r.observaciones_generales})]}),e.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-[#2a3d83] mb-3",children:"Información de Sistema"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(s,{className:"font-medium text-gray-700",children:"Identificador Único"}),e.jsx("p",{className:"text-gray-900 bg-white p-2 rounded border font-mono text-sm",children:r.identificador_unico||"No asignado"})]}),e.jsxs("div",{children:[e.jsx(s,{className:"font-medium text-gray-700",children:"Formato de Archivo"}),e.jsx("p",{className:"text-gray-900 bg-white p-2 rounded border",children:r.formato_archivo||"No especificado"})]}),e.jsxs("div",{children:[e.jsx(s,{className:"font-medium text-gray-700",children:"Fecha de Creación"}),e.jsx("p",{className:"text-gray-900 bg-white p-2 rounded border",children:b(r.created_at)})]}),e.jsxs("div",{children:[e.jsx(s,{className:"font-medium text-gray-700",children:"Última Modificación"}),e.jsx("p",{className:"text-gray-900 bg-white p-2 rounded border",children:b(r.updated_at)})]})]})]})]}),e.jsxs($,{children:[e.jsx(g,{type:"button",variant:"outline",onClick:()=>H(null),children:"Cerrar"}),e.jsx(g,{type:"button",onClick:()=>w(r),className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",children:"Editar TRD"})]})]})})]})]})}export{Ae as default};
