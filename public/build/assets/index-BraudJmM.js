import{u as V,j as e,H as k,L as p,a as y}from"./app-DrMHtwH1.js";import{A as B,l as j,C as H,a as g,g as I,U as q,m as U}from"./app-layout-COFKgQre.js";import{B as t}from"./app-logo-icon-DnuI3TUW.js";import{L as h,I as u}from"./label-ZEFSidbo.js";import{C as l,c as r,a as _,b as w,d as G}from"./card-w4aTBsTl.js";import{B as C}from"./badge-DRDxymkG.js";import{A as M,a as X}from"./alert-TDkGQitV.js";import{S as F,a as T,b as D,c as A,d as a}from"./select-C3PJf4bd.js";import{T as $,a as J,b as S,c as n,d as K,e as c}from"./table-BeSoxRg7.js";import{S as f}from"./search-BaI-auO9.js";import{C as L}from"./circle-check-big-BjFRaQ03.js";import{C as O}from"./circle-alert-sRdLjo9_.js";import{F as Q}from"./filter-DZX5WMzS.js";import{C as E}from"./calendar-ZXSvnWkq.js";import{E as W}from"./eye-DUtmnuxD.js";import{P as z}from"./plus-BMjvli-P.js";import{C as Y}from"./circle-x-D3XUK9Lp.js";/* empty css            */import"./index-BtFcMv-P.js";import"./index-CRop9Any.js";import"./index-Tj7VsbP3.js";import"./check-BaKQiqL_.js";const Z={pendiente:"bg-gray-100 text-gray-800 border-gray-200",en_revision:"bg-blue-100 text-blue-800 border-blue-200",aprobado:"bg-green-100 text-green-800 border-green-200",rechazado:"bg-red-100 text-red-800 border-red-200",ejecutado:"bg-purple-100 text-purple-800 border-purple-200",cancelado:"bg-gray-100 text-gray-600 border-gray-200"},ee={conservacion_permanente:"bg-emerald-100 text-emerald-800 border-emerald-200",eliminacion_controlada:"bg-red-100 text-red-800 border-red-200",transferencia_historica:"bg-blue-100 text-blue-800 border-blue-200",digitalizacion:"bg-indigo-100 text-indigo-800 border-indigo-200",microfilmacion:"bg-violet-100 text-violet-800 border-violet-200"},se={pendiente:e.jsx(H,{className:"h-4 w-4"}),en_revision:e.jsx(f,{className:"h-4 w-4"}),aprobado:e.jsx(L,{className:"h-4 w-4"}),rechazado:e.jsx(Y,{className:"h-4 w-4"}),ejecutado:e.jsx(j,{className:"h-4 w-4"}),cancelado:e.jsx(g,{className:"h-4 w-4"})};function Ce({disposiciones:o,estadisticas:d,proximasVencer:N,filtros:x}){const{data:i,setData:m,get:ae,processing:v}=V({tipo_disposicion:x.tipo_disposicion||"todos",estado:x.estado||"todos",fecha_inicio:x.fecha_inicio||"",fecha_fin:x.fecha_fin||"",responsable:x.responsable||""}),P=()=>{const s={...i,tipo_disposicion:i.tipo_disposicion==="todos"?"":i.tipo_disposicion,estado:i.estado==="todos"?"":i.estado};y.get(route("admin.disposiciones.index"),s,{preserveState:!0,preserveScroll:!0})},R=()=>{y.visit(route("admin.disposiciones.index"))},b=s=>new Date(s).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"});return e.jsxs(B,{title:"Disposiciones Finales",renderHeader:()=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"Sistema de Disposición Final"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gestión del ciclo de vida documental y disposiciones finales"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(t,{variant:"outline",asChild:!0,children:e.jsxs(p,{href:route("admin.disposiciones.reportes"),children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Reportes"]})}),e.jsx(t,{asChild:!0,children:e.jsxs(p,{href:route("admin.disposiciones.create"),children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Nueva Disposición"]})})]})]}),children:[e.jsx(k,{title:"Disposiciones Finales"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4",children:[e.jsx(l,{children:e.jsx(r,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-100 rounded-lg",children:e.jsx(j,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.total_disposiciones})]})]})})}),e.jsx(l,{children:e.jsx(r,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-yellow-100 rounded-lg",children:e.jsx(H,{className:"h-6 w-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pendientes"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:d.pendientes})]})]})})}),e.jsx(l,{children:e.jsx(r,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-100 rounded-lg",children:e.jsx(f,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"En Revisión"}),e.jsx("p",{className:"text-2xl font-bold text-blue-700",children:d.en_revision})]})]})})}),e.jsx(l,{children:e.jsx(r,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-green-100 rounded-lg",children:e.jsx(L,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Aprobadas"}),e.jsx("p",{className:"text-2xl font-bold text-green-700",children:d.aprobadas})]})]})})}),e.jsx(l,{children:e.jsx(r,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-purple-100 rounded-lg",children:e.jsx(j,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Ejecutadas"}),e.jsx("p",{className:"text-2xl font-bold text-purple-700",children:d.ejecutadas})]})]})})}),e.jsx(l,{children:e.jsx(r,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 rounded-lg",children:e.jsx(g,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Vencidas"}),e.jsx("p",{className:"text-2xl font-bold text-red-700",children:d.vencidas})]})]})})})]}),N.length>0&&e.jsxs(M,{className:"border-orange-200 bg-orange-50",children:[e.jsx(O,{className:"h-4 w-4 text-orange-600"}),e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("strong",{className:"text-orange-800",children:"Atención:"})," Hay ",N.length," disposiciones próximas a vencer o vencidas que requieren atención inmediata."]}),e.jsx(t,{size:"sm",variant:"outline",className:"text-orange-700 border-orange-300 hover:bg-orange-100",children:"Ver Detalles"})]})})]}),e.jsxs(l,{children:[e.jsxs(_,{children:[e.jsxs(w,{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"h-5 w-5"}),e.jsx("span",{children:"Filtros de Búsqueda"})]}),e.jsx(G,{children:"Filtra las disposiciones por tipo, estado, fechas o responsable"})]}),e.jsxs(r,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"tipo_disposicion",children:"Tipo de Disposición"}),e.jsxs(F,{value:i.tipo_disposicion,onValueChange:s=>m("tipo_disposicion",s),children:[e.jsx(T,{children:e.jsx(D,{placeholder:"Todos los tipos"})}),e.jsxs(A,{children:[e.jsx(a,{value:"todos",children:"Todos los tipos"}),e.jsx(a,{value:"conservacion_permanente",children:"Conservación Permanente"}),e.jsx(a,{value:"eliminacion_controlada",children:"Eliminación Controlada"}),e.jsx(a,{value:"transferencia_historica",children:"Transferencia Histórica"}),e.jsx(a,{value:"digitalizacion",children:"Digitalización"}),e.jsx(a,{value:"microfilmacion",children:"Microfilmación"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"estado",children:"Estado"}),e.jsxs(F,{value:i.estado,onValueChange:s=>m("estado",s),children:[e.jsx(T,{children:e.jsx(D,{placeholder:"Todos los estados"})}),e.jsxs(A,{children:[e.jsx(a,{value:"todos",children:"Todos los estados"}),e.jsx(a,{value:"pendiente",children:"Pendiente"}),e.jsx(a,{value:"en_revision",children:"En Revisión"}),e.jsx(a,{value:"aprobado",children:"Aprobado"}),e.jsx(a,{value:"rechazado",children:"Rechazado"}),e.jsx(a,{value:"ejecutado",children:"Ejecutado"}),e.jsx(a,{value:"cancelado",children:"Cancelado"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"fecha_inicio",children:"Fecha Inicio"}),e.jsx(u,{id:"fecha_inicio",type:"date",value:i.fecha_inicio,onChange:s=>m("fecha_inicio",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"fecha_fin",children:"Fecha Fin"}),e.jsx(u,{id:"fecha_fin",type:"date",value:i.fecha_fin,onChange:s=>m("fecha_fin",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"responsable",children:"Responsable"}),e.jsx(u,{id:"responsable",placeholder:"Nombre del responsable",value:i.responsable,onChange:s=>m("responsable",s.target.value)})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[e.jsxs(t,{onClick:P,disabled:v,children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),v?"Aplicando...":"Aplicar Filtros"]}),e.jsx(t,{variant:"outline",onClick:R,children:"Limpiar"})]})]})]}),e.jsxs(l,{children:[e.jsx(_,{children:e.jsxs(w,{className:"flex items-center justify-between",children:[e.jsxs("span",{children:["Disposiciones Finales (",o.total,")"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Página ",o.current_page," de ",o.last_page]})]})}),e.jsx(r,{children:o.data.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs($,{children:[e.jsx(J,{children:e.jsxs(S,{children:[e.jsx(n,{className:"w-16",children:"Estado"}),e.jsx(n,{children:"Item"}),e.jsx(n,{children:"Tipo Disposición"}),e.jsx(n,{children:"Responsable"}),e.jsx(n,{children:"Fecha Propuesta"}),e.jsx(n,{children:"Vencimiento"}),e.jsx(n,{className:"text-right",children:"Acciones"})]})}),e.jsx(K,{children:o.data.map(s=>e.jsxs(S,{className:s.esta_vencida?"bg-red-50":"",children:[e.jsx(c,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{variant:"outline",className:Z[s.estado],children:e.jsxs("div",{className:"flex items-center space-x-1",children:[se[s.estado],e.jsx("span",{children:s.estado_label})]})}),s.esta_vencida&&e.jsx(g,{className:"h-4 w-4 text-red-500"})]})}),e.jsx(c,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[s.expediente?e.jsx(j,{className:"h-4 w-4 text-blue-500"}):e.jsx(I,{className:"h-4 w-4 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.expediente?`${s.expediente.numero_expediente}`:s.documento?.nombre}),e.jsx("p",{className:"text-sm text-gray-500",children:s.expediente?.titulo})]})]})}),e.jsx(c,{children:e.jsx(C,{variant:"outline",className:ee[s.tipo_disposicion],children:s.tipo_disposicion_label})}),e.jsx(c,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(q,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:s.responsable.name})]})}),e.jsx(c,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:b(s.fecha_propuesta)})]})}),e.jsx(c,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:s.esta_vencida?"text-red-600 font-medium":"",children:b(s.fecha_vencimiento_retencion)})]}),s.dias_para_vencimiento<=30&&s.dias_para_vencimiento>0&&e.jsxs("p",{className:"text-xs text-orange-600",children:["Vence en ",s.dias_para_vencimiento," días"]}),s.esta_vencida&&e.jsx("p",{className:"text-xs text-red-600 font-medium",children:"¡Vencida!"})]})}),e.jsx(c,{className:"text-right",children:e.jsx(t,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(p,{href:route("admin.disposiciones.show",s.id),children:[e.jsx(W,{className:"h-4 w-4 mr-1"}),"Ver"]})})})]},s.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(j,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay disposiciones finales"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No se encontraron disposiciones que coincidan con los criterios de búsqueda."}),e.jsx(t,{asChild:!0,children:e.jsxs(p,{href:route("admin.disposiciones.create"),children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Crear Primera Disposición"]})})]})})]})]})]})}export{Ce as default};
