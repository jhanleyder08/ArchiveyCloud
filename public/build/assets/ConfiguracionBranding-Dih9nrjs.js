import{r as h,u as O,j as e,H as $,b as u,t as o}from"./app-tMaUuF3G.js";import{f as J,A as W}from"./app-sidebar-layout-DrvTFVRU.js";import{B as i}from"./button-b2NvRhsY.js";import{C,a as w,b as _,d as S,c as F}from"./card-B1dP6K0M.js";import{I as t}from"./input-BUbi3POq.js";import{L as p}from"./label-Bqu3HQD6.js";import{S as q,a as K,b as Q,c as X,d as k}from"./select-CdhdgJ0w.js";import{B as P}from"./Combination-CgNv0oAU.js";import{P as Y}from"./progress-Dks3GvKm.js";import{P as Z}from"./palette-D9byzWK3.js";import{I as L}from"./image-Dz2vXXHv.js";import{U as z}from"./upload-BlXEQH5C.js";import{E}from"./eye-CUHphNhr.js";import{T as I}from"./trash-2-C2WpkApr.js";import{R as D}from"./refresh-cw-B8mtnCVy.js";import{S as ee}from"./save-B3j5Lj3Y.js";/* empty css            */import"./index-gcMQB5yO.js";import"./index-DReOSayN.js";import"./index-BqccPZiJ.js";import"./x-B3QVzJhq.js";import"./app-logo-icon-DkUm7hxR.js";import"./user-BK5OEaM4.js";import"./mail-CwCHIGE1.js";import"./users-0BijOv_M.js";import"./folder-CyeXS8Xg.js";import"./triangle-alert-JjU49oaO.js";import"./search-a-c68EbR.js";import"./BrandingProvider-DUeywemA.js";import"./index-CWm8oeKh.js";import"./check-CjMGlCJz.js";function Ee({configuraciones:c,logos:l}){const A=[{title:"Administración",href:"/admin"},{title:"Configuración",href:"/admin/configuracion"},{title:"Branding y Personalización",href:"/admin/configuracion/branding"}],g=h.useRef(null),[x,j]=h.useState(!1),[B,d]=h.useState(0),[G,U]=h.useState(""),{data:s,setData:n,put:R,processing:T}=O({nombre_aplicacion:c.app_name?.valor||"ArchiveyCloud",descripcion:c.app_description?.valor||"",color_primario:c.color_primario?.valor||"#3b82f6",color_secundario:c.color_secundario?.valor||"#6b7280",tema_default:c.tema_predeterminado?.valor||"light",mostrar_logo:c.show_logo?.valor==="true"}),V=a=>{a.preventDefault(),R("/admin/configuracion/branding/update",{onSuccess:()=>{o.success("Configuración de branding guardada exitosamente")},onError:()=>{o.error("Error al guardar la configuración")}})},v=a=>{U(a),g.current&&g.current.click()},H=a=>{const r=a.target.files?.[0];if(!r)return;const m=2*1024*1024;if(r.size>m){o.error("El archivo es demasiado grande. Máximo 2MB.");return}if(!["image/jpeg","image/png","image/gif","image/webp","image/svg+xml","image/x-icon","image/vnd.microsoft.icon"].includes(r.type)){o.error("Tipo de archivo no permitido. Use JPEG, PNG, GIF, WebP, SVG o ICO.");return}M(r,G)},M=(a,r)=>{j(!0),d(0);const m=new FormData;m.append("archivo",a),m.append("tipo",r);const y=setInterval(()=>{d(b=>b>=90?(clearInterval(y),b):b+10)},200);u.post("/admin/configuracion/branding/upload",m,{preserveScroll:!0,onSuccess:()=>{d(100),setTimeout(()=>{j(!1),d(0),o.success(`${r==="principal"?"Logo principal":r==="favicon"?"Favicon":"Logo de login"} subido exitosamente`)},500)},onError:()=>{clearInterval(y),j(!1),d(0),o.error("Error al subir el archivo")}})},f=a=>{const r=l[a];r?window.open(r,"_blank"):o.info("No hay logo configurado para esta sección")},N=a=>{u.delete(`/admin/configuracion/branding/logo/${a}`,{preserveScroll:!0,onSuccess:()=>{o.success("Logo eliminado exitosamente")},onError:()=>{o.error("Error al eliminar el logo")}})};return e.jsxs(J,{breadcrumbs:A,children:[e.jsx($,{title:"Branding y Personalización"}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(i,{variant:"outline",size:"icon",onClick:()=>u.visit("/admin/configuracion"),children:e.jsx(W,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Branding y Personalización"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Configura la identidad visual y temas de ArchiveyCloud"})]})]})}),e.jsxs("form",{onSubmit:V,className:"space-y-6",children:[e.jsxs(C,{children:[e.jsxs(w,{children:[e.jsxs(_,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5"}),"Información General"]}),e.jsx(S,{children:"Configura el nombre y descripción de la aplicación"})]}),e.jsx(F,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"nombre_aplicacion",children:"Nombre de la Aplicación"}),e.jsx(t,{id:"nombre_aplicacion",type:"text",value:s.nombre_aplicacion,onChange:a=>n("nombre_aplicacion",a.target.value),placeholder:"ArchiveyCloud"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"descripcion",children:"Descripción"}),e.jsx(t,{id:"descripcion",type:"text",value:s.descripcion,onChange:a=>n("descripcion",a.target.value),placeholder:"Sistema de Gestión Documental"})]})]})})]}),e.jsxs(C,{children:[e.jsxs(w,{children:[e.jsx(_,{children:"Colores y Tema"}),e.jsx(S,{children:"Define los colores principales del sistema"})]}),e.jsxs(F,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"color_primario",children:"Color Primario"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{id:"color_primario",type:"color",value:s.color_primario,onChange:a=>n("color_primario",a.target.value),className:"w-16 h-10 p-0 border-0"}),e.jsx(t,{type:"text",value:s.color_primario,onChange:a=>n("color_primario",a.target.value),placeholder:"#3b82f6"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"color_secundario",children:"Color Secundario"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{id:"color_secundario",type:"color",value:s.color_secundario,onChange:a=>n("color_secundario",a.target.value),className:"w-16 h-10 p-0 border-0"}),e.jsx(t,{type:"text",value:s.color_secundario,onChange:a=>n("color_secundario",a.target.value),placeholder:"#6b7280"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"tema_default",children:"Tema por Defecto"}),e.jsxs(q,{value:s.tema_default,onValueChange:a=>n("tema_default",a),children:[e.jsx(K,{children:e.jsx(Q,{placeholder:"Seleccionar tema"})}),e.jsxs(X,{children:[e.jsx(k,{value:"light",children:"Claro"}),e.jsx(k,{value:"dark",children:"Oscuro"}),e.jsx(k,{value:"auto",children:"Automático"})]})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Vista Previa"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("div",{className:"w-24 h-12 rounded-lg flex items-center justify-center text-white text-sm font-medium shadow-md",style:{backgroundColor:s.color_primario},children:"Primario"}),e.jsx("div",{className:"w-24 h-12 rounded-lg flex items-center justify-center text-white text-sm font-medium shadow-md",style:{backgroundColor:s.color_secundario},children:"Secundario"}),e.jsxs("div",{className:"flex-1 p-3 rounded-lg border",children:[e.jsx("div",{className:"text-sm font-medium",style:{color:s.color_primario},children:s.nombre_aplicacion}),e.jsx("div",{className:"text-xs",style:{color:s.color_secundario},children:s.descripcion||"Descripción de la aplicación"})]})]})]})]})]}),e.jsxs(C,{children:[e.jsxs(w,{children:[e.jsxs(_,{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-5 w-5"}),"Gestión de Logos"]}),e.jsx(S,{children:"Sube y configura los logos del sistema"})]}),e.jsxs(F,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Logo Principal"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:l.principal?e.jsxs("div",{className:"space-y-2",children:[e.jsx("img",{src:l.principal,alt:"Logo Principal",className:"max-h-20 mx-auto"}),e.jsx(P,{variant:"outline",children:"Configurado"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{className:"h-12 w-12 mx-auto text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Sin logo"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{type:"button",variant:"outline",size:"sm",onClick:()=>v("principal"),disabled:x,children:[e.jsx(z,{className:"h-4 w-4 mr-1"}),"Subir"]}),l.principal&&e.jsxs(e.Fragment,{children:[e.jsx(i,{type:"button",variant:"outline",size:"sm",onClick:()=>f("principal"),children:e.jsx(E,{className:"h-4 w-4"})}),e.jsx(i,{type:"button",variant:"outline",size:"sm",onClick:()=>N("principal"),children:e.jsx(I,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Favicon"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:l.favicon?e.jsxs("div",{className:"space-y-2",children:[e.jsx("img",{src:l.favicon,alt:"Favicon",className:"max-h-8 mx-auto"}),e.jsx(P,{variant:"outline",children:"Configurado"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-8 w-8 mx-auto bg-gray-300 rounded"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Sin favicon"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{type:"button",variant:"outline",size:"sm",onClick:()=>v("favicon"),disabled:x,children:[e.jsx(z,{className:"h-4 w-4 mr-1"}),"Subir"]}),l.favicon&&e.jsxs(e.Fragment,{children:[e.jsx(i,{type:"button",variant:"outline",size:"sm",onClick:()=>f("favicon"),children:e.jsx(E,{className:"h-4 w-4"})}),e.jsx(i,{type:"button",variant:"outline",size:"sm",onClick:()=>N("favicon"),children:e.jsx(I,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Logo de Login"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:l.login?e.jsxs("div",{className:"space-y-2",children:[e.jsx("img",{src:l.login,alt:"Logo Login",className:"max-h-20 mx-auto"}),e.jsx(P,{variant:"outline",children:"Configurado"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{className:"h-12 w-12 mx-auto text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Sin logo"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{type:"button",variant:"outline",size:"sm",onClick:()=>v("login"),disabled:x,children:[e.jsx(z,{className:"h-4 w-4 mr-1"}),"Subir"]}),l.login&&e.jsxs(e.Fragment,{children:[e.jsx(i,{type:"button",variant:"outline",size:"sm",onClick:()=>f("login"),children:e.jsx(E,{className:"h-4 w-4"})}),e.jsx(i,{type:"button",variant:"outline",size:"sm",onClick:()=>N("login"),children:e.jsx(I,{className:"h-4 w-4"})})]})]})]})]}),x&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{className:"text-sm",children:"Subiendo archivo..."})]}),e.jsx(Y,{value:B,className:"w-full"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>u.visit("/admin/configuracion"),children:"Cancelar"}),e.jsx(i,{type:"submit",disabled:T,children:T?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"h-4 w-4 mr-2 animate-spin"}),"Guardando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Guardar Configuración"]})})]})]}),e.jsx("input",{ref:g,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp,image/svg+xml,image/x-icon,.ico,.svg",onChange:H,className:"hidden"})]})]})}export{Ee as default};
