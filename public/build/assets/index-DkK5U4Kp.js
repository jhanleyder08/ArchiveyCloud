import{u as B,j as e,H,L as h,b as f}from"./app-1TbR1aNv.js";import{A as I}from"./app-layout-DBvULR4o.js";import{B as n}from"./button-Bh8HL4t-.js";import{I as j}from"./input-B9S_DJNe.js";import{L as x}from"./label-CB51Zwfa.js";import{C as N,a as _,b as y,d as V,c as w}from"./card-CjIDma1Z.js";import{B as C}from"./badge-CahYhPrs.js";import{A as q,a as U}from"./alert-a9IGCIbG.js";import{S as F,a as T,b as D,c as A,d as a}from"./select-55yoEt5h.js";import{T as $,a as G,b as S,c as r,d as M,e as l}from"./table-YDxgXg6u.js";import{C as X,j as m}from"./app-sidebar-layout-EVqXnw4l.js";import{P as E}from"./plus-BY-Qt84n.js";import{C as L}from"./folder-BrHeBlTR.js";import{S as p}from"./search-BY4VdWrh.js";import{C as P}from"./circle-check-big-C8qeYor2.js";import{T as g}from"./triangle-alert-Csu15FGV.js";import{C as J}from"./circle-alert-IdL8hEBm.js";import{F as K}from"./filter-Cjzw4Gd-.js";import{F as O}from"./Combination-Bg4lGtaS.js";import{U as Q}from"./user-Eo78Nm40.js";import{C as z}from"./calendar-CgCzJ12r.js";import{E as W}from"./eye-Cg57hUSN.js";import{C as Y}from"./circle-x-BIuE7i2F.js";/* empty css            */import"./index-DV8Rt-0p.js";import"./index-DaDMCySO.js";import"./index-BRmIzMxm.js";import"./check-BetP237p.js";import"./index-12rucE5D.js";import"./x-BA_bLoEE.js";import"./index-B37z7FM4.js";import"./app-logo-icon-D5sKSL8w.js";import"./mail-Dw8iYVcL.js";import"./users-KtdTbN4b.js";const Z={pendiente:"bg-gray-100 text-gray-800 border-gray-200",en_revision:"bg-blue-100 text-blue-800 border-blue-200",aprobado:"bg-green-100 text-green-800 border-green-200",rechazado:"bg-red-100 text-red-800 border-red-200",ejecutado:"bg-purple-100 text-purple-800 border-purple-200",cancelado:"bg-gray-100 text-gray-600 border-gray-200"},ee={conservacion_permanente:"bg-emerald-100 text-emerald-800 border-emerald-200",eliminacion_controlada:"bg-red-100 text-red-800 border-red-200",transferencia_historica:"bg-blue-100 text-blue-800 border-blue-200",digitalizacion:"bg-indigo-100 text-indigo-800 border-indigo-200",microfilmacion:"bg-violet-100 text-violet-800 border-violet-200"},se={pendiente:e.jsx(L,{className:"h-4 w-4"}),en_revision:e.jsx(p,{className:"h-4 w-4"}),aprobado:e.jsx(P,{className:"h-4 w-4"}),rechazado:e.jsx(Y,{className:"h-4 w-4"}),ejecutado:e.jsx(m,{className:"h-4 w-4"}),cancelado:e.jsx(g,{className:"h-4 w-4"})};function Be({disposiciones:d,estadisticas:t,proximasVencer:u,filtros:c}){const{data:i,setData:o,get:ae,processing:b}=B({tipo_disposicion:c.tipo_disposicion||"todos",estado:c.estado||"todos",fecha_inicio:c.fecha_inicio||"",fecha_fin:c.fecha_fin||"",responsable:c.responsable||""}),R=()=>{const s={...i,tipo_disposicion:i.tipo_disposicion==="todos"?"":i.tipo_disposicion,estado:i.estado==="todos"?"":i.estado};f.get("/admin/disposiciones",s,{preserveState:!0,preserveScroll:!0})},k=()=>{f.visit("/admin/disposiciones")},v=s=>new Date(s).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"});return e.jsxs(I,{children:[e.jsx(H,{title:"Disposiciones Finales"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"Sistema de Disposición Final"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gestión del ciclo de vida documental y disposiciones finales"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{variant:"outline",asChild:!0,children:e.jsxs(h,{href:"/admin/disposiciones/reportes",children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Reportes"]})}),e.jsx(n,{className:"flex items-center gap-2 px-4 py-2 bg-[#2a3d83] text-white rounded-lg hover:bg-[#1e2b5f] transition-colors",asChild:!0,children:e.jsxs(h,{href:"/admin/disposiciones/create",children:[e.jsx(E,{className:"h-4 w-4"}),"Nueva Disposición"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:t.total_disposiciones})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(m,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pendientes"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:t.pendientes})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(L,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"En Revisión"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:t.en_revision})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(p,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Aprobadas"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:t.aprobadas})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(P,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Ejecutadas"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:t.ejecutadas})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(m,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Vencidas"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:t.vencidas})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(g,{className:"h-6 w-6 text-[#2a3d83]"})})]})})]}),u.length>0&&e.jsxs(q,{className:"border-orange-200 bg-orange-50",children:[e.jsx(J,{className:"h-4 w-4 text-[#2a3d83]"}),e.jsx(U,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("strong",{className:"text-orange-800",children:"Atención:"})," Hay ",u.length," disposiciones próximas a vencer o vencidas que requieren atención inmediata."]}),e.jsx(n,{size:"sm",variant:"outline",className:"text-orange-700 border-orange-300 hover:bg-orange-100",children:"Ver Detalles"})]})})]}),e.jsxs(N,{children:[e.jsxs(_,{children:[e.jsxs(y,{className:"flex items-center space-x-2",children:[e.jsx(K,{className:"h-5 w-5"}),e.jsx("span",{children:"Filtros de Búsqueda"})]}),e.jsx(V,{children:"Filtra las disposiciones por tipo, estado, fechas o responsable"})]}),e.jsxs(w,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"tipo_disposicion",children:"Tipo de Disposición"}),e.jsxs(F,{value:i.tipo_disposicion,onValueChange:s=>o("tipo_disposicion",s),children:[e.jsx(T,{children:e.jsx(D,{placeholder:"Todos los tipos"})}),e.jsxs(A,{children:[e.jsx(a,{value:"todos",children:"Todos los tipos"}),e.jsx(a,{value:"conservacion_permanente",children:"Conservación Permanente"}),e.jsx(a,{value:"eliminacion_controlada",children:"Eliminación Controlada"}),e.jsx(a,{value:"transferencia_historica",children:"Transferencia Histórica"}),e.jsx(a,{value:"digitalizacion",children:"Digitalización"}),e.jsx(a,{value:"microfilmacion",children:"Microfilmación"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"estado",children:"Estado"}),e.jsxs(F,{value:i.estado,onValueChange:s=>o("estado",s),children:[e.jsx(T,{children:e.jsx(D,{placeholder:"Todos los estados"})}),e.jsxs(A,{children:[e.jsx(a,{value:"todos",children:"Todos los estados"}),e.jsx(a,{value:"pendiente",children:"Pendiente"}),e.jsx(a,{value:"en_revision",children:"En Revisión"}),e.jsx(a,{value:"aprobado",children:"Aprobado"}),e.jsx(a,{value:"rechazado",children:"Rechazado"}),e.jsx(a,{value:"ejecutado",children:"Ejecutado"}),e.jsx(a,{value:"cancelado",children:"Cancelado"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"fecha_inicio",children:"Fecha Inicio"}),e.jsx(j,{id:"fecha_inicio",type:"date",value:i.fecha_inicio,onChange:s=>o("fecha_inicio",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"fecha_fin",children:"Fecha Fin"}),e.jsx(j,{id:"fecha_fin",type:"date",value:i.fecha_fin,onChange:s=>o("fecha_fin",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"responsable",children:"Responsable"}),e.jsx(j,{id:"responsable",placeholder:"Nombre del responsable",value:i.responsable,onChange:s=>o("responsable",s.target.value)})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[e.jsxs(n,{onClick:R,disabled:b,children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),b?"Aplicando...":"Aplicar Filtros"]}),e.jsx(n,{variant:"outline",onClick:k,children:"Limpiar"})]})]})]}),e.jsxs(N,{children:[e.jsx(_,{children:e.jsxs(y,{className:"flex items-center justify-between",children:[e.jsxs("span",{children:["Disposiciones Finales (",d.total,")"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Página ",d.current_page," de ",d.last_page]})]})}),e.jsx(w,{children:d.data.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs($,{children:[e.jsx(G,{children:e.jsxs(S,{children:[e.jsx(r,{className:"w-16",children:"Estado"}),e.jsx(r,{children:"Item"}),e.jsx(r,{children:"Tipo Disposición"}),e.jsx(r,{children:"Responsable"}),e.jsx(r,{children:"Fecha Propuesta"}),e.jsx(r,{children:"Vencimiento"}),e.jsx(r,{className:"text-right",children:"Acciones"})]})}),e.jsx(M,{children:d.data.map(s=>e.jsxs(S,{className:s.esta_vencida?"bg-red-50":"",children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{variant:"outline",className:Z[s.estado],children:e.jsxs("div",{className:"flex items-center space-x-1",children:[se[s.estado],e.jsx("span",{children:s.estado_label})]})}),s.esta_vencida&&e.jsx(g,{className:"h-4 w-4 text-red-500"})]})}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[s.expediente?e.jsx(m,{className:"h-4 w-4 text-[#2a3d83]"}):e.jsx(O,{className:"h-4 w-4 text-[#2a3d83]"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.expediente?`${s.expediente.numero_expediente}`:s.documento?.nombre}),e.jsx("p",{className:"text-sm text-gray-500",children:s.expediente?.titulo})]})]})}),e.jsx(l,{children:e.jsx(C,{variant:"outline",className:ee[s.tipo_disposicion],children:s.tipo_disposicion_label})}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"h-4 w-4 text-[#2a3d83]"}),e.jsx("span",{children:s.responsable?.name||"Sin responsable asignado"})]})}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{className:"h-4 w-4 text-[#2a3d83]"}),e.jsx("span",{children:v(s.fecha_propuesta)})]})}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{className:"h-4 w-4 text-[#2a3d83]"}),e.jsx("span",{className:s.esta_vencida?"text-red-600 font-medium":"",children:v(s.fecha_vencimiento_retencion)})]}),s.dias_para_vencimiento<=30&&s.dias_para_vencimiento>0&&e.jsxs("p",{className:"text-xs text-orange-600",children:["Vence en ",s.dias_para_vencimiento," días"]}),s.esta_vencida&&e.jsx("p",{className:"text-xs text-red-600 font-medium",children:"¡Vencida!"})]})}),e.jsx(l,{className:"text-right",children:e.jsx(h,{href:`/admin/disposiciones/${s.id}`,children:e.jsx("button",{className:"p-2 rounded-md text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50 transition-colors",children:e.jsx(W,{className:"h-4 w-4"})})})})]},s.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(m,{className:"h-12 w-12 text-[#2a3d83] mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay disposiciones finales"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No se encontraron disposiciones que coincidan con los criterios de búsqueda."}),e.jsx(n,{className:"flex items-center gap-2 px-4 py-2 bg-[#2a3d83] text-white rounded-lg hover:bg-[#1e2b5f] transition-colors",asChild:!0,children:e.jsxs(h,{href:"/admin/disposiciones/create",children:[e.jsx(E,{className:"h-4 w-4"}),"Crear Primera Disposición"]})})]})})]})]})]})}export{Be as default};
