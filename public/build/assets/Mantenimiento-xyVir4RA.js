import{r as h,j as e,H as Z,b as f,t as y}from"./app-qt2VCSHW.js";import{f as G,A as J,S as _,h as z,D as B,g as K,a as A,b as H,c as O,d as L,e as R,T as Q,Z as W}from"./app-sidebar-layout-G6-wDKKL.js";import{c as I,B as n}from"./button-DFXYzV2Z.js";import{C as c,a as o,b as d,c as l,d as C}from"./card-DWiMLnI2.js";import{B as X}from"./Combination-CoqYx7MN.js";import{P as S}from"./progress-BCwSYkhK.js";import{A as Y,a as ee}from"./alert-Bnwym567.js";import{R as j}from"./refresh-cw-DWUH3CW3.js";import{C as se}from"./folder-BdePZ2wi.js";import{A as ae}from"./activity-CMPZ0o8-.js";import{T as k}from"./triangle-alert-B9FT7Ibe.js";import{T as te}from"./trash-2-Cbg74AW7.js";/* empty css            */import"./index-BZgYwWWx.js";import"./index-DnmBUpJw.js";import"./index-VNIC8-9Y.js";import"./x-BxMqO2Dk.js";import"./app-logo-icon-B2qWlKKR.js";import"./input-CfE4Xz_e.js";import"./label-Bpt8UETt.js";import"./user-DeQjT80T.js";import"./mail-DfyVAEco.js";import"./users-DgarvUGi.js";import"./search-DaadPwJz.js";import"./BrandingProvider-kslcjmn_.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],ie=I("Link",re);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]],g=I("Terminal",ne);function ze({estadisticas_cache:q,comandos_disponibles:F}){const[u,N]=h.useState(null),[P,p]=h.useState(""),[U,v]=h.useState(!1),[t,V]=h.useState({php_version:"",laravel_version:"",node_version:"",database_size:0,storage_size:0,uptime:"",memory_usage:0,disk_usage:0}),m=q||{cache_size:0,cache_hits:0,cache_misses:0},b=F||{},E=s=>{if(s===0)return"0 Bytes";const a=1024,r=["Bytes","KB","MB","GB","TB"],i=Math.floor(Math.log(s)/Math.log(a));return parseFloat((s/Math.pow(a,i)).toFixed(2))+" "+r[i]},x=()=>{const s=m.cache_hits+m.cache_misses;return s===0?0:Math.round(m.cache_hits/s*100)},M=async s=>{const a=b[s];if(a){N(s),p(`Ejecutando comando...
`);try{f.post(route("admin.configuracion.mantenimiento.comando"),{comando:a.comando},{preserveState:!1,onSuccess:r=>{p(i=>i+`
✓ Comando ejecutado exitosamente!`),y.success(`Comando '${a.nombre}' ejecutado correctamente`),setTimeout(()=>f.reload({only:["estadisticas_cache"]}),1e3)},onError:r=>{console.error("Command execution errors:",r);const i=typeof r=="string"?r:JSON.stringify(r);p($=>$+`
✗ Error: `+i),y.error(`Error ejecutando comando: ${a.nombre}`)},onFinish:()=>{N(null),v(!0)}})}catch(r){console.error("Error executing command:",r),p(i=>i+`
✗ Error inesperado: `+r),y.error("Error inesperado ejecutando comando"),N(null)}}},w=s=>{switch(s){case"cache_clear":return e.jsx(te,{className:"h-4 w-4"});case"config_cache":return e.jsx(_,{className:"h-4 w-4"});case"route_cache":return e.jsx(j,{className:"h-4 w-4"});case"optimize":return e.jsx(W,{className:"h-4 w-4"});case"storage_link":return e.jsx(ie,{className:"h-4 w-4"});default:return e.jsx(g,{className:"h-4 w-4"})}},D=s=>s.peligroso?"destructive":s.comando.includes("clear")?"secondary":"default",T=async()=>{V({php_version:"8.2.0",laravel_version:"10.0.0",node_version:"18.17.0",database_size:1024*1024*15,storage_size:1024*1024*250,uptime:"2 días, 14 horas",memory_usage:65,disk_usage:45})};return h.useEffect(()=>{T()},[]),e.jsxs(G,{title:"Mantenimiento del Sistema",children:[e.jsx(Z,{title:"Mantenimiento del Sistema"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(n,{variant:"ghost",onClick:()=>f.get(route("admin.configuracion.index")),children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Volver"]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Mantenimiento del Sistema"}),e.jsx("p",{className:"text-muted-foreground",children:"Herramientas de optimización, caché y mantenimiento"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{variant:"outline",onClick:T,children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Actualizar Info"]}),e.jsxs(n,{variant:"outline",onClick:()=>f.reload(),children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Recargar"]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(c,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"PHP Version"}),e.jsx(_,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.php_version}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Runtime environment"})]})]}),e.jsxs(c,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Laravel Version"}),e.jsx(_,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.laravel_version}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Framework version"})]})]}),e.jsxs(c,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Uptime"}),e.jsx(se,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.uptime}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Sistema activo"})]})]}),e.jsxs(c,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Base de Datos"}),e.jsx(z,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:E(t.database_size)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tamaño total"})]})]})]}),e.jsxs(c,{children:[e.jsxs(o,{children:[e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-5 w-5"}),"Estado del Sistema"]}),e.jsx(C,{children:"Monitoreo en tiempo real de recursos críticos"})]}),e.jsxs(l,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Uso de Memoria"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[t.memory_usage,"%"]})]}),e.jsx(S,{value:t.memory_usage,className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Uso de Disco"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[t.disk_usage,"%"]})]}),e.jsx(S,{value:t.disk_usage,className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Hit Rate de Cache"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[x(),"%"]})]}),e.jsx(S,{value:x(),className:"w-full"})]})]})]}),e.jsxs(c,{children:[e.jsxs(o,{children:[e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5"}),"Estadísticas de Cache"]}),e.jsx(C,{children:"Información sobre el rendimiento del sistema de caché"})]}),e.jsx(l,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:m.cache_hits.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Cache Hits"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:m.cache_misses.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Cache Misses"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:E(m.cache_size)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tamaño Total"})]})]})})]}),e.jsxs(c,{children:[e.jsxs(o,{children:[e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5"}),"Comandos de Mantenimiento"]}),e.jsx(C,{children:"Herramientas para optimización y mantenimiento del sistema"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"grid gap-4 md:grid-cols-1 lg:grid-cols-2",children:Object.entries(b).map(([s,a])=>e.jsx(c,{className:a.peligroso?"border-red-200":"",children:e.jsxs(l,{className:"pt-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[w(s),e.jsx("h4",{className:"font-medium",children:a.nombre}),a.peligroso&&e.jsxs(X,{variant:"destructive",className:"text-xs",children:[e.jsx(k,{className:"h-3 w-3 mr-1"}),"Cuidado"]})]})}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:a.descripcion}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("code",{className:"text-xs bg-muted px-2 py-1 rounded",children:a.comando}),a.peligroso?e.jsxs(B,{children:[e.jsx(K,{asChild:!0,children:e.jsxs(n,{variant:D(a),size:"sm",disabled:u===s,children:[u===s?e.jsx(j,{className:"h-4 w-4 animate-spin mr-2"}):w(s),"Ejecutar"]})}),e.jsxs(A,{children:[e.jsxs(H,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-5 w-5 text-red-500"}),"Confirmar Comando Peligroso"]}),e.jsxs(L,{children:["Estás a punto de ejecutar: ",e.jsx("strong",{children:a.nombre}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("code",{className:"bg-muted p-2 rounded block mt-2",children:a.comando}),e.jsx("br",{}),a.descripcion,e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"¿Estás seguro de continuar?"})]})]}),e.jsxs(R,{children:[e.jsx(n,{variant:"outline",children:"Cancelar"}),e.jsx(n,{onClick:()=>M(s),className:"bg-red-600 hover:bg-red-700",children:"Sí, Ejecutar"})]})]})]}):e.jsxs(n,{variant:D(a),size:"sm",onClick:()=>M(s),disabled:u===s,children:[u===s?e.jsx(j,{className:"h-4 w-4 animate-spin mr-2"}):w(s),"Ejecutar"]})]})]})},s))}),Object.keys(b).length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(g,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No hay comandos disponibles"}),e.jsx("p",{className:"text-muted-foreground",children:"No se han configurado comandos de mantenimiento"})]})]})]}),(t.memory_usage>80||t.disk_usage>80||x()<70)&&e.jsxs(Y,{className:"border-orange-200 bg-orange-50",children:[e.jsx(k,{className:"h-4 w-4"}),e.jsxs(ee,{children:[e.jsx("strong",{children:"Advertencias del sistema detectadas:"}),e.jsxs("ul",{className:"list-disc ml-4 mt-2",children:[t.memory_usage>80&&e.jsxs("li",{children:["Uso de memoria alto (",t.memory_usage,"%)"]}),t.disk_usage>80&&e.jsxs("li",{children:["Uso de disco alto (",t.disk_usage,"%)"]}),x()<70&&e.jsxs("li",{children:["Hit rate de cache bajo (",x(),"%)"]})]})]})]}),e.jsx(B,{open:U,onOpenChange:v,children:e.jsxs(A,{className:"max-w-2xl",children:[e.jsxs(H,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5"}),"Resultado del Comando"]}),e.jsx(L,{children:"Output de la ejecución del comando"})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(Q,{value:P,readOnly:!0,className:"min-h-[200px] font-mono text-sm",placeholder:"No hay output disponible..."})}),e.jsx(R,{children:e.jsx(n,{onClick:()=>v(!1),children:"Cerrar"})})]})})]})]})}export{ze as default};
