import{r,j as e,H as $,L as u,a as j}from"./app-CCv0nybg.js";import{A as H,f as S,g as o,h as x,i as m,j as h,S as q,C as G,t as T}from"./app-layout-DmrN83Mb.js";import{c as p,B as l}from"./app-logo-icon-C3fsvCAz.js";import{I as Q}from"./label-B1a5eHyJ.js";import{S as g,a as v,b as N,c as f,d as a}from"./select-CqjufuNU.js";import{B as U}from"./badge-CZJ-5SkJ.js";import{T as E}from"./triangle-alert-XpfTb5NI.js";import{S as K}from"./search-hKqfao8U.js";import{C as k}from"./circle-pause-1MmpT0SC.js";import{L as A}from"./lock-Be4CLXlS.js";import{E as O}from"./eye-C8lDzW1b.js";import{T as J}from"./trash-2-DV-0YNX2.js";import{C as W}from"./circle-alert-2IZZzoQ9.js";import{C as X}from"./circle-check-big-6n7rtbtK.js";/* empty css            */import"./index-BHXBEXUZ.js";import"./index-CgIx_IGN.js";import"./index-DJ9b6_vU.js";import"./check-SIyqeqn8.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],y=p("Archive",Y);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],w=p("Bell",Z);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],se=p("RefreshCw",ee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],te=p("TrendingUp",ae);function Ae({procesos:t,stats:d,filtros:i,trdOptions:ie,flash:re}){const[b,z]=r.useState(i.search||""),[M,le]=r.useState(i.estado||""),[F,ne]=r.useState(i.tipo_entidad||""),[V,de]=r.useState(i.prioridad||""),[ce,oe]=r.useState(i.trd_id||""),[_,C]=r.useState(!1),c=(s,n)=>{const R={...i,[s]:n||void 0,page:1};j.get("/admin/retencion-disposicion",R,{preserveState:!0})},D=s=>{switch(s){case"activo":return"bg-green-100 text-green-800";case"alerta_previa":return"bg-yellow-100 text-yellow-800";case"vencido":return"bg-red-100 text-red-800";case"en_disposicion":return"bg-blue-100 text-blue-800";case"transferido":return"bg-purple-100 text-purple-800";case"eliminado":return"bg-gray-100 text-gray-800";case"conservado":return"bg-emerald-100 text-emerald-800";case"aplazado":return"bg-orange-100 text-orange-800";case"suspendido":return"bg-gray-100 text-gray-600";default:return"bg-gray-100 text-gray-600"}},L=s=>{switch(s){case"activo":return e.jsx(X,{className:"h-4 w-4"});case"alerta_previa":return e.jsx(W,{className:"h-4 w-4"});case"vencido":return e.jsx(E,{className:"h-4 w-4"});case"en_disposicion":return e.jsx(G,{className:"h-4 w-4"});case"transferido":return e.jsx(q,{className:"h-4 w-4"});case"eliminado":return e.jsx(J,{className:"h-4 w-4"});case"conservado":return e.jsx(y,{className:"h-4 w-4"});case"aplazado":return e.jsx(k,{className:"h-4 w-4"});case"suspendido":return e.jsx(A,{className:"h-4 w-4"});default:return null}},P=s=>({activo:"Activo",alerta_previa:"Alerta Previa",vencido:"Vencido",en_disposicion:"En Disposición",transferido:"Transferido",eliminado:"Eliminado",conservado:"Conservado",aplazado:"Aplazado",suspendido:"Suspendido"})[s]||s,B=s=>s<=0?"text-red-600 font-bold":s<=7?"text-orange-600 font-semibold":s<=30?"text-yellow-600":"text-gray-600",I=async()=>{C(!0);try{await j.post("/admin/retencion-disposicion/procesar-masivo",{},{onSuccess:s=>{T.success("Actualizaciones procesadas correctamente")},onError:s=>{T.error("Error al procesar actualizaciones")}})}finally{C(!1)}};return e.jsxs(H,{children:[e.jsx($,{title:"Retención y Disposición"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestión de Retención y Disposición"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Control automatizado de períodos de retención y disposición documental"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(S,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Procesos"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:d.total})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:e.jsx(E,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Críticos"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:d.criticos})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:e.jsx(w,{className:"h-6 w-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"En Alerta"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:d.en_alerta})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(y,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Conservados"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:d.conservados})]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg border p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Q,{placeholder:"Buscar por código, documento, expediente...",value:b,onChange:s=>z(s.target.value),onKeyPress:s=>s.key==="Enter"&&c("search",b),className:"w-full",icon:e.jsx(K,{className:"h-4 w-4 text-gray-400"})})}),e.jsxs(g,{value:M,onValueChange:s=>c("estado",s),children:[e.jsx(v,{className:"w-full lg:w-[180px]",children:e.jsx(N,{placeholder:"Estado"})}),e.jsxs(f,{children:[e.jsx(a,{value:"all",children:"Todos"}),e.jsx(a,{value:"activo",children:"Activo"}),e.jsx(a,{value:"alerta_previa",children:"Alerta Previa"}),e.jsx(a,{value:"vencido",children:"Vencido"}),e.jsx(a,{value:"en_disposicion",children:"En Disposición"}),e.jsx(a,{value:"transferido",children:"Transferido"}),e.jsx(a,{value:"eliminado",children:"Eliminado"}),e.jsx(a,{value:"conservado",children:"Conservado"}),e.jsx(a,{value:"aplazado",children:"Aplazado"})]})]}),e.jsxs(g,{value:F,onValueChange:s=>c("tipo_entidad",s),children:[e.jsx(v,{className:"w-full lg:w-[180px]",children:e.jsx(N,{placeholder:"Tipo"})}),e.jsxs(f,{children:[e.jsx(a,{value:"all",children:"Todos"}),e.jsx(a,{value:"documento",children:"Documentos"}),e.jsx(a,{value:"expediente",children:"Expedientes"})]})]}),e.jsxs(g,{value:V,onValueChange:s=>c("prioridad",s),children:[e.jsx(v,{className:"w-full lg:w-[180px]",children:e.jsx(N,{placeholder:"Prioridad"})}),e.jsxs(f,{children:[e.jsx(a,{value:"all",children:"Todas"}),e.jsx(a,{value:"criticos",children:"Críticos"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{href:"/admin/retencion-disposicion/alertas",children:e.jsxs(l,{variant:"outline",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Alertas"]})}),e.jsx(u,{href:"/admin/retencion-disposicion/reportes",children:e.jsxs(l,{variant:"outline",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Reportes"]})}),e.jsx(o,{children:e.jsxs(x,{children:[e.jsx(m,{asChild:!0,children:e.jsx(l,{variant:"outline",onClick:I,disabled:_,children:e.jsx(se,{className:`h-4 w-4 ${_?"animate-spin":""}`})})}),e.jsx(h,{children:e.jsx("p",{children:"Procesar actualizaciones masivas"})})]})})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg border overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Código / Entidad"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"TRD / Serie"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vencimiento"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Días Restantes"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Indicadores"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.data.map(s=>e.jsxs("tr",{className:s.es_critico?"bg-red-50":"",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.codigo_proceso}),e.jsx("div",{className:"text-sm text-gray-500",children:s.tipo_entidad==="documento"?e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"inline h-3 w-3 mr-1"}),s.documento?.titulo||"Sin título"]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"inline h-3 w-3 mr-1"}),s.expediente?.titulo||"Sin título"]})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.trd.nombre}),s.serie_documental&&e.jsx("div",{className:"text-xs text-gray-500",children:s.serie_documental.nombre})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(U,{className:D(s.estado),children:e.jsxs("span",{className:"flex items-center gap-1",children:[L(s.estado),P(s.estado)]})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-900",children:new Date(s.fecha_vencimiento_gestion).toLocaleDateString("es-ES")}),e.jsx("div",{className:"text-xs text-gray-500",children:"Archivo Gestión"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:B(s.dias_hasta_vencimiento),children:s.dias_hasta_vencimiento>0?`${s.dias_hasta_vencimiento} días`:s.dias_hasta_vencimiento===0?"Vence hoy":`Vencido hace ${Math.abs(s.dias_hasta_vencimiento)} días`})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex gap-1",children:[s.aplazado&&e.jsx(o,{children:e.jsxs(x,{children:[e.jsx(m,{children:e.jsx(k,{className:"h-4 w-4 text-orange-500"})}),e.jsx(h,{children:e.jsx("p",{children:"Aplazado"})})]})}),s.bloqueado_eliminacion&&e.jsx(o,{children:e.jsxs(x,{children:[e.jsx(m,{children:e.jsx(A,{className:"h-4 w-4 text-red-500"})}),e.jsx(h,{children:e.jsx("p",{children:"Eliminación bloqueada"})})]})}),s.alertas_activas&&e.jsx(o,{children:e.jsxs(x,{children:[e.jsx(m,{children:e.jsx(w,{className:"h-4 w-4 text-yellow-500"})}),e.jsx(h,{children:e.jsx("p",{children:"Alertas activas"})})]})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx(u,{href:`/admin/retencion-disposicion/${s.id}`,children:e.jsxs(l,{variant:"ghost",size:"sm",children:[e.jsx(O,{className:"h-4 w-4 mr-1"}),"Ver detalle"]})})})]},s.id))})]})}),t.last_page>1&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Mostrando ",t.from," a ",t.to," de ",t.total," resultados"]}),e.jsx("div",{className:"flex gap-2",children:t.links.map((s,n)=>s.url?e.jsx(l,{variant:s.active?"default":"outline",size:"sm",onClick:()=>j.get(s.url),dangerouslySetInnerHTML:{__html:s.label}},n):e.jsx(l,{variant:"outline",size:"sm",disabled:!0,dangerouslySetInnerHTML:{__html:s.label}},n))})]})})]})]})]})}export{Ae as default};
