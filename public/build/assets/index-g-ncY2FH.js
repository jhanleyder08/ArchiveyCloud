import{e as O,r,b as $,j as e,H as z,L as n}from"./app-BcZLevcf.js";import{A as H}from"./app-layout-DasvXX5m.js";import{B as F}from"./button-BsM685ds.js";import{I as J}from"./input-CjLt5s7n.js";import{S as x,a as m,b as h,c as p,d as a}from"./select-Ca3I3wDS.js";import{t as C,k as Q,l as g,m as f,n as b}from"./app-sidebar-layout-7SHWFfjl.js";import{F as D}from"./Combination-CLJ78jdy.js";import{P as q}from"./plus-DHEPmPkG.js";import{S as K}from"./search-D5mRg5FV.js";import{F as R}from"./filter-BASkW7kh.js";import{E as U}from"./eye-jXF8T6zV.js";import{S as W}from"./square-pen-DmCf26dl.js";import{T as Y}from"./trash-2-DU1nDpte.js";/* empty css            */import"./index-CNi2YxxG.js";import"./index-BVTixdOX.js";import"./index-C7TXKFBF.js";import"./check-BxIsgHBf.js";import"./index-CIYEUQm3.js";import"./x-BL4iRsR5.js";import"./index-5AsEmbjk.js";import"./app-logo-icon-Bh6iRABb.js";import"./label-C1ipmG6c.js";import"./user-BKj-bQyT.js";import"./mail-J2AKm0cb.js";import"./users-Bv3mV0mG.js";import"./folder-DShUzZue.js";import"./triangle-alert-CQqqJdBk.js";const Z=[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Documentos",href:"/admin/documentos"}];function Ie({documentos:l,stats:u,flash:k,expedientes:_,tipologias:ee}){const{flash:i}=O().props,[j,E]=r.useState(""),[o,v]=r.useState("all"),[d,T]=r.useState("all"),[te,M]=r.useState(null),[se,re]=r.useState(!1),[ae,A]=r.useState(null),[le,ie]=r.useState(null),[N,B]=r.useState(!1),[y,P]=r.useState({search:"",estado:"all",tipo_soporte:"all",expediente_id:"all"}),L={borrador:"Borrador",activo:"Activo",archivado:"Archivado"},w={fisico:"Físico",electronico:"Electrónico",hibrido:"Híbrido"},V={PDF:"PDF",DOC:"DOC",DOCX:"DOCX",XLS:"XLS",XLSX:"XLSX",JPG:"JPG",PNG:"PNG"};r.useEffect(()=>{i?.success&&C.success(i.success),i?.error&&C.error(i.error)},[i]),r.useEffect(()=>{const t=setTimeout(()=>{$.get("/admin/documentos",{search:j||void 0,estado:o==="all"?void 0:o,formato:d==="all"?void 0:d},{preserveState:!0,replace:!0})},500);return()=>clearTimeout(t)},[j,o,d]);const[oe,de]=r.useState({codigo_documento:"",titulo:"",descripcion:"",expediente_id:"",tipologia_id:"",estado:"borrador"}),[ce,ne]=r.useState({codigo_documento:"",titulo:"",descripcion:"",expediente_id:"",tipologia_id:"",estado:"borrador"}),S=(t,s)=>{P(c=>({...c,[t]:s})),t==="estado"&&v(s)},X=t=>({borrador:"bg-gray-100 text-gray-800",pendiente:"bg-yellow-100 text-yellow-800",aprobado:"bg-blue-100 text-blue-800",activo:"bg-green-100 text-green-800",archivado:"bg-purple-100 text-purple-800",obsoleto:"bg-red-100 text-red-800"})[t]||"bg-gray-100 text-gray-800",G=t=>({electronico:"bg-blue-100 text-blue-800",fisico:"bg-orange-100 text-orange-800",hibrido:"bg-purple-100 text-purple-800"})[t]||"bg-gray-100 text-gray-800",I=t=>{if(!t)return"N/A";const s=["Bytes","KB","MB","GB"],c=Math.floor(Math.log(t)/Math.log(1024));return Math.round(t/Math.pow(1024,c)*100)/100+" "+s[c]};return e.jsxs(H,{breadcrumbs:Z,children:[e.jsx(z,{title:"Gestión de Documentos"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-6 w-6 text-[#2a3d83]"}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Gestión de Documentos"})]}),e.jsx(n,{href:"/admin/documentos/create",children:e.jsxs(F,{className:"flex items-center gap-2 px-4 py-2 bg-[#2a3d83] text-white rounded-lg hover:bg-[#1e2b5f] transition-colors",children:[e.jsx(q,{className:"h-4 w-4"}),"Nuevo Documento"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Documentos"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:u?.total||0})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(D,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Documentos Activos"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:u?.activos||0})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx("div",{className:"h-6 w-6 bg-[#2a3d83] rounded-full flex items-center justify-center",children:e.jsx("div",{className:"h-2 w-2 bg-white rounded-full"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Borradores"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:u?.borradores||0})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx("div",{className:"h-6 w-6 bg-[#2a3d83] rounded-full flex items-center justify-center",children:e.jsx("div",{className:"h-2 w-2 bg-white rounded-full"})})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4 w-full sm:w-auto",children:e.jsxs("div",{className:"relative flex-1 sm:w-80",children:[e.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(J,{type:"text",value:j,onChange:t=>E(t.target.value),placeholder:"Buscar documentos...",className:"pl-10"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(x,{value:o,onValueChange:v,children:[e.jsx(m,{className:"w-[180px]",children:e.jsx(h,{placeholder:"Filtro por estado"})}),e.jsxs(p,{children:[e.jsx(a,{value:"all",children:"Todos los estados"}),e.jsx(a,{value:"activo",children:"Activo"}),e.jsx(a,{value:"borrador",children:"Borrador"}),e.jsx(a,{value:"archivado",children:"Archivado"})]})]}),e.jsx(F,{variant:"outline",size:"icon",onClick:()=>B(!N),children:e.jsx(R,{className:"h-4 w-4"})})]})]}),N&&e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(x,{value:y.tipo_soporte,onValueChange:t=>S("tipo_soporte",t),children:[e.jsx(m,{children:e.jsx(h,{placeholder:"Tipo de Soporte"})}),e.jsxs(p,{children:[e.jsx(a,{value:"all",children:"Todos los soportes"}),Object.entries(w).map(([t,s])=>e.jsx(a,{value:t,children:s},t))]})]}),e.jsxs(x,{value:d,onValueChange:T,children:[e.jsx(m,{children:e.jsx(h,{placeholder:"Formato"})}),e.jsxs(p,{children:[e.jsx(a,{value:"all",children:"Todos los formatos"}),Object.entries(V).map(([t,s])=>e.jsx(a,{value:t,children:s},t))]})]}),e.jsxs(x,{value:y.expediente_id,onValueChange:t=>S("expediente_id",t),children:[e.jsx(m,{children:e.jsx(h,{placeholder:"Expediente"})}),e.jsxs(p,{children:[e.jsx(a,{value:"all",children:"Todos los expedientes"}),_.map(t=>e.jsx(a,{value:t.id.toString(),children:t.titulo},t.id))]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Documento"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Expediente"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Estado"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Formato"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Tamaño"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Fecha"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:!l?.data||l.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"py-8 px-6 text-center text-gray-500",children:"No se encontraron documentos."})}):l?.data?.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-8 w-8 bg-[#2a3d83] rounded-full flex items-center justify-center text-white text-sm font-medium",children:t.titulo.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.titulo}),e.jsx("div",{className:"text-sm text-gray-500",children:t.codigo_documento})]})]})}),e.jsx("td",{className:"py-4 px-6",children:t.expediente?e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.expediente.titulo}),e.jsx("div",{className:"text-sm text-gray-500",children:t.expediente.numero_expediente})]}):e.jsx("span",{className:"text-sm text-gray-400",children:"Sin expediente"})}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${X(t.estado)}`,children:L[t.estado]||t.estado})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${G(t.tipo_soporte)}`,children:w[t.tipo_soporte]||t.tipo_soporte}),e.jsx("span",{className:"text-xs text-gray-500 uppercase",children:t.formato})]})}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-900",children:I(t.tamaño)}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-600",children:new Date(t.created_at).toLocaleDateString("es-ES")}),e.jsx("td",{className:"py-4 px-6",children:e.jsx(Q,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(g,{children:[e.jsx(f,{asChild:!0,children:e.jsx("button",{onClick:()=>window.location.href=`/admin/documentos/${t.id}`,className:"p-2 rounded-md text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50 transition-colors",children:e.jsx(U,{className:"h-4 w-4"})})}),e.jsx(b,{children:e.jsx("p",{children:"Ver detalle"})})]}),e.jsxs(g,{children:[e.jsx(f,{asChild:!0,children:e.jsx("button",{onClick:()=>A(t),className:"p-2 rounded-md text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50 transition-colors",children:e.jsx(W,{className:"h-4 w-4"})})}),e.jsx(b,{children:e.jsx("p",{children:"Editar documento"})})]}),e.jsxs(g,{children:[e.jsx(f,{asChild:!0,children:e.jsx("button",{onClick:()=>M(t),className:"p-2 rounded-md text-red-600 hover:text-red-800 hover:bg-red-50 transition-colors",children:e.jsx(Y,{className:"h-4 w-4"})})}),e.jsx(b,{children:e.jsx("p",{children:"Eliminar documento"})})]})]})})})]},t.id))})]})}),l?.data&&l.data.length>0&&e.jsxs("div",{className:"flex items-center justify-between bg-white border rounded-lg px-6 py-3",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando ",e.jsx("span",{className:"font-medium",children:l?.from||0})," a"," ",e.jsx("span",{className:"font-medium",children:l?.to||0})," de"," ",e.jsx("span",{className:"font-medium",children:l?.total||0})," documentos"]}),e.jsx("div",{className:"flex items-center gap-2",children:l?.links?.map((t,s)=>t.label.includes("Previous")?e.jsx(n,{href:t.url||"#",preserveState:!0,className:`px-3 py-2 border border-gray-300 rounded-md text-sm font-medium ${t.url?"text-gray-700 hover:bg-gray-50":"text-gray-300 cursor-not-allowed"}`,children:"Anterior"},s):t.label.includes("Next")?e.jsx(n,{href:t.url||"#",preserveState:!0,className:`px-3 py-2 border border-gray-300 rounded-md text-sm font-medium ${t.url?"text-gray-700 hover:bg-gray-50":"text-gray-300 cursor-not-allowed"}`,children:"Siguiente"},s):isNaN(Number(t.label))?null:e.jsx(n,{href:t.url||"#",preserveState:!0,className:`px-3 py-2 rounded-md text-sm font-medium ${t.active?"bg-[#2a3d83] text-white":"border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:t.label},s))})]})]})]})]})}export{Ie as default};
