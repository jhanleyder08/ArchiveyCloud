import{r as _,j as e,H as D,L as v,a as S}from"./app-bdRnt6Sf.js";import{A as E}from"./app-layout-BYiALk1Q.js";import{C as r,a as i,b as c,c as t,d as j}from"./card-CWT2CaIV.js";import{B as n}from"./badge-D-wVoLf4.js";import{B as d}from"./app-logo-icon-DuPl4Vop.js";import{T as P,a as L,b as o,c as x}from"./tabs-6KI-AhUQ.js";import{p as T,q as V,D as z,c as q,d as A,e as H,f as U}from"./app-sidebar-layout-DoFu3WNo.js";import{E as p}from"./eye-CfI6NocG.js";import{C as f}from"./copy-YbNjvMW_.js";import{D as k}from"./download-97E7p8pE.js";import{A as B}from"./arrow-left-me5UTq16.js";import{P as I}from"./play-FCQh9dFB.js";import{S as G}from"./square-pen-DsjEvAkh.js";/* empty css            */import"./index-Cfqs0Bea.js";import"./label-eR3fV_fB.js";import"./index-Dem53vWf.js";const u=s=>({borrador:"bg-gray-100 text-gray-800",revision:"bg-yellow-100 text-yellow-800",activa:"bg-green-100 text-green-800",archivada:"bg-blue-100 text-blue-800",obsoleta:"bg-red-100 text-red-800"})[s]||"bg-gray-100 text-gray-800",b=s=>({memorando:"📝",oficio:"📄",resolucion:"⚖️",acta:"📋",informe:"📊",circular:"🔄",comunicacion:"💬",otro:"📎"})[s]||"📎";function ce({plantilla:s,documentos_generados:l,estadisticas_uso:m,puede_editar:g}){const[y,N]=_.useState(!1),w=()=>{S.post(route("admin.plantillas.duplicar",s.id))},C=()=>{console.log("Generar documento desde plantilla")};return e.jsxs(E,{header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v,{href:route("admin.plantillas.index"),className:"text-gray-500 hover:text-gray-700",children:e.jsx(B,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:s.nombre}),e.jsx(n,{className:u(s.estado),children:s.estado.toUpperCase()}),s.es_publica&&e.jsx(n,{variant:"secondary",children:"Pública"})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mt-1",children:[e.jsx("span",{children:s.codigo}),e.jsxs("span",{children:["v",s.version]}),e.jsxs("span",{children:[b(s.categoria)," ",s.categoria]})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(d,{variant:"outline",onClick:()=>N(!0),children:[e.jsx(p,{className:"w-4 h-4 mr-2"}),"Vista Previa"]}),e.jsxs(d,{variant:"outline",onClick:w,children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Duplicar"]}),e.jsxs(d,{onClick:C,children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"Generar Documento"]}),g&&e.jsx(d,{asChild:!0,children:e.jsxs(v,{href:route("admin.plantillas.edit",s.id),children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Editar"]})})]})]}),children:[e.jsx(D,{title:`Plantilla: ${s.nombre}`}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs(P,{defaultValue:"informacion",className:"w-full",children:[e.jsxs(L,{className:"grid w-full grid-cols-4",children:[e.jsx(o,{value:"informacion",children:"Información"}),e.jsx(o,{value:"contenido",children:"Contenido"}),e.jsx(o,{value:"variables",children:"Variables"}),e.jsx(o,{value:"documentos",children:"Documentos"})]}),e.jsxs(x,{value:"informacion",className:"space-y-4",children:[e.jsxs(r,{children:[e.jsx(i,{children:e.jsx(c,{children:"Detalles de la Plantilla"})}),e.jsxs(t,{className:"space-y-4",children:[s.descripcion&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Descripción"}),e.jsx("p",{className:"text-gray-900",children:s.descripcion})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Categoría"}),e.jsxs("p",{className:"text-gray-900 flex items-center space-x-1",children:[e.jsx("span",{children:b(s.categoria)}),e.jsx("span",{className:"capitalize",children:s.categoria})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Estado"}),e.jsx("div",{className:"mt-1",children:e.jsx(n,{className:u(s.estado),children:s.estado.toUpperCase()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Visibilidad"}),e.jsx("p",{className:"text-gray-900",children:s.es_publica?"Pública":"Privada"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Versión"}),e.jsxs("p",{className:"text-gray-900",children:["v",s.version]})]})]}),s.serie_documental&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Serie Documental"}),e.jsxs("p",{className:"text-gray-900",children:[s.serie_documental.codigo," - ",s.serie_documental.nombre]}),s.subserie_documental&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Subserie: ",s.subserie_documental.codigo," - ",s.subserie_documental.nombre]})]}),s.tags&&s.tags.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:s.tags.map((a,h)=>e.jsx(n,{variant:"outline",children:a},h))})]}),s.observaciones&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Observaciones"}),e.jsx("p",{className:"text-gray-900",children:s.observaciones})]})]})]}),s.versiones&&s.versiones.length>1&&e.jsxs(r,{children:[e.jsx(i,{children:e.jsx(c,{children:"Historial de Versiones"})}),e.jsx(t,{children:e.jsx("div",{className:"space-y-2",children:s.versiones.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(n,{variant:"outline",children:["v",a.version]}),e.jsx(n,{className:u(a.estado),children:a.estado})]}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(a.created_at).toLocaleDateString("es-ES")})]},a.id))})})]})]}),e.jsx(x,{value:"contenido",children:e.jsxs(r,{children:[e.jsxs(i,{children:[e.jsx(c,{children:"Contenido HTML"}),e.jsx(j,{children:"Contenido base de la plantilla"})]}),e.jsx(t,{children:s.contenido_html?e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:s.contenido_html})}):e.jsx("p",{className:"text-gray-500 italic",children:"Sin contenido definido"})})]})}),e.jsx(x,{value:"variables",children:e.jsxs(r,{children:[e.jsxs(i,{children:[e.jsx(c,{children:"Variables Configuradas"}),e.jsx(j,{children:"Campos que se pueden personalizar al generar documentos"})]}),e.jsx(t,{children:s.campos_variables&&s.campos_variables.length>0?e.jsx("div",{className:"space-y-3",children:s.campos_variables.map((a,h)=>e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium",children:a.etiqueta}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(n,{variant:"outline",children:a.tipo}),a.requerido&&e.jsx(n,{variant:"secondary",children:"Requerido"})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Variable:"})," ",a.nombre]}),a.valor_defecto&&e.jsxs("p",{children:[e.jsx("strong",{children:"Valor por defecto:"})," ",a.valor_defecto]})]})]},h))}):e.jsx("p",{className:"text-gray-500 italic",children:"No hay variables configuradas"})})]})}),e.jsx(x,{value:"documentos",children:e.jsxs(r,{children:[e.jsxs(i,{children:[e.jsx(c,{children:"Documentos Generados"}),e.jsx(j,{children:"Documentos creados usando esta plantilla"})]}),e.jsx(t,{children:l.length>0?e.jsx("div",{className:"space-y-3",children:l.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:a.nombre}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsxs("p",{children:["Creado por: ",a.usuario_creador.name]}),e.jsxs("p",{children:["Fecha: ",new Date(a.created_at).toLocaleDateString("es-ES")]}),a.expediente&&e.jsxs("p",{children:["Expediente: ",a.expediente.numero_expediente]})]})]}),e.jsx(d,{variant:"outline",size:"sm",children:e.jsx(p,{className:"w-4 h-4"})})]},a.id))}):e.jsx("p",{className:"text-gray-500 italic",children:"No se han generado documentos con esta plantilla"})})]})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(r,{children:[e.jsx(i,{children:e.jsx(c,{className:"text-sm",children:"Estadísticas de Uso"})}),e.jsxs(t,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Documentos generados"}),e.jsx("span",{className:"font-semibold",children:m.documentos_generados})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Último mes"}),e.jsx("span",{className:"font-semibold",children:m.documentos_ultimo_mes})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Usuarios que la usan"}),e.jsx("span",{className:"font-semibold",children:m.usuarios_utilizan})]})]})]}),e.jsxs(r,{children:[e.jsx(i,{children:e.jsx(c,{className:"text-sm",children:"Información del Autor"})}),e.jsxs(t,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:s.usuario_creador.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.usuario_creador.email})]})]}),e.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:[e.jsxs("p",{children:["Creada: ",new Date(s.created_at).toLocaleDateString("es-ES")]}),e.jsxs("p",{children:["Actualizada: ",new Date(s.updated_at).toLocaleDateString("es-ES")]})]})]})]}),g&&e.jsxs(r,{children:[e.jsx(i,{children:e.jsx(c,{className:"text-sm",children:"Acciones Rápidas"})}),e.jsxs(t,{className:"space-y-2",children:[e.jsxs(d,{variant:"outline",size:"sm",className:"w-full justify-start",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Cambiar Estado"]}),e.jsxs(d,{variant:"outline",size:"sm",className:"w-full justify-start",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Nueva Versión"]}),e.jsxs(d,{variant:"outline",size:"sm",className:"w-full justify-start",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Exportar"]})]})]})]})]})})}),e.jsx(z,{open:y,onOpenChange:N,children:e.jsxs(q,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(A,{children:[e.jsxs(H,{children:["Vista Previa - ",s.nombre]}),e.jsx(U,{children:"Previsualización del contenido de la plantilla"})]}),e.jsx("div",{className:"mt-4",children:s.contenido_html?e.jsx("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:s.contenido_html}}):e.jsx("p",{className:"text-gray-500 italic",children:"Sin contenido para previsualizar"})})]})})]})}export{ce as default};
