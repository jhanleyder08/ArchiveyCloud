import{r as i,j as e,H as ae,a as j}from"./app-hdUu-KqZ.js";import{A as re,F as P,D as A,a as te,b as M,c as O,d as I,e as B,T as S,f as le,t as d}from"./app-layout-DWmE0YsK.js";import{c as q,B as o}from"./app-logo-icon-D9hWQ763.js";import{L as a,I as h}from"./label-w95vUx40.js";import{B as E}from"./badge-DJ3t3qWc.js";import{S as g,a as p,b,c as N,d as v}from"./select-B8o9rBdb.js";import{P as ie,S as oe}from"./search-utHJLcrI.js";import{C as de}from"./circle-check-big-BRpukekW.js";import{E as ne}from"./eye-CpenN9r0.js";import{S as ce,T as me}from"./trash-2-CV786gwq.js";import{C as xe}from"./copy-CEpDrLvt.js";/* empty css            */import"./index-BhQoBiDm.js";import"./index-BvylRvNa.js";import"./index-BxTKVpLW.js";import"./check-BDAIt6kD.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ve=q("PowerOff",he);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],je=q("Power",ue);function ze({data:n,estadisticas:F,opciones:u,filtros:f}){const[L,_]=i.useState(!1),[$,C]=i.useState(!1),[H,k]=i.useState(!1),[r,T]=i.useState(null),[y,w]=i.useState(!1),[R,G]=i.useState(f.search||""),[J,K]=i.useState(f.estado||"all"),[ge,pe]=i.useState(f.nivel||"all"),[be,Ne]=i.useState(f.activo||"all"),Q=[{title:"Dashboard",href:"/admin"},{title:"Cuadros de Clasificación Documental",href:"/admin/ccd"}],[t,c]=i.useState({codigo:"",nombre:"",descripcion:"",nivel:1,padre_id:"",orden:0,estado:"borrador",activo:!0,observaciones:"",vocabulario_controlado:{},metadatos:{}}),[l,m]=i.useState({codigo:"",nombre:"",descripcion:"",nivel:1,padre_id:"",orden:0,estado:"borrador",activo:!0,observaciones:"",vocabulario_controlado:{},metadatos:{}}),U=s=>{s.preventDefault(),w(!0),j.post("/admin/ccd",t,{onSuccess:()=>{_(!1),c({codigo:"",nombre:"",descripcion:"",nivel:1,padre_id:"",orden:0,estado:"borrador",activo:!0,observaciones:"",vocabulario_controlado:{},metadatos:{}}),d.success("CCD creado exitosamente")},onError:x=>{console.error("Error creating CCD:",x),d.error("Error al crear el CCD")},onFinish:()=>w(!1)})},W=s=>{s.preventDefault(),r&&(w(!0),j.put(`/admin/ccd/${r.id}`,l,{onSuccess:()=>{C(!1),T(null),d.success("CCD actualizado exitosamente")},onError:x=>{console.error("Error updating CCD:",x),d.error("Error al actualizar el CCD")},onFinish:()=>w(!1)}))},X=s=>{T(s),k(!0)},Y=s=>{T(s),m({codigo:s.codigo,nombre:s.nombre,descripcion:s.descripcion||"",nivel:s.nivel,padre_id:s.padre_id?.toString()||"",orden:s.orden,estado:s.estado,activo:s.activo,observaciones:s.observaciones||"",vocabulario_controlado:s.vocabulario_controlado||{},metadatos:s.metadatos||{}}),C(!0)},Z=s=>{confirm("¿Está seguro de eliminar este CCD? Esta acción no se puede deshacer.")&&j.delete(`/admin/ccd/${s.id}`,{onSuccess:()=>d.success("CCD eliminado exitosamente"),onError:()=>d.error("Error al eliminar el CCD")})},ee=s=>{j.post(`/admin/ccd/${s.id}/duplicate`,{},{onSuccess:()=>d.success("CCD duplicado exitosamente"),onError:()=>d.error("Error al duplicar el CCD")})},se=s=>{j.patch(`/admin/ccd/${s.id}/toggle-active`,{},{onSuccess:()=>{const x=s.activo?"desactivado":"activado";d.success(`CCD ${x} exitosamente`)},onError:()=>d.error("Error al cambiar el estado del CCD")})},z=s=>{const x={borrador:"bg-gray-500",activo:"bg-green-500",inactivo:"bg-red-500",historico:"bg-yellow-500"},D={borrador:"Borrador",activo:"Activo",inactivo:"Inactivo",historico:"Histórico"};return e.jsx(E,{variant:"default",className:x[s]||"bg-gray-500",children:D[s]||s})},V=s=>{const D={1:{label:"Fondo",color:"bg-blue-500"},2:{label:"Sección",color:"bg-purple-500"},3:{label:"Subsección",color:"bg-indigo-500"},4:{label:"Serie",color:"bg-teal-500"},5:{label:"Subserie",color:"bg-cyan-500"}}[s]||{label:`Nivel ${s}`,color:"bg-gray-500"};return e.jsx(E,{variant:"default",className:D.color,children:D.label})};return e.jsxs(re,{breadcrumbs:Q,children:[e.jsx(ae,{title:"Cuadros de Clasificación Documental"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(P,{className:"h-6 w-6 text-[#2a3d83]"}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Cuadros de Clasificación Documental"})]}),e.jsxs(A,{open:L,onOpenChange:_,children:[e.jsx(te,{asChild:!0,children:e.jsxs(o,{className:"flex items-center gap-2 px-4 py-2 bg-[#2a3d83] text-white rounded-lg hover:bg-[#1e2b5f] transition-colors",children:[e.jsx(ie,{className:"h-4 w-4"}),"Nuevo CCD"]})}),e.jsxs(M,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-scroll [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:[e.jsxs(O,{children:[e.jsx(I,{className:"text-xl font-semibold text-gray-900",children:"Crear Nuevo CCD"}),e.jsx(B,{className:"text-sm text-gray-600",children:"Complete los siguientes datos para crear un nuevo Cuadro de Clasificación Documental."})]}),e.jsxs("form",{onSubmit:U,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"codigo",children:"Código *"}),e.jsx(h,{id:"codigo",value:t.codigo,onChange:s=>c({...t,codigo:s.target.value}),placeholder:"Ej: F.01, S.01.01",required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"nivel",children:"Nivel *"}),e.jsxs(g,{value:t.nivel.toString(),onValueChange:s=>c({...t,nivel:parseInt(s)}),children:[e.jsx(p,{children:e.jsx(b,{placeholder:"Seleccionar nivel"})}),e.jsx(N,{children:u.niveles.map(s=>e.jsx(v,{value:s.value,children:s.label},s.value))})]})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"nombre",children:"Nombre *"}),e.jsx(h,{id:"nombre",value:t.nombre,onChange:s=>c({...t,nombre:s.target.value}),placeholder:"Nombre del CCD",required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"descripcion",children:"Descripción"}),e.jsx(S,{id:"descripcion",value:t.descripcion,onChange:s=>c({...t,descripcion:s.target.value}),placeholder:"Descripción del CCD",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"estado",children:"Estado *"}),e.jsxs(g,{value:t.estado,onValueChange:s=>c({...t,estado:s}),children:[e.jsx(p,{children:e.jsx(b,{})}),e.jsx(N,{children:u.estados.map(s=>e.jsx(v,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"orden",children:"Orden"}),e.jsx(h,{id:"orden",type:"number",value:t.orden,onChange:s=>c({...t,orden:parseInt(s.target.value)||0}),min:"0"})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"observaciones",children:"Observaciones"}),e.jsx(S,{id:"observaciones",value:t.observaciones,onChange:s=>c({...t,observaciones:s.target.value}),placeholder:"Observaciones adicionales",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(o,{type:"button",variant:"outline",onClick:()=>_(!1),children:"Cancelar"}),e.jsx(o,{type:"submit",disabled:y,className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",children:y?"Creando...":"Crear CCD"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600",children:"Total CCDs"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:F.total})]}),e.jsx(P,{className:"h-8 w-8 text-[#2a3d83]"})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600",children:"CCDs Activos"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:F.activos})]}),e.jsx(de,{className:"h-8 w-8 text-[#2a3d83]"})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600",children:"Borradores"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:F.borradores})]}),e.jsx(le,{className:"h-8 w-8 text-[#2a3d83]"})]})})]}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4 w-full sm:w-auto",children:e.jsxs("div",{className:"relative flex-1 sm:w-80",children:[e.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(h,{type:"text",value:R,onChange:s=>G(s.target.value),placeholder:"Buscar CCDs...",className:"pl-10"})]})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(g,{value:J||"all",onValueChange:s=>K(s==="all"?"":s),children:[e.jsx(p,{className:"w-[180px]",children:e.jsx(b,{placeholder:"Todos los estados"})}),e.jsxs(N,{children:[e.jsx(v,{value:"all",children:"Todos los estados"}),u.estados.map(s=>e.jsx(v,{value:s.value,children:s.label},s.value))]})]})})]})}),e.jsxs("div",{className:"bg-white rounded-lg border overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Código"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Nombre"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Nivel"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Estado"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Activo"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Creado"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:n.data.length>0?n.data.map(s=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"p-4",children:e.jsx("div",{className:"font-mono text-sm",children:s.codigo})}),e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"font-medium",children:s.nombre}),s.descripcion&&e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:s.descripcion})]}),e.jsx("td",{className:"p-4",children:V(s.nivel)}),e.jsx("td",{className:"p-4",children:z(s.estado)}),e.jsx("td",{className:"p-4",children:e.jsx(E,{variant:s.activo?"default":"secondary",className:s.activo?"bg-green-500":"",children:s.activo?"Sí":"No"})}),e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"text-sm",children:new Date(s.created_at).toLocaleDateString("es-ES")}),s.usuario_creador&&e.jsxs("div",{className:"text-xs text-gray-500",children:["por ",s.usuario_creador.name]})]}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[e.jsx(o,{size:"sm",variant:"ghost",onClick:()=>X(s),className:"h-8 w-8 p-0",children:e.jsx(ne,{className:"h-4 w-4"})}),e.jsx(o,{size:"sm",variant:"ghost",onClick:()=>Y(s),className:"h-8 w-8 p-0",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx(o,{size:"sm",variant:"ghost",onClick:()=>ee(s),className:"h-8 w-8 p-0",children:e.jsx(xe,{className:"h-4 w-4"})}),e.jsx(o,{size:"sm",variant:"ghost",onClick:()=>se(s),className:"h-8 w-8 p-0",children:s.activo?e.jsx(ve,{className:"h-4 w-4 text-red-500"}):e.jsx(je,{className:"h-4 w-4 text-green-500"})}),e.jsx(o,{size:"sm",variant:"ghost",onClick:()=>Z(s),className:"h-8 w-8 p-0 text-red-500 hover:text-red-700",children:e.jsx(me,{className:"h-4 w-4"})})]})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"p-8 text-center text-gray-500",children:"No se encontraron cuadros de clasificación documental."})})})]})}),n.last_page>1&&e.jsx("div",{className:"flex items-center justify-between px-4 py-3 border-t",children:e.jsxs("div",{className:"text-sm text-gray-700",children:["Mostrando ",(n.current_page-1)*n.per_page+1," a"," ",Math.min(n.current_page*n.per_page,n.total)," de ",n.total," resultados"]})})]})]}),e.jsx(A,{open:$,onOpenChange:C,children:e.jsxs(M,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-scroll [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:[e.jsxs(O,{children:[e.jsx(I,{className:"text-xl font-semibold text-gray-900",children:"Editar CCD"}),e.jsx(B,{className:"text-sm text-gray-600",children:"Modifique los datos del Cuadro de Clasificación Documental."})]}),r&&e.jsxs("form",{onSubmit:W,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"edit-codigo",children:"Código *"}),e.jsx(h,{id:"edit-codigo",value:l.codigo,onChange:s=>m({...l,codigo:s.target.value}),placeholder:"Ej: F.01, S.01.01",required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"edit-nivel",children:"Nivel *"}),e.jsxs(g,{value:l.nivel.toString(),onValueChange:s=>m({...l,nivel:parseInt(s)}),children:[e.jsx(p,{children:e.jsx(b,{placeholder:"Seleccionar nivel"})}),e.jsx(N,{children:u.niveles.map(s=>e.jsx(v,{value:s.value,children:s.label},s.value))})]})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"edit-nombre",children:"Nombre *"}),e.jsx(h,{id:"edit-nombre",value:l.nombre,onChange:s=>m({...l,nombre:s.target.value}),placeholder:"Nombre del CCD",required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"edit-descripcion",children:"Descripción"}),e.jsx(S,{id:"edit-descripcion",value:l.descripcion,onChange:s=>m({...l,descripcion:s.target.value}),placeholder:"Descripción del CCD",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"edit-estado",children:"Estado *"}),e.jsxs(g,{value:l.estado,onValueChange:s=>m({...l,estado:s}),children:[e.jsx(p,{children:e.jsx(b,{})}),e.jsx(N,{children:u.estados.map(s=>e.jsx(v,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"edit-orden",children:"Orden"}),e.jsx(h,{id:"edit-orden",type:"number",value:l.orden,onChange:s=>m({...l,orden:parseInt(s.target.value)||0}),min:"0"})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"edit-observaciones",children:"Observaciones"}),e.jsx(S,{id:"edit-observaciones",value:l.observaciones,onChange:s=>m({...l,observaciones:s.target.value}),placeholder:"Observaciones adicionales",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(o,{type:"button",variant:"outline",onClick:()=>C(!1),children:"Cancelar"}),e.jsx(o,{type:"submit",disabled:y,className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",children:y?"Actualizando...":"Actualizar CCD"})]})]})]})}),e.jsx(A,{open:H,onOpenChange:k,children:e.jsxs(M,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-scroll [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:[e.jsxs(O,{children:[e.jsx(I,{className:"text-xl font-semibold text-gray-900",children:"Detalles del CCD"}),e.jsx(B,{className:"text-sm text-gray-600",children:"Información completa del Cuadro de Clasificación Documental."})]}),r&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium text-gray-700",children:"Código"}),e.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md font-mono text-sm",children:r?.codigo})]}),e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium text-gray-700",children:"Nivel"}),e.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md",children:V(r?.nivel||1)})]})]}),e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium text-gray-700",children:"Nombre"}),e.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md",children:r?.nombre})]}),r?.descripcion&&e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium text-gray-700",children:"Descripción"}),e.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md text-sm",children:r?.descripcion})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium text-gray-700",children:"Estado"}),e.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md",children:z(r?.estado||"borrador")})]}),e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium text-gray-700",children:"Activo"}),e.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md",children:e.jsx(E,{variant:r?.activo?"default":"secondary",className:r?.activo?"bg-green-500":"",children:r?.activo?"Sí":"No"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium text-gray-700",children:"Orden"}),e.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md text-sm",children:r?.orden})]}),e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium text-gray-700",children:"Fecha de Creación"}),e.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md text-sm",children:r?.created_at?new Date(r.created_at).toLocaleDateString("es-ES"):"N/A"})]})]}),r?.observaciones&&e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium text-gray-700",children:"Observaciones"}),e.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md text-sm",children:r?.observaciones})]}),r?.padre&&e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium text-gray-700",children:"Elemento Padre"}),e.jsxs("div",{className:"mt-1 p-2 bg-gray-50 rounded-md text-sm",children:[e.jsx("span",{className:"font-mono",children:r?.padre?.codigo})," - ",r?.padre?.nombre]})]}),r?.usuario_creador&&e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium text-gray-700",children:"Creado por"}),e.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md text-sm",children:r?.usuario_creador?.name})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(o,{variant:"outline",onClick:()=>k(!1),children:"Cerrar"})})]})]})})]})}export{ze as default};
