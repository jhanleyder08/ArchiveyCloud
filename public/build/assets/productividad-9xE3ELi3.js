import{u as O,j as e,H as P,L as U}from"./app-RHcSxCe3.js";import{A as q,g as V,l as w,p as X}from"./app-layout-BOrikycp.js";import{c as k,B as A}from"./app-logo-icon-BF18vCvI.js";import{C as t,a as r,b as l,c,d}from"./card-By0YNH80.js";import{B as f}from"./badge-EzLnOWdl.js";import{S as Y,a as G,b as J,c as Q,d as i}from"./select-CLRe-r8w.js";import{D as W}from"./download-DI_2G3X9.js";import{A as C}from"./activity-Y5tMAv0a.js";import{T as Z}from"./trending-up-D82SI5-c.js";import{A as D}from"./award-CFv6xO8t.js";import{R as g,b as T,X as S,Y as L,T as N,L as ee,B as _,P as se,a as ae,C as te}from"./PieChart-BP1w2hJW.js";import{A as re,a as le}from"./AreaChart-DqNhnmLT.js";import{B as ce}from"./BarChart-BFGhV9Cs.js";/* empty css            */import"./index-D0T5-hCw.js";import"./label-DKq7ma2U.js";import"./index-DY0oTJvG.js";import"./index-YNofFhZl.js";import"./check-gaOx-mbL.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],ie=k("Star",de);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],oe=k("Target",ne),h=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"];function ke({documentosPorUsuario:n,expedientesPorUsuario:o,actividadPorDia:j,accionesFrecuentes:p,periodo:u,fechaInicio:xe}){const{data:v,setData:E,get:R,processing:y}=O({periodo:u}),B=()=>{R(route("admin.reportes.productividad"),{data:{periodo:v.periodo},preserveState:!0})},F=()=>{console.log("Exportar reporte de productividad")},K=n.reduce((s,a)=>s+a.total,0),$=o.reduce((s,a)=>s+a.total,0),b=j.reduce((s,a)=>s+a.total_acciones,0),z=Math.round(b/j.length)||0,x=n[0],m=o[0],M=j.map(s=>({fecha:new Date(s.fecha).toLocaleDateString("es-ES",{month:"short",day:"numeric"}),actividad:s.total_acciones})),H=n.slice(0,10).map((s,a)=>({usuario:s.creator.name,documentos:s.total,expedientes:o.find(I=>I.created_by===s.created_by)?.total||0,color:h[a%h.length]}));return e.jsxs(q,{children:[e.jsx(P,{title:"Productividad - Reportes"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{href:route("admin.reportes.dashboard"),className:"text-sm text-muted-foreground hover:text-foreground",children:"Reportes"}),e.jsx("span",{className:"text-muted-foreground",children:"/"}),e.jsx("span",{className:"font-medium",children:"Productividad"})]}),e.jsx("h1",{className:"text-2xl font-bold mt-1",children:"Reporte de Productividad"}),e.jsxs("p",{className:"text-muted-foreground",children:["Análisis de productividad de usuarios en los últimos ",u," días"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(Y,{value:v.periodo,onValueChange:s=>E("periodo",s),children:[e.jsx(G,{className:"w-40",children:e.jsx(J,{placeholder:"Período"})}),e.jsxs(Q,{children:[e.jsx(i,{value:"7",children:"7 días"}),e.jsx(i,{value:"15",children:"15 días"}),e.jsx(i,{value:"30",children:"30 días"}),e.jsx(i,{value:"60",children:"60 días"}),e.jsx(i,{value:"90",children:"90 días"})]})]}),e.jsx(A,{onClick:B,disabled:y,children:y?"Aplicando...":"Aplicar"}),e.jsxs(A,{variant:"outline",onClick:F,children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Exportar"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Total Documentos"}),e.jsx(V,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:K.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["En los últimos ",u," días"]})]})]}),e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Total Expedientes"}),e.jsx(w,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:$.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Creados en el período"})]})]}),e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Total Actividad"}),e.jsx(C,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Acciones realizadas"})]})]}),e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Promedio Diario"}),e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:z}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Acciones por día"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsxs(l,{className:"flex items-center space-x-2",children:[e.jsx(D,{className:"h-5 w-5 text-yellow-500"}),e.jsx("span",{children:"Usuario Más Productivo - Documentos"})]}),e.jsx(d,{children:"Usuario que ha creado más documentos"})]}),e.jsx(c,{children:x?e.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-yellow-500 text-white rounded-full",children:e.jsx(ie,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:x.creator.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:x.creator.email})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:x.total}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"documentos"})]})]}):e.jsx("p",{className:"text-muted-foreground",children:"No hay datos disponibles"})})]}),e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsxs(l,{className:"flex items-center space-x-2",children:[e.jsx(D,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{children:"Usuario Más Productivo - Expedientes"})]}),e.jsx(d,{children:"Usuario que ha creado más expedientes"})]}),e.jsx(c,{children:m?e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-500 text-white rounded-full",children:e.jsx(oe,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:m.creator.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:m.creator.email})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:m.total}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"expedientes"})]})]}):e.jsx("p",{className:"text-muted-foreground",children:"No hay datos disponibles"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(l,{children:"Actividad Diaria"}),e.jsx(d,{children:"Número de acciones realizadas por día"})]}),e.jsx(c,{children:e.jsx(g,{width:"100%",height:300,children:e.jsxs(re,{data:M,children:[e.jsx(T,{strokeDasharray:"3 3"}),e.jsx(S,{dataKey:"fecha"}),e.jsx(L,{}),e.jsx(N,{}),e.jsx(le,{type:"monotone",dataKey:"actividad",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6})]})})})]}),e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(l,{children:"Top 10 Usuarios - Documentos"}),e.jsx(d,{children:"Usuarios más productivos creando documentos"})]}),e.jsx(c,{children:e.jsx(g,{width:"100%",height:300,children:e.jsxs(ce,{data:H,children:[e.jsx(T,{strokeDasharray:"3 3"}),e.jsx(S,{dataKey:"usuario",angle:-45,textAnchor:"end",height:80}),e.jsx(L,{}),e.jsx(N,{}),e.jsx(ee,{}),e.jsx(_,{dataKey:"documentos",fill:"#8884d8",name:"Documentos"}),e.jsx(_,{dataKey:"expedientes",fill:"#82ca9d",name:"Expedientes"})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsxs(l,{className:"flex items-center space-x-2",children:[e.jsx(X,{className:"h-5 w-5"}),e.jsx("span",{children:"Ranking - Documentos"})]}),e.jsx(d,{children:"Top 15 usuarios por documentos creados"})]}),e.jsx(c,{children:e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:n.slice(0,15).map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full text-sm font-bold text-white ${a===0?"bg-yellow-500":a===1?"bg-gray-400":a===2?"bg-amber-600":"bg-gray-300 text-gray-700"}`,children:a+1}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.creator.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.creator.email})]})]}),e.jsxs(f,{variant:"secondary",children:[s.total," documentos"]})]},s.created_by))})})]}),e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsxs(l,{className:"flex items-center space-x-2",children:[e.jsx(w,{className:"h-5 w-5"}),e.jsx("span",{children:"Ranking - Expedientes"})]}),e.jsx(d,{children:"Top 15 usuarios por expedientes creados"})]}),e.jsx(c,{children:e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:o.slice(0,15).map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full text-sm font-bold text-white ${a===0?"bg-yellow-500":a===1?"bg-gray-400":a===2?"bg-amber-600":"bg-gray-300 text-gray-700"}`,children:a+1}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.creator.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.creator.email})]})]}),e.jsxs(f,{variant:"secondary",children:[s.total," expedientes"]})]},s.created_by))})})]})]}),e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsxs(l,{className:"flex items-center space-x-2",children:[e.jsx(C,{className:"h-5 w-5"}),e.jsx("span",{children:"Acciones Más Frecuentes"})]}),e.jsx(d,{children:"Tipos de acciones realizadas con mayor frecuencia"})]}),e.jsx(c,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-3",children:p.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-primary text-primary-foreground rounded-full text-sm",children:a+1}),e.jsx("h4",{className:"font-medium capitalize",children:s.accion.replace("_"," ")})]}),e.jsxs(f,{variant:"outline",children:[s.total," veces"]})]},s.accion))}),e.jsx("div",{children:e.jsx(g,{width:"100%",height:300,children:e.jsxs(se,{children:[e.jsx(ae,{data:p.slice(0,6),cx:"50%",cy:"50%",labelLine:!1,label:({accion:s,percent:a})=>`${s}: ${(a*100).toFixed(1)}%`,outerRadius:80,fill:"#8884d8",dataKey:"total",children:p.slice(0,6).map((s,a)=>e.jsx(te,{fill:h[a%h.length]},`cell-${a}`))}),e.jsx(N,{})]})})})]})})]})]})]})}export{ke as default};
