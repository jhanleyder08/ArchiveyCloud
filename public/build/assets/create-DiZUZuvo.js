import{r as q,u as I,j as e,H as A,b as j,t as y}from"./app-oNxfBRLg.js";import{A as E}from"./app-layout-W8X124Ob.js";import{B as u}from"./button-CK9ZK9IT.js";import{I as c}from"./input-BWl1lGsq.js";import{L as d}from"./label-DpUIWM1C.js";import{F as w,A as k,T as v}from"./app-sidebar-layout-prEClG2f.js";import{S as g,a as b,b as N,c as C,d as t}from"./select-B5_eSPQ4.js";import{C as l,a as n,b as o,c as m}from"./card-5vWCNqf9.js";import{A as T,a as V}from"./alert-4Oz7NkUR.js";import{I as z}from"./info-DdBek8nD.js";import{S as L}from"./save-DxT-NbtA.js";/* empty css            */import"./index-C8M5vqBQ.js";import"./index-Ba-H6ma3.js";import"./Combination-BdUefnHI.js";import"./index-CoFjjCqG.js";import"./x-iE_t9Cph.js";import"./app-logo-icon-BRcKCqh7.js";import"./user-8eyzErWJ.js";import"./mail-D0yVgJcQ.js";import"./users-Ccr-Nlma.js";import"./folder-B5rwVk21.js";import"./triangle-alert-DUb_Rlxa.js";import"./search-sPxt0Cs4.js";import"./BrandingProvider-1py7QB7p.js";import"./index-pInFw5Lg.js";import"./check-CcUTePir.js";function he({opciones:x}){const[h,f]=q.useState(!1),{data:s,setData:i,post:S,processing:p,errors:a,reset:B}=I({codigo:"",nombre:"",descripcion:"",entidad:"",dependencia:"",nivel:1,padre_id:"",orden_jerarquico:1,estado:"borrador",activo:!0,notas:"",alcance:""}),_=[{title:"Inicio",href:"/dashboard"},{title:"Administración",href:"/admin"},{title:"CCD",href:"/admin/ccd"},{title:"Crear CCD",href:"/admin/ccd/create"}],D=r=>{r.preventDefault(),f(!0),S("/admin/ccd",{onSuccess:()=>{y.success("Cuadro de Clasificación Documental creado exitosamente"),j.visit("/admin/ccd")},onError:H=>{y.error("Error al crear el CCD. Revisa los campos marcados.")},onFinish:()=>{f(!1)}})},F=x.padres_disponibles?.filter(r=>r.nivel<s.nivel)||[];return e.jsxs(E,{breadcrumbs:_,children:[e.jsx(A,{title:"Crear CCD"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(w,{className:"h-6 w-6 text-[#2a3d83]"}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Crear Cuadro de Clasificación Documental"})]}),e.jsxs(u,{type:"button",variant:"outline",onClick:()=>j.visit("/admin/ccd"),className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),"Volver"]})]}),e.jsxs(T,{children:[e.jsx(z,{className:"h-4 w-4"}),e.jsx(V,{children:"El Cuadro de Clasificación Documental organiza jerárquicamente la documentación siguiendo la estructura archivística de la entidad."})]}),e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(o,{children:"Información Básica"})}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"codigo",children:"Código *"}),e.jsx(c,{id:"codigo",type:"text",value:s.codigo,onChange:r=>i("codigo",r.target.value),placeholder:"Ej: F.01, S.01.01",className:a.codigo?"border-red-500":"",required:!0}),a.codigo&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:a.codigo})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"nivel",children:"Nivel Jerárquico *"}),e.jsxs(g,{value:s.nivel.toString(),onValueChange:r=>{i("nivel",parseInt(r)),i("padre_id","")},children:[e.jsx(b,{id:"nivel",className:a.nivel?"border-red-500":"",children:e.jsx(N,{placeholder:"Seleccionar nivel"})}),e.jsx(C,{children:x.niveles.map(r=>e.jsx(t,{value:r.value,children:r.label},r.value))})]}),a.nivel&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:a.nivel})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"nombre",children:"Nombre *"}),e.jsx(c,{id:"nombre",type:"text",value:s.nombre,onChange:r=>i("nombre",r.target.value),placeholder:"Nombre descriptivo del CCD",className:a.nombre?"border-red-500":"",required:!0}),a.nombre&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:a.nombre})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"descripcion",children:"Descripción"}),e.jsx(v,{id:"descripcion",value:s.descripcion,onChange:r=>i("descripcion",r.target.value),placeholder:"Descripción detallada del elemento",rows:3,className:a.descripcion?"border-red-500":""}),a.descripcion&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:a.descripcion})]})]})]}),e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(o,{children:"Información Organizacional"})}),e.jsx(m,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"entidad",children:"Entidad *"}),e.jsx(c,{id:"entidad",type:"text",value:s.entidad,onChange:r=>i("entidad",r.target.value),placeholder:"Nombre de la entidad",className:a.entidad?"border-red-500":"",required:!0}),a.entidad&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:a.entidad})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"dependencia",children:"Dependencia"}),e.jsx(c,{id:"dependencia",type:"text",value:s.dependencia,onChange:r=>i("dependencia",r.target.value),placeholder:"Dependencia responsable",className:a.dependencia?"border-red-500":""}),a.dependencia&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:a.dependencia})]})]})})]}),e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(o,{children:"Estructura Jerárquica"})}),e.jsx(m,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"padre_id",children:"Elemento Padre"}),e.jsxs(g,{value:s.padre_id,onValueChange:r=>i("padre_id",r),children:[e.jsx(b,{id:"padre_id",className:a.padre_id?"border-red-500":"",children:e.jsx(N,{placeholder:"Sin elemento padre (raíz)"})}),e.jsxs(C,{children:[e.jsx(t,{value:"null",children:"Sin elemento padre (raíz)"}),F.map(r=>e.jsxs(t,{value:r.id.toString(),children:[r.codigo," - ",r.nombre]},r.id))]})]}),a.padre_id&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:a.padre_id})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"orden_jerarquico",children:"Orden Jerárquico"}),e.jsx(c,{id:"orden_jerarquico",type:"number",min:"1",value:s.orden_jerarquico,onChange:r=>i("orden_jerarquico",parseInt(r.target.value)||1),className:a.orden_jerarquico?"border-red-500":""}),a.orden_jerarquico&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:a.orden_jerarquico})]})]})})]}),e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(o,{children:"Configuración y Notas"})}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"estado",children:"Estado *"}),e.jsxs(g,{value:s.estado,onValueChange:r=>i("estado",r),children:[e.jsx(b,{id:"estado",className:a.estado?"border-red-500":"",children:e.jsx(N,{})}),e.jsx(C,{children:x.estados.map(r=>e.jsx(t,{value:r.value,children:r.label},r.value))})]}),a.estado&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:a.estado})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"activo",type:"checkbox",checked:s.activo,onChange:r=>i("activo",r.target.checked),className:"rounded border-gray-300"}),e.jsx(d,{htmlFor:"activo",children:"Elemento Activo"})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"alcance",children:"Alcance"}),e.jsx(v,{id:"alcance",value:s.alcance,onChange:r=>i("alcance",r.target.value),placeholder:"Alcance y cobertura del elemento",rows:2,className:a.alcance?"border-red-500":""}),a.alcance&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:a.alcance})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"notas",children:"Notas"}),e.jsx(v,{id:"notas",value:s.notas,onChange:r=>i("notas",r.target.value),placeholder:"Notas adicionales y observaciones",rows:3,className:a.notas?"border-red-500":""}),a.notas&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:a.notas})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6",children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>j.visit("/admin/ccd"),disabled:p||h,children:"Cancelar"}),e.jsxs(u,{type:"submit",disabled:p||h,className:"bg-[#2a3d83] hover:bg-[#1e2b5f] flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4"}),p||h?"Guardando...":"Crear CCD"]})]})]})]})]})}export{he as default};
