import{j as e,H as S,L}from"./app-BKLP_nPM.js";import{A as $}from"./app-layout-CiVTELBK.js";import{B as K}from"./button-DU7PaMm0.js";import{C as i,c as t,a as c,b as r,d as n}from"./card-B11AeXvY.js";import{B as d}from"./badge-a3Y1gQLB.js";import{A as O}from"./arrow-left-APr-3QY_.js";import{h as x,j as R}from"./app-sidebar-layout-DsWF9-9F.js";import{T as g,U}from"./users-C9iR8xZm.js";import{S as u}from"./star-C_IbnmqA.js";import{H as k}from"./hard-drive-DAYJstZX.js";import{T as y}from"./triangle-alert-4kmfAJf8.js";import{R as o,T as m}from"./CategoricalChart-CkEjZ1jJ.js";import{P as v,a as b}from"./PieChart-DBSNxIUt.js";import{C as w}from"./tooltipContext-W7wgBxpX.js";import{B as _}from"./BarChart-CwsrmAW1.js";import{C as h,X as j,Y as p}from"./CartesianChart-CZjKWLd3.js";import{B as C}from"./barSelectors-D_SvUuBf.js";import{A as P,a as H}from"./AreaChart-oAiGuetm.js";import{F as I}from"./Combination-CNcOVb4l.js";import{C as V}from"./folder-CfbQaoFn.js";/* empty css            */import"./index-CWKfeADP.js";import"./index-Bx1pAsJy.js";import"./index-6IngiEe4.js";import"./x-BBZgfGw_.js";import"./index-BxZ-HuCv.js";import"./app-logo-icon-O--pXRoV.js";import"./input-BTbuUEqz.js";import"./label-CanIalWQ.js";import"./user-DLX_sEn8.js";import"./search-B0VvmoDg.js";import"./ActivePoints-DyIFM4UO.js";const B=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316"];function we({estadisticas:a}){const f=Object.entries(a.por_tipo).map(([s,l])=>({name:s==="expediente"?"Expedientes":"Documentos",value:l,icon:s==="expediente"?"folder":"file"})),F=Object.entries(a.por_serie).slice(0,10).map(([s,l])=>({name:s.length>20?s.substring(0,20)+"...":s,total:l})),E=Object.entries(a.por_estado_conservacion).map(([s,l])=>({name:s.charAt(0).toUpperCase()+s.slice(1),value:l,estado:s})),N=Object.entries(a.por_nivel_acceso).map(([s,l])=>({name:s.charAt(0).toUpperCase()+s.slice(1),value:l,nivel:s})),A=a.indices_por_mes.map(s=>({mes:`${s.mes}/${s.año}`,total:s.total,fecha:new Date(s.año,s.mes-1)})).sort((s,l)=>s.fecha.getTime()-l.fecha.getTime()),D=s=>({excelente:"#10B981",bueno:"#3B82F6",regular:"#F59E0B",malo:"#F97316",critico:"#EF4444"})[s]||"#6B7280",T=s=>({publico:"#10B981",restringido:"#F59E0B",confidencial:"#F97316",secreto:"#EF4444"})[s]||"#6B7280",z=()=>{const{ultima_semana:s,ultimo_mes:l}=a.crecimiento_indices;return l===0?0:((s*4-l)/l*100).toFixed(1)};return e.jsxs($,{children:[e.jsx(S,{title:"Estadísticas - Índices Electrónicos"}),e.jsxs("div",{className:"container mx-auto py-6",children:[e.jsx("div",{className:"flex justify-between items-start mb-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(L,{href:"/admin/indices",children:e.jsxs(K,{variant:"outline",size:"sm",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Volver"]})}),e.jsx(x,{className:"w-8 h-8 text-indigo-600"})]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Estadísticas de Índices Electrónicos"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Dashboard completo con métricas y análisis de indexación"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsx(i,{children:e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(x,{className:"h-8 w-8 text-indigo-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Índices"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.total_indices.toLocaleString()})]})]})})}),e.jsx(i,{children:e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(g,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Crecimiento Semanal"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.crecimiento_indices.ultima_semana}),e.jsxs("p",{className:"text-xs text-green-600",children:["+",z(),"%"]})]})]})})}),e.jsx(i,{children:e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(u,{className:"h-8 w-8 text-yellow-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Documentos Vitales"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.documentos_vitales.toLocaleString()}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(a.documentos_vitales/a.total_indices*100).toFixed(1),"% del total"]})]})]})})}),e.jsx(i,{children:e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tamaño Total"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.tamaño_total})]})]})})})]}),a.indices_desactualizados>0&&e.jsx(i,{className:"mb-6 border-yellow-200 bg-yellow-50",children:e.jsx(t,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(y,{className:"h-5 w-5 text-yellow-600 mr-3"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-yellow-800 font-medium",children:[a.indices_desactualizados," índices necesitan actualización"]}),e.jsx("p",{className:"text-yellow-700 text-sm",children:"Estos índices no han sido actualizados en más de 6 meses."})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs(i,{children:[e.jsxs(c,{children:[e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5"}),"Distribución por Tipo"]}),e.jsx(n,{children:"Índices de expedientes vs documentos"})]}),e.jsx(t,{children:e.jsx(o,{width:"100%",height:300,children:e.jsxs(v,{children:[e.jsx(b,{data:f,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:l})=>`${s} ${(l*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:f.map((s,l)=>e.jsx(w,{fill:B[l%B.length]},`cell-${l}`))}),e.jsx(m,{})]})})})]}),e.jsxs(i,{children:[e.jsxs(c,{children:[e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-5 h-5"}),"Estado de Conservación"]}),e.jsx(n,{children:"Distribución por estado de conservación"})]}),e.jsx(t,{children:e.jsx(o,{width:"100%",height:300,children:e.jsxs(_,{data:E,children:[e.jsx(h,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"name"}),e.jsx(p,{}),e.jsx(m,{}),e.jsx(C,{dataKey:"value",fill:s=>D(s.estado)})]})})})]})]}),e.jsxs(i,{className:"mb-8",children:[e.jsxs(c,{children:[e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-5 h-5"}),"Crecimiento de Índices (Últimos 12 meses)"]}),e.jsx(n,{children:"Evolución temporal de la indexación"})]}),e.jsx(t,{children:e.jsx(o,{width:"100%",height:400,children:e.jsxs(P,{data:A,children:[e.jsx(h,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"mes"}),e.jsx(p,{}),e.jsx(m,{}),e.jsx(H,{type:"monotone",dataKey:"total",stroke:"#3B82F6",fill:"#3B82F6",fillOpacity:.3})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs(i,{children:[e.jsxs(c,{children:[e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5"}),"Top 10 Series Documentales"]}),e.jsx(n,{children:"Series con mayor cantidad de índices"})]}),e.jsx(t,{children:e.jsx(o,{width:"100%",height:400,children:e.jsxs(_,{data:F,layout:"horizontal",children:[e.jsx(h,{strokeDasharray:"3 3"}),e.jsx(j,{type:"number"}),e.jsx(p,{dataKey:"name",type:"category",width:100}),e.jsx(m,{}),e.jsx(C,{dataKey:"total",fill:"#10B981"})]})})})]}),e.jsxs(i,{children:[e.jsxs(c,{children:[e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(Shield,{className:"w-5 h-5"}),"Distribución por Nivel de Acceso"]}),e.jsx(n,{children:"Clasificación de seguridad de documentos"})]}),e.jsx(t,{children:e.jsx(o,{width:"100%",height:300,children:e.jsxs(v,{children:[e.jsx(b,{data:N,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:l})=>`${s} ${(l*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:N.map((s,l)=>e.jsx(w,{fill:T(s.nivel)},`cell-${l}`))}),e.jsx(m,{})]})})})]})]}),e.jsxs(i,{className:"mb-8",children:[e.jsxs(c,{children:[e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5"}),"Top Usuarios Indexadores"]}),e.jsx(n,{children:"Usuarios más activos en la indexación"})]}),e.jsx(t,{children:e.jsx("div",{className:"space-y-4",children:a.top_usuarios_indexadores.slice(0,10).map((s,l)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ${l===0?"bg-yellow-500":l===1?"bg-gray-400":l===2?"bg-amber-600":"bg-blue-500"}`,children:l+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.usuario_indexacion.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.total," índice",s.total!==1?"s":""," creado",s.total!==1?"s":""]})]})]}),e.jsxs(d,{variant:"outline",children:[(s.total/a.total_indices*100).toFixed(1),"%"]})]},s.usuario_indexacion_id))})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-5 h-5"}),"Actividad Reciente"]})}),e.jsx(t,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Última semana"}),e.jsx("span",{className:"font-medium",children:a.crecimiento_indices.ultima_semana})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Último mes"}),e.jsx("span",{className:"font-medium",children:a.crecimiento_indices.ultimo_mes})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Último año"}),e.jsx("span",{className:"font-medium",children:a.crecimiento_indices.ultimo_año})]})]})})]}),e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(u,{className:"w-5 h-5"}),"Información Especial"]})}),e.jsx(t,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Documentos vitales"}),e.jsx(d,{className:"bg-yellow-100 text-yellow-800",children:a.documentos_vitales})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Valor histórico"}),e.jsx(d,{className:"bg-purple-100 text-purple-800",children:a.documentos_historicos})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"% Especiales"}),e.jsxs("span",{className:"font-medium",children:[((a.documentos_vitales+a.documentos_historicos)/a.total_indices*100).toFixed(1),"%"]})]})]})})]}),e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5"}),"Mantenimiento"]})}),e.jsx(t,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Índices recientes"}),e.jsx(d,{className:"bg-green-100 text-green-800",children:a.indices_recientes})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Desactualizados"}),e.jsx(d,{className:"bg-yellow-100 text-yellow-800",children:a.indices_desactualizados})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"% Actualizados"}),e.jsxs("span",{className:"font-medium",children:[((a.total_indices-a.indices_desactualizados)/a.total_indices*100).toFixed(1),"%"]})]})]})})]})]})]})]})}export{we as default};
