import{e as D,r as t,b as p,j as e,H as T,L as i}from"./app-BwzY5mdP.js";import{A as U}from"./app-layout-9wS50XJ4.js";import{B as m}from"./button-BuG7hErd.js";import{I as _}from"./input-DBPsNB4E.js";import{S as A,a as P,b as $,c as F,d}from"./select-FIAkf9pv.js";import{u as I,j as M,k as j,l as g,m as f,D as R,a as G,b as L,c as B,d as H,e as q}from"./app-sidebar-layout-V4G_4O_u.js";import{U as v}from"./users-Bd_tJWgh.js";import{S as Q}from"./triangle-alert-CwolSKvH.js";import{P as V}from"./plus-BOYqNwH5.js";import{C as O}from"./circle-alert-DUM8TW_W.js";import{S as X}from"./search-DYmQja4G.js";import{S as z}from"./square-pen-B4ZLMNUx.js";import{U as J}from"./user-x-Ba_ENbyM.js";import{U as K}from"./user-check-CeMki8S4.js";import{T as W}from"./trash-2-Vuv8g9Jx.js";/* empty css            */import"./index-C39PKzMR.js";import"./Combination-DMdRKDdc.js";import"./index-DRfaZ5bA.js";import"./index-BeU68MN8.js";import"./check-BLssxijV.js";import"./index-BQN2DSxF.js";import"./x-yj7I5XB9.js";import"./app-logo-icon-CWh3FBC5.js";import"./label-COs3lnS9.js";import"./user-CGcDW0oZ.js";import"./mail-DcAASWb1.js";import"./folder-BDmHn7zE.js";import"./BrandingProvider-C7c3UgBn.js";const Y=[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Gestión de usuarios",href:"/admin/users"}];function Le({users:r,stats:a,roles:Z,filters:x}){const{flash:n}=D().props,b=I(),[k,ee]=t.useState(x.search||""),[o,c]=t.useState(null),[se,te]=t.useState(!1),[N,re]=t.useState(null),[ae,le]=t.useState({name:"",email:"",role_id:"",password:"",password_confirmation:"",verify_email:!1}),[ie,de]=t.useState({}),[ne,oe]=t.useState({name:"",email:"",role_id:"",active:!0}),[h,y]=t.useState(x.search||""),[u,w]=t.useState(x.status||"");t.useEffect(()=>{const s=setTimeout(()=>{p.get("/admin/users",{search:h||void 0,status:u||void 0},{preserveState:!0,replace:!0})},500);return()=>clearTimeout(s)},[h,u]),t.useEffect(()=>{},[N]);const S=s=>{p.patch(`/admin/users/${s.id}/toggle-status`,{},{preserveState:!0})},C=s=>new Date(s).toLocaleDateString("es-ES"),E=s=>s.active?s.email_verified_at?{text:"Activo",color:"bg-green-100 text-green-800"}:{text:"Pendiente",color:"bg-yellow-100 text-yellow-800"}:{text:"Inactivo",color:"bg-red-100 text-red-800"};return e.jsxs(U,{breadcrumbs:Y,children:[e.jsx(T,{title:"Gestión de Usuarios"}),e.jsxs("div",{className:"space-y-6",children:[n?.success&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:n.success}),n?.error&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.error}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-6 w-6 text-[#2a3d83]"}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Gestión de Usuarios"})]}),e.jsxs("div",{className:"flex gap-2",children:[b.isSuperAdmin()&&e.jsx(i,{href:"/admin/roles",children:e.jsxs(m,{variant:"outline",className:"border-[#2a3d83] text-[#2a3d83] hover:bg-blue-50",children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),"Gestionar Roles"]})}),e.jsxs(m,{className:"flex items-center gap-2 px-4 py-2 bg-[#2a3d83] text-white rounded-lg hover:bg-[#1e2b5f] transition-colors",children:[e.jsx(V,{className:"h-4 w-4"}),"Nuevo Usuario"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Usuarios"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:a.total})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(v,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Usuarios Activos"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:a.active})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx("div",{className:"h-6 w-6 bg-[#2a3d83] rounded-full flex items-center justify-center",children:e.jsx("div",{className:"h-2 w-2 bg-white rounded-full"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pendientes"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:a.pending})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx("div",{className:"h-6 w-6 bg-[#2a3d83] rounded-full flex items-center justify-center",children:e.jsx("div",{className:"h-2 w-2 bg-white rounded-full"})})})]})}),a.without_role>0&&e.jsx("div",{className:"bg-white rounded-lg border border-red-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-red-600 font-medium",children:"⚠️ Sin Rol"}),e.jsx("p",{className:"text-2xl font-semibold text-red-700",children:a.without_role})]}),e.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:e.jsx(O,{className:"h-6 w-6 text-red-600"})})]})})]}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4 w-full sm:w-auto",children:e.jsxs("div",{className:"relative flex-1 sm:w-80",children:[e.jsx(X,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(_,{type:"text",value:h,onChange:s=>y(s.target.value),placeholder:"Buscar usuarios...",className:"pl-10"})]})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(A,{value:u||"all",onValueChange:s=>w(s==="all"?"":s),children:[e.jsx(P,{className:"w-[180px]",children:e.jsx($,{placeholder:"Todos los estados"})}),e.jsxs(F,{children:[e.jsx(d,{value:"all",children:"Todos los estados"}),e.jsx(d,{value:"active",children:"Activos"}),e.jsx(d,{value:"inactive",children:"Inactivos"}),e.jsx(d,{value:"pending",children:"Pendientes"}),a.without_role>0&&e.jsxs(d,{value:"without_role",className:"text-red-600 font-medium",children:["⚠️ Sin Rol (",a.without_role,")"]})]})]})})]})}),e.jsx("div",{className:"bg-white rounded-lg border overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Usuario"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Email"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Rol"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Estado"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Registro"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:r.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"py-8 px-6 text-center text-gray-500",children:"No se encontraron usuarios."})}):r.data.map(s=>{const l=E(s);return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-8 w-8 bg-[#2a3d83] rounded-full flex items-center justify-center text-white text-sm font-medium",children:s.name.charAt(0).toUpperCase()}),e.jsx("span",{className:"font-medium text-gray-900",children:s.name})]})}),e.jsx("td",{className:"py-4 px-6 text-gray-600",children:s.email}),e.jsx("td",{className:"py-4 px-6",children:s.role?.name?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-[#2a3d83]",children:s.role.name}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"⚠️ Sin rol asignado"})}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${l.color}`,children:l.text})}),e.jsx("td",{className:"py-4 px-6 text-gray-600",children:C(s.created_at)}),e.jsx("td",{className:"py-4 px-6",children:e.jsx(M,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(j,{children:[e.jsx(g,{asChild:!0,children:e.jsx(i,{href:`/admin/users/${s.id}/edit`,className:"p-2 rounded-md text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50 transition-colors inline-flex",children:e.jsx(z,{className:"h-4 w-4"})})}),e.jsx(f,{children:e.jsx("p",{children:"Editar usuario"})})]}),e.jsxs(j,{children:[e.jsx(g,{asChild:!0,children:e.jsx("button",{onClick:()=>S(s),className:`p-2 rounded-md transition-colors ${s.active?"text-orange-600 hover:text-orange-800 hover:bg-orange-50":"text-green-600 hover:text-green-800 hover:bg-green-50"}`,children:s.active?e.jsx(J,{className:"h-4 w-4"}):e.jsx(K,{className:"h-4 w-4"})})}),e.jsx(f,{children:e.jsx("p",{children:s.active?"Desactivar usuario":"Activar usuario"})})]}),e.jsxs(j,{children:[e.jsx(g,{asChild:!0,children:e.jsx("button",{onClick:()=>c(s),className:"p-2 rounded-md text-red-600 hover:text-red-800 hover:bg-red-50 transition-colors",children:e.jsx(W,{className:"h-4 w-4"})})}),e.jsx(f,{children:e.jsx("p",{children:"Eliminar usuario"})})]})]})})})]},s.id)})})]})})}),r.data.length>0&&e.jsxs("div",{className:"flex items-center justify-between bg-white border rounded-lg px-6 py-3",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando ",e.jsx("span",{className:"font-medium",children:r.meta?.from||r.from||0})," a"," ",e.jsx("span",{className:"font-medium",children:r.meta?.to||r.to||0})," de"," ",e.jsx("span",{className:"font-medium",children:r.meta?.total||r.total||0})," usuarios"]}),e.jsx("div",{className:"flex items-center gap-2",children:r.links.map((s,l)=>s.label.includes("Previous")?e.jsx(i,{href:s.url||"#",preserveState:!0,className:`px-3 py-2 border border-gray-300 rounded-md text-sm font-medium ${s.url?"text-gray-700 hover:bg-gray-50":"text-gray-300 cursor-not-allowed"}`,children:"Anterior"},l):s.label.includes("Next")?e.jsx(i,{href:s.url||"#",preserveState:!0,className:`px-3 py-2 border border-gray-300 rounded-md text-sm font-medium ${s.url?"text-gray-700 hover:bg-gray-50":"text-gray-300 cursor-not-allowed"}`,children:"Siguiente"},l):isNaN(Number(s.label))?null:e.jsx(i,{href:s.url||"#",preserveState:!0,className:`px-3 py-2 rounded-md text-sm font-medium ${s.active?"bg-[#2a3d83] text-white":"border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:s.label},l))})]}),e.jsx(R,{open:!!o,onOpenChange:s=>!s&&c(null),children:e.jsxs(G,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Confirmar Eliminación"}),e.jsxs(H,{children:["¿Estás seguro de que deseas eliminar al usuario ",e.jsx("span",{className:"font-semibold",children:o?.name}),"? Esta acción no se puede deshacer."]})]}),e.jsxs(q,{children:[e.jsx(m,{variant:"outline",onClick:()=>c(null),children:"Cancelar"}),e.jsx(m,{variant:"destructive",onClick:()=>{o&&p.delete(`/admin/users/${o.id}`,{preserveState:!0,onSuccess:()=>{c(null)}})},children:"Eliminar"})]})]})})]})]})}export{Le as default};
