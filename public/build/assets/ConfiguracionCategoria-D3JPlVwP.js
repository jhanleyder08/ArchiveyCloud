import{r as _,j as e,H as k,b as c,t as n}from"./app-C5ckqBIp.js";import{f as B,A as L,S as u,h as $}from"./app-sidebar-layout-B-YWzudl.js";import{B as x}from"./button-C_wizhg3.js";import{C as p,a as j,b as v,d as I,c as f}from"./card-C_VOERQk.js";import{I as N}from"./input-DjB33T14.js";import{L as E}from"./label-D9bm4s2r.js";import{S as D}from"./switch-DGnYKrAY.js";import{B as M}from"./badge-DL-k3CvS.js";import{S as O}from"./separator-po_cnShF.js";import{R as b}from"./refresh-cw-ClyS4DOp.js";import{B as C}from"./bell-T6OEhxK1.js";import{P}from"./palette-_Z18Bx01.js";import{S as g}from"./triangle-alert-c3kReHiM.js";import{S as T}from"./smartphone-pGpDnpAa.js";import{M as G}from"./mail-DhzsRTCw.js";import{C as H}from"./folder-9RT5E6CU.js";import{G as R}from"./globe-DuitxqJ1.js";function w({configuraciones:t,categoria:h="sistema",titulo:i="Sistema"}){const y=[{title:"Administración",href:"/admin"},{title:"Configuración",href:"/admin/configuracion"},{title:i,href:`/admin/configuracion/${h}`}],o=()=>{switch(h){case"sistema":return e.jsx(u,{className:"h-5 w-5"});case"email":return e.jsx(G,{className:"h-5 w-5"});case"sms":return e.jsx(T,{className:"h-5 w-5"});case"seguridad":return e.jsx(g,{className:"h-5 w-5"});case"branding":return e.jsx(P,{className:"h-5 w-5"});case"notificaciones":return e.jsx(C,{className:"h-5 w-5"});default:return e.jsx(u,{className:"h-5 w-5"})}},[d,l]=_.useState(null),m=(a,s)=>{l(a.clave);const r=typeof s=="boolean"?s?"true":"false":s;c.put(`/admin/configuracion/${a.clave}`,{valor:r,activo:a.activo},{preserveScroll:!0,onSuccess:()=>{n.success(`Configuración "${a.clave}" actualizada`),l(null)},onError:()=>{n.error("Error al actualizar la configuración"),l(null)}})},S=a=>{l(a.clave),c.put(`/admin/configuracion/${a.clave}`,{valor:a.valor,activo:!a.activo},{preserveScroll:!0,onSuccess:()=>{n.success(`Configuración "${a.clave}" ${a.activo?"desactivada":"activada"}`),l(null)},onError:()=>{n.error("Error al actualizar la configuración"),l(null)}})},A=a=>a.includes("timezone")||a.includes("time")?e.jsx(H,{className:"h-4 w-4"}):a.includes("locale")||a.includes("lang")?e.jsx(R,{className:"h-4 w-4"}):a.includes("cache")||a.includes("database")?e.jsx($,{className:"h-4 w-4"}):a.includes("security")||a.includes("auth")?e.jsx(g,{className:"h-4 w-4"}):a.includes("notification")?e.jsx(C,{className:"h-4 w-4"}):e.jsx(u,{className:"h-4 w-4"}),z=a=>{const s=d===a.clave;return a.tipo==="boolean"||a.valor==="true"||a.valor==="false"?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{checked:a.valor==="true",onCheckedChange:r=>m(a,r),disabled:s}),e.jsx("span",{className:"text-sm text-muted-foreground",children:a.valor==="true"?"Activado":"Desactivado"})]}):a.tipo==="numero"||!isNaN(Number(a.valor))?e.jsx(N,{type:"number",defaultValue:a.valor,className:"max-w-xs",disabled:s,onBlur:r=>{r.target.value!==a.valor&&m(a,r.target.value)}}):e.jsx(N,{type:"text",defaultValue:a.valor,className:"max-w-md",disabled:s,onBlur:r=>{r.target.value!==a.valor&&m(a,r.target.value)}})};return e.jsxs(B,{breadcrumbs:y,children:[e.jsx(k,{title:`Configuración - ${i}`}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(x,{variant:"ghost",size:"icon",onClick:()=>c.visit("/admin/configuracion"),children:e.jsx(L,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[o(),"Configuración de ",i]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["Gestiona las configuraciones de ",i.toLowerCase()]})]})]}),e.jsxs(x,{variant:"outline",onClick:()=>c.reload(),children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Actualizar"]})]}),e.jsxs(p,{children:[e.jsxs(j,{children:[e.jsxs(v,{className:"flex items-center gap-2",children:[o(),"Configuraciones de ",i]}),e.jsxs(I,{children:[t.length," configuración",t.length!==1?"es":""," disponible",t.length!==1?"s":""]})]}),e.jsx(f,{children:t.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("div",{className:"mx-auto mb-4 opacity-50",children:o()}),e.jsxs("p",{children:["No hay configuraciones de ",i.toLowerCase()," disponibles"]})]}):e.jsx("div",{className:"space-y-4",children:t.map((a,s)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between py-4",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"mt-1 text-muted-foreground",children:A(a.clave)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(E,{className:"font-medium",children:a.clave}),e.jsx(M,{variant:a.activo?"default":"secondary",className:"text-xs",children:a.activo?"Activo":"Inactivo"}),d===a.clave&&e.jsx(b,{className:"h-3 w-3 animate-spin text-primary"})]}),a.descripcion&&e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:a.descripcion}),e.jsx("div",{className:"mt-2",children:z(a)})]})]}),e.jsx("div",{className:"ml-4",children:e.jsx(x,{variant:"ghost",size:"sm",onClick:()=>S(a),disabled:d===a.clave,children:a.activo?"Desactivar":"Activar"})})]}),s<t.length-1&&e.jsx(O,{})]},a.clave))})})]}),e.jsxs(p,{children:[e.jsx(j,{children:e.jsx(v,{children:"Información"})}),e.jsx(f,{children:e.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[e.jsx("p",{children:"• Los cambios se guardan automáticamente al modificar cada campo."}),e.jsx("p",{children:"• Las configuraciones desactivadas no afectarán el comportamiento del sistema."}),e.jsx("p",{children:"• Algunos cambios pueden requerir limpiar la caché para tomar efecto."})]})})]})]})]})}const le=Object.freeze(Object.defineProperty({__proto__:null,default:w},Symbol.toStringTag,{value:"Module"})),ce=Object.freeze(Object.defineProperty({__proto__:null,default:w},Symbol.toStringTag,{value:"Module"}));export{le as C,ce as a};
