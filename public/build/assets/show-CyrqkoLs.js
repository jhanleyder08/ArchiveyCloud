import{r as a,j as e,H as N,b as d}from"./app-xP5nJVeF.js";import{A as u}from"./app-layout-52tIb-IE.js";import{B as c}from"./button-B_iUXIQd.js";import{B as x}from"./Combination-BMQq9fx8.js";/* empty css            */import"./app-sidebar-layout-Bv9w89yC.js";import"./index-DbDMva29.js";import"./index-D2eHBSbe.js";import"./index-Blg4NNxt.js";import"./x-CBQbsaML.js";import"./app-logo-icon-8EdVYcX9.js";import"./input-DQqwP0kM.js";import"./label-CXywCScm.js";import"./user-OU0Y1c1r.js";import"./mail-C5oL3AE1.js";import"./users-DpyCPIO9.js";import"./folder-Ck8Tq3sH.js";import"./triangle-alert-3Hg381hi.js";import"./search-eio2uEn4.js";import"./BrandingProvider-BV5yFGOU.js";function v({title:s,titleId:t,...i},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},i),s?a.createElement("title",{id:t},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9.75v6.75m0 0-3-3m3 3 3-3m-8.25 6a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"}))}const h=a.forwardRef(v);function b({title:s,titleId:t,...i},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},i),s?a.createElement("title",{id:t},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"}))}const g=a.forwardRef(b);function w({title:s,titleId:t,...i},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},i),s?a.createElement("title",{id:t},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const y=a.forwardRef(w);function k({title:s,titleId:t,...i},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},i),s?a.createElement("title",{id:t},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const p=a.forwardRef(k);function E({title:s,titleId:t,...i},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},i),s?a.createElement("title",{id:t},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const C=a.forwardRef(E);function L({title:s,titleId:t,...i},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},i),s?a.createElement("title",{id:t},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))}const j=a.forwardRef(L),K=({documento:s,puedeVisualizar:t})=>{const i=r=>{if(!r)return"N/A";const n=["Bytes","KB","MB","GB"],o=Math.floor(Math.log(r)/Math.log(1024));return Math.round(r/Math.pow(1024,o)*100)/100+" "+n[o]},l=r=>({borrador:"bg-gray-100 text-gray-800",pendiente:"bg-yellow-100 text-yellow-800",aprobado:"bg-blue-100 text-blue-800",activo:"bg-green-100 text-green-800",archivado:"bg-purple-100 text-purple-800",obsoleto:"bg-red-100 text-red-800"})[r]||"bg-gray-100 text-gray-800",m=()=>{const r=s.url_directa||s.url_descarga;if(r){const n=document.createElement("a");n.href=r,n.download=s.nombre||"documento",document.body.appendChild(n),n.click(),document.body.removeChild(n)}else alert("No se pudo generar la URL de descarga")},f=()=>{window.open(`/admin/documentos/${s.id}/preview`,"_blank")};return e.jsxs(u,{children:[e.jsx(N,{title:`Documento: ${s.nombre}`}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"md:flex md:items-center md:justify-between mb-6",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:e.jsxs("ol",{className:"flex items-center space-x-4",children:[e.jsx("li",{children:e.jsx(c,{variant:"ghost",onClick:()=>d.visit("/admin/documentos"),className:"text-gray-500 hover:text-gray-700",children:"Documentos"})}),e.jsx("li",{className:"text-gray-500",children:"/"}),e.jsx("li",{className:"text-gray-900 font-medium",children:s.codigo})]})}),e.jsx("h1",{className:"mt-2 text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight",children:s.nombre}),e.jsxs("div",{className:"mt-1 flex items-center space-x-3",children:[e.jsx(x,{className:l(s.estado),children:s.estado}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Versión ",s.version]})]})]}),e.jsxs("div",{className:"mt-4 flex md:ml-4 md:mt-0 space-x-3",children:[t&&e.jsxs(c,{variant:"outline",onClick:f,className:"flex items-center space-x-2",children:[e.jsx(p,{className:"h-4 w-4"}),e.jsx("span",{children:"Vista Previa"})]}),e.jsxs(c,{variant:"outline",onClick:m,className:"flex items-center space-x-2",children:[e.jsx(h,{className:"h-4 w-4"}),e.jsx("span",{children:"Descargar"})]}),e.jsxs(c,{onClick:()=>d.visit(`/admin/documentos/${s.id}/edit`),className:"flex items-center space-x-2 bg-[#2a3d83] hover:bg-[#1e2a5c]",children:[e.jsx(C,{className:"h-4 w-4"}),e.jsx("span",{children:"Editar"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Información del Documento"}),e.jsxs("dl",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Código"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s.codigo})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Formato"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 uppercase",children:s.formato})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Tipo de Soporte"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 capitalize",children:s.tipo_soporte})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Tamaño"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:i(s.tamaño)})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Descripción"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s.descripcion||"Sin descripción"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Clasificación Archivística"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.expediente&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Expediente"}),e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"font-medium text-blue-900",children:s.expediente.nombre}),e.jsx("p",{className:"text-sm text-blue-700",children:s.expediente.codigo}),s.expediente.descripcion&&e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:s.expediente.descripcion})]})]}),s.tipologia&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Tipología Documental"}),e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsx("p",{className:"font-medium text-green-900",children:s.tipologia.nombre}),e.jsx("p",{className:"text-sm text-green-700",children:s.tipologia.categoria}),s.tipologia.descripcion&&e.jsx("p",{className:"text-xs text-green-600 mt-1",children:s.tipologia.descripcion})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Vista Previa del Documento"}),e.jsx("div",{className:"border rounded-lg overflow-hidden bg-gray-50 p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(y,{className:"h-12 w-12 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s.nombre}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Formato: ",e.jsx("span",{className:"font-medium uppercase",children:s.formato})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Tamaño: ",e.jsx("span",{className:"font-medium",children:i(s.tamaño)})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsxs(c,{onClick:()=>{const r=s.url_directa||s.url_descarga;r?window.open(r,"_blank"):alert("No se pudo generar la URL del documento")},className:"flex items-center space-x-2 bg-blue-600 hover:bg-blue-700",children:[e.jsx(p,{className:"h-4 w-4"}),e.jsx("span",{children:"Ver Documento"})]}),e.jsxs(c,{variant:"outline",onClick:m,className:"flex items-center space-x-2",children:[e.jsx(h,{className:"h-4 w-4"}),e.jsx("span",{children:"Descargar"})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:'Haz clic en "Ver Documento" para abrir el archivo en una nueva pestaña'})]})})]}),s.versiones&&s.versiones.length>0&&e.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Historial de Versiones"}),e.jsx("div",{className:"space-y-3",children:s.versiones.map((r,n)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(g,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Versión ",r.version]}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(r.fecha_modificacion).toLocaleString("es-ES")})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-900",children:i(r.tamaño)}),r.observaciones&&e.jsx("p",{className:"text-xs text-gray-500",children:r.observaciones})]})]},n))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Información del Sistema"}),e.jsxs("dl",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Fecha de Creación"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(s.created_at).toLocaleString("es-ES")})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Creado Por"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s.usuario_creador?.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Estado Actual"}),e.jsx("dd",{className:"mt-1",children:e.jsx(x,{className:l(s.estado),children:s.estado})})]})]})]}),s.estadisticas&&e.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Seguridad e Integridad"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Integridad Verificada"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{className:`h-4 w-4 ${s.estadisticas.integridad_verificada?"text-green-500":"text-red-500"}`}),e.jsx("span",{className:`text-sm ${s.estadisticas.integridad_verificada?"text-green-600":"text-red-600"}`,children:s.estadisticas.integridad_verificada?"Sí":"No"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Firma Digital"}),e.jsx("span",{className:`text-sm ${s.estadisticas.tiene_firma_digital?"text-green-600":"text-gray-500"}`,children:s.estadisticas.tiene_firma_digital?"Firmado":"Sin firmar"})]}),s.estadisticas.hash_integridad&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Hash de Integridad"}),e.jsxs("dd",{className:"mt-1 text-xs text-gray-900 font-mono break-all",children:[s.estadisticas.hash_integridad.substring(0,32),"..."]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Acciones Rápidas"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>d.post(`/admin/documentos/${s.id}/crear-version`),children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Nueva Versión"]}),e.jsxs(c,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>d.visit(route("admin.firmas.documento.firmar",s.id)),children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Firmar Digitalmente"]})]})]})]})]})]})})]})};export{K as default};
