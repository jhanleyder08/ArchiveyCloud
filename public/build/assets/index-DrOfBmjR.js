import{r as b,j as e,H as M}from"./app-Dzr76Hsd.js";import{C as t,a as n,b as r,c as i,d}from"./card-tzDn5fcm.js";import{F as U,B as o}from"./Combination-DW5lnY8d.js";import{B as $}from"./button-2TlPkYFS.js";import{A as L,a as V}from"./alert-Cz3Kn31L.js";import{P as W}from"./progress-3N9KrDU9.js";import{T as H,a as O,b as u,c as v}from"./tabs-ByN3D9KW.js";import{A as q}from"./app-layout-BMDnqvKc.js";import{R as z}from"./refresh-cw-Bl2W5jx4.js";import{D as G,U as X}from"./users-BmLvcNFF.js";import{F as Y,C as J}from"./folder-ATq5rfoE.js";import{h as Q,C as Z}from"./app-sidebar-layout-Bx3rL1gT.js";import{C as _}from"./circle-check-big-BC2uOs1E.js";import{T as C}from"./triangle-alert-qsbqQmdH.js";import{R as g,T as N}from"./CategoricalChart-CjpDjGBG.js";import{P as B,a as k}from"./PieChart-Bgjn_xAg.js";import{C as R}from"./tooltipContext-zLHSXNyy.js";import{A as ee,a as A}from"./AreaChart-CHa_JKBz.js";import{C as D,X as P,Y as E}from"./CartesianChart-U-uhL4P-.js";import{B as K,a as F}from"./BarChart-Cshcih_o.js";import{A as se}from"./activity-DFEieUk8.js";/* empty css            */import"./index-ClD50zlH.js";import"./index-Cij-lt6V.js";import"./index-9RvwcAFD.js";import"./x-DereeiwP.js";import"./app-logo-icon-D2wELP3P.js";import"./input-CLK_5OW0.js";import"./label-CJpZ1OKU.js";import"./user-DGNIlZX6.js";import"./mail-C2KsKOyQ.js";import"./search-CcVBS-ta.js";import"./BrandingProvider-C6T7Pf3B.js";import"./ActivePoints-ZVOTSJSB.js";const y=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"];function Se({metricas_generales:p,kpis_criticos:a,alertas_criticas:x,cumplimiento:c,tendencias:l,usuarios_activos:T,distribucion_trabajo:m}){const[f,I]=b.useState(!1),[S,ae]=b.useState(new Date);b.useEffect(()=>{let s;return f&&(s=setInterval(()=>{window.location.reload()},3e5)),()=>clearInterval(s)},[f]);const h=s=>new Intl.NumberFormat("es-CO").format(s),w=s=>s>=90?"text-green-600":s>=70?"text-yellow-600":"text-red-600";return e.jsxs(q,{children:[e.jsx(M,{title:"Dashboard Ejecutivo"}),e.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200",children:"Dashboard Ejecutivo"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Visión integral del sistema de gestión documental"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["Actualizado: ",S.toLocaleTimeString()]}),e.jsxs($,{variant:"outline",size:"sm",onClick:()=>I(!f),className:f?"bg-green-50 border-green-200":"",children:[e.jsx(z,{className:`h-4 w-4 ${f?"animate-spin":""}`}),f?"Auto":"Manual"]}),e.jsxs("a",{href:`/admin/dashboard-ejecutivo/exportar-pdf?t=${Date.now()}`,target:"_blank",className:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-3",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Exportar PDF"]})]})]})}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-6 mb-8",children:[e.jsxs(t,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Documentos"}),e.jsx(U,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h(p.total_documentos)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",h(a.documentos_procesados_semana)," esta semana"]})]})]}),e.jsxs(t,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Expedientes"}),e.jsx(Y,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h(p.total_expedientes)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",h(a.expedientes_creados_semana)," esta semana"]})]})]}),e.jsxs(t,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Usuarios Activos"}),e.jsx(X,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h(p.total_usuarios)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[h(T.length)," productivos este mes"]})]})]}),e.jsxs(t,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Series Documentales"}),e.jsx(Q,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(i,{children:e.jsx("div",{className:"text-2xl font-bold",children:h(p.total_series)})})]}),e.jsxs(t,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Almacenamiento"}),e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[p.almacenamiento_total?.valor??0," ",p.almacenamiento_total?.unidad??"MB"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Proy. 12m: ",l.proyeccion_almacenamiento?.proyeccion_12_meses?.valor??0," ",l.proyeccion_almacenamiento?.proyeccion_12_meses?.unidad??"MB"]})]})]}),e.jsxs(t,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Cumplimiento"}),e.jsx(_,{className:`h-4 w-4 ${w(c.porcentaje_cumplimiento_general)}`})]}),e.jsx(i,{children:e.jsxs("div",{className:`text-2xl font-bold ${w(c.porcentaje_cumplimiento_general)}`,children:[c.porcentaje_cumplimiento_general,"%"]})})]})]}),(a.expedientes_vencidos>0||a.workflows_vencidos>0||a.prestamos_vencidos>0)&&e.jsxs(L,{className:"mb-8 border-red-200 bg-red-50",children:[e.jsx(C,{className:"h-4 w-4 text-red-600"}),e.jsx(V,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"font-medium text-red-800",children:"Atención requerida:"}),a.expedientes_vencidos>0&&e.jsxs("span",{className:"text-red-700",children:[a.expedientes_vencidos," expedientes vencidos"]}),a.workflows_vencidos>0&&e.jsxs("span",{className:"text-red-700",children:[a.workflows_vencidos," workflows vencidos"]}),a.prestamos_vencidos>0&&e.jsxs("span",{className:"text-red-700",children:[a.prestamos_vencidos," préstamos vencidos"]})]})})]}),e.jsxs(H,{defaultValue:"resumen",className:"space-y-6",children:[e.jsxs(O,{className:"grid w-full grid-cols-5",children:[e.jsx(u,{value:"resumen",children:"Resumen Ejecutivo"}),e.jsx(u,{value:"cumplimiento",children:"Cumplimiento"}),e.jsx(u,{value:"productividad",children:"Productividad"}),e.jsx(u,{value:"tendencias",children:"Tendencias"}),e.jsx(u,{value:"alertas",children:"Alertas"})]}),e.jsxs(v,{value:"resumen",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsxs(n,{children:[e.jsx(r,{children:"KPIs del Sistema"}),e.jsx(d,{children:"Indicadores clave de rendimiento"})]}),e.jsx(i,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Workflows Pendientes"}),e.jsx(o,{variant:a.workflows_pendientes>10?"destructive":"secondary",children:a.workflows_pendientes})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Préstamos Activos"}),e.jsx(o,{variant:"outline",children:a.prestamos_activos})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Disposiciones Pendientes"}),e.jsx(o,{variant:a.disposiciones_pendientes>5?"destructive":"secondary",children:a.disposiciones_pendientes})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Exp. Próx. Vencimiento"}),e.jsx(o,{variant:a.expedientes_proximo_vencimiento>0?"secondary":"outline",children:a.expedientes_proximo_vencimiento})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Expedientes Vencidos"}),e.jsx(o,{variant:a.expedientes_vencidos>0?"destructive":"outline",children:a.expedientes_vencidos})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Préstamos Vencidos"}),e.jsx(o,{variant:a.prestamos_vencidos>0?"destructive":"outline",children:a.prestamos_vencidos})]})]})]})})]}),e.jsxs(t,{children:[e.jsxs(n,{children:[e.jsx(r,{children:"Distribución de Expedientes"}),e.jsx(d,{children:"Por estado actual"})]}),e.jsx(i,{children:e.jsx(g,{width:"100%",height:200,children:e.jsxs(B,{children:[e.jsx(k,{data:m.expedientes_por_estado,cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",dataKey:"total",nameKey:"estado",children:m.expedientes_por_estado.map((s,j)=>e.jsx(R,{fill:y[j%y.length]},`cell-${j}`))}),e.jsx(N,{})]})})})]}),m.workflows_por_estado&&m.workflows_por_estado.length>0&&e.jsxs(t,{children:[e.jsxs(n,{children:[e.jsx(r,{children:"Distribución de Workflows"}),e.jsx(d,{children:"Por estado actual"})]}),e.jsx(i,{children:e.jsx(g,{width:"100%",height:200,children:e.jsxs(B,{children:[e.jsx(k,{data:m.workflows_por_estado,cx:"50%",cy:"50%",outerRadius:80,fill:"#ffc658",dataKey:"total",nameKey:"estado",children:m.workflows_por_estado.map((s,j)=>e.jsx(R,{fill:y[(j+3)%y.length]},`cell-wf-${j}`))}),e.jsx(N,{})]})})})]})]}),e.jsxs(t,{children:[e.jsxs(n,{children:[e.jsx(r,{children:"Tendencia de Crecimiento"}),e.jsx(d,{children:"Documentos, expedientes y workflows por mes"})]}),e.jsx(i,{children:e.jsx(g,{width:"100%",height:300,children:e.jsxs(ee,{data:l.crecimiento_mensual,children:[e.jsx(D,{strokeDasharray:"3 3"}),e.jsx(P,{dataKey:"mes"}),e.jsx(E,{}),e.jsx(N,{}),e.jsx(A,{type:"monotone",dataKey:"documentos",stackId:"1",stroke:"#8884d8",fill:"#8884d8",name:"Documentos"}),e.jsx(A,{type:"monotone",dataKey:"expedientes",stackId:"1",stroke:"#82ca9d",fill:"#82ca9d",name:"Expedientes"}),e.jsx(A,{type:"monotone",dataKey:"workflows",stackId:"1",stroke:"#ffc658",fill:"#ffc658",name:"Workflows"})]})})})]})]}),e.jsx(v,{value:"cumplimiento",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(t,{children:[e.jsx(n,{children:e.jsx(r,{children:"Estado General"})}),e.jsx(i,{children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:`text-4xl font-bold ${w(c.porcentaje_cumplimiento_general)}`,children:[c.porcentaje_cumplimiento_general,"%"]}),e.jsx(W,{value:c.porcentaje_cumplimiento_general,className:"w-full"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[c.expedientes_en_regla," de ",c.expedientes_en_regla+c.expedientes_con_alertas," expedientes en regla"]})]})})]}),e.jsxs(t,{className:"col-span-2",children:[e.jsxs(n,{children:[e.jsx(r,{children:"Cumplimiento por Series"}),e.jsx(d,{children:"Top 10 series documentales"})]}),e.jsx(i,{children:e.jsx(g,{width:"100%",height:250,children:e.jsxs(K,{data:c.cumplimiento_por_series,children:[e.jsx(D,{strokeDasharray:"3 3"}),e.jsx(P,{dataKey:"nombre",angle:-45,textAnchor:"end",height:100}),e.jsx(E,{}),e.jsx(N,{}),e.jsx(F,{dataKey:"porcentaje",fill:"#8884d8"})]})})})]})]})}),e.jsx(v,{value:"productividad",className:"space-y-6",children:e.jsxs(t,{children:[e.jsxs(n,{children:[e.jsx(r,{children:"Usuarios Más Activos"}),e.jsx(d,{children:"Actividad de los últimos 30 días"})]}),e.jsx(i,{children:e.jsx("div",{className:"space-y-4",children:T.slice(0,10).map((s,j)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-100 rounded-full",children:e.jsxs("span",{className:"text-sm font-medium text-blue-800",children:["#",j+1]})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.email})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:[parseInt(s.documentos_creados)+parseInt(s.expedientes_gestionados)+parseInt(s.workflows_iniciados)," acciones"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.documentos_creados," docs, ",s.expedientes_gestionados," exp, ",s.workflows_iniciados," wf"]})]})]},s.id))})})]})}),e.jsx(v,{value:"tendencias",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsxs(n,{children:[e.jsx(r,{children:"Proyección de Almacenamiento"}),e.jsx(d,{children:"Estimación de crecimiento"})]}),e.jsx(i,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Actual"}),e.jsxs("span",{className:"font-medium",children:[l.proyeccion_almacenamiento?.actual?.valor??0," ",l.proyeccion_almacenamiento?.actual?.unidad??"MB"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"3 meses"}),e.jsxs("span",{className:"font-medium",children:[l.proyeccion_almacenamiento?.proyeccion_3_meses?.valor??0," ",l.proyeccion_almacenamiento?.proyeccion_3_meses?.unidad??"MB"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"6 meses"}),e.jsxs("span",{className:"font-medium",children:[l.proyeccion_almacenamiento?.proyeccion_6_meses?.valor??0," ",l.proyeccion_almacenamiento?.proyeccion_6_meses?.unidad??"MB"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"12 meses"}),e.jsxs("span",{className:"font-medium text-orange-600",children:[l.proyeccion_almacenamiento?.proyeccion_12_meses?.valor??0," ",l.proyeccion_almacenamiento?.proyeccion_12_meses?.unidad??"MB"]})]})]})})]}),e.jsxs(t,{children:[e.jsxs(n,{children:[e.jsx(r,{children:"Tipos de Documentos"}),e.jsx(d,{children:"Distribución por extensión"})]}),e.jsx(i,{children:e.jsx(g,{width:"100%",height:200,children:e.jsxs(K,{data:m.documentos_por_tipo,children:[e.jsx(D,{strokeDasharray:"3 3"}),e.jsx(P,{dataKey:"extension"}),e.jsx(E,{}),e.jsx(N,{}),e.jsx(F,{dataKey:"total",fill:"#82ca9d"})]})})})]})]})}),e.jsxs(v,{value:"alertas",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsxs(n,{children:[e.jsxs(r,{className:"flex items-center space-x-2",children:[e.jsx(C,{className:"h-5 w-5 text-red-500"}),e.jsx("span",{children:"Expedientes Urgentes"})]}),e.jsx(d,{children:"Próximos a vencer (7 días)"})]}),e.jsx(i,{children:e.jsx("div",{className:"space-y-3",children:x.expedientes_urgentes.length>0?x.expedientes_urgentes.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-orange-200 rounded-lg bg-orange-50",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.codigo}),e.jsx("div",{className:"text-sm text-gray-600",children:s.asunto})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(o,{variant:"destructive",children:"Urgente"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s.serie_documental?.nombre})]})]},s.id)):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(_,{className:"h-12 w-12 mx-auto mb-4 text-green-500"}),e.jsx("p",{children:"No hay expedientes próximos a vencer"})]})})})]}),e.jsxs(t,{children:[e.jsxs(n,{children:[e.jsxs(r,{className:"flex items-center space-x-2",children:[e.jsx(J,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{children:"Notificaciones Críticas"})]}),e.jsx(d,{children:"Requieren atención inmediata"})]}),e.jsx(i,{children:e.jsx("div",{className:"space-y-3",children:x.notificaciones_criticas.length>0?x.notificaciones_criticas.map(s=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 border border-red-200 rounded-lg bg-red-50",children:[e.jsx(C,{className:"h-4 w-4 text-red-500 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-red-800",children:s.titulo}),e.jsx("div",{className:"text-sm text-red-700",children:s.mensaje}),e.jsxs("div",{className:"text-xs text-red-600 mt-1",children:[s.tipo," • ",new Date(s.created_at).toLocaleDateString()]})]})]},s.id)):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(_,{className:"h-12 w-12 mx-auto mb-4 text-green-500"}),e.jsx("p",{children:"No hay notificaciones críticas"})]})})})]})]}),x.workflows_urgentes&&x.workflows_urgentes.length>0&&e.jsxs(t,{children:[e.jsxs(n,{children:[e.jsxs(r,{className:"flex items-center space-x-2",children:[e.jsx(se,{className:"h-5 w-5 text-orange-500"}),e.jsx("span",{children:"Workflows Urgentes"})]}),e.jsx(d,{children:"Workflows pendientes por más de 15 días"})]}),e.jsx(i,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:x.workflows_urgentes.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-orange-200 rounded-lg bg-orange-50",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.workflow?.nombre||"Sin nombre"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Iniciado por: ",s.usuario_iniciador?.name||"Sistema"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(o,{variant:"secondary",children:s.estado}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Paso: ",s.paso_actual||1]})]})]},s.id))})})]})]})]})]})})]})}export{Se as default};
