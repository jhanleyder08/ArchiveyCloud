import{e as E,r as x,j as e,H as F,L as i,b as g}from"./app-91m9kwyU.js";import{A as B}from"./app-layout-DZp0sNzN.js";import{B as h}from"./button-CoFcodqQ.js";import{I as A}from"./input-JBRHZ7QZ.js";import{S as P,a as T,b as M,c as $,d as b}from"./select-Wrwv2RZt.js";import{B as r}from"./badge-Dw7CG6bs.js";import{F as D}from"./folder-open-Dmn08R-L.js";import{P as I}from"./plus-B3qVF68_.js";import{j as f}from"./app-sidebar-layout-CLv5ko0D.js";import{C as L}from"./circle-check-big-GF6EQRBn.js";import{C as O}from"./calendar-Dx7_WEl0.js";import{S as N}from"./search-DaK7IuzH.js";import{E as V}from"./eye-xXNHm9-c.js";import{S as R}from"./square-pen-Ctxckn8q.js";import{D as G}from"./users-DKdb_1gz.js";/* empty css            */import"./index-Dt_6hCNO.js";import"./index-CGEZD_4Y.js";import"./Combination-CDT0PLPo.js";import"./index-CeBSh6Va.js";import"./check-Cn3I3pUy.js";import"./index-Dc4Xr8Yn.js";import"./x-CyP9uxNW.js";import"./index-Baz-24-5.js";import"./app-logo-icon-CUlPqTXW.js";import"./label-BZUr6K3X.js";import"./user-aQnMVpKS.js";import"./mail-CViPbZpD.js";import"./folder-C92Ox93S.js";import"./triangle-alert-B8VDP-oe.js";const H=[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Expedientes",href:"/admin/expedientes"}];function _e({expedientes:t,estadisticas:d,opciones:v,filtros:l}){const{flash:Q}=E().props,[q,z]=x.useState(l?.search||""),[K,U]=x.useState(!1),[n,o]=x.useState({search:l?.search||"",estado:l?.estado||"all",tipo_expediente:l?.tipo_expediente||"all",serie_id:l?.serie_id||"all",area_responsable:l?.area_responsable||"all",proximidad_vencimiento:l?.proximidad_vencimiento||"all"}),y=()=>{const s=new URLSearchParams;Object.entries(n).forEach(([a,c])=>{c&&c!=="all"&&s.append(a,c)}),g.get("/admin/expedientes",Object.fromEntries(s))},w=()=>{o({search:"",estado:"all",tipo_expediente:"all",serie_id:"all",area_responsable:"all",proximidad_vencimiento:"all"}),g.get("/admin/expedientes")},_=s=>({abierto:e.jsx(r,{variant:"default",className:"bg-green-100 text-green-800",children:"Abierto"}),cerrado:e.jsx(r,{variant:"secondary",children:"Cerrado"}),transferido:e.jsx(r,{variant:"default",className:"bg-blue-100 text-blue-800",children:"Transferido"}),archivado:e.jsx(r,{variant:"default",className:"bg-purple-100 text-purple-800",children:"Archivado"}),en_disposicion:e.jsx(r,{variant:"destructive",children:"En Disposición"})})[s]||e.jsx(r,{variant:"outline",children:s}),S=s=>({electronico:e.jsx(r,{variant:"default",className:"bg-indigo-100 text-indigo-800",children:"Electrónico"}),fisico:e.jsx(r,{variant:"default",className:"bg-gray-100 text-gray-800",children:"Físico"}),hibrido:e.jsx(r,{variant:"default",className:"bg-yellow-100 text-yellow-800",children:"Híbrido"})})[s]||e.jsx(r,{variant:"outline",children:s}),C=s=>({publica:e.jsx(r,{variant:"outline",className:"text-green-600 border-green-600",children:"Pública"}),interna:e.jsx(r,{variant:"outline",className:"text-blue-600 border-blue-600",children:"Interna"}),confidencial:e.jsx(r,{variant:"outline",className:"text-orange-600 border-orange-600",children:"Confidencial"}),reservada:e.jsx(r,{variant:"outline",className:"text-red-600 border-red-600",children:"Reservada"}),clasificada:e.jsx(r,{variant:"destructive",children:"Clasificada"})})[s]||e.jsx(r,{variant:"outline",children:s}),m=s=>new Date(s).toLocaleDateString("es-CO",{year:"numeric",month:"short",day:"2-digit"}),u=s=>{if(s===0)return"0 B";const a=1024,c=["B","KB","MB","GB"],j=Math.floor(Math.log(s)/Math.log(a));return parseFloat((s/Math.pow(a,j)).toFixed(2))+" "+c[j]},p=(s,a)=>Math.round(s/a*100);return e.jsxs(B,{breadcrumbs:H,children:[e.jsx(F,{title:"Gestión de Expedientes"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-6 w-6 text-[#2a3d83]"}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Gestión de Expedientes"})]}),e.jsx(i,{href:"/admin/expedientes/create",children:e.jsxs(h,{className:"flex items-center gap-2 px-4 py-2 bg-[#2a3d83] text-white rounded-lg hover:bg-[#1e2b5f] transition-colors",children:[e.jsx(I,{className:"h-4 w-4"}),"Crear Expediente"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Expedientes"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:d.total})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(f,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Abiertos"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:d.abiertos})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(L,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Cerrados"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:d.cerrados})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(f,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Próx. Vencer"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:d.proximos_vencer})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(O,{className:"h-6 w-6 text-[#2a3d83]"})})]})})]}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4 w-full sm:w-auto",children:e.jsxs("div",{className:"relative flex-1 sm:w-80",children:[e.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(A,{placeholder:"Buscar expedientes...",value:n.search,onChange:s=>o(a=>({...a,search:s.target.value})),className:"pl-10"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(P,{value:n.estado,onValueChange:s=>o(a=>({...a,estado:s})),children:[e.jsx(T,{className:"w-[180px]",children:e.jsx(M,{placeholder:"Todos los estados"})}),e.jsxs($,{children:[e.jsx(b,{value:"all",children:"Todos los estados"}),v.estados.map(s=>e.jsx(b,{value:s.value,children:s.label},s.value))]})]}),e.jsxs(h,{onClick:y,className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Buscar"]}),e.jsx(h,{variant:"outline",onClick:w,children:"Limpiar"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg border overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Expediente"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Serie/Subserie"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Estado/Tipo"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Responsable"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Volumen/Folios"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Fechas"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"py-8 px-6 text-center text-gray-500",children:"No se encontraron expedientes."})}):t.data.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.codigo}),C(s.confidencialidad)]}),e.jsx("p",{className:"text-sm text-gray-600",children:s.nombre}),s.descripcion&&e.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:s.descripcion})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"space-y-1",children:[s.serie&&e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[s.serie.codigo," - ",s.serie.nombre]}),s.subserie&&e.jsxs("p",{className:"text-xs text-gray-600",children:[s.subserie.codigo," - ",s.subserie.nombre]}),e.jsx("p",{className:"text-xs text-gray-500",children:s.area_responsable})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"space-y-2",children:[_(s.estado),S(s.tipo_expediente)]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("div",{className:"space-y-1",children:s.usuario_responsable&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.usuario_responsable.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.usuario_responsable.email})]})})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${p(s.volumen_actual,s.volumen_maximo)}%`}})}),e.jsxs("span",{className:"text-xs text-gray-500",children:[p(s.volumen_actual,s.volumen_maximo),"%"]})]}),e.jsxs("p",{className:"text-xs text-gray-600",children:[u(s.volumen_actual)," / ",u(s.volumen_maximo)]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.numero_folios," folios"]})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-xs text-gray-600",children:[e.jsx("strong",{children:"Apertura:"}),e.jsx("br",{}),m(s.fecha_apertura)]}),s.fecha_cierre&&e.jsxs("p",{className:"text-xs text-gray-600",children:[e.jsx("strong",{children:"Cierre:"}),e.jsx("br",{}),m(s.fecha_cierre)]}),s.fecha_vencimiento_disposicion&&e.jsxs("p",{className:"text-xs text-orange-600",children:[e.jsx("strong",{children:"Vence:"}),e.jsx("br",{}),m(s.fecha_vencimiento_disposicion)]})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{href:`/admin/expedientes/${s.id}`,children:e.jsx("button",{className:"p-2 rounded-md text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50 transition-colors",children:e.jsx(V,{className:"h-4 w-4"})})}),e.jsx(i,{href:`/admin/expedientes/${s.id}/edit`,children:e.jsx("button",{className:"p-2 rounded-md text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50 transition-colors",children:e.jsx(R,{className:"h-4 w-4"})})}),e.jsx("button",{className:"p-2 rounded-md text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50 transition-colors",onClick:()=>{window.open(`/admin/expedientes/${s.id}/exportar-directorio?formato=json`,"_blank")},children:e.jsx(G,{className:"h-4 w-4"})})]})})]},s.id))})]})}),t.data.length>0&&e.jsxs("div",{className:"flex items-center justify-between bg-white border rounded-lg px-6 py-3",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando ",e.jsx("span",{className:"font-medium",children:t.from||0})," a"," ",e.jsx("span",{className:"font-medium",children:t.to||0})," de"," ",e.jsx("span",{className:"font-medium",children:t.total||0})," expedientes"]}),e.jsx("div",{className:"flex items-center gap-2",children:t.links.map((s,a)=>s.label.includes("Previous")?e.jsx(i,{href:s.url||"#",preserveState:!0,className:`px-3 py-2 border border-gray-300 rounded-md text-sm font-medium ${s.url?"text-gray-700 hover:bg-gray-50":"text-gray-300 cursor-not-allowed"}`,children:"Anterior"},a):s.label.includes("Next")?e.jsx(i,{href:s.url||"#",preserveState:!0,className:`px-3 py-2 border border-gray-300 rounded-md text-sm font-medium ${s.url?"text-gray-700 hover:bg-gray-50":"text-gray-300 cursor-not-allowed"}`,children:"Siguiente"},a):isNaN(Number(s.label))?null:e.jsx(i,{href:s.url||"#",preserveState:!0,className:`px-3 py-2 rounded-md text-sm font-medium ${s.active?"bg-[#2a3d83] text-white":"border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:s.label},a))})]})]})]})]})}export{_e as default};
