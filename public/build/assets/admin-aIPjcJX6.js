import{r as y,j as e,H as k,L as _,b as o}from"./app-BZn_akGY.js";import{A as V}from"./app-layout-CCfbi1OK.js";import{B as n}from"./button-DgWHX7no.js";import{C as l,c as d,a as w,b as C}from"./card-p5MvXl8e.js";import{B as g}from"./badge-I4lyc2r9.js";import{S as x,a as p,b as h,c as j,d as r}from"./select-CpoQUuk4.js";import{S as B,o as D,C as R,p as H}from"./app-sidebar-layout-CfnBqEC9.js";import{T as S}from"./trash-2-C3pabd8O.js";import{P as M}from"./plus-CdVQkdh1.js";import{B as A}from"./bell-Qu_3ZA0K.js";import{U as $}from"./users-DMYdPutt.js";import{R as z}from"./refresh-cw-BhkYZ7BQ.js";import{F as I}from"./filter-DBWxHHNY.js";import{U as G}from"./user-Di-2Hz1C.js";import{E as O}from"./eye-VXbh46pK.js";import{C as q}from"./chevron-left-BzgqKbwG.js";/* empty css            */import"./index-C1mZ2nw9.js";import"./Combination-CLLpFsJI.js";import"./index-BirSSluQ.js";import"./index-BJBMoPJU.js";import"./check-sJDc8h6U.js";import"./index-B2wBOzrW.js";import"./x-Cx6BtQce.js";import"./app-logo-icon-D3FKWZvx.js";import"./input-DnSQ_fp2.js";import"./label-D3roso2A.js";import"./mail-BlD1y7N1.js";import"./folder-xyr-LaQJ.js";import"./triangle-alert-BXsDhYL2.js";import"./search-DPNZto3m.js";import"./BrandingProvider-CBcYxeAm.js";const J={baja:"bg-blue-100 text-blue-800 border-blue-200",media:"bg-yellow-100 text-yellow-800 border-yellow-200",alta:"bg-orange-100 text-orange-800 border-orange-200",critica:"bg-red-100 text-red-800 border-red-200"},K={pendiente:"bg-gray-100 text-gray-800 border-gray-200",leida:"bg-green-100 text-green-800 border-green-200",archivada:"bg-gray-100 text-gray-600 border-gray-200"},N={expediente_vencido:"Expediente Vencido",expediente_proximo_vencer:"Expediente Próximo a Vencer",prestamo_vencido:"Préstamo Vencido",prestamo_proximo_vencer:"Préstamo Próximo a Vencer",disposicion_pendiente:"Disposición Pendiente",disposicion_aprobada:"Disposición Aprobada",documento_subido:"Documento Subido",usuario_nuevo:"Usuario Nuevo",sistema:"Sistema",seguridad:"Seguridad",general:"General"};function Ae({notificaciones:a,estadisticas:i,usuarios:T,filtros:m}){const[t,c]=y.useState({usuario_id:m.usuario_id||"todos",tipo:m.tipo||"todos",estado:m.estado||"todos",prioridad:m.prioridad||"todos"}),[b,f]=y.useState(!1),P=()=>{f(!0);const s={};t.usuario_id!=="todos"&&(s.usuario_id=t.usuario_id),t.tipo!=="todos"&&(s.tipo=t.tipo),t.estado!=="todos"&&(s.estado=t.estado),t.prioridad!=="todos"&&(s.prioridad=t.prioridad),o.get("/admin/notificaciones/admin",s,{preserveState:!0,preserveScroll:!0,onFinish:()=>f(!1)})},L=()=>{c({usuario_id:"todos",tipo:"todos",estado:"todos",prioridad:"todos"}),o.visit("/admin/notificaciones/admin")},F=async()=>{confirm("¿Estás seguro de eliminar las notificaciones leídas con más de 30 días?")&&o.post("/admin/notificaciones/limpiar-antiguas",{},{onSuccess:()=>{o.reload()}})},E=s=>{confirm("¿Estás seguro de eliminar esta notificación?")&&o.delete(`/admin/notificaciones/${s}`,{preserveScroll:!0})},U=s=>new Date(s).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),v=s=>{s&&o.visit(s,{preserveScroll:!0})};return e.jsxs(V,{breadcrumbs:[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Notificaciones",href:"/admin/notificaciones"},{title:"Panel Administrativo",href:"/admin/notificaciones/admin"}],children:[e.jsx(k,{title:"Panel Administrativo - Notificaciones"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between pt-4 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-6 w-6 text-[#2a3d83]"}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Panel Administrativo de Notificaciones"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(n,{variant:"outline",onClick:F,children:[e.jsx(S,{className:"h-4 w-4 mr-2 text-red-500"}),"Limpiar Antiguas"]}),e.jsx(n,{asChild:!0,className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",children:e.jsxs(_,{href:"/admin/notificaciones/crear",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Nueva Notificación"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(l,{className:"bg-white border border-gray-200",children:e.jsx(d,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total en Sistema"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:i.total_sistema.toLocaleString()})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(A,{className:"h-6 w-6 text-[#2a3d83]"})})]})})}),e.jsx(l,{className:"bg-white border border-gray-200",children:e.jsx(d,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pendientes"}),e.jsx("p",{className:"text-2xl font-semibold text-orange-600",children:i.pendientes_sistema.toLocaleString()})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-full",children:e.jsx(D,{className:"h-6 w-6 text-orange-600"})})]})})}),e.jsx(l,{className:"bg-white border border-gray-200",children:e.jsx(d,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Usuarios con Notificaciones"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:i.usuarios_con_notificaciones})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx($,{className:"h-6 w-6 text-[#2a3d83]"})})]})})}),e.jsx(l,{className:"bg-white border border-gray-200",children:e.jsx(d,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Tipos Activos"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:i.tipos_populares?.length||0})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(R,{className:"h-6 w-6 text-[#2a3d83]"})})]})})})]}),i.tipos_populares&&i.tipos_populares.length>0&&e.jsxs(l,{className:"bg-white border border-gray-200",children:[e.jsx(w,{children:e.jsx(C,{className:"text-lg font-semibold text-gray-900",children:"Tipos de Notificaciones más Frecuentes"})}),e.jsx(d,{children:e.jsx("div",{className:"flex flex-wrap gap-3",children:i.tipos_populares.map((s,u)=>e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:N[s.tipo]||s.tipo}),e.jsx(g,{variant:"secondary",children:s.total})]},u))})})]}),e.jsx(l,{className:"bg-white border border-gray-200",children:e.jsx(d,{className:"pt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 items-end",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Usuario"}),e.jsxs(x,{value:t.usuario_id,onValueChange:s=>c({...t,usuario_id:s}),children:[e.jsx(p,{children:e.jsx(h,{placeholder:"Todos los usuarios"})}),e.jsxs(j,{children:[e.jsx(r,{value:"todos",children:"Todos los usuarios"}),T.map(s=>e.jsx(r,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Tipo"}),e.jsxs(x,{value:t.tipo,onValueChange:s=>c({...t,tipo:s}),children:[e.jsx(p,{children:e.jsx(h,{placeholder:"Todos los tipos"})}),e.jsxs(j,{children:[e.jsx(r,{value:"todos",children:"Todos los tipos"}),Object.entries(N).map(([s,u])=>e.jsx(r,{value:s,children:u},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Estado"}),e.jsxs(x,{value:t.estado,onValueChange:s=>c({...t,estado:s}),children:[e.jsx(p,{children:e.jsx(h,{placeholder:"Todos los estados"})}),e.jsxs(j,{children:[e.jsx(r,{value:"todos",children:"Todos los estados"}),e.jsx(r,{value:"pendiente",children:"Pendiente"}),e.jsx(r,{value:"leida",children:"Leída"}),e.jsx(r,{value:"archivada",children:"Archivada"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Prioridad"}),e.jsxs(x,{value:t.prioridad,onValueChange:s=>c({...t,prioridad:s}),children:[e.jsx(p,{children:e.jsx(h,{placeholder:"Todas las prioridades"})}),e.jsxs(j,{children:[e.jsx(r,{value:"todos",children:"Todas las prioridades"}),e.jsx(r,{value:"baja",children:"Baja"}),e.jsx(r,{value:"media",children:"Media"}),e.jsx(r,{value:"alta",children:"Alta"}),e.jsx(r,{value:"critica",children:"Crítica"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{onClick:P,disabled:b,className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",children:[b?e.jsx(z,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(I,{className:"h-4 w-4 mr-2"}),"Filtrar"]}),e.jsx(n,{variant:"outline",onClick:L,children:"Limpiar"})]})]})})}),e.jsxs(l,{className:"bg-white border border-gray-200",children:[e.jsx(w,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(C,{className:"text-lg font-semibold text-gray-900",children:["Todas las Notificaciones (",a.total,")"]})})}),e.jsxs(d,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-900",children:"Usuario"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-900",children:"Notificación"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-900",children:"Tipo"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-900",children:"Prioridad"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-900",children:"Estado"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-900",children:"Fecha"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-900",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:a.data.length>0?a.data.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:e.jsx(G,{className:"h-4 w-4 text-[#2a3d83]"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.usuario?.name||"Usuario desconocido"}),e.jsx("p",{className:"text-xs text-gray-500",children:s.usuario?.email})]})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"max-w-xs",children:[e.jsx("p",{className:"font-medium text-gray-900 truncate",children:s.titulo}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:s.mensaje})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(g,{variant:"outline",className:"text-xs",children:N[s.tipo]||s.tipo})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${J[s.prioridad]}`,children:s.prioridad.charAt(0).toUpperCase()+s.prioridad.slice(1)})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${K[s.estado]}`,children:s.estado==="pendiente"?"Pendiente":s.estado==="leida"?"Leída":"Archivada"})}),e.jsxs("td",{className:"py-3 px-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:U(s.created_at)}),s.es_automatica&&e.jsx(g,{variant:"secondary",className:"text-xs mt-1",children:"Automática"})]}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[s.accion_url&&e.jsx(_,{href:s.accion_url,children:e.jsx("button",{className:"p-2 rounded-md text-[#2a3d83] hover:bg-blue-50 transition-colors",children:e.jsx(O,{className:"h-4 w-4"})})}),e.jsx("button",{onClick:()=>E(s.id),className:"p-2 rounded-md text-red-500 hover:bg-red-50 transition-colors",children:e.jsx(S,{className:"h-4 w-4"})})]})})]},s.id)):e.jsx("tr",{children:e.jsxs("td",{colSpan:7,className:"py-8 px-4 text-center text-gray-500",children:[e.jsx(A,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay notificaciones"}),e.jsx("p",{className:"text-gray-500",children:"No se encontraron notificaciones con los filtros seleccionados."})]})})})]})}),a.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6 pt-4 border-t",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Mostrando ",(a.current_page-1)*a.per_page+1," a"," ",Math.min(a.current_page*a.per_page,a.total)," de"," ",a.total," notificaciones"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>v(a.links[0]?.url),disabled:a.current_page===1,children:[e.jsx(q,{className:"h-4 w-4"}),"Anterior"]}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Página ",a.current_page," de ",a.last_page]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>v(a.links[a.links.length-1]?.url),disabled:a.current_page===a.last_page,children:["Siguiente",e.jsx(H,{className:"h-4 w-4"})]})]})]})]})]})]})]})}export{Ae as default};
