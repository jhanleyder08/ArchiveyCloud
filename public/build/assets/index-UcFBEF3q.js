import{r as E,u as H,j as e,H as V,L as u}from"./app-bdRnt6Sf.js";import{A as R}from"./app-layout-BYiALk1Q.js";import{c as I,B as c}from"./app-logo-icon-DuPl4Vop.js";import{C as m,c as x,a as S,b as F,d as M}from"./card-CWT2CaIV.js";import{L as o,I as g}from"./label-eR3fV_fB.js";import{S as v,a as f,b as N,c as _,d as h}from"./select-DzSk6AMJ.js";import{B as n}from"./badge-D-wVoLf4.js";import{S as O}from"./separator-FoEKmUfQ.js";import{A as $,a as G}from"./alert-Bx_vX4ph.js";import{m as b,C as J,A as T,a as K,g as P,n as Q}from"./app-sidebar-layout-DoFu3WNo.js";import{F as U}from"./filter-C2Iv5b05.js";import{S as q}from"./star-BTD6gTjC.js";import{H as W}from"./hard-drive-CeaGl6SL.js";import{S as z}from"./search-BaIThYiF.js";import{D as X}from"./download-97E7p8pE.js";import{R as Y}from"./refresh-cw-COHn_MDI.js";import{F as Z}from"./folder-open-DjH3Bocv.js";import{E as ee}from"./eye-CfI6NocG.js";import{T as se}from"./trash-2-BpKIrCvl.js";/* empty css            */import"./index-Cfqs0Bea.js";import"./index-Bno0nWC5.js";import"./check-DaE5z30e.js";import"./index-Dem53vWf.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],te=I("RotateCcw",ae);function Te({indices:i,estadisticas:d,filtros:a,opcionesFiltros:j}){const[y,A]=E.useState(!1),{data:r,setData:t,get:w,processing:C}=H({busqueda_texto:a.busqueda_texto||"",tipo_entidad:a.tipo_entidad||"",serie_documental:a.serie_documental||"",nivel_acceso:a.nivel_acceso||"",fecha_inicio:a.fecha_inicio||"",fecha_fin:a.fecha_fin||"",solo_vitales:a.solo_vitales||!1,solo_historicos:a.solo_historicos||!1,orden_por:a.orden_por||"fecha_indexacion",direccion:a.direccion||"desc"}),B=s=>{s.preventDefault(),w("/admin/indices",{preserveState:!0})},L=()=>{t({busqueda_texto:"",tipo_entidad:"",serie_documental:"",nivel_acceso:"",fecha_inicio:"",fecha_fin:"",solo_vitales:!1,solo_historicos:!1,orden_por:"fecha_indexacion",direccion:"desc"}),w("/admin/indices")},k=(s,l)=>{const p={publico:"bg-green-100 text-green-800",restringido:"bg-yellow-100 text-yellow-800",confidencial:"bg-orange-100 text-orange-800",secreto:"bg-red-100 text-red-800"};return e.jsx(n,{className:p[s]||"bg-gray-100 text-gray-800",children:l})},D=(s,l)=>{const p={excelente:"bg-green-100 text-green-800",bueno:"bg-blue-100 text-blue-800",regular:"bg-yellow-100 text-yellow-800",malo:"bg-orange-100 text-orange-800",critico:"bg-red-100 text-red-800"};return e.jsx(n,{className:p[s]||"bg-gray-100 text-gray-800",children:l})};return e.jsxs(R,{children:[e.jsx(V,{title:"Índices Electrónicos"}),e.jsxs("div",{className:"container mx-auto py-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(b,{className:"w-8 h-8 text-indigo-600"}),"Índices Electrónicos"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Sistema automático de indexación y búsqueda de documentos y expedientes"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(u,{href:"/admin/indices/estadisticas/dashboard",children:e.jsxs(c,{variant:"outline",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Estadísticas"]})}),e.jsxs(c,{onClick:()=>A(!y),variant:"outline",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Filtros Avanzados"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx(m,{children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(b,{className:"h-8 w-8 text-indigo-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Índices"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.total_indices.toLocaleString()})]})]})})}),e.jsx(m,{children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{className:"h-8 w-8 text-yellow-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Documentos Vitales"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.documentos_vitales.toLocaleString()})]})]})})}),e.jsx(m,{children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Valor Histórico"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.documentos_historicos.toLocaleString()})]})]})})}),e.jsx(m,{children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(W,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tamaño Total"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.tamaño_total})]})]})})})]}),d.indices_desactualizados>0&&e.jsxs($,{className:"mb-6 border-yellow-200 bg-yellow-50",children:[e.jsx(K,{className:"h-4 w-4 text-yellow-600"}),e.jsxs(G,{className:"text-yellow-800",children:["Hay ",e.jsx("strong",{children:d.indices_desactualizados})," índices que necesitan actualización (más de 6 meses sin actualizar)."]})]}),e.jsxs(m,{className:"mb-6",children:[e.jsx(S,{children:e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-5 h-5"}),"Búsqueda y Filtros"]})}),e.jsx(x,{children:e.jsxs("form",{onSubmit:B,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-3",children:[e.jsx(o,{htmlFor:"busqueda_texto",children:"Búsqueda de texto completo"}),e.jsx(g,{id:"busqueda_texto",type:"text",placeholder:"Buscar por título, descripción, palabras clave...",value:r.busqueda_texto,onChange:s=>t("busqueda_texto",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"tipo_entidad",children:"Tipo de entidad"}),e.jsxs(v,{value:r.tipo_entidad,onValueChange:s=>t("tipo_entidad",s),children:[e.jsx(f,{children:e.jsx(N,{placeholder:"Todos los tipos"})}),e.jsxs(_,{children:[e.jsx(h,{value:"all",children:"Todos los tipos"}),Object.entries(j.tipos_entidad).map(([s,l])=>e.jsx(h,{value:s,children:l},s))]})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"nivel_acceso",children:"Nivel de acceso"}),e.jsxs(v,{value:r.nivel_acceso,onValueChange:s=>t("nivel_acceso",s),children:[e.jsx(f,{children:e.jsx(N,{placeholder:"Todos los niveles"})}),e.jsxs(_,{children:[e.jsx(h,{value:"all",children:"Todos los niveles"}),Object.entries(j.niveles_acceso).map(([s,l])=>e.jsx(h,{value:s,children:l},s))]})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"serie_documental",children:"Serie documental"}),e.jsxs(v,{value:r.serie_documental,onValueChange:s=>t("serie_documental",s),children:[e.jsx(f,{children:e.jsx(N,{placeholder:"Todas las series"})}),e.jsxs(_,{children:[e.jsx(h,{value:"all",children:"Todas las series"}),j.series_documentales.map(s=>e.jsx(h,{value:s,children:s},s))]})]})]})]}),y&&e.jsxs(e.Fragment,{children:[e.jsx(O,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"fecha_inicio",children:"Fecha inicio"}),e.jsx(g,{id:"fecha_inicio",type:"date",value:r.fecha_inicio,onChange:s=>t("fecha_inicio",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"fecha_fin",children:"Fecha fin"}),e.jsx(g,{id:"fecha_fin",type:"date",value:r.fecha_fin,onChange:s=>t("fecha_fin",s.target.value)})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[e.jsx("input",{id:"solo_vitales",type:"checkbox",checked:r.solo_vitales,onChange:s=>t("solo_vitales",s.target.checked),className:"rounded border-gray-300"}),e.jsx(o,{htmlFor:"solo_vitales",children:"Solo información vital"})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[e.jsx("input",{id:"solo_historicos",type:"checkbox",checked:r.solo_historicos,onChange:s=>t("solo_historicos",s.target.checked),className:"rounded border-gray-300"}),e.jsx(o,{htmlFor:"solo_historicos",children:"Solo valor histórico"})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(c,{type:"submit",disabled:C,children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),C?"Buscando...":"Buscar"]}),e.jsxs(c,{type:"button",variant:"outline",onClick:L,children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),"Limpiar"]})]})]})})]}),e.jsxs(m,{children:[e.jsx(S,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(F,{children:"Resultados de búsqueda"}),e.jsxs(M,{children:[i.total," índice(s) encontrado(s) - Mostrando ",i.from," a ",i.to]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{variant:"outline",size:"sm",children:[e.jsx(X,{className:"w-4 h-4 mr-1"}),"Exportar"]}),e.jsxs(c,{variant:"outline",size:"sm",children:[e.jsx(Y,{className:"w-4 h-4 mr-1"}),"Regenerar"]})]})]})}),e.jsxs(x,{children:[i.data.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(b,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No se encontraron índices con los criterios especificados"})]}):e.jsx("div",{className:"space-y-4",children:i.data.map(s=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.tipo_entidad==="expediente"?e.jsx(Z,{className:"w-5 h-5 text-blue-600"}):e.jsx(P,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:s.titulo}),s.es_reciente&&e.jsx(n,{variant:"outline",className:"text-green-600 border-green-300",children:"Nuevo"}),s.necesita_actualizacion&&e.jsxs(n,{variant:"outline",className:"text-orange-600 border-orange-300",children:[e.jsx(Q,{className:"w-3 h-3 mr-1"}),"Desactualizado"]})]}),e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Código:"})," ",s.codigo_completo," |"," ",e.jsx("span",{className:"font-medium",children:"Serie:"})," ",s.serie_documental||"Sin clasificar"," |"," ",e.jsx("span",{className:"font-medium",children:"Folios:"})," ",s.cantidad_folios||"N/A"," |"," ",e.jsx("span",{className:"font-medium",children:"Tamaño:"})," ",s.tamaño_formateado]}),s.descripcion&&e.jsx("p",{className:"text-sm text-gray-700 mb-3 line-clamp-2",children:s.descripcion}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(n,{variant:"outline",className:"capitalize",children:s.tipo_entidad}),k(s.nivel_acceso,s.etiqueta_nivel_acceso),D(s.estado_conservacion,s.etiqueta_estado_conservacion),s.es_vital&&e.jsxs(n,{className:"bg-yellow-100 text-yellow-800",children:[e.jsx(q,{className:"w-3 h-3 mr-1"}),"Vital"]}),s.es_historico&&e.jsxs(n,{className:"bg-purple-100 text-purple-800",children:[e.jsx(T,{className:"w-3 h-3 mr-1"}),"Histórico"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{href:`/admin/indices/${s.id}`,children:e.jsxs(c,{variant:"outline",size:"sm",children:[e.jsx(ee,{className:"w-4 h-4 mr-1"}),"Ver"]})}),e.jsx(c,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:e.jsx(se,{className:"w-4 h-4"})})]})]})},s.id))}),i.last_page>1&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx("div",{className:"flex items-center space-x-2",children:Array.from({length:i.last_page},(s,l)=>l+1).map(s=>e.jsx(u,{href:`/admin/indices?page=${s}`,className:`px-3 py-1 rounded ${s===i.current_page?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:s},s))})})]})]})]})]})}export{Te as default};
