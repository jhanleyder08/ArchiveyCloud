import{r as h,u as $,j as e,H as J,b as u}from"./app-CjMiy3Q5.js";import{A as O,t as l}from"./app-sidebar-layout-DpLfkLDt.js";import{B as s}from"./button-A4aNvoQw.js";import{C,a as _,b as w,d as S,c as F}from"./card-C03h05jd.js";import{I as t}from"./input-CC_EwJIc.js";import{L as p}from"./label-BU7ButmP.js";import{S as W,a as q,b as K,c as Q,d as L}from"./select-CcUgcjil.js";import{B as z}from"./badge-B0q_dRzt.js";import{P as X}from"./progress-DhCpqNBS.js";import{A as Y}from"./arrow-left-B20E6DhI.js";import{P as Z}from"./palette-DeI-pLBu.js";import{I as P}from"./image-WgQrpRg1.js";import{U as k}from"./upload-D6wVGHUd.js";import{E}from"./eye-Bhc80Zhl.js";import{T}from"./trash-2-CLcrBYzN.js";import{R as A}from"./refresh-cw-CLHak5In.js";import{S as ee}from"./save-DM1S-ldR.js";/* empty css            */import"./index-0YfHMj78.js";import"./Combination-BH0bcfYv.js";import"./index-6vFXYaqq.js";import"./index-D5uAfdjI.js";import"./x-B8cNsGQP.js";import"./index-DX1_V9zL.js";import"./app-logo-icon-DTZ4vsfq.js";import"./user-DtXdfUG6.js";import"./triangle-alert-CucTBQzM.js";import"./users-D9veXo2c.js";import"./folder-BAMVIGBI.js";import"./search-BnT0cgMG.js";import"./index-cKAjioWG.js";import"./check-DekjwXEH.js";function Te({configuraciones:c,logos:r}){const B=[{title:"Administración",href:"/admin"},{title:"Configuración",href:"/admin/configuracion"},{title:"Branding y Personalización",href:"/admin/configuracion/branding"}],g=h.useRef(null),[x,j]=h.useState(!1),[D,d]=h.useState(0),[U,G]=h.useState(""),{data:n,setData:o,put:R,processing:I}=$({nombre_aplicacion:c.app_name?.valor||"ArchiveyCloud",descripcion:c.app_description?.valor||"",color_primario:c.brand_primary_color?.valor||"#3b82f6",color_secundario:c.brand_secondary_color?.valor||"#6b7280",tema_default:c.default_theme?.valor||"light",mostrar_logo:c.show_logo?.valor==="true"}),H=a=>{a.preventDefault(),R("/admin/configuracion/branding/update",{onSuccess:()=>{l.success("Configuración de branding guardada exitosamente")},onError:()=>{l.error("Error al guardar la configuración")}})},f=a=>{G(a),g.current&&g.current.click()},M=a=>{const i=a.target.files?.[0];if(!i)return;const m=2*1024*1024;if(i.size>m){l.error("El archivo es demasiado grande. Máximo 2MB.");return}if(!["image/jpeg","image/png","image/gif","image/webp"].includes(i.type)){l.error("Tipo de archivo no permitido. Use JPEG, PNG, GIF o WebP.");return}V(i,U)},V=(a,i)=>{j(!0),d(0);const m=new FormData;m.append("archivo",a),m.append("tipo",i);const y=setInterval(()=>{d(b=>b>=90?(clearInterval(y),b):b+10)},200);u.post("/admin/configuracion/branding/upload",m,{onSuccess:()=>{d(100),setTimeout(()=>{j(!1),d(0),l.success(`${i==="principal"?"Logo principal":i==="favicon"?"Favicon":"Logo de login"} subido exitosamente`)},500)},onError:()=>{clearInterval(y),j(!1),d(0),l.error("Error al subir el archivo")}})},v=a=>{const i=r[a];i?window.open(i,"_blank"):l.info("No hay logo configurado para esta sección")},N=a=>{u.delete(`/admin/configuracion/branding/logo/${a}`,{onSuccess:()=>{l.success("Logo eliminado exitosamente")},onError:()=>{l.error("Error al eliminar el logo")}})};return e.jsxs(O,{breadcrumbs:B,children:[e.jsx(J,{title:"Branding y Personalización"}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(s,{variant:"outline",size:"icon",onClick:()=>u.visit("/admin/configuracion"),children:e.jsx(Y,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Branding y Personalización"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Configura la identidad visual y temas de ArchiveyCloud"})]})]})}),e.jsxs("form",{onSubmit:H,className:"space-y-6",children:[e.jsxs(C,{children:[e.jsxs(_,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5"}),"Información General"]}),e.jsx(S,{children:"Configura el nombre y descripción de la aplicación"})]}),e.jsx(F,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"nombre_aplicacion",children:"Nombre de la Aplicación"}),e.jsx(t,{id:"nombre_aplicacion",type:"text",value:n.nombre_aplicacion,onChange:a=>o("nombre_aplicacion",a.target.value),placeholder:"ArchiveyCloud"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"descripcion",children:"Descripción"}),e.jsx(t,{id:"descripcion",type:"text",value:n.descripcion,onChange:a=>o("descripcion",a.target.value),placeholder:"Sistema de Gestión Documental"})]})]})})]}),e.jsxs(C,{children:[e.jsxs(_,{children:[e.jsx(w,{children:"Colores y Tema"}),e.jsx(S,{children:"Define los colores principales del sistema"})]}),e.jsx(F,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"color_primario",children:"Color Primario"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{id:"color_primario",type:"color",value:n.color_primario,onChange:a=>o("color_primario",a.target.value),className:"w-16 h-10 p-0 border-0"}),e.jsx(t,{type:"text",value:n.color_primario,onChange:a=>o("color_primario",a.target.value),placeholder:"#3b82f6"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"color_secundario",children:"Color Secundario"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{id:"color_secundario",type:"color",value:n.color_secundario,onChange:a=>o("color_secundario",a.target.value),className:"w-16 h-10 p-0 border-0"}),e.jsx(t,{type:"text",value:n.color_secundario,onChange:a=>o("color_secundario",a.target.value),placeholder:"#6b7280"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"tema_default",children:"Tema por Defecto"}),e.jsxs(W,{value:n.tema_default,onValueChange:a=>o("tema_default",a),children:[e.jsx(q,{children:e.jsx(K,{placeholder:"Seleccionar tema"})}),e.jsxs(Q,{children:[e.jsx(L,{value:"light",children:"Claro"}),e.jsx(L,{value:"dark",children:"Oscuro"}),e.jsx(L,{value:"auto",children:"Automático"})]})]})]})]})})]}),e.jsxs(C,{children:[e.jsxs(_,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-5 w-5"}),"Gestión de Logos"]}),e.jsx(S,{children:"Sube y configura los logos del sistema"})]}),e.jsxs(F,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Logo Principal"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:r.principal?e.jsxs("div",{className:"space-y-2",children:[e.jsx("img",{src:r.principal,alt:"Logo Principal",className:"max-h-20 mx-auto"}),e.jsx(z,{variant:"outline",children:"Configurado"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{className:"h-12 w-12 mx-auto text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Sin logo"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(s,{type:"button",variant:"outline",size:"sm",onClick:()=>f("principal"),disabled:x,children:[e.jsx(k,{className:"h-4 w-4 mr-1"}),"Subir"]}),r.principal&&e.jsxs(e.Fragment,{children:[e.jsx(s,{type:"button",variant:"outline",size:"sm",onClick:()=>v("principal"),children:e.jsx(E,{className:"h-4 w-4"})}),e.jsx(s,{type:"button",variant:"outline",size:"sm",onClick:()=>N("principal"),children:e.jsx(T,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Favicon"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:r.favicon?e.jsxs("div",{className:"space-y-2",children:[e.jsx("img",{src:r.favicon,alt:"Favicon",className:"max-h-8 mx-auto"}),e.jsx(z,{variant:"outline",children:"Configurado"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-8 w-8 mx-auto bg-gray-300 rounded"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Sin favicon"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(s,{type:"button",variant:"outline",size:"sm",onClick:()=>f("favicon"),disabled:x,children:[e.jsx(k,{className:"h-4 w-4 mr-1"}),"Subir"]}),r.favicon&&e.jsxs(e.Fragment,{children:[e.jsx(s,{type:"button",variant:"outline",size:"sm",onClick:()=>v("favicon"),children:e.jsx(E,{className:"h-4 w-4"})}),e.jsx(s,{type:"button",variant:"outline",size:"sm",onClick:()=>N("favicon"),children:e.jsx(T,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Logo de Login"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:r.login?e.jsxs("div",{className:"space-y-2",children:[e.jsx("img",{src:r.login,alt:"Logo Login",className:"max-h-20 mx-auto"}),e.jsx(z,{variant:"outline",children:"Configurado"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{className:"h-12 w-12 mx-auto text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Sin logo"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(s,{type:"button",variant:"outline",size:"sm",onClick:()=>f("login"),disabled:x,children:[e.jsx(k,{className:"h-4 w-4 mr-1"}),"Subir"]}),r.login&&e.jsxs(e.Fragment,{children:[e.jsx(s,{type:"button",variant:"outline",size:"sm",onClick:()=>v("login"),children:e.jsx(E,{className:"h-4 w-4"})}),e.jsx(s,{type:"button",variant:"outline",size:"sm",onClick:()=>N("login"),children:e.jsx(T,{className:"h-4 w-4"})})]})]})]})]}),x&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{className:"text-sm",children:"Subiendo archivo..."})]}),e.jsx(X,{value:D,className:"w-full"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(s,{type:"button",variant:"outline",onClick:()=>u.visit("/admin/configuracion"),children:"Cancelar"}),e.jsx(s,{type:"submit",disabled:I,children:I?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"h-4 w-4 mr-2 animate-spin"}),"Guardando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Guardar Configuración"]})})]})]}),e.jsx("input",{ref:g,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:M,className:"hidden"})]})]})}export{Te as default};
