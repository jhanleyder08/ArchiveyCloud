import{j as e,r as u,u as E,H as A,a as j,U as w}from"./app-BAaRFKCE.js";import{A as V,F as B}from"./app-layout-BkZKgO0H.js";import{c as C,a as L,B as x}from"./app-logo-icon-CRu_6WDm.js";import{I as o}from"./input-BbBpRMsa.js";import{L as l}from"./label-D08h-VMZ.js";import{T as M,S as k}from"./textarea-CFmLlg1e.js";import{S as H,a as I,b as P,c as z,d as g}from"./select-COydJ_1f.js";import{C as v,a as f,b as y,c as N,d as _}from"./card-CrHy-fHD.js";import{S as G}from"./separator-BrPQWlfD.js";import{A as O}from"./arrow-left-Bo6AaNur.js";/* empty css            */import"./index-D2AugiGI.js";import"./index-DZ-wJQli.js";import"./index-B8KDMt0s.js";import"./index-D8C8_OyU.js";const U=L("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-background text-foreground",destructive:"text-destructive-foreground [&>svg]:text-current *:data-[slot=alert-description]:text-destructive-foreground/80"}},defaultVariants:{variant:"default"}});function q({className:d,variant:n,...m}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:C(U({variant:n}),d),...m})}function J({className:d,...n}){return e.jsx("div",{"data-slot":"alert-description",className:C("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",d),...n})}function ne({templates:d}){const[n,m]=u.useState(null),[b,p]=u.useState(!1),{data:i,setData:t,post:T,processing:h,errors:s}=E({name:"",description:"",code:"",entity_name:"",entity_code:"",effective_date:"",expiry_date:"",template_id:""}),S=a=>{if(a){const r=d.find(c=>c.id.toString()===a);m(r||null),t("template_id",a),p(!0)}else m(null),t("template_id",""),p(!1)},D=a=>{a.preventDefault(),T("/trd")},F=d.reduce((a,r)=>(a[r.category]||(a[r.category]=[]),a[r.category].push(r),a),{}),R={gobierno:"Entidades Gubernamentales",educacion:"Instituciones Educativas",salud:"Entidades de Salud",empresarial:"Empresas Privadas"};return e.jsxs(V,{children:[e.jsx(A,{title:"Crear TRD"}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs(x,{variant:"ghost",size:"sm",onClick:()=>j.get("/trd"),children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Volver"]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Crear Nueva TRD"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Tabla de Retención Documental"})]})]}),e.jsx("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsxs(v,{children:[e.jsxs(f,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5"}),"Plantillas Predefinidas"]}),e.jsx(N,{children:"Seleccione una plantilla para acelerar la creación de su TRD"})]}),e.jsx(_,{children:e.jsxs(H,{onValueChange:S,children:[e.jsx(I,{children:e.jsx(P,{placeholder:"Seleccionar plantilla (opcional)"})}),e.jsxs(z,{children:[e.jsx(g,{value:"",children:"Sin plantilla"}),Object.entries(F).map(([a,r])=>e.jsxs(w.Fragment,{children:[e.jsx("div",{className:"px-2 py-1 text-sm font-medium text-gray-500",children:R[a]||a}),r.map(c=>e.jsx(g,{value:c.id.toString(),children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:c.name}),e.jsx("div",{className:"text-sm text-gray-500",children:c.description})]})},c.id))]},a))]})]})})]}),e.jsxs(v,{children:[e.jsxs(f,{children:[e.jsx(y,{children:"Información Básica"}),e.jsx(N,{children:"Complete los datos generales de la Tabla de Retención Documental"})]}),e.jsxs(_,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"name",children:"Nombre de la TRD *"}),e.jsx(o,{id:"name",type:"text",value:i.name,onChange:a=>t("name",a.target.value),className:s.name?"border-red-500":"",placeholder:"Ej: TRD Alcaldía Municipal 2024"}),s.name&&e.jsx("p",{className:"text-sm text-red-600",children:s.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"code",children:"Código de la TRD *"}),e.jsx(o,{id:"code",type:"text",value:i.code,onChange:a=>t("code",a.target.value),className:s.code?"border-red-500":"",placeholder:"Ej: TRD-AM-2024"}),s.code&&e.jsx("p",{className:"text-sm text-red-600",children:s.code})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"entity_name",children:"Nombre de la Entidad *"}),e.jsx(o,{id:"entity_name",type:"text",value:i.entity_name,onChange:a=>t("entity_name",a.target.value),className:s.entity_name?"border-red-500":"",placeholder:"Ej: Alcaldía Municipal de Bogotá"}),s.entity_name&&e.jsx("p",{className:"text-sm text-red-600",children:s.entity_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"entity_code",children:"Código de la Entidad *"}),e.jsx(o,{id:"entity_code",type:"text",value:i.entity_code,onChange:a=>t("entity_code",a.target.value),className:s.entity_code?"border-red-500":"",placeholder:"Ej: AM-BOG"}),s.entity_code&&e.jsx("p",{className:"text-sm text-red-600",children:s.entity_code})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"description",children:"Descripción"}),e.jsx(M,{id:"description",value:i.description,onChange:a=>t("description",a.target.value),rows:3,placeholder:"Descripción opcional de la TRD"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"effective_date",children:"Fecha de Vigencia"}),e.jsx(o,{id:"effective_date",type:"date",value:i.effective_date,onChange:a=>t("effective_date",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"expiry_date",children:"Fecha de Vencimiento"}),e.jsx(o,{id:"expiry_date",type:"date",value:i.expiry_date,onChange:a=>t("expiry_date",a.target.value)})]})]})]})]}),e.jsx(G,{}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>j.get("/trd"),children:"Cancelar"}),e.jsxs(x,{type:"submit",disabled:h,children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),h?"Creando...":"Crear TRD"]})]}),b&&n&&e.jsx(q,{children:e.jsxs(J,{children:[e.jsx("strong",{children:"Nota:"}),' Al crear la TRD con la plantilla "',n.name,'", se incluirá la estructura predefinida que podrá modificar posteriormente.']})})]})})]})}export{ne as default};
