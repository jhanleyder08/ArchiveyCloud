import{u as X,j as e,H as J,L as c,b as T}from"./app-Dzr76Hsd.js";import{A as K}from"./app-layout-BMDnqvKc.js";import{B as t}from"./button-2TlPkYFS.js";import{I as N}from"./input-CLK_5OW0.js";import{L as p}from"./label-CJpZ1OKU.js";import{C as v,a as f,b as _,d as V,c as g}from"./card-tzDn5fcm.js";import{F as z,B as o}from"./Combination-DW5lnY8d.js";import{A as O,a as Q}from"./alert-Cz3Kn31L.js";import{S as L,a as D,b as k,c as B,d as a}from"./select-BUh-Ge6l.js";import{T as H,a as I,b,c as i,d as q,e as r}from"./table-CnHBhNCP.js";import{C as W,i as u}from"./app-sidebar-layout-Bx3rL1gT.js";import{P as y}from"./plus-CjpGTSg1.js";import{C as U}from"./folder-ATq5rfoE.js";import{S as w}from"./search-CcVBS-ta.js";import{C}from"./circle-check-big-BC2uOs1E.js";import{T as F}from"./triangle-alert-qsbqQmdH.js";import{C as Y}from"./circle-alert-DAHh9vOZ.js";import{F as Z}from"./filter-DCRPnV4w.js";import{U as R}from"./user-DGNIlZX6.js";import{C as P}from"./calendar-pfNz_HK2.js";import{E as ee}from"./eye-Th7TcQ76.js";import{C as se}from"./circle-x-CoP87EpQ.js";/* empty css            */import"./index-Cij-lt6V.js";import"./index-ClD50zlH.js";import"./index-DBCcPtr9.js";import"./check-uQw81wWn.js";import"./index-9RvwcAFD.js";import"./x-DereeiwP.js";import"./app-logo-icon-D2wELP3P.js";import"./mail-C2KsKOyQ.js";import"./users-BmLvcNFF.js";import"./BrandingProvider-C6T7Pf3B.js";const ae={pendiente:"bg-gray-100 text-gray-800 border-gray-200",en_revision:"bg-blue-100 text-blue-800 border-blue-200",aprobado:"bg-green-100 text-green-800 border-green-200",rechazado:"bg-red-100 text-red-800 border-red-200",ejecutado:"bg-purple-100 text-purple-800 border-purple-200",cancelado:"bg-gray-100 text-gray-600 border-gray-200"},$={conservacion_permanente:"bg-emerald-100 text-emerald-800 border-emerald-200",eliminacion_controlada:"bg-red-100 text-red-800 border-red-200",transferencia_historica:"bg-blue-100 text-blue-800 border-blue-200",digitalizacion:"bg-indigo-100 text-indigo-800 border-indigo-200",microfilmacion:"bg-violet-100 text-violet-800 border-violet-200"},ie={pendiente:e.jsx(U,{className:"h-4 w-4"}),en_revision:e.jsx(w,{className:"h-4 w-4"}),aprobado:e.jsx(C,{className:"h-4 w-4"}),rechazado:e.jsx(se,{className:"h-4 w-4"}),ejecutado:e.jsx(u,{className:"h-4 w-4"}),cancelado:e.jsx(F,{className:"h-4 w-4"})};function Ie({disposiciones:x,estadisticas:d,estadisticasTRD:l,expedientesPendientesTRD:m,proximasVencer:S,filtros:h}){const{data:n,setData:j,get:re,processing:A}=X({tipo_disposicion:h.tipo_disposicion||"todos",estado:h.estado||"todos",fecha_inicio:h.fecha_inicio||"",fecha_fin:h.fecha_fin||"",responsable:h.responsable||""}),G=()=>{const s={...n,tipo_disposicion:n.tipo_disposicion==="todos"?"":n.tipo_disposicion,estado:n.estado==="todos"?"":n.estado};T.get("/admin/disposiciones",s,{preserveState:!0,preserveScroll:!0})},M=()=>{T.visit("/admin/disposiciones")},E=s=>new Date(s).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"});return e.jsxs(K,{children:[e.jsx(J,{title:"Disposiciones Finales"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"Sistema de Disposición Final"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gestión del ciclo de vida documental y disposiciones finales"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(t,{variant:"outline",asChild:!0,children:e.jsxs(c,{href:"/admin/disposiciones/reportes",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Reportes"]})}),e.jsx(t,{className:"flex items-center gap-2 px-4 py-2 bg-[#2a3d83] text-white rounded-lg hover:bg-[#1e2b5f] transition-colors",asChild:!0,children:e.jsxs(c,{href:"/admin/disposiciones/create",children:[e.jsx(y,{className:"h-4 w-4"}),"Nueva Disposición"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:d.total_disposiciones})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(u,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pendientes"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:d.pendientes})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(U,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"En Revisión"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:d.en_revision})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(w,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Aprobadas"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:d.aprobadas})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(C,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Ejecutadas"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:d.ejecutadas})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(u,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Vencidas"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:d.vencidas})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(F,{className:"h-6 w-6 text-[#2a3d83]"})})]})})]}),S.length>0&&e.jsxs(O,{className:"border-orange-200 bg-orange-50",children:[e.jsx(Y,{className:"h-4 w-4 text-[#2a3d83]"}),e.jsx(Q,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("strong",{className:"text-orange-800",children:"Atención:"})," Hay ",S.length," disposiciones próximas a vencer o vencidas que requieren atención inmediata."]}),e.jsx(t,{size:"sm",variant:"outline",className:"text-orange-700 border-orange-300 hover:bg-orange-100",children:"Ver Detalles"})]})})]}),l&&(l.total_pendientes>0||l.total_con_fecha_eliminacion>0)&&e.jsxs(v,{className:"border-blue-200 bg-blue-50/30",children:[e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(_,{className:"flex items-center space-x-2 text-[#2a3d83]",children:[e.jsx(z,{className:"h-5 w-5"}),e.jsx("span",{children:"Expedientes Pendientes de Disposición (TRD)"})]}),e.jsx(V,{children:l.total_pendientes>0?"Expedientes que han cumplido su tiempo de retención según la Tabla de Retención Documental":`${l.total_con_fecha_eliminacion} expediente(s) con fecha de disposición configurada en la TRD`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[l.vencidos_sin_disposicion>0&&e.jsxs(o,{variant:"destructive",className:"text-sm",children:[l.vencidos_sin_disposicion," vencidos"]}),l.proximos_30_dias>0&&e.jsxs(o,{variant:"outline",className:"text-sm border-orange-300 text-orange-700",children:[l.proximos_30_dias," próximos (30 días)"]}),l.total_con_fecha_eliminacion>0&&l.total_pendientes===0&&e.jsx(o,{variant:"outline",className:"text-sm border-green-300 text-green-700",children:"✓ Todo al día"}),e.jsx(t,{size:"sm",className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",asChild:!0,children:e.jsx(c,{href:"/admin/disposiciones/pendientes-trd",children:"Ver Todos"})})]})]})}),m&&m.length>0?e.jsxs(g,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(H,{children:[e.jsx(I,{children:e.jsxs(b,{children:[e.jsx(i,{children:"Código"}),e.jsx(i,{children:"Título"}),e.jsx(i,{children:"Serie/Subserie"}),e.jsx(i,{children:"Vencimiento"}),e.jsx(i,{children:"Disposición Sugerida"}),e.jsx(i,{className:"text-right",children:"Acción"})]})}),e.jsx(q,{children:m.slice(0,5).map(s=>e.jsxs(b,{className:s.ya_vencido?"bg-red-50":"",children:[e.jsx(r,{className:"font-medium",children:s.codigo}),e.jsx(r,{className:"max-w-xs truncate",children:s.titulo}),e.jsx(r,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{children:s.serie||"Sin serie"}),s.subserie&&e.jsx("p",{className:"text-gray-500",children:s.subserie})]})}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:s.ya_vencido?"text-red-600 font-medium":"",children:s.fecha_eliminacion?new Date(s.fecha_eliminacion).toLocaleDateString("es-ES"):"N/A"}),s.ya_vencido?e.jsx("p",{className:"text-xs text-red-600 font-medium",children:"¡Vencido!"}):s.dias_para_disposicion<=30?e.jsxs("p",{className:"text-xs text-orange-600",children:["En ",s.dias_para_disposicion," días"]}):null]})}),e.jsx(r,{children:s.tipo_disposicion_sugerido&&e.jsx(o,{variant:"outline",className:$[s.tipo_disposicion_sugerido]||"bg-gray-100",children:s.tipo_disposicion_sugerido.replace(/_/g," ")})}),e.jsx(r,{className:"text-right",children:e.jsx(t,{size:"sm",variant:"outline",className:"text-[#2a3d83]",asChild:!0,children:e.jsxs(c,{href:`/admin/disposiciones/create?expediente_id=${s.id}`,children:[e.jsx(y,{className:"h-4 w-4 mr-1"}),"Crear"]})})})]},s.id))})]})}),m.length>5&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx(t,{variant:"link",className:"text-[#2a3d83]",asChild:!0,children:e.jsxs(c,{href:"/admin/disposiciones/pendientes-trd",children:["Ver los ",m.length-5," expedientes restantes →"]})})})]}):e.jsx(g,{children:e.jsxs("div",{className:"text-center py-6",children:[e.jsx(C,{className:"h-10 w-10 text-green-500 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"No hay expedientes con disposición pendiente en los próximos 90 días."}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Los expedientes tienen sus fechas de disposición configuradas correctamente en la TRD."})]})})]}),e.jsxs(v,{children:[e.jsxs(f,{children:[e.jsxs(_,{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"h-5 w-5"}),e.jsx("span",{children:"Filtros de Búsqueda"})]}),e.jsx(V,{children:"Filtra las disposiciones por tipo, estado, fechas o responsable"})]}),e.jsxs(g,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"tipo_disposicion",children:"Tipo de Disposición"}),e.jsxs(L,{value:n.tipo_disposicion,onValueChange:s=>j("tipo_disposicion",s),children:[e.jsx(D,{children:e.jsx(k,{placeholder:"Todos los tipos"})}),e.jsxs(B,{children:[e.jsx(a,{value:"todos",children:"Todos los tipos"}),e.jsx(a,{value:"conservacion_permanente",children:"Conservación Permanente"}),e.jsx(a,{value:"eliminacion_controlada",children:"Eliminación Controlada"}),e.jsx(a,{value:"transferencia_historica",children:"Transferencia Histórica"}),e.jsx(a,{value:"digitalizacion",children:"Digitalización"}),e.jsx(a,{value:"microfilmacion",children:"Microfilmación"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"estado",children:"Estado"}),e.jsxs(L,{value:n.estado,onValueChange:s=>j("estado",s),children:[e.jsx(D,{children:e.jsx(k,{placeholder:"Todos los estados"})}),e.jsxs(B,{children:[e.jsx(a,{value:"todos",children:"Todos los estados"}),e.jsx(a,{value:"pendiente",children:"Pendiente"}),e.jsx(a,{value:"en_revision",children:"En Revisión"}),e.jsx(a,{value:"aprobado",children:"Aprobado"}),e.jsx(a,{value:"rechazado",children:"Rechazado"}),e.jsx(a,{value:"ejecutado",children:"Ejecutado"}),e.jsx(a,{value:"cancelado",children:"Cancelado"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"fecha_inicio",children:"Fecha Inicio"}),e.jsx(N,{id:"fecha_inicio",type:"date",value:n.fecha_inicio,onChange:s=>j("fecha_inicio",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"fecha_fin",children:"Fecha Fin"}),e.jsx(N,{id:"fecha_fin",type:"date",value:n.fecha_fin,onChange:s=>j("fecha_fin",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"responsable",children:"Responsable"}),e.jsx(N,{id:"responsable",placeholder:"Nombre del responsable",value:n.responsable,onChange:s=>j("responsable",s.target.value)})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[e.jsxs(t,{onClick:G,disabled:A,children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),A?"Aplicando...":"Aplicar Filtros"]}),e.jsx(t,{variant:"outline",onClick:M,children:"Limpiar"})]})]})]}),e.jsxs(v,{children:[e.jsx(f,{children:e.jsxs(_,{className:"flex items-center justify-between",children:[e.jsxs("span",{children:["Disposiciones Finales (",x.total,")"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Página ",x.current_page," de ",x.last_page]})]})}),e.jsx(g,{children:x.data.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(H,{children:[e.jsx(I,{children:e.jsxs(b,{children:[e.jsx(i,{className:"w-16",children:"Estado"}),e.jsx(i,{children:"Item"}),e.jsx(i,{children:"Tipo Disposición"}),e.jsx(i,{children:"Responsable"}),e.jsx(i,{children:"Fecha Propuesta"}),e.jsx(i,{children:"Vencimiento"}),e.jsx(i,{className:"text-right",children:"Acciones"})]})}),e.jsx(q,{children:x.data.map(s=>e.jsxs(b,{className:s.esta_vencida?"bg-red-50":"",children:[e.jsx(r,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{variant:"outline",className:ae[s.estado],children:e.jsxs("div",{className:"flex items-center space-x-1",children:[ie[s.estado],e.jsx("span",{children:s.estado_label})]})}),s.esta_vencida&&e.jsx(F,{className:"h-4 w-4 text-red-500"})]})}),e.jsx(r,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[s.expediente?e.jsx(u,{className:"h-4 w-4 text-[#2a3d83]"}):e.jsx(z,{className:"h-4 w-4 text-[#2a3d83]"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.expediente?`${s.expediente.codigo}`:s.documento?.nombre}),e.jsx("p",{className:"text-sm text-gray-500",children:s.expediente?.titulo})]})]})}),e.jsx(r,{children:e.jsx(o,{variant:"outline",className:$[s.tipo_disposicion],children:s.tipo_disposicion_label})}),e.jsx(r,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{className:"h-4 w-4 text-[#2a3d83]"}),e.jsx("span",{children:s.responsable?.name||"Sin responsable asignado"})]})}),e.jsx(r,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{className:"h-4 w-4 text-[#2a3d83]"}),e.jsx("span",{children:E(s.fecha_propuesta)})]})}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{className:"h-4 w-4 text-[#2a3d83]"}),e.jsx("span",{className:s.esta_vencida?"text-red-600 font-medium":"",children:E(s.fecha_vencimiento_retencion)})]}),s.dias_para_vencimiento<=30&&s.dias_para_vencimiento>0&&e.jsxs("p",{className:"text-xs text-orange-600",children:["Vence en ",s.dias_para_vencimiento," días"]}),s.esta_vencida&&e.jsx("p",{className:"text-xs text-red-600 font-medium",children:"¡Vencida!"})]})}),e.jsx(r,{className:"text-right",children:e.jsx(c,{href:`/admin/disposiciones/${s.id}`,children:e.jsx("button",{className:"p-2 rounded-md text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50 transition-colors",children:e.jsx(ee,{className:"h-4 w-4"})})})})]},s.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(u,{className:"h-12 w-12 text-[#2a3d83] mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay disposiciones finales"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No se encontraron disposiciones que coincidan con los criterios de búsqueda."}),e.jsx(t,{className:"flex items-center gap-2 px-4 py-2 bg-[#2a3d83] text-white rounded-lg hover:bg-[#1e2b5f] transition-colors",asChild:!0,children:e.jsxs(c,{href:"/admin/disposiciones/create",children:[e.jsx(y,{className:"h-4 w-4"}),"Crear Primera Disposición"]})})]})})]})]})]})}export{Ie as default};
