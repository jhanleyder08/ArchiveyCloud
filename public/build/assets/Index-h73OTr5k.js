import{r as C,j as e,H as P,b as g,t as b}from"./app-xP5nJVeF.js";import{f as H,S as y,h as z}from"./app-sidebar-layout-Bv9w89yC.js";import{B as d}from"./button-B_iUXIQd.js";import{C as l,a as i,b as n,c,d as R}from"./card-CWOinnut.js";import{T as U,a as V,b as G,c as W}from"./tabs-BrUZeGY9.js";import{I as v}from"./input-DQqwP0kM.js";import{L as f}from"./label-CXywCScm.js";import{S as $,a as J,b as K,c as q,d as m}from"./select-CeZZq-kY.js";import{S as Q}from"./switch-QLhb2Yqp.js";import{S as h}from"./save-C_03Hu9q.js";import{R as X}from"./refresh-cw-Fn0W1b7X.js";import{U as _,D as Y}from"./users-DpyCPIO9.js";import{P as T}from"./palette-CsJDdNwv.js";import{W as Z}from"./wrench-WMVQ19-P.js";import{B as ee}from"./bell-CE8KmB4j.js";import{S as se}from"./triangle-alert-3Hg381hi.js";import{S as ae}from"./smartphone-q_DuSp2J.js";import{M as re}from"./mail-C5oL3AE1.js";/* empty css            */import"./index-DbDMva29.js";import"./Combination-BMQq9fx8.js";import"./index-Blg4NNxt.js";import"./index-D2eHBSbe.js";import"./x-CBQbsaML.js";import"./app-logo-icon-8EdVYcX9.js";import"./user-OU0Y1c1r.js";import"./folder-Ck8Tq3sH.js";import"./search-eio2uEn4.js";import"./BrandingProvider-BV5yFGOU.js";import"./index-B00g0JPb.js";import"./check-C5qgcy3h.js";function Ie({configuraciones:te={},estadisticas:B,categorias:F,roles:le=[]}){const[M,E]=C.useState("sistema"),[o,w]=C.useState({}),[x,N]=C.useState(!1),j=B||{configuraciones_total:0,configuraciones_activas:0,usuarios_total:0,roles_total:0,cache_size:0,storage_size:0},S=F||{sistema:[],email:[],sms:[],seguridad:[],branding:[],notificaciones:[]},k=s=>{if(s===0)return"0 Bytes";const a=1024,r=["Bytes","KB","MB","GB"],t=Math.floor(Math.log(s)/Math.log(a));return parseFloat((s/Math.pow(a,t)).toFixed(2))+" "+r[t]},u=(s,a)=>{w(r=>({...r,[s]:a}))},p=async s=>{if(o[s]){N(!0);try{await g.put(route("admin.configuracion.actualizar",s),{valor:o[s],activo:!0}),w(a=>{const r={...a};return delete r[s],r}),b.success("Configuración actualizada exitosamente")}catch(a){console.error("Error saving configuration:",a),b.error("Error al actualizar configuración")}finally{N(!1)}}},L=async()=>{N(!0);const s=Object.keys(o).map(a=>g.put(route("admin.configuracion.actualizar",a),{valor:o[a],activo:!0}));try{await Promise.all(s),w({}),b.success("Todas las configuraciones guardadas exitosamente")}catch(a){console.error("Error saving all configurations:",a),b.error("Error al guardar configuraciones")}finally{N(!1)}},O=()=>{window.open(route("admin.configuracion.exportar"),"_blank")},A=s=>{const a=o[s.clave]??s.valor,r=o[s.clave]!==void 0;switch(s.tipo){case"boolean":return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(f,{children:s.descripcion}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.clave})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{checked:a==="true"||a===!0,onCheckedChange:t=>u(s.clave,t?"true":"false")}),r&&e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>p(s.clave),disabled:x,children:e.jsx(h,{className:"h-4 w-4"})})]})]});case"numero":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:s.clave,children:s.descripcion}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(v,{id:s.clave,type:"number",value:a,onChange:t=>u(s.clave,t.target.value),className:r?"border-orange-500":""}),r&&e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>p(s.clave),disabled:x,children:e.jsx(h,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.clave})]});case"color":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:s.clave,children:s.descripcion}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(v,{id:s.clave,type:"color",value:a,onChange:t=>u(s.clave,t.target.value),className:`w-20 h-10 ${r?"border-orange-500":""}`}),e.jsx(v,{value:a,onChange:t=>u(s.clave,t.target.value),className:`flex-1 ${r?"border-orange-500":""}`,placeholder:"#000000"}),r&&e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>p(s.clave),disabled:x,children:e.jsx(h,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.clave})]});case"seleccion":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:s.clave,children:s.descripcion}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs($,{value:a,onValueChange:t=>u(s.clave,t),children:[e.jsx(J,{className:r?"border-orange-500":"",children:e.jsx(K,{})}),e.jsxs(q,{children:[s.clave==="tema_predeterminado"&&e.jsxs(e.Fragment,{children:[e.jsx(m,{value:"light",children:"Claro"}),e.jsx(m,{value:"dark",children:"Oscuro"}),e.jsx(m,{value:"auto",children:"Automático"})]}),s.clave==="mail_mailer"&&e.jsxs(e.Fragment,{children:[e.jsx(m,{value:"smtp",children:"SMTP"}),e.jsx(m,{value:"sendmail",children:"Sendmail"})]}),s.clave==="mail_encryption"&&e.jsxs(e.Fragment,{children:[e.jsx(m,{value:"tls",children:"TLS"}),e.jsx(m,{value:"ssl",children:"SSL"}),e.jsx(m,{value:"null",children:"Sin cifrado"})]})]})]}),r&&e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>p(s.clave),disabled:x,children:e.jsx(h,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.clave})]});case"password":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:s.clave,children:s.descripcion}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(v,{id:s.clave,type:"password",value:a,onChange:t=>u(s.clave,t.target.value),className:r?"border-orange-500":"",placeholder:"••••••••"}),r&&e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>p(s.clave),disabled:x,children:e.jsx(h,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.clave})]});default:return e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:s.clave,children:s.descripcion}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(v,{id:s.clave,value:a,onChange:t=>u(s.clave,t.target.value),className:r?"border-orange-500":""}),r&&e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>p(s.clave),disabled:x,children:e.jsx(h,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.clave})]})}},I=s=>{switch(s){case"sistema":return e.jsx(y,{className:"h-5 w-5"});case"branding":return e.jsx(T,{className:"h-5 w-5"});case"email":return e.jsx(re,{className:"h-5 w-5"});case"sms":return e.jsx(ae,{className:"h-5 w-5"});case"seguridad":return e.jsx(se,{className:"h-5 w-5"});case"notificaciones":return e.jsx(ee,{className:"h-5 w-5"});default:return e.jsx(y,{className:"h-5 w-5"})}},D=s=>{switch(s){case"sistema":return"Sistema";case"branding":return"Branding";case"email":return"Email";case"sms":return"SMS";case"seguridad":return"Seguridad";case"notificaciones":return"Notificaciones";default:return s}};return e.jsxs(H,{title:"Configuración del Sistema",children:[e.jsx(P,{title:"Configuración del Sistema"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Configuración del Sistema"}),e.jsx("p",{className:"text-muted-foreground",children:"Gestiona la configuración avanzada, branding y personalización del sistema"})]}),e.jsxs("div",{className:"flex gap-2",children:[Object.keys(o).length>0&&e.jsxs(d,{onClick:L,disabled:x,children:[e.jsx(h,{className:"mr-2 h-4 w-4"}),"Guardar Todo (",Object.keys(o).length,")"]}),e.jsxs(d,{variant:"outline",onClick:()=>g.reload(),children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"Actualizar"]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Configuraciones"}),e.jsx(y,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:j.configuraciones_total}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[j.configuraciones_activas," activas"]})]})]}),e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Usuarios"}),e.jsx(_,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:j.usuarios_total}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[j.roles_total," roles configurados"]})]})]}),e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Cache"}),e.jsx(z,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:k(j.cache_size)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tamaño en memoria"})]})]}),e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Storage"}),e.jsx(z,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:k(j.storage_size)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Archivos almacenados"})]})]})]}),e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsx(n,{children:"Configuraciones por Categoría"}),e.jsx(R,{children:"Ajusta las configuraciones del sistema organizadas por categorías"})]}),e.jsx(c,{children:e.jsxs(U,{value:M,onValueChange:E,children:[e.jsx(V,{className:"grid w-full grid-cols-6",children:Object.keys(S).map(s=>e.jsxs(G,{value:s,className:"flex items-center gap-2",children:[I(s),e.jsx("span",{className:"hidden sm:inline",children:D(s)})]},s))}),Object.entries(S).map(([s,a])=>e.jsxs(W,{value:s,className:"space-y-4 mt-6",children:[e.jsx("div",{className:"grid gap-6 md:grid-cols-1 lg:grid-cols-2",children:a.map(r=>e.jsx(l,{children:e.jsx(c,{className:"pt-6",children:A(r)})},r.clave))}),a.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No hay configuraciones disponibles en esta categoría"})]},s))]})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(l,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>g.get(route("admin.configuracion.branding")),children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Branding"}),e.jsx(T,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(c,{children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Personaliza logos, colores y temas"})})]}),e.jsxs(l,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>g.get(route("admin.configuracion.roles")),children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Roles"}),e.jsx(_,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(c,{children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Configuraciones específicas por rol"})})]}),e.jsxs(l,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>g.get(route("admin.configuracion.mantenimiento")),children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Mantenimiento"}),e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(c,{children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Herramientas del sistema y optimización"})})]}),e.jsxs(l,{className:"cursor-pointer hover:bg-muted/50",onClick:O,children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Exportar"}),e.jsx(Y,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(c,{children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Descargar configuraciones en JSON"})})]})]})]})]})}export{Ie as default};
