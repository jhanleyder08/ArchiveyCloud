import{r,j as e,H as re,L as ie,a as w}from"./app-tMaUuF3G.js";import{A as le}from"./app-layout-Do2Eb3Sk.js";import{C as j,a as p,b as g,d as E,c as f}from"./card-B1dP6K0M.js";import{c as ne,B as d}from"./button-b2NvRhsY.js";import{I as P}from"./input-BUbi3POq.js";import{L as n}from"./label-Bqu3HQD6.js";import{A as te,M as L,T as ce,q as M}from"./app-sidebar-layout-DrvTFVRU.js";import{S as v,a as N,b,c as y,d as t}from"./select-CdhdgJ0w.js";import{A as H,a as O}from"./alert-DhY9P36X.js";import{B as W}from"./Combination-CgNv0oAU.js";import{T as oe,a as de,b as T,c as A}from"./tabs-DN7fnGV-.js";import{T as me}from"./test-tube-zsK3s7F1.js";import{T as G}from"./triangle-alert-JjU49oaO.js";import{M as m}from"./mail-CwCHIGE1.js";import{U as R}from"./user-BK5OEaM4.js";import{L as U}from"./loader-circle-BMOh94KK.js";import{P as xe}from"./phone-usF1gTZL.js";import{C as ue}from"./circle-check-big-V33kOqFh.js";/* empty css            */import"./index-BqccPZiJ.js";import"./index-gcMQB5yO.js";import"./index-DReOSayN.js";import"./x-B3QVzJhq.js";import"./app-logo-icon-DkUm7hxR.js";import"./users-0BijOv_M.js";import"./folder-CyeXS8Xg.js";import"./search-a-c68EbR.js";import"./BrandingProvider-DUeywemA.js";import"./index-CWm8oeKh.js";import"./check-CjMGlCJz.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],z=ne("PenLine",he);function We({usuarios:x}){const[o,J]=r.useState(""),[c,K]=r.useState(""),[I,k]=r.useState(!1),[V,B]=r.useState(!1),[F,q]=r.useState(!1),[Q,u]=r.useState(null),[X,h]=r.useState(null),[Y,i]=r.useState(null),[a,l]=r.useState({destinatario_tipo:"usuario",user_id:"",email_manual:"",asunto:"",mensaje:"",prioridad:"media"}),S=x.find(s=>s.id.toString()===o),C=x.find(s=>s.id.toString()===a.user_id),Z=async()=>{if(!o){u({success:!1,message:"Por favor selecciona un usuario"});return}k(!0),u(null);try{const s=await w.post("/admin/servicios-externos/test-email",{user_id:o});u(s.data)}catch(s){u({success:!1,message:s.response?.data?.message||"Error enviando email de prueba"})}finally{k(!1)}},$=async()=>{if(a.destinatario_tipo==="usuario"&&!a.user_id){i({success:!1,message:"Por favor selecciona un usuario destinatario"});return}if(a.destinatario_tipo==="manual"&&!a.email_manual){i({success:!1,message:"Por favor ingresa un correo electr√≥nico"});return}if(!a.asunto.trim()){i({success:!1,message:"Por favor ingresa un asunto para el correo"});return}if(!a.mensaje.trim()){i({success:!1,message:"Por favor ingresa el mensaje del correo"});return}q(!0),i(null);try{const s=await w.post("/admin/servicios-externos/send-custom-email",{destinatario_tipo:a.destinatario_tipo,user_id:a.user_id||null,email_manual:a.email_manual||null,asunto:a.asunto,mensaje:a.mensaje,prioridad:a.prioridad});i(s.data),s.data.success&&l({destinatario_tipo:"usuario",user_id:"",email_manual:"",asunto:"",mensaje:"",prioridad:"media"})}catch(s){i({success:!1,message:s.response?.data?.message||"Error enviando el correo personalizado"})}finally{q(!1)}},ee=async()=>{if(!c){h({success:!1,message:"Por favor ingresa un n√∫mero de tel√©fono"});return}B(!0),h(null);try{const s=await w.post("/admin/servicios-externos/test-sms",{telefono:c});h(s.data)}catch(s){h({success:!1,message:s.response?.data?.message||"Error enviando SMS de prueba"})}finally{B(!1)}},_=(s,se)=>s?e.jsx(H,{className:s.success?"border-green-200 bg-green-50":"border-red-200 bg-red-50",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[s.success?e.jsx(ue,{className:"h-4 w-4 text-green-600"}):e.jsx(G,{className:"h-4 w-4 text-red-600"}),e.jsxs(O,{className:s.success?"text-green-800":"text-red-800",children:[e.jsxs("strong",{children:[se,":"]})," ",s.message,s.detalles&&e.jsx("div",{className:"mt-2 text-sm space-y-1",children:Object.entries(s.detalles).map(([D,ae])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"capitalize",children:[D.replace("_"," "),":"]}),e.jsx("span",{className:"font-mono text-xs",children:String(ae)})]},D))})]})]})}):null;return e.jsxs(le,{children:[e.jsx(re,{title:"Probar Servicios Externos - ArchiveyCloud"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(ie,{href:"/admin/servicios-externos",children:e.jsxs(d,{variant:"outline",size:"sm",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Volver"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Probar Servicios Externos"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Env√≠a emails y SMS de prueba para verificar la configuraci√≥n"})]})]}),e.jsx(me,{className:"h-8 w-8 text-blue-600"})]}),e.jsxs(H,{children:[e.jsx(G,{className:"h-4 w-4"}),e.jsxs(O,{children:[e.jsx("strong",{children:"Importante:"})," Los emails y SMS se env√≠an realmente a los destinatarios seleccionados. Usa esta funcionalidad solo para testing en ambientes de desarrollo o con usuarios de prueba."]})]}),e.jsxs(oe,{defaultValue:"custom",className:"w-full",children:[e.jsxs(de,{className:"grid w-full grid-cols-3",children:[e.jsxs(T,{value:"custom",className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),"Correo Personalizado"]}),e.jsxs(T,{value:"test-email",className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-4 w-4"}),"Prueba R√°pida Email"]}),e.jsxs(T,{value:"test-sms",className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4"}),"Prueba SMS"]})]}),e.jsx(A,{value:"custom",className:"mt-6",children:e.jsxs(j,{children:[e.jsxs(p,{children:[e.jsxs(g,{className:"flex items-center space-x-2",children:[e.jsx(z,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{children:"Crear Correo Personalizado"})]}),e.jsx(E,{children:"Redacta y env√≠a un correo electr√≥nico con asunto y contenido personalizado"})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Tipo de Destinatario"}),e.jsxs(v,{value:a.destinatario_tipo,onValueChange:s=>l({...a,destinatario_tipo:s,user_id:"",email_manual:""}),children:[e.jsx(N,{children:e.jsx(b,{})}),e.jsxs(y,{children:[e.jsx(t,{value:"usuario",children:"Usuario del Sistema"}),e.jsx(t,{value:"manual",children:"Correo Manual"})]})]})]}),a.destinatario_tipo==="usuario"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Seleccionar Usuario"}),e.jsxs(v,{value:a.user_id,onValueChange:s=>l({...a,user_id:s}),children:[e.jsx(N,{children:e.jsx(b,{placeholder:"Selecciona un usuario..."})}),e.jsx(y,{children:x.map(s=>e.jsx(t,{value:s.id.toString(),children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{children:s.name}),e.jsx(W,{variant:"outline",className:"ml-2 text-xs",children:s.email})]})},s.id))})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"email-manual",children:"Correo Electr√≥nico"}),e.jsx(P,{id:"email-manual",type:"email",placeholder:"ejemplo@correo.com",value:a.email_manual,onChange:s=>l({...a,email_manual:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Prioridad"}),e.jsxs(v,{value:a.prioridad,onValueChange:s=>l({...a,prioridad:s}),children:[e.jsx(N,{children:e.jsx(b,{})}),e.jsxs(y,{children:[e.jsx(t,{value:"baja",children:"üîµ Baja"}),e.jsx(t,{value:"media",children:"üü° Media"}),e.jsx(t,{value:"alta",children:"üü† Alta"}),e.jsx(t,{value:"urgente",children:"üî¥ Urgente"})]})]})]}),(C||a.email_manual)&&e.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg space-y-2 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{className:"h-4 w-4 text-purple-600"}),e.jsx("span",{className:"font-medium text-purple-900",children:a.destinatario_tipo==="usuario"?C?.name:"Correo externo"})]}),e.jsx("div",{className:"text-sm text-purple-700",children:a.destinatario_tipo==="usuario"?C?.email:a.email_manual})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"asunto",children:"Asunto del Correo *"}),e.jsx(P,{id:"asunto",placeholder:"Ej: Notificaci√≥n importante - ArchiveyCloud",value:a.asunto,onChange:s=>l({...a,asunto:s.target.value}),maxLength:200}),e.jsxs("p",{className:"text-xs text-gray-500",children:[a.asunto.length,"/200 caracteres"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"mensaje",children:"Mensaje *"}),e.jsx(ce,{id:"mensaje",placeholder:"Escribe el contenido del correo aqu√≠...",value:a.mensaje,onChange:s=>l({...a,mensaje:s.target.value}),rows:6,maxLength:5e3}),e.jsxs("p",{className:"text-xs text-gray-500",children:[a.mensaje.length,"/5000 caracteres"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 pt-4 border-t",children:[e.jsxs(d,{onClick:$,disabled:F,className:"flex-1",children:[F?e.jsx(U,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(M,{className:"h-4 w-4 mr-2"}),"Enviar Correo Personalizado"]}),e.jsx(d,{type:"button",variant:"outline",onClick:()=>{l({destinatario_tipo:"usuario",user_id:"",email_manual:"",asunto:"",mensaje:"",prioridad:"media"}),i(null)},children:"Limpiar"})]}),_(Y,"Correo Personalizado")]})]})}),e.jsx(A,{value:"test-email",className:"mt-6",children:e.jsxs(j,{children:[e.jsxs(p,{children:[e.jsxs(g,{className:"flex items-center space-x-2",children:[e.jsx(m,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:"Probar Email R√°pido"})]}),e.jsx(E,{children:"Env√≠a un email de prueba predefinido a un usuario espec√≠fico"})]}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"usuario-select",children:"Usuario Destinatario"}),e.jsxs(v,{value:o,onValueChange:J,children:[e.jsx(N,{id:"usuario-select",children:e.jsx(b,{placeholder:"Selecciona un usuario..."})}),e.jsx(y,{children:x.map(s=>e.jsx(t,{value:s.id.toString(),children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{children:s.name}),e.jsx(W,{variant:"outline",className:"ml-auto",children:s.email})]})},s.id))})]})]}),S&&e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"font-medium",children:S.name})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(m,{className:"h-3 w-3"}),e.jsx("span",{children:S.email})]})]}),e.jsxs(d,{onClick:Z,disabled:I||!o,className:"w-full",children:[I?e.jsx(U,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(M,{className:"h-4 w-4 mr-2"}),"Enviar Email de Prueba"]}),_(Q,"Email"),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Asunto:"})," üìã Prueba desde Interfaz Web - ArchiveyCloud"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contenido:"})," Email de prueba enviado desde la interfaz de administraci√≥n"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Prioridad:"})," Media"]})]})]})]})}),e.jsx(A,{value:"test-sms",className:"mt-6",children:e.jsxs(j,{children:[e.jsxs(p,{children:[e.jsxs(g,{className:"flex items-center space-x-2",children:[e.jsx(L,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{children:"Probar SMS"})]}),e.jsx(E,{children:"Env√≠a un SMS de prueba a un n√∫mero espec√≠fico"})]}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"telefono-input",children:"N√∫mero de Tel√©fono"}),e.jsx(P,{id:"telefono-input",type:"tel",placeholder:"+573001234567",value:c,onChange:s=>K(s.target.value),className:"font-mono"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Incluye el c√≥digo de pa√≠s (ej: +57 para Colombia)"})]}),c&&e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"font-medium font-mono",children:c})]}),e.jsx("div",{className:"text-sm text-gray-600",children:"SMS ser√° enviado a este n√∫mero"})]}),e.jsxs(d,{onClick:ee,disabled:V||!c,className:"w-full",children:[V?e.jsx(U,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(M,{className:"h-4 w-4 mr-2"}),"Enviar SMS de Prueba"]}),_(X,"SMS"),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Mensaje:"})," üö® ArchiveyCloud: Prueba SMS - Ver: [URL]"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Longitud:"})," ~60 caracteres"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Ambiente:"})," Simulado en desarrollo / Env√≠o real en producci√≥n"]})]})]})]})})]}),e.jsxs(j,{children:[e.jsx(p,{children:e.jsx(g,{children:"Informaci√≥n sobre los Servicios de Email"})}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center",children:[e.jsx(z,{className:"h-4 w-4 mr-2 text-purple-600"}),"Correo Personalizado"]}),e.jsxs("ul",{className:"space-y-1 text-gray-600",children:[e.jsx("li",{children:"‚Ä¢ Permite escribir asunto y mensaje propios"}),e.jsx("li",{children:"‚Ä¢ Env√≠a a usuarios o correos externos"}),e.jsx("li",{children:"‚Ä¢ Selecci√≥n de prioridad del mensaje"}),e.jsx("li",{children:"‚Ä¢ Ideal para comunicaciones espec√≠ficas"})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center",children:[e.jsx(m,{className:"h-4 w-4 mr-2 text-blue-600"}),"Email de Prueba"]}),e.jsxs("ul",{className:"space-y-1 text-gray-600",children:[e.jsx("li",{children:"‚Ä¢ Usa la configuraci√≥n actual de email"}),e.jsx("li",{children:"‚Ä¢ Respeta l√≠mites de throttling"}),e.jsx("li",{children:"‚Ä¢ Crea notificaci√≥n en el sistema"}),e.jsx("li",{children:"‚Ä¢ Usa template HTML profesional"})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center",children:[e.jsx(L,{className:"h-4 w-4 mr-2 text-green-600"}),"SMS de Prueba"]}),e.jsxs("ul",{className:"space-y-1 text-gray-600",children:[e.jsx("li",{children:"‚Ä¢ Solo funciona en producci√≥n"}),e.jsx("li",{children:"‚Ä¢ En desarrollo se simula el env√≠o"}),e.jsx("li",{children:"‚Ä¢ Respeta l√≠mites de throttling"}),e.jsx("li",{children:"‚Ä¢ Requiere configuraci√≥n SMS"})]})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Resoluci√≥n de Problemas"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("p",{children:"‚Ä¢ Si el email falla, verifica la configuraci√≥n SMTP en el archivo .env"}),e.jsx("p",{children:"‚Ä¢ Si el SMS falla, revisa la API key del proveedor en config/services.php"}),e.jsx("p",{children:"‚Ä¢ Los l√≠mites de throttling pueden impedir m√∫ltiples env√≠os seguidos"}),e.jsx("p",{children:"‚Ä¢ Revisa los logs de Laravel para m√°s detalles sobre errores"})]})]})]})]})]})]})}export{We as default};
