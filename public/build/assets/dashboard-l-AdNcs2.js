import{j as e,H as g,L as l}from"./app-DOeYTPnE.js";import{A as v}from"./app-layout-CKT_ksyH.js";import{C as t,c as r,a as n,b as x,d}from"./card-BEZSel9K.js";import{B as i}from"./button-BB3j1qH9.js";import{B as y}from"./badge-BDHWk-Qv.js";import{A as b}from"./arrow-left-Cvz8oF6O.js";import{P as h}from"./plus-Dfkec5yu.js";import{K as m,U as k,e as j}from"./app-sidebar-layout-83PL_wom.js";import{C as w}from"./circle-check-big-BQYxJNiA.js";import{A as p}from"./activity-BLJcHynw.js";import{C as f}from"./user-BiSWd6pJ.js";import{T as A}from"./triangle-alert-B7e9hRq_.js";import{R as T,T as C}from"./CategoricalChart-Dajg-Im1.js";import{A as q,a as _}from"./AreaChart-WWHRVCMu.js";import{C as P,X as R,Y as D}from"./CartesianChart-D-tVo_OX.js";/* empty css            */import"./index-B5i9qy2Y.js";import"./index-Cl_hWV--.js";import"./index-C7D1JV-H.js";import"./index-BuQaqXjb.js";import"./x-BHxLkKP3.js";import"./index-sj4qH-fg.js";import"./app-logo-icon-BTiqVlKS.js";import"./label-BvABT9uR.js";import"./ActivePoints-B4M48u6W.js";function re({estadisticas:s,tokens_mas_usados:o,actividad_diaria:N}){const u=Object.entries(N).map(([a,c])=>({fecha:a,requests:c,fechaFormateada:new Date(a).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit"})}));return e.jsxs(v,{children:[e.jsx(g,{title:"Dashboard - API Tokens - ArchiveyCloud"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(l,{href:"/admin/api-tokens",children:e.jsxs(i,{variant:"outline",size:"sm",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Volver a Tokens"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard API Tokens"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Análisis y estadísticas de uso de tokens API"})]})]}),e.jsx(l,{href:"/admin/api-tokens/create",children:e.jsxs(i,{children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Crear Token"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(t,{children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(m,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tokens"}),e.jsx("p",{className:"text-2xl font-bold",children:s.tokens.total})]})]})})}),e.jsx(t,{children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tokens Activos"}),e.jsx("p",{className:"text-2xl font-bold",children:s.tokens.activos}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.tokens.total>0?Math.round(s.tokens.activos/s.tokens.total*100):0,"% del total"]})]})]})})}),e.jsx(t,{children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(p,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Requests Hoy"}),e.jsx("p",{className:"text-2xl font-bold",children:s.uso_reciente.requests_hoy}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.uso_reciente.requests_semana," esta semana"]})]})]})})}),e.jsx(t,{children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{className:"h-8 w-8 text-orange-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Usuarios Activos"}),e.jsx("p",{className:"text-2xl font-bold",children:s.uso_reciente.usuarios_activos}),e.jsx("p",{className:"text-xs text-gray-500",children:"Última semana"})]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(t,{children:e.jsxs(r,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tokens Expirados"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:s.tokens.expirados})]}),e.jsx(f,{className:"h-8 w-8 text-red-600"})]}),s.tokens.expirados>0&&e.jsx("div",{className:"mt-4",children:e.jsx(y,{className:"bg-red-100 text-red-800",children:"Requieren atención"})})]})}),e.jsx(t,{children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tokens Inactivos"}),e.jsx("p",{className:"text-3xl font-bold text-gray-600",children:s.tokens.inactivos})]}),e.jsx(A,{className:"h-8 w-8 text-gray-600"})]})})}),e.jsx(t,{children:e.jsxs(r,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tasa de Uso"}),e.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[s.tokens.activos>0?Math.round(s.uso_reciente.usuarios_activos/s.tokens.activos*100):0,"%"]})]}),e.jsx(j,{className:"h-8 w-8 text-blue-600"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Tokens con actividad reciente"})]})})]}),e.jsxs(t,{children:[e.jsxs(n,{children:[e.jsxs(x,{className:"flex items-center",children:[e.jsx(p,{className:"h-5 w-5 mr-2"}),"Actividad de API (Últimos 30 días)"]}),e.jsx(d,{children:"Número de requests realizados por día"})]}),e.jsx(r,{children:e.jsx("div",{className:"h-80",children:e.jsx(T,{width:"100%",height:"100%",children:e.jsxs(q,{data:u,children:[e.jsx(P,{strokeDasharray:"3 3"}),e.jsx(R,{dataKey:"fechaFormateada",tick:{fontSize:12}}),e.jsx(D,{tick:{fontSize:12}}),e.jsx(C,{labelFormatter:a=>`Fecha: ${a}`,formatter:(a,c)=>[a,"Requests"]}),e.jsx(_,{type:"monotone",dataKey:"requests",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.2})]})})})})]}),e.jsxs(t,{children:[e.jsxs(n,{children:[e.jsxs(x,{className:"flex items-center",children:[e.jsx(j,{className:"h-5 w-5 mr-2"}),"Tokens Más Usados (Último mes)"]}),e.jsx(d,{children:"Ranking de tokens por número de requests"})]}),e.jsx(r,{children:e.jsx("div",{className:"space-y-4",children:o.length>0?o.map((a,c)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-600 rounded-full font-bold",children:c+1}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:a.nombre}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Por: ",a.usuario.name]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:a.logs_count}),e.jsx("p",{className:"text-xs text-gray-500",children:"requests"})]})]},a.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(m,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay actividad"}),e.jsx("p",{className:"text-gray-600",children:"No se han registrado requests en el último mes"})]})})})]}),e.jsxs(t,{children:[e.jsxs(n,{children:[e.jsx(x,{children:"Acciones Rápidas"}),e.jsx(d,{children:"Gestión rápida de tokens API"})]}),e.jsx(r,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(l,{href:"/admin/api-tokens/create",children:e.jsxs(i,{className:"w-full h-20 flex flex-col items-center justify-center space-y-2",children:[e.jsx(h,{className:"h-6 w-6"}),e.jsx("span",{children:"Crear Token"})]})}),e.jsx(l,{href:"/admin/api-tokens?estado=expirado",children:e.jsxs(i,{variant:"outline",className:"w-full h-20 flex flex-col items-center justify-center space-y-2",children:[e.jsx(f,{className:"h-6 w-6"}),e.jsx("span",{children:"Ver Expirados"})]})}),e.jsx(l,{href:"/admin/api-tokens",children:e.jsxs(i,{variant:"outline",className:"w-full h-20 flex flex-col items-center justify-center space-y-2",children:[e.jsx(m,{className:"h-6 w-6"}),e.jsx("span",{children:"Gestionar Todos"})]})})]})})]})]})]})}export{re as default};
