import{r as u,j as e,H as B,L as g,b as l}from"./app-xP5nJVeF.js";import{A as $}from"./app-layout-52tIb-IE.js";import{B as o}from"./button-B_iUXIQd.js";import{I as M}from"./input-DQqwP0kM.js";import{S as N,a as b,b as f,c as v,d as r}from"./select-CeZZq-kY.js";import{B as c}from"./bell-CE8KmB4j.js";import{C as m}from"./circle-check-big-C9Zhhz8Y.js";import{S,o as R,i as p,p as H}from"./app-sidebar-layout-Bv9w89yC.js";import{T as _}from"./triangle-alert-3Hg381hi.js";import{S as y}from"./search-eio2uEn4.js";import{E as q}from"./eye-Beu8yJ4l.js";import{T as z}from"./trash-2-CcydDLye.js";import{C as K}from"./chevron-left-B3XRZeUL.js";import{L as O}from"./loader-circle--copFJNU.js";import{U}from"./user-OU0Y1c1r.js";import{C as w}from"./folder-Ck8Tq3sH.js";import{C}from"./calendar-Bn3iJna_.js";/* empty css            */import"./index-DbDMva29.js";import"./Combination-BMQq9fx8.js";import"./index-Blg4NNxt.js";import"./index-B00g0JPb.js";import"./check-C5qgcy3h.js";import"./index-D2eHBSbe.js";import"./x-CBQbsaML.js";import"./app-logo-icon-8EdVYcX9.js";import"./label-CXywCScm.js";import"./mail-C5oL3AE1.js";import"./users-DpyCPIO9.js";import"./BrandingProvider-BV5yFGOU.js";const V={baja:"bg-blue-100 text-blue-800 border-blue-200",media:"bg-yellow-100 text-yellow-800 border-yellow-200",alta:"bg-orange-100 text-orange-800 border-orange-200",critica:"bg-red-100 text-red-800 border-red-200"},X={pendiente:"bg-gray-100 text-gray-800 border-gray-200",leida:"bg-green-100 text-green-800 border-green-200",archivada:"bg-gray-100 text-gray-600 border-gray-200"},D={"calendar-x":C,"calendar-warning":C,"clock-x":w,"clock-warning":w,archive:p,"check-circle":m,"file-plus":p,"user-plus":U,settings:S,"shield-alert":_,bell:c};function Ce({notificaciones:a,estadisticas:n,filtros:x}){const[t,h]=u.useState({estado:x.estado||"todos",tipo:x.tipo||"todos",prioridad:x.prioridad||"todos"}),A=()=>{const s={estado:t.estado==="todos"?"":t.estado,tipo:t.tipo==="todos"?"":t.tipo,prioridad:t.prioridad==="todos"?"":t.prioridad};l.get("/admin/notificaciones",s,{preserveState:!0,preserveScroll:!0})},T=()=>{h({estado:"todos",tipo:"todos",prioridad:"todos"}),l.visit("/admin/notificaciones")},[k,d]=u.useState(!1),L=async s=>{d(!0);try{await fetch(`/admin/notificaciones/${s}/marcar-leida`,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}}),l.reload()}catch(i){console.error("Error al marcar como leída:",i)}finally{d(!1)}},E=async()=>{d(!0);try{await fetch("/admin/notificaciones/marcar-todas-leidas",{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}}),l.reload()}catch(s){console.error("Error al marcar todas como leídas:",s)}finally{d(!1)}},F=async s=>{d(!0);try{await fetch(`/admin/notificaciones/${s}/archivar`,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}}),l.reload()}catch(i){console.error("Error al archivar:",i)}finally{d(!1)}},P=s=>{confirm("¿Estás seguro de eliminar esta notificación?")&&l.delete(`/admin/notificaciones/${s}`)},j=s=>new Date(s).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),I=s=>D[s]||c;return e.jsxs($,{breadcrumbs:[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Notificaciones",href:"/admin/notificaciones"}],children:[e.jsx(B,{title:"Notificaciones"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{className:"h-6 w-6 text-[#2a3d83]"}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Centro de Notificaciones"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[n.pendientes>0&&e.jsxs(o,{onClick:E,variant:"outline",children:[e.jsx(m,{className:"h-4 w-4 mr-2 text-[#2a3d83]"}),"Marcar todas como leídas"]}),e.jsx(o,{variant:"outline",asChild:!0,children:e.jsxs(g,{href:"/admin/notificaciones/admin",children:[e.jsx(S,{className:"h-4 w-4 mr-2 text-[#2a3d83]"}),"Panel Admin"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:n.total})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(c,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pendientes"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:n.pendientes})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(R,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Leídas"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:n.leidas})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(m,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Críticas"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:n.criticas})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(_,{className:"h-6 w-6 text-[#2a3d83]"})})]})})]}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4 w-full sm:w-auto",children:e.jsxs("div",{className:"relative flex-1 sm:w-80",children:[e.jsx(y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(M,{type:"text",placeholder:"Buscar notificaciones...",className:"pl-10"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(N,{value:t.estado,onValueChange:s=>h({...t,estado:s}),children:[e.jsx(b,{className:"w-[180px]",children:e.jsx(f,{placeholder:"Todos los estados"})}),e.jsxs(v,{children:[e.jsx(r,{value:"todos",children:"Todos los estados"}),e.jsx(r,{value:"pendiente",children:"Pendientes"}),e.jsx(r,{value:"leida",children:"Leídas"}),e.jsx(r,{value:"archivada",children:"Archivadas"})]})]}),e.jsxs(N,{value:t.prioridad,onValueChange:s=>h({...t,prioridad:s}),children:[e.jsx(b,{className:"w-[180px]",children:e.jsx(f,{placeholder:"Todas las prioridades"})}),e.jsxs(v,{children:[e.jsx(r,{value:"todos",children:"Todas las prioridades"}),e.jsx(r,{value:"baja",children:"Baja"}),e.jsx(r,{value:"media",children:"Media"}),e.jsx(r,{value:"alta",children:"Alta"}),e.jsx(r,{value:"critica",children:"Crítica"})]})]}),e.jsxs(o,{onClick:A,className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Aplicar Filtros"]}),e.jsx(o,{variant:"outline",onClick:T,children:"Limpiar"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg border overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Notificación"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Prioridad"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Estado"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Fecha"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:a.data.length>0?a.data.map(s=>{const i=I(s.icono);return e.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${s.estado==="pendiente"?"bg-blue-50":""}`,children:[e.jsx("td",{className:"py-4 px-6",children:e.jsx("div",{className:"p-2 rounded-lg bg-blue-100",children:e.jsx(i,{className:"h-4 w-4 text-[#2a3d83]"})})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.titulo}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s.mensaje}),s.creado_por&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Por: ",s.creado_por.name]})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${V[s.prioridad]}`,children:s.prioridad.charAt(0).toUpperCase()+s.prioridad.slice(1)})}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${X[s.estado]}`,children:s.estado==="pendiente"?"Pendiente":s.estado==="leida"?"Leída":"Archivada"})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"text-sm text-gray-600",children:[j(s.created_at),s.leida_en&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Leída: ",j(s.leida_en)]})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.accion_url&&e.jsx(g,{href:s.accion_url,children:e.jsx("button",{className:"p-2 rounded-md text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50 transition-colors",children:e.jsx(q,{className:"h-4 w-4"})})}),s.estado==="pendiente"&&e.jsx("button",{onClick:()=>L(s.id),className:"p-2 rounded-md text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50 transition-colors",title:"Marcar como leída",children:e.jsx(m,{className:"h-4 w-4"})}),s.estado!=="archivada"&&e.jsx("button",{onClick:()=>F(s.id),className:"p-2 rounded-md text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50 transition-colors",title:"Archivar",children:e.jsx(p,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>P(s.id),className:"p-2 rounded-md text-red-500 hover:text-red-700 hover:bg-red-50 transition-colors",title:"Eliminar",children:e.jsx(z,{className:"h-4 w-4"})})]})})]},s.id)}):e.jsx("tr",{children:e.jsxs("td",{colSpan:6,className:"py-8 px-6 text-center text-gray-500",children:[e.jsx(c,{className:"h-12 w-12 text-[#2a3d83] mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay notificaciones"}),e.jsx("p",{className:"text-gray-500",children:"No tienes notificaciones que coincidan con los criterios seleccionados."})]})})})]})}),a.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t px-6 pb-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Mostrando ",(a.current_page-1)*a.per_page+1," a"," ",Math.min(a.current_page*a.per_page,a.total)," de"," ",a.total," notificaciones"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>l.visit(`/admin/notificaciones?page=${a.current_page-1}`),disabled:a.current_page===1,children:[e.jsx(K,{className:"h-4 w-4"}),"Anterior"]}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Página ",a.current_page," de ",a.last_page]}),e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>l.visit(`/admin/notificaciones?page=${a.current_page+1}`),disabled:a.current_page===a.last_page,children:["Siguiente",e.jsx(H,{className:"h-4 w-4"})]})]})]})]}),k&&e.jsx("div",{className:"fixed inset-0 bg-black/20 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg flex items-center gap-3",children:[e.jsx(O,{className:"h-5 w-5 animate-spin text-[#2a3d83]"}),e.jsx("span",{children:"Procesando..."})]})})]})]})}export{Ce as default};
