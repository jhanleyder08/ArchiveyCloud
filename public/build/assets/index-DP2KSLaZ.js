import{r as m,t as o,b as y,j as e,H as de,L as U}from"./app-tMaUuF3G.js";import{A as xe}from"./app-layout-Do2Eb3Sk.js";import{B as h}from"./button-b2NvRhsY.js";import{I as u}from"./input-BUbi3POq.js";import{L as i}from"./label-Bqu3HQD6.js";import{D as $,g as me,a as L,b as M,c as O,d as P,T as V,e as z,j as E,k as T,l as F,m as A}from"./app-sidebar-layout-DrvTFVRU.js";import{S as _,a as w,b as S,c as C,d as p}from"./select-CdhdgJ0w.js";import{F as G}from"./Combination-CgNv0oAU.js";import{P as he}from"./plus-bKOZofE8.js";import{T as W,a as Y}from"./toggle-right-CprvrHc2.js";import{S as pe}from"./search-a-c68EbR.js";import{D as ge}from"./users-0BijOv_M.js";import{E as ue}from"./eye-CUHphNhr.js";import{S as je}from"./square-pen-hyh2d0kN.js";import{C as ve}from"./copy-DCEDc1l4.js";import{T as be}from"./trash-2-C2WpkApr.js";/* empty css            */import"./index-BqccPZiJ.js";import"./index-gcMQB5yO.js";import"./index-DReOSayN.js";import"./x-B3QVzJhq.js";import"./app-logo-icon-DkUm7hxR.js";import"./user-BK5OEaM4.js";import"./mail-CwCHIGE1.js";import"./folder-CyeXS8Xg.js";import"./triangle-alert-JjU49oaO.js";import"./BrandingProvider-DUeywemA.js";import"./index-CWm8oeKh.js";import"./check-CjMGlCJz.js";function Xe({data:g,stats:R,trds:B,areas:Z,flash:b}){const[N,ee]=m.useState(""),[j,se]=m.useState("all"),[v,re]=m.useState("all"),[k,ae]=m.useState("all"),[D,q]=m.useState(null),[ie,H]=m.useState(!1),[l,I]=m.useState(null),[n,Q]=m.useState(null);m.useEffect(()=>{b?.success&&o.success(b.success),b?.message&&o.success(b.message),b?.error&&o.error(b.error)},[b]);const[r,d]=m.useState({codigo:"",nombre:"",descripcion:"",trd_id:"",dependencia:"",orden:0,soporte_fisico:!1,soporte_electronico:!0,retencion_gestion:0,retencion_central:0,disposicion_ct:!1,disposicion_e:!1,disposicion_d:!1,disposicion_s:!1,procedimiento:"",activa:!0}),[t,x]=m.useState({codigo:"",nombre:"",descripcion:"",trd_id:"",dependencia:"",soporte_fisico:!1,soporte_electronico:!0,retencion_gestion:0,retencion_central:0,disposicion_ct:!1,disposicion_e:!1,disposicion_d:!1,disposicion_s:!1,procedimiento:"",activa:!0});m.useEffect(()=>{l&&x({codigo:l.codigo||"",nombre:l.nombre||"",descripcion:l.descripcion||"",trd_id:l.trd_id?.toString()||"",dependencia:l.dependencia||"",soporte_fisico:l.soporte_fisico??!1,soporte_electronico:l.soporte_electronico??!0,retencion_gestion:l.retencion_gestion??0,retencion_central:l.retencion_central??0,disposicion_ct:l.disposicion_ct??!1,disposicion_e:l.disposicion_e??!1,disposicion_d:l.disposicion_d??!1,disposicion_s:l.disposicion_s??!1,procedimiento:l.procedimiento||"",activa:l.activa??!0})},[l]);const te=[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Series Documentales",href:"/admin/series"}];m.useEffect(()=>{const s=setTimeout(()=>{if(N!==""||j!==""||v!==""||k!==""){const a=new URLSearchParams;N&&a.append("search",N),j&&a.append("trd",j),v&&a.append("estado",v),k&&a.append("area",k),y.visit(`/admin/series?${a.toString()}`,{preserveState:!0,preserveScroll:!0,replace:!0})}},500);return()=>clearTimeout(s)},[N,j,v,k]);const ce=s=>{y.delete(`/admin/series/${s.id}`,{preserveScroll:!0,onSuccess:()=>{q(null),o.success("Serie documental eliminada exitosamente")},onError:a=>{const c=typeof a=="object"?Object.values(a)[0]:"Error al eliminar la serie";o.error(c)}})},le=s=>{y.post(`/admin/series/${s.id}/duplicate`,{},{preserveScroll:!0,onSuccess:()=>{o.success("Serie documental duplicada exitosamente")},onError:a=>{const c=typeof a=="object"?Object.values(a)[0]:"Error al duplicar la serie";o.error(c)}})},ne=s=>{y.patch(`/admin/series/${s.id}/toggle-active`,{},{preserveScroll:!0,onSuccess:()=>{const a=s.activa?"desactivada":"activada";o.success(`Serie documental ${a} exitosamente`)},onError:a=>{const c=typeof a=="object"?Object.values(a)[0]:"Error al cambiar el estado";o.error(c)}})},J=s=>new Date(s).toLocaleDateString("es-CO",{year:"numeric",month:"short",day:"numeric"}),X=s=>s?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Activa"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Inactiva"}),K=s=>{const a=[];return s.disposicion_ct&&a.push({key:"CT",label:"Conservación Total",color:"bg-blue-100 text-blue-800"}),s.disposicion_e&&a.push({key:"E",label:"Eliminación",color:"bg-red-100 text-red-800"}),s.disposicion_d&&a.push({key:"D",label:"Digitalización",color:"bg-orange-100 text-orange-800"}),s.disposicion_s&&a.push({key:"S",label:"Selección",color:"bg-yellow-100 text-yellow-800"}),a.length===0?e.jsx("span",{className:"text-sm text-gray-400",children:"No configurada"}):e.jsx("div",{className:"flex flex-wrap gap-1",children:a.map(c=>e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${c.color}`,title:c.label,children:c.key},c.key))})};return e.jsxs(xe,{breadcrumbs:te,children:[e.jsx(de,{title:"Series Documentales"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(G,{className:"h-6 w-6 text-[#2a3d83]"}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Gestión de Series Documentales"})]}),e.jsxs($,{open:ie,onOpenChange:H,children:[e.jsx(me,{asChild:!0,children:e.jsxs(h,{className:"flex items-center gap-2 px-4 py-2 bg-[#2a3d83] text-white rounded-lg hover:bg-[#1e2b5f] transition-colors",children:[e.jsx(he,{className:"h-4 w-4"}),"Nueva Serie Documental"]})}),e.jsxs(L,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-scroll [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:[e.jsxs(M,{children:[e.jsx(O,{className:"text-xl font-semibold text-gray-900",children:"Crear Nueva Serie Documental"}),e.jsx(P,{className:"text-sm text-gray-600",children:"Complete los siguientes datos para crear una nueva Serie Documental."})]}),e.jsxs("form",{onSubmit:s=>{if(s.preventDefault(),!r.trd_id){o.error("Debe seleccionar una TRD asociada");return}if(!r.nombre.trim()){o.error("El nombre es requerido");return}if(!r.descripcion.trim()){o.error("La descripción es requerida");return}const a={codigo:r.codigo.trim()||null,nombre:r.nombre.trim(),descripcion:r.descripcion.trim(),trd_id:r.trd_id?parseInt(r.trd_id):null,dependencia:r.dependencia?.trim()||null,orden:r.orden||null,observaciones:r.observaciones?.trim()||null,activa:r.activa!==void 0?r.activa:!0,retencion_archivo_gestion:r.tiempo_archivo_gestion,retencion_archivo_central:r.tiempo_archivo_central,disposicion_final:r.disposicion_final};y.post("/admin/series",a,{preserveScroll:!0,onSuccess:()=>{H(!1),d({codigo:"",nombre:"",descripcion:"",trd_id:"",dependencia:"",orden:0,tiempo_archivo_gestion:0,tiempo_archivo_central:0,disposicion_final:"conservacion_total",area_responsable:"",observaciones:"",activa:!0})},onError:c=>{console.error("Error al crear serie:",c),c?Object.keys(c).forEach(f=>{const oe=Array.isArray(c[f])?c[f][0]:c[f];o.error(`Error en ${f}: ${oe}`)}):o.error("Error al crear la serie documental")}})},className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"create-codigo",children:"Código"}),e.jsx(u,{id:"create-codigo",type:"text",value:r.codigo,onChange:s=>d({...r,codigo:s.target.value}),placeholder:"Ej: SER-001 (opcional, se genera automático)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"create-trd",children:"TRD Asociada *"}),e.jsxs(_,{value:r.trd_id,onValueChange:s=>d({...r,trd_id:s}),children:[e.jsx(w,{children:e.jsx(S,{placeholder:"Seleccionar TRD"})}),e.jsx(C,{children:B.map(s=>e.jsxs(p,{value:s.id.toString(),children:[s.codigo," - ",s.nombre]},s.id))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"create-nombre",children:"Nombre *"}),e.jsx(u,{id:"create-nombre",type:"text",value:r.nombre,onChange:s=>d({...r,nombre:s.target.value}),placeholder:"Nombre de la serie documental",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"create-descripcion",children:"Descripción *"}),e.jsx(V,{id:"create-descripcion",value:r.descripcion,onChange:s=>d({...r,descripcion:s.target.value}),placeholder:"Descripción de la serie documental",rows:3,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"create-tiempo-gestion",children:"Retención Archivo Gestión (años) *"}),e.jsx(u,{id:"create-tiempo-gestion",type:"number",min:"0",value:r.retencion_gestion,onChange:s=>d({...r,retencion_gestion:parseInt(s.target.value)||0}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"create-tiempo-central",children:"Retención Archivo Central (años) *"}),e.jsx(u,{id:"create-tiempo-central",type:"number",min:"0",value:r.retencion_central,onChange:s=>d({...r,retencion_central:parseInt(s.target.value)||0}),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Soporte Documental"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.soporte_fisico,onChange:s=>d({...r,soporte_fisico:s.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm",children:"Físico (F)"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.soporte_electronico,onChange:s=>d({...r,soporte_electronico:s.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm",children:"Electrónico (E)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Disposición Final *"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 border rounded hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:r.disposicion_ct,onChange:s=>d({...r,disposicion_ct:s.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm",children:"CT - Conservación Total"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 border rounded hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:r.disposicion_e,onChange:s=>d({...r,disposicion_e:s.target.checked}),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm",children:"E - Eliminación"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 border rounded hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:r.disposicion_d,onChange:s=>d({...r,disposicion_d:s.target.checked}),className:"rounded border-gray-300 text-orange-600 focus:ring-orange-500"}),e.jsx("span",{className:"text-sm",children:"D - Digitalización"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 border rounded hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:r.disposicion_s,onChange:s=>d({...r,disposicion_s:s.target.checked}),className:"rounded border-gray-300 text-yellow-600 focus:ring-yellow-500"}),e.jsx("span",{className:"text-sm",children:"S - Selección"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"create-procedimiento",children:"Procedimiento"}),e.jsx(V,{id:"create-procedimiento",value:r.procedimiento,onChange:s=>d({...r,procedimiento:s.target.value}),placeholder:"Procedimiento para la disposición final",rows:2})]}),e.jsxs(z,{children:[e.jsx(h,{type:"button",variant:"outline",onClick:()=>H(!1),children:"Cancelar"}),e.jsx(h,{type:"submit",className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",children:"Crear Serie Documental"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Series"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:R.total})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(G,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Activas"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:R.activas})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(W,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Inactivas"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:R.inactivas})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(Y,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Con Subseries"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:R.con_subseries})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(G,{className:"h-6 w-6 text-[#2a3d83]"})})]})})]}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4 w-full sm:w-auto",children:e.jsxs("div",{className:"relative flex-1 sm:w-80",children:[e.jsx(pe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(u,{type:"text",value:N,onChange:s=>ee(s.target.value),placeholder:"Buscar series...",className:"pl-10"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(_,{value:j||"all",onValueChange:s=>se(s==="all"?"":s),children:[e.jsx(w,{className:"w-[180px]",children:e.jsx(S,{placeholder:"Todas las TRDs"})}),e.jsxs(C,{children:[e.jsx(p,{value:"all",children:"Todas las TRDs"}),B.map(s=>e.jsxs(p,{value:s.id.toString(),children:[s.codigo," - ",s.nombre]},s.id))]})]}),e.jsxs(_,{value:v||"all",onValueChange:s=>re(s==="all"?"":s),children:[e.jsx(w,{className:"w-[180px]",children:e.jsx(S,{placeholder:"Todos los estados"})}),e.jsxs(C,{children:[e.jsx(p,{value:"all",children:"Todos los estados"}),e.jsx(p,{value:"activa",children:"Activa"}),e.jsx(p,{value:"inactiva",children:"Inactiva"})]})]}),e.jsxs(_,{value:k,onValueChange:ae,children:[e.jsx(w,{className:"w-full sm:w-48",children:e.jsx(S,{placeholder:"Área Responsable"})}),e.jsxs(C,{children:[e.jsx(p,{value:"all",children:"Todas las áreas"}),Z.map(s=>e.jsx(p,{value:s,children:s},s))]})]}),e.jsxs(_,{value:"",onValueChange:s=>{if(s){const a=new URLSearchParams;N&&a.append("search",N),j&&j!=="all"&&a.append("tablaRetencion",j),v&&v!=="all"&&a.append("estado",v),a.append("formato",s),window.location.href=`/admin/series/export?${a.toString()}`}},children:[e.jsx(w,{className:"w-full sm:w-32",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsx(S,{placeholder:"Exportar"})]})}),e.jsxs(C,{children:[e.jsx(p,{value:"excel",children:"Excel (JSON)"}),e.jsx(p,{value:"csv",children:"CSV"}),e.jsx(p,{value:"xml",children:"XML"})]})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg border overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Serie Documental"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"TRD Asociada"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Retención"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Disposición Final"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subseries"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha Creación"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-8 text-center text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(G,{className:"h-8 w-8 text-gray-300"}),e.jsx("p",{children:"No se encontraron series documentales"})]})})}):g.data.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.codigo}),e.jsx("div",{className:"text-sm text-gray-600 line-clamp-2",children:s.nombre}),s.descripcion&&e.jsx("div",{className:"text-xs text-gray-500 mt-1 line-clamp-1",children:s.descripcion})]})}),e.jsx("td",{className:"px-6 py-4",children:s.tabla_retencion?e.jsxs(U,{href:`/admin/trd/${s.trd_id}`,className:"block hover:bg-blue-50 rounded p-1 -m-1 transition-colors",children:[e.jsx("div",{className:"text-sm text-[#2a3d83] font-medium hover:underline",children:s.tabla_retencion.codigo}),e.jsx("div",{className:"text-xs text-gray-500 line-clamp-1",children:s.tabla_retencion.nombre})]}):e.jsx("span",{className:"text-sm text-gray-400",children:"Sin TRD asociada"})}),e.jsx("td",{className:"px-6 py-4",children:s.retencion_gestion!==null&&s.retencion_gestion!==void 0||s.retencion_central!==null&&s.retencion_central!==void 0?e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-gray-900 font-medium",children:["AG: ",s.retencion_gestion??0," años"]}),e.jsxs("div",{className:"text-gray-600 text-xs",children:["AC: ",s.retencion_central??0," años"]})]}):e.jsx("span",{className:"text-sm text-gray-400",children:"No configurada"})}),e.jsx("td",{className:"px-6 py-4",children:K(s)}),e.jsx("td",{className:"px-6 py-4",children:X(s.activa)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[s.subseries_count||0," subseries"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-900",children:J(s.created_at)})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(E,{children:e.jsxs(T,{children:[e.jsx(F,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>Q(s),className:"text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50",children:e.jsx(ue,{className:"h-4 w-4"})})}),e.jsx(A,{children:"Ver detalles"})]})}),e.jsx(E,{children:e.jsxs(T,{children:[e.jsx(F,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>I(s),className:"text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50",children:e.jsx(je,{className:"h-4 w-4"})})}),e.jsx(A,{children:"Editar"})]})}),e.jsx(E,{children:e.jsxs(T,{children:[e.jsx(F,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>le(s),className:"text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50",children:e.jsx(ve,{className:"h-4 w-4"})})}),e.jsx(A,{children:"Duplicar"})]})}),e.jsx(E,{children:e.jsxs(T,{children:[e.jsx(F,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>ne(s),className:`${s.activa?"text-orange-600 hover:text-orange-800 hover:bg-orange-50":"text-green-600 hover:text-green-800 hover:bg-green-50"}`,children:s.activa?e.jsx(Y,{className:"h-4 w-4"}):e.jsx(W,{className:"h-4 w-4"})})}),e.jsx(A,{children:s.activa?"Desactivar":"Activar"})]})}),e.jsx(E,{children:e.jsxs(T,{children:[e.jsx(F,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>q(s),className:"text-red-600 hover:text-red-700",children:e.jsx(be,{className:"h-4 w-4"})})}),e.jsx(A,{children:"Eliminar"})]})})]})})]},s.id))})]})}),g.data.length>0&&e.jsxs("div",{className:"flex items-center justify-between bg-white border rounded-lg px-6 py-3",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando ",e.jsx("span",{className:"font-medium",children:g.from||0})," a"," ",e.jsx("span",{className:"font-medium",children:g.to||0})," de"," ",e.jsx("span",{className:"font-medium",children:g.total||0})," series"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[g.prev_page_url&&e.jsx(U,{href:g.prev_page_url,preserveState:!0,className:"px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Anterior"}),g.next_page_url&&e.jsx(U,{href:g.next_page_url,preserveState:!0,className:"px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Siguiente"})]})]})]}),l&&e.jsx($,{open:!!l,onOpenChange:()=>I(null),children:e.jsxs(L,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-scroll [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:[e.jsxs(M,{children:[e.jsx(O,{className:"text-xl font-semibold text-gray-900",children:"Editar Serie Documental"}),e.jsx(P,{className:"text-sm text-gray-600",children:"Modifique los datos de la serie documental según sea necesario."})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),y.patch(`/admin/series/${l.id}`,t,{preserveScroll:!0,onSuccess:()=>{I(null),o.success("Serie documental actualizada exitosamente")},onError:a=>{Object.keys(a).forEach(c=>{const f=Array.isArray(a[c])?a[c][0]:a[c];o.error(`Error en ${c}: ${f}`)})}})},className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"edit-codigo",children:"Código"}),e.jsx(u,{id:"edit-codigo",type:"text",value:t.codigo,onChange:s=>x({...t,codigo:s.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"edit-trd",children:"TRD Asociada *"}),e.jsxs(_,{value:t.trd_id,onValueChange:s=>x({...t,trd_id:s}),children:[e.jsx(w,{children:e.jsx(S,{placeholder:"Seleccionar TRD"})}),e.jsx(C,{children:B.map(s=>e.jsxs(p,{value:s.id.toString(),children:[s.codigo," - ",s.nombre]},s.id))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"edit-nombre",children:"Nombre *"}),e.jsx(u,{id:"edit-nombre",type:"text",value:t.nombre,onChange:s=>x({...t,nombre:s.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"edit-descripcion",children:"Descripción *"}),e.jsx(V,{id:"edit-descripcion",value:t.descripcion,onChange:s=>x({...t,descripcion:s.target.value}),rows:3,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"edit-tiempo-gestion",children:"Retención Archivo Gestión (años) *"}),e.jsx(u,{id:"edit-tiempo-gestion",type:"number",min:"0",value:t.retencion_gestion,onChange:s=>x({...t,retencion_gestion:parseInt(s.target.value)||0}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"edit-tiempo-central",children:"Retención Archivo Central (años) *"}),e.jsx(u,{id:"edit-tiempo-central",type:"number",min:"0",value:t.retencion_central,onChange:s=>x({...t,retencion_central:parseInt(s.target.value)||0}),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Soporte Documental"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.soporte_fisico,onChange:s=>x({...t,soporte_fisico:s.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm",children:"Físico (F)"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.soporte_electronico,onChange:s=>x({...t,soporte_electronico:s.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm",children:"Electrónico (E)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Disposición Final *"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 border rounded hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:t.disposicion_ct,onChange:s=>x({...t,disposicion_ct:s.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm",children:"CT - Conservación Total"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 border rounded hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:t.disposicion_e,onChange:s=>x({...t,disposicion_e:s.target.checked}),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm",children:"E - Eliminación"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 border rounded hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:t.disposicion_d,onChange:s=>x({...t,disposicion_d:s.target.checked}),className:"rounded border-gray-300 text-orange-600 focus:ring-orange-500"}),e.jsx("span",{className:"text-sm",children:"D - Digitalización"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 border rounded hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:t.disposicion_s,onChange:s=>x({...t,disposicion_s:s.target.checked}),className:"rounded border-gray-300 text-yellow-600 focus:ring-yellow-500"}),e.jsx("span",{className:"text-sm",children:"S - Selección"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"edit-procedimiento",children:"Procedimiento"}),e.jsx(V,{id:"edit-procedimiento",value:t.procedimiento,onChange:s=>x({...t,procedimiento:s.target.value}),placeholder:"Procedimiento para la disposición final",rows:2})]}),e.jsxs(z,{children:[e.jsx(h,{type:"button",variant:"outline",onClick:()=>I(null),children:"Cancelar"}),e.jsx(h,{type:"submit",className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",children:"Actualizar Serie"})]})]})]})}),n&&e.jsx($,{open:!!n,onOpenChange:()=>Q(null),children:e.jsxs(L,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-scroll [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:[e.jsxs(M,{children:[e.jsx(O,{className:"text-xl font-semibold text-gray-900",children:"Detalles de la Serie Documental"}),e.jsx(P,{className:"text-sm text-gray-600",children:"Información completa de la serie documental."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-500",children:"Código"}),e.jsx("p",{className:"text-sm text-gray-900",children:n.codigo})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-500",children:"Estado"}),e.jsx("div",{className:"mt-1",children:X(n.activa)})]})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-500",children:"Nombre"}),e.jsx("p",{className:"text-sm text-gray-900",children:n.nombre})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-500",children:"Descripción"}),e.jsx("p",{className:"text-sm text-gray-900",children:n.descripcion})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-500",children:"TRD Asociada"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[n.tabla_retencion?.codigo," - ",n.tabla_retencion?.nombre]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-500",children:"Retención Archivo Gestión"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[n.retencion_gestion??"N/A"," años"]})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-500",children:"Retención Archivo Central"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[n.retencion_central??"N/A"," años"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-500",children:"Soporte"}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[n.soporte_fisico&&e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-800 rounded text-xs",children:"Físico"}),n.soporte_electronico&&e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-800 rounded text-xs",children:"Electrónico"})]})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-500",children:"Disposición Final"}),e.jsx("div",{className:"mt-1",children:K(n)})]})]}),n.procedimiento&&e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-500",children:"Procedimiento"}),e.jsx("p",{className:"text-sm text-gray-900",children:n.procedimiento})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-500",children:"Subseries"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[n.subseries_count||0," subseries"]})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-500",children:"Fecha de Creación"}),e.jsx("p",{className:"text-sm text-gray-900",children:J(n.created_at)})]})]})]}),e.jsx(z,{children:e.jsx(h,{onClick:()=>Q(null),children:"Cerrar"})})]})}),D&&e.jsx($,{open:!!D,onOpenChange:()=>q(null),children:e.jsxs(L,{className:"sm:max-w-[425px]",children:[e.jsxs(M,{children:[e.jsx(O,{className:"text-xl font-semibold text-gray-900",children:"Eliminar Serie Documental"}),e.jsx(P,{className:"text-sm text-gray-600",children:"Esta acción no se puede deshacer. La serie será eliminada permanentemente del sistema."})]}),e.jsxs("div",{className:"py-4",children:[e.jsxs("p",{className:"text-gray-700",children:["¿Estás seguro de que deseas eliminar la serie ",e.jsx("strong",{children:D.nombre}),"?"]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["Código: ",e.jsx("strong",{children:D.codigo})]})]}),e.jsxs(z,{children:[e.jsx(h,{variant:"outline",onClick:()=>q(null),children:"Cancelar"}),e.jsx(h,{variant:"destructive",onClick:()=>ce(D),children:"Eliminar Serie"})]})]})})]})]})}export{Xe as default};
