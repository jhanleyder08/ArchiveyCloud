import{r as j,j as e,H as L,L as b,a as w}from"./app-5lvxmL5N.js";import{A}from"./app-layout-B1y3wsna.js";import{B as u}from"./app-logo-icon-DTg4XN8t.js";import{L as t,I as p}from"./label-BhumWj7F.js";import{g,T as f}from"./app-sidebar-layout-CKEzWS_J.js";import{S as N,a as y,b as C,c as D,d}from"./select-BPzaPpTB.js";import{C as m,a as T,b as S,d as _,c as x}from"./card-LPn6WdOe.js";import{A as I}from"./arrow-left-DCwFbykQ.js";import{S as J}from"./save-BZ9Zm8lX.js";/* empty css            */import"./index-DrDC_1PC.js";import"./index-Cgyyrey8.js";import"./index-DkIki46t.js";import"./check-JndX2Vwf.js";const O=[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Tablas de Retención Documental",href:"/admin/trd"},{title:"Crear TRD",href:"/admin/trd/create"}];function W({estados:R}){const[r,F]=j.useState({codigo:"",nombre:"",descripcion:"",justificacion:"",version:"1.0",estado:"borrador",formato_archivo:"XML",metadatos_asociados:""}),[a,l]=j.useState({}),[h,n]=j.useState(!1),E=s=>{s.preventDefault(),n(!0),l({});let c=null;if(r.metadatos_asociados.trim())try{c=JSON.parse(r.metadatos_asociados)}catch{l({metadatos_asociados:"Formato JSON inválido"}),n(!1);return}const o={...r,metadatos_asociados:c};w.post("/admin/trd",o,{onError:v=>{l(v),n(!1)},onFinish:()=>{n(!1)}})},i=(s,c)=>{F(o=>({...o,[s]:c})),a[s]&&l(o=>({...o,[s]:""}))};return e.jsxs(A,{breadcrumbItems:O,children:[e.jsx(L,{title:"Crear TRD - Tablas de Retención Documental"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(b,{href:"/admin/trd",children:e.jsxs(u,{variant:"outline",size:"sm",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Volver"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Crear Nueva TRD"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Complete la información para crear una nueva Tabla de Retención Documental"})]})]})}),e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs(m,{children:[e.jsxs(T,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5 text-[#2a3d83]"}),"Información Básica"]}),e.jsx(_,{children:"Datos principales de la Tabla de Retención Documental"})]}),e.jsxs(x,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"codigo",children:"Código *"}),e.jsx(p,{id:"codigo",type:"text",value:r.codigo,onChange:s=>i("codigo",s.target.value),placeholder:"Ej: TRD-2024-001",required:!0,className:a.codigo?"border-red-500":""}),a.codigo&&e.jsx("p",{className:"text-sm text-red-600",children:a.codigo})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"version",children:"Versión *"}),e.jsx(p,{id:"version",type:"text",value:r.version,onChange:s=>i("version",s.target.value),placeholder:"Ej: 1.0, 2.1",required:!0,className:a.version?"border-red-500":""}),a.version&&e.jsx("p",{className:"text-sm text-red-600",children:a.version})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"nombre",children:"Nombre de la TRD *"}),e.jsx(p,{id:"nombre",type:"text",value:r.nombre,onChange:s=>i("nombre",s.target.value),placeholder:"Ej: TRD General Administrativa 2024",required:!0,className:a.nombre?"border-red-500":""}),a.nombre&&e.jsx("p",{className:"text-sm text-red-600",children:a.nombre})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"descripcion",children:"Descripción"}),e.jsx(f,{id:"descripcion",value:r.descripcion,onChange:s=>i("descripcion",s.target.value),placeholder:"Describa el propósito y alcance de esta TRD",rows:4,className:a.descripcion?"border-red-500":""}),a.descripcion&&e.jsx("p",{className:"text-sm text-red-600",children:a.descripcion})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"justificacion",children:"Justificación"}),e.jsx(f,{id:"justificacion",value:r.justificacion,onChange:s=>i("justificacion",s.target.value),placeholder:"Justifique la creación o modificación de esta TRD",rows:3,className:a.justificacion?"border-red-500":""}),a.justificacion&&e.jsx("p",{className:"text-sm text-red-600",children:a.justificacion})]})]})]}),e.jsxs(m,{children:[e.jsxs(T,{children:[e.jsx(S,{children:"Configuración y Estado"}),e.jsx(_,{children:"Establezca el estado inicial y configuraciones técnicas"})]}),e.jsxs(x,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"estado",children:"Estado *"}),e.jsxs(N,{value:r.estado,onValueChange:s=>i("estado",s),children:[e.jsx(y,{className:a.estado?"border-red-500":"",children:e.jsx(C,{placeholder:"Selecciona un estado"})}),e.jsx(D,{children:Object.entries(R).map(([s,c])=>e.jsx(d,{value:s,children:c},s))})]}),a.estado&&e.jsx("p",{className:"text-sm text-red-600",children:a.estado})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"formato_archivo",children:"Formato de Archivo"}),e.jsxs(N,{value:r.formato_archivo,onValueChange:s=>i("formato_archivo",s),children:[e.jsx(y,{children:e.jsx(C,{placeholder:"Selecciona formato"})}),e.jsxs(D,{children:[e.jsx(d,{value:"XML",children:"XML"}),e.jsx(d,{value:"JSON",children:"JSON"}),e.jsx(d,{value:"PDF",children:"PDF"}),e.jsx(d,{value:"EXCEL",children:"Excel"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"metadatos_asociados",children:"Metadatos Asociados (JSON)"}),e.jsx(f,{id:"metadatos_asociados",value:r.metadatos_asociados,onChange:s=>i("metadatos_asociados",s.target.value),placeholder:'{"categoria": "administrativa", "nivel_acceso": "publico", "palabras_clave": ["gestion", "documental"]}',rows:4,className:`font-mono text-sm ${a.metadatos_asociados?"border-red-500":""}`}),e.jsx("p",{className:"text-xs text-gray-500",children:"Opcional: Ingrese metadatos adicionales en formato JSON válido"}),a.metadatos_asociados&&e.jsx("p",{className:"text-sm text-red-600",children:a.metadatos_asociados})]})]})]}),e.jsx(m,{children:e.jsx(x,{className:"pt-6",children:e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(b,{href:"/admin/trd",children:e.jsx(u,{type:"button",variant:"outline",disabled:h,children:"Cancelar"})}),e.jsx(u,{type:"submit",className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",disabled:h,children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Crear TRD"]})})]})})})]}),e.jsx(m,{className:"bg-blue-50 border-blue-200",children:e.jsx(x,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-blue-100 rounded-full p-2 flex-shrink-0",children:e.jsx(g,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Información sobre TRDs"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"• El código debe ser único y seguir la nomenclatura establecida"}),e.jsx("li",{children:'• Las TRDs en estado "Borrador" pueden ser modificadas libremente'}),e.jsx("li",{children:'• Solo las TRDs "Aprobadas" pueden marcarse como vigentes'}),e.jsx("li",{children:"• Los metadatos ayudan a la clasificación y búsqueda de la TRD"}),e.jsx("li",{children:"• Una vez creada, se generará automáticamente un identificador único"})]})]})]})})})]})]})}export{W as default};
