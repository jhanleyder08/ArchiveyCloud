import{r,j as e,H,L as V,e as b}from"./app-D5ty85UD.js";import{A as q}from"./app-layout-BldlUZtG.js";import{C as t,a as d,b as o,c as S,d as m}from"./card-BOJsaF7N.js";import{c as D,B as x}from"./app-logo-icon-CER8Okyj.js";import{L as y,I as F}from"./label-52xU_9U9.js";import{S as O,a as W,b as Y,c as $,d as G}from"./select-DED6Pjgm.js";import{A as w,a as C}from"./alert-DMIjH_Xy.js";import{B as J}from"./badge-CRDWS41x.js";import{A as K}from"./arrow-left-CBHxcoHX.js";import{T as Q}from"./test-tube-Cz-eCEwq.js";import{a as E,$ as h,c as L,Y as M,a0 as P}from"./app-sidebar-layout-DA_3G3Md.js";import{L as A}from"./loader-circle-BTmlfEIP.js";import{C as X}from"./circle-check-big-7l6mGfrB.js";/* empty css            */import"./index-BoLQYjiW.js";import"./index-C_kE6Ds7.js";import"./check-D4Ehe9Dv.js";import"./index-C_bZVMS5.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],ee=D("Phone",Z);function ve({usuarios:j}){const[l,I]=r.useState(""),[a,R]=r.useState(""),[p,u]=r.useState(!1),[f,g]=r.useState(!1),[T,i]=r.useState(null),[U,n]=r.useState(null),c=j.find(s=>s.id.toString()===l),_=async()=>{if(!l){i({success:!1,message:"Por favor selecciona un usuario"});return}u(!0),i(null);try{const s=await b.post("/admin/servicios-externos/test-email",{user_id:l});i(s.data)}catch(s){i({success:!1,message:s.response?.data?.message||"Error enviando email de prueba"})}finally{u(!1)}},k=async()=>{if(!a){n({success:!1,message:"Por favor ingresa un n√∫mero de tel√©fono"});return}g(!0),n(null);try{const s=await b.post("/admin/servicios-externos/test-sms",{telefono:a});n(s.data)}catch(s){n({success:!1,message:s.response?.data?.message||"Error enviando SMS de prueba"})}finally{g(!1)}},v=(s,z)=>s?e.jsx(w,{className:s.success?"border-green-200 bg-green-50":"border-red-200 bg-red-50",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[s.success?e.jsx(X,{className:"h-4 w-4 text-green-600"}):e.jsx(E,{className:"h-4 w-4 text-red-600"}),e.jsxs(C,{className:s.success?"text-green-800":"text-red-800",children:[e.jsxs("strong",{children:[z,":"]})," ",s.message,s.detalles&&e.jsx("div",{className:"mt-2 text-sm space-y-1",children:Object.entries(s.detalles).map(([N,B])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"capitalize",children:[N.replace("_"," "),":"]}),e.jsx("span",{className:"font-mono text-xs",children:String(B)})]},N))})]})]})}):null;return e.jsxs(q,{children:[e.jsx(H,{title:"Probar Servicios Externos - ArchiveyCloud"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(V,{href:"/admin/servicios-externos",children:e.jsxs(x,{variant:"outline",size:"sm",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Volver"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Probar Servicios Externos"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Env√≠a emails y SMS de prueba para verificar la configuraci√≥n"})]})]}),e.jsx(Q,{className:"h-8 w-8 text-blue-600"})]}),e.jsxs(w,{children:[e.jsx(E,{className:"h-4 w-4"}),e.jsxs(C,{children:[e.jsx("strong",{children:"Importante:"})," Los emails y SMS de prueba se env√≠an realmente a los destinatarios seleccionados. Usa esta funcionalidad solo para testing en ambientes de desarrollo o con usuarios de prueba."]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsxs(d,{children:[e.jsxs(o,{className:"flex items-center space-x-2",children:[e.jsx(h,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:"Probar Email"})]}),e.jsx(S,{children:"Env√≠a un email de prueba a un usuario espec√≠fico"})]}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"usuario-select",children:"Usuario Destinatario"}),e.jsxs(O,{value:l,onValueChange:I,children:[e.jsx(W,{id:"usuario-select",children:e.jsx(Y,{placeholder:"Selecciona un usuario..."})}),e.jsx($,{children:j.map(s=>e.jsx(G,{value:s.id.toString(),children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx("span",{children:s.name}),e.jsx(J,{variant:"outline",className:"ml-auto",children:s.email})]})},s.id))})]})]}),c&&e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"font-medium",children:c.name})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(h,{className:"h-3 w-3"}),e.jsx("span",{children:c.email})]})]}),e.jsxs(x,{onClick:_,disabled:p||!l,className:"w-full",children:[p?e.jsx(A,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(M,{className:"h-4 w-4 mr-2"}),"Enviar Email de Prueba"]}),v(T,"Email"),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Asunto:"})," üìã Prueba desde Interfaz Web - ArchiveyCloud"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contenido:"})," Email de prueba enviado desde la interfaz de administraci√≥n"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Prioridad:"})," Media"]})]})]})]}),e.jsxs(t,{children:[e.jsxs(d,{children:[e.jsxs(o,{className:"flex items-center space-x-2",children:[e.jsx(P,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{children:"Probar SMS"})]}),e.jsx(S,{children:"Env√≠a un SMS de prueba a un n√∫mero espec√≠fico"})]}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"telefono-input",children:"N√∫mero de Tel√©fono"}),e.jsx(F,{id:"telefono-input",type:"tel",placeholder:"+573001234567",value:a,onChange:s=>R(s.target.value),className:"font-mono"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Incluye el c√≥digo de pa√≠s (ej: +57 para Colombia)"})]}),a&&e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"font-medium font-mono",children:a})]}),e.jsx("div",{className:"text-sm text-gray-600",children:"SMS ser√° enviado a este n√∫mero"})]}),e.jsxs(x,{onClick:k,disabled:f||!a,className:"w-full",children:[f?e.jsx(A,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(M,{className:"h-4 w-4 mr-2"}),"Enviar SMS de Prueba"]}),v(U,"SMS"),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Mensaje:"})," üö® ArchiveyCloud: Prueba SMS - Ver: [URL]"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Longitud:"})," ~60 caracteres"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Ambiente:"})," ","Env√≠o real"]})]})]})]})]}),e.jsxs(t,{children:[e.jsx(d,{children:e.jsx(o,{children:"Informaci√≥n sobre las Pruebas"})}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center",children:[e.jsx(h,{className:"h-4 w-4 mr-2 text-blue-600"}),"Email de Prueba"]}),e.jsxs("ul",{className:"space-y-1 text-gray-600",children:[e.jsx("li",{children:"‚Ä¢ Se env√≠a usando la configuraci√≥n actual de email"}),e.jsx("li",{children:"‚Ä¢ Respeta los l√≠mites de throttling (5 emails/hora)"}),e.jsx("li",{children:"‚Ä¢ Crea una notificaci√≥n real en el sistema"}),e.jsx("li",{children:"‚Ä¢ Incluye informaci√≥n del remitente y timestamp"}),e.jsx("li",{children:"‚Ä¢ Usa el template HTML profesional"})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center",children:[e.jsx(P,{className:"h-4 w-4 mr-2 text-green-600"}),"SMS de Prueba"]}),e.jsxs("ul",{className:"space-y-1 text-gray-600",children:[e.jsx("li",{children:"‚Ä¢ Solo funciona en ambiente de producci√≥n"}),e.jsx("li",{children:"‚Ä¢ En desarrollo se simula el env√≠o"}),e.jsx("li",{children:"‚Ä¢ Respeta los l√≠mites de throttling (3 SMS/d√≠a)"}),e.jsx("li",{children:"‚Ä¢ Formatea autom√°ticamente el n√∫mero"}),e.jsx("li",{children:"‚Ä¢ Requiere configuraci√≥n del proveedor SMS"})]})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Resoluci√≥n de Problemas"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("p",{children:"‚Ä¢ Si el email falla, verifica la configuraci√≥n SMTP en el archivo .env"}),e.jsx("p",{children:"‚Ä¢ Si el SMS falla, revisa la API key del proveedor en config/services.php"}),e.jsx("p",{children:"‚Ä¢ Los l√≠mites de throttling pueden impedir m√∫ltiples env√≠os seguidos"}),e.jsx("p",{children:"‚Ä¢ Revisa los logs de Laravel para m√°s detalles sobre errores"})]})]})]})]})]})]})}export{ve as default};
