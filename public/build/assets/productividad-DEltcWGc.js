import{u as I,j as e,H as O,L as P}from"./app-D9ITnC4R.js";import{A as q}from"./app-layout-CxnFkzDa.js";import{c as E,B as w}from"./button-CWflhP9D.js";import{C as r,a,b as l,c,d as i}from"./card-BneAbULf.js";import{B as f}from"./badge-DBHjsSN1.js";import{S as V,a as X,b as Y,c as G,d}from"./select-CeVzXy-a.js";import{D as J,T as Q,U as W}from"./users-DTbvNCQh.js";import{F as Z}from"./Combination-_iW52Z_h.js";import{j as A}from"./app-sidebar-layout-gRrSD5YA.js";import{A as C}from"./activity-Da-TWS28.js";import{S as ee}from"./star-CtIGmCoa.js";import{R as g,T as N}from"./CategoricalChart-DZnn4Bpa.js";import{A as se,a as te}from"./AreaChart-Bnz35wyo.js";import{C as D,X as T,Y as S}from"./CartesianChart-BvOo0juj.js";import{B as re}from"./BarChart-BEVzdspo.js";import{L as ae}from"./Legend-BxDS01Df.js";import{B as k}from"./barSelectors-BXu57JnZ.js";import{P as le,a as ce}from"./PieChart-DF5qakug.js";import{C as ie}from"./tooltipContext-D8fdAuXc.js";/* empty css            */import"./index-BUHUwZ11.js";import"./index-Dae7BiwW.js";import"./index-C_GXg_Oc.js";import"./check-jrHUR9iG.js";import"./index-D4ETnYEq.js";import"./x-BnKM6KL5.js";import"./index-BYPhSTSm.js";import"./app-logo-icon-C1EJBQs2.js";import"./input-C6rIXJQq.js";import"./label-Cmeh_um-.js";import"./user-4NQW7odk.js";import"./triangle-alert-BQotcmUa.js";import"./folder-CXwcyQUZ.js";import"./search-C5Ovj2LQ.js";import"./ActivePoints-CWa5VAl2.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],_=E("Award",de);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ne=E("Target",oe),h=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"];function Xe({documentosPorUsuario:o,expedientesPorUsuario:n,actividadPorDia:j,accionesFrecuentes:p,periodo:u,fechaInicio:xe}){const{data:v,setData:L,get:R,processing:y}=I({periodo:u}),B=()=>{R(route("admin.reportes.productividad"),{data:{periodo:v.periodo},preserveState:!0})},F=()=>{console.log("Exportar reporte de productividad")},K=o.reduce((s,t)=>s+t.total,0),$=n.reduce((s,t)=>s+t.total,0),b=j.reduce((s,t)=>s+t.total_acciones,0),z=Math.round(b/j.length)||0,x=o[0],m=n[0],M=j.map(s=>({fecha:new Date(s.fecha).toLocaleDateString("es-ES",{month:"short",day:"numeric"}),actividad:s.total_acciones})),U=o.slice(0,10).map((s,t)=>({usuario:s.creator.name,documentos:s.total,expedientes:n.find(H=>H.created_by===s.created_by)?.total||0,color:h[t%h.length]}));return e.jsxs(q,{children:[e.jsx(O,{title:"Productividad - Reportes"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{href:route("admin.reportes.dashboard"),className:"text-sm text-muted-foreground hover:text-foreground",children:"Reportes"}),e.jsx("span",{className:"text-muted-foreground",children:"/"}),e.jsx("span",{className:"font-medium",children:"Productividad"})]}),e.jsx("h1",{className:"text-2xl font-bold mt-1",children:"Reporte de Productividad"}),e.jsxs("p",{className:"text-muted-foreground",children:["Análisis de productividad de usuarios en los últimos ",u," días"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(V,{value:v.periodo,onValueChange:s=>L("periodo",s),children:[e.jsx(X,{className:"w-40",children:e.jsx(Y,{placeholder:"Período"})}),e.jsxs(G,{children:[e.jsx(d,{value:"7",children:"7 días"}),e.jsx(d,{value:"15",children:"15 días"}),e.jsx(d,{value:"30",children:"30 días"}),e.jsx(d,{value:"60",children:"60 días"}),e.jsx(d,{value:"90",children:"90 días"})]})]}),e.jsx(w,{onClick:B,disabled:y,children:y?"Aplicando...":"Aplicar"}),e.jsxs(w,{variant:"outline",onClick:F,children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Exportar"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(r,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Total Documentos"}),e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:K.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["En los últimos ",u," días"]})]})]}),e.jsxs(r,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Total Expedientes"}),e.jsx(A,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:$.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Creados en el período"})]})]}),e.jsxs(r,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Total Actividad"}),e.jsx(C,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Acciones realizadas"})]})]}),e.jsxs(r,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Promedio Diario"}),e.jsx(Q,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:z}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Acciones por día"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(r,{children:[e.jsxs(a,{children:[e.jsxs(l,{className:"flex items-center space-x-2",children:[e.jsx(_,{className:"h-5 w-5 text-yellow-500"}),e.jsx("span",{children:"Usuario Más Productivo - Documentos"})]}),e.jsx(i,{children:"Usuario que ha creado más documentos"})]}),e.jsx(c,{children:x?e.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-yellow-500 text-white rounded-full",children:e.jsx(ee,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:x.creator.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:x.creator.email})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:x.total}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"documentos"})]})]}):e.jsx("p",{className:"text-muted-foreground",children:"No hay datos disponibles"})})]}),e.jsxs(r,{children:[e.jsxs(a,{children:[e.jsxs(l,{className:"flex items-center space-x-2",children:[e.jsx(_,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{children:"Usuario Más Productivo - Expedientes"})]}),e.jsx(i,{children:"Usuario que ha creado más expedientes"})]}),e.jsx(c,{children:m?e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-500 text-white rounded-full",children:e.jsx(ne,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:m.creator.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:m.creator.email})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:m.total}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"expedientes"})]})]}):e.jsx("p",{className:"text-muted-foreground",children:"No hay datos disponibles"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(r,{children:[e.jsxs(a,{children:[e.jsx(l,{children:"Actividad Diaria"}),e.jsx(i,{children:"Número de acciones realizadas por día"})]}),e.jsx(c,{children:e.jsx(g,{width:"100%",height:300,children:e.jsxs(se,{data:M,children:[e.jsx(D,{strokeDasharray:"3 3"}),e.jsx(T,{dataKey:"fecha"}),e.jsx(S,{}),e.jsx(N,{}),e.jsx(te,{type:"monotone",dataKey:"actividad",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6})]})})})]}),e.jsxs(r,{children:[e.jsxs(a,{children:[e.jsx(l,{children:"Top 10 Usuarios - Documentos"}),e.jsx(i,{children:"Usuarios más productivos creando documentos"})]}),e.jsx(c,{children:e.jsx(g,{width:"100%",height:300,children:e.jsxs(re,{data:U,children:[e.jsx(D,{strokeDasharray:"3 3"}),e.jsx(T,{dataKey:"usuario",angle:-45,textAnchor:"end",height:80}),e.jsx(S,{}),e.jsx(N,{}),e.jsx(ae,{}),e.jsx(k,{dataKey:"documentos",fill:"#8884d8",name:"Documentos"}),e.jsx(k,{dataKey:"expedientes",fill:"#82ca9d",name:"Expedientes"})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(r,{children:[e.jsxs(a,{children:[e.jsxs(l,{className:"flex items-center space-x-2",children:[e.jsx(W,{className:"h-5 w-5"}),e.jsx("span",{children:"Ranking - Documentos"})]}),e.jsx(i,{children:"Top 15 usuarios por documentos creados"})]}),e.jsx(c,{children:e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:o.slice(0,15).map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full text-sm font-bold text-white ${t===0?"bg-yellow-500":t===1?"bg-gray-400":t===2?"bg-amber-600":"bg-gray-300 text-gray-700"}`,children:t+1}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.creator.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.creator.email})]})]}),e.jsxs(f,{variant:"secondary",children:[s.total," documentos"]})]},s.created_by))})})]}),e.jsxs(r,{children:[e.jsxs(a,{children:[e.jsxs(l,{className:"flex items-center space-x-2",children:[e.jsx(A,{className:"h-5 w-5"}),e.jsx("span",{children:"Ranking - Expedientes"})]}),e.jsx(i,{children:"Top 15 usuarios por expedientes creados"})]}),e.jsx(c,{children:e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:n.slice(0,15).map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full text-sm font-bold text-white ${t===0?"bg-yellow-500":t===1?"bg-gray-400":t===2?"bg-amber-600":"bg-gray-300 text-gray-700"}`,children:t+1}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.creator.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.creator.email})]})]}),e.jsxs(f,{variant:"secondary",children:[s.total," expedientes"]})]},s.created_by))})})]})]}),e.jsxs(r,{children:[e.jsxs(a,{children:[e.jsxs(l,{className:"flex items-center space-x-2",children:[e.jsx(C,{className:"h-5 w-5"}),e.jsx("span",{children:"Acciones Más Frecuentes"})]}),e.jsx(i,{children:"Tipos de acciones realizadas con mayor frecuencia"})]}),e.jsx(c,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-3",children:p.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-primary text-primary-foreground rounded-full text-sm",children:t+1}),e.jsx("h4",{className:"font-medium capitalize",children:s.accion.replace("_"," ")})]}),e.jsxs(f,{variant:"outline",children:[s.total," veces"]})]},s.accion))}),e.jsx("div",{children:e.jsx(g,{width:"100%",height:300,children:e.jsxs(le,{children:[e.jsx(ce,{data:p.slice(0,6),cx:"50%",cy:"50%",labelLine:!1,label:({accion:s,percent:t})=>`${s}: ${(t*100).toFixed(1)}%`,outerRadius:80,fill:"#8884d8",dataKey:"total",children:p.slice(0,6).map((s,t)=>e.jsx(ie,{fill:h[t%h.length]},`cell-${t}`))}),e.jsx(N,{})]})})})]})})]})]})]})}export{Xe as default};
