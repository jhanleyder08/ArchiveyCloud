import{r as y,j as e,H as k}from"./app-BrC4WYME.js";import{A as P,l as v,g as K,m as H}from"./app-layout-BZnCQfWD.js";import{C as l,a as i,b as d,c as n,d as c}from"./card-CCILxkD2.js";import{B as C}from"./badge-D4BXX_pk.js";import{P as j}from"./progress-CD4H9ck7.js";import{T as I,a as O,b as m,c as h}from"./tabs-97H9MSAo.js";import{A as _}from"./activity-CCFyup-H.js";import{C as $}from"./circle-check-big-2_kkf0ne.js";import{H as G,L as X}from"./Line-CEe0kgjy.js";import{c as Y,d as z,R as u,b as w,X as A,Y as p,T as f,L as E,P as U,a as V,C as q,B as J}from"./PieChart-C0ADYaQa.js";import{A as Q,a as W}from"./AreaChart-Bc8Xs5JD.js";/* empty css            */import"./app-logo-icon-ev2cgYoM.js";import"./index-mnoHI2hD.js";import"./label-BhRbrERu.js";import"./index-Cv01iuPd.js";var Z=["axis"],ee=y.forwardRef((a,o)=>y.createElement(Y,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Z,tooltipPayloadSearcher:z,categoricalChartProps:a,ref:o}));const D=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"],B={abierto:"#22C55E",tramite:"#3B82F6",revision:"#F59E0B",cerrado:"#6B7280",archivado:"#8B5CF6"};function fe({metricas:a,expedientesPorEstado:o,documentosPorTipo:b,seriesMasUsadas:M,actividadReciente:L,cumplimientoTrd:t,estadisticasAlmacenamiento:S}){const F=Object.keys(o).reduce((s,r)=>(o[r].forEach(x=>{const g=s.find(T=>T.mes===x.mes);g?g[r]=x.total:s.push({mes:x.mes,[r]:x.total})}),s),[]).sort((s,r)=>s.mes.localeCompare(r.mes)),R=S.map(s=>({mes:s.mes,documentos:s.documentos,tamaño_mb:Math.round(s.tamaño_total/(1024*1024))})),N=Math.round(t.series_documentadas/t.total_series*100);return e.jsxs(P,{children:[e.jsx(k,{title:"Dashboard Ejecutivo - Reportes"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard Ejecutivo"}),e.jsx("p",{className:"text-muted-foreground",children:"Métricas y estadísticas del sistema documental"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(C,{variant:"outline",className:"flex items-center space-x-1",children:[e.jsx(_,{className:"h-3 w-3"}),e.jsx("span",{children:"Tiempo real"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Total Expedientes"}),e.jsx(v,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.total_expedientes.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.expedientes_abiertos," abiertos"]})]})]}),e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Total Documentos"}),e.jsx(K,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.total_documentos.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",a.documentos_mes_actual," este mes"]})]})]}),e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Expedientes Abiertos"}),e.jsx($,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.expedientes_abiertos}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(a.expedientes_abiertos/a.total_expedientes*100),"% del total"]})]})]}),e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Expedientes Cerrados"}),e.jsx(v,{className:"h-4 w-4 text-gray-500"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.expedientes_cerrados}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(a.expedientes_cerrados/a.total_expedientes*100),"% del total"]})]})]}),e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Almacenamiento"}),e.jsx(G,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[a.tamaño_total_gb," GB"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(a.tamaño_total_gb/a.total_documentos*1024)," MB promedio"]})]})]}),e.jsxs(l,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Cumplimiento TRD"}),e.jsx(H,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[N,"%"]}),e.jsx(j,{value:N,className:"mt-1"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsx(d,{children:"Expedientes por Estado (Últimos 12 meses)"}),e.jsx(c,{children:"Evolución temporal de los expedientes"})]}),e.jsx(n,{children:e.jsx(u,{width:"100%",height:300,children:e.jsxs(Q,{data:F,children:[e.jsx(w,{strokeDasharray:"3 3"}),e.jsx(A,{dataKey:"mes"}),e.jsx(p,{}),e.jsx(f,{}),e.jsx(E,{}),Object.keys(o).map((s,r)=>e.jsx(W,{type:"monotone",dataKey:s,stackId:"1",stroke:B[s],fill:B[s],fillOpacity:.6},s))]})})})]}),e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsx(d,{children:"Documentos por Tipo"}),e.jsx(c,{children:"Distribución de tipos documentales"})]}),e.jsx(n,{children:e.jsx(u,{width:"100%",height:300,children:e.jsxs(U,{children:[e.jsx(V,{data:b.slice(0,6),cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:r})=>`${s}: ${(r*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"total",children:b.slice(0,6).map((s,r)=>e.jsx(q,{fill:D[r%D.length]},`cell-${r}`))}),e.jsx(f,{})]})})})]})]}),e.jsxs(I,{defaultValue:"series",className:"space-y-4",children:[e.jsxs(O,{className:"grid w-full grid-cols-4",children:[e.jsx(m,{value:"series",children:"Series más usadas"}),e.jsx(m,{value:"actividad",children:"Actividad reciente"}),e.jsx(m,{value:"cumplimiento",children:"Cumplimiento TRD"}),e.jsx(m,{value:"almacenamiento",children:"Almacenamiento"})]}),e.jsx(h,{value:"series",className:"space-y-4",children:e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsx(d,{children:"Series Documentales más Utilizadas"}),e.jsx(c,{children:"Series con mayor número de expedientes"})]}),e.jsx(n,{children:e.jsx("div",{className:"space-y-3",children:M.slice(0,10).map((s,r)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-primary text-primary-foreground rounded-full text-sm",children:r+1}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.codigo}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.nombre})]})]}),e.jsxs(C,{variant:"secondary",children:[s.expedientes_count," expedientes"]})]},s.id))})})]})}),e.jsx(h,{value:"actividad",className:"space-y-4",children:e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsx(d,{children:"Actividad Reciente"}),e.jsx(c,{children:"Últimas 20 acciones en el sistema"})]}),e.jsx(n,{children:e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:L.slice(0,20).map(s=>e.jsxs("div",{className:"flex items-start space-x-3 pb-3 border-b last:border-b-0",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(_,{className:"h-4 w-4 text-muted-foreground mt-1"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium",children:s.accion}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.fecha_relativa})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Por: ",s.usuario," en ",s.tabla_afectada]}),s.descripcion&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s.descripcion})]})]},s.id))})})]})}),e.jsx(h,{value:"cumplimiento",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsx(d,{children:"Cumplimiento de Series"}),e.jsx(c,{children:"Series documentadas vs. total"})]}),e.jsxs(n,{children:[e.jsxs("div",{className:"text-3xl font-bold mb-2",children:[t.series_documentadas," / ",t.total_series]}),e.jsx(j,{value:t.series_documentadas/t.total_series*100,className:"mb-2"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[Math.round(t.series_documentadas/t.total_series*100),"% de series tienen expedientes"]})]})]}),e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsx(d,{children:"Cumplimiento de Subseries"}),e.jsx(c,{children:"Subseries documentadas vs. total"})]}),e.jsxs(n,{children:[e.jsxs("div",{className:"text-3xl font-bold mb-2",children:[t.subseries_documentadas," / ",t.total_subseries]}),e.jsx(j,{value:t.subseries_documentadas/t.total_subseries*100,className:"mb-2"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[Math.round(t.subseries_documentadas/t.total_subseries*100),"% de subseries tienen expedientes"]})]})]})]})}),e.jsx(h,{value:"almacenamiento",className:"space-y-4",children:e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsx(d,{children:"Crecimiento de Almacenamiento"}),e.jsx(c,{children:"Evolución del almacenamiento por mes"})]}),e.jsx(n,{children:e.jsx(u,{width:"100%",height:300,children:e.jsxs(ee,{data:R,children:[e.jsx(w,{strokeDasharray:"3 3"}),e.jsx(A,{dataKey:"mes"}),e.jsx(p,{yAxisId:"left"}),e.jsx(p,{yAxisId:"right",orientation:"right"}),e.jsx(f,{}),e.jsx(E,{}),e.jsx(J,{yAxisId:"left",dataKey:"documentos",fill:"#8884d8",name:"Documentos"}),e.jsx(X,{yAxisId:"right",type:"monotone",dataKey:"tamaño_mb",stroke:"#82ca9d",name:"Tamaño (MB)"})]})})})]})})]})]})]})}export{fe as default};
