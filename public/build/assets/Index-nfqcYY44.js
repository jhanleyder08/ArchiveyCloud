import{r as h,j as e,L as c,H as E,a as o}from"./app-BAaRFKCE.js";import{A as B}from"./app-layout-BkZKgO0H.js";import{b as A,B as a}from"./app-logo-icon-CRu_6WDm.js";import{I as v}from"./input-BbBpRMsa.js";import{S as I,a as z,b as H,c as F,d as n}from"./select-COydJ_1f.js";import{B as L}from"./badge-CYpmu6Aj.js";import{C as p,a as f,b as g,c as $,d as N}from"./card-CrHy-fHD.js";import{T as q,a as M,b,c as r,d as P,e as t}from"./table-BCtbQZAz.js";import{P as y}from"./plus-CbTR48RT.js";import{C as V,a as C}from"./circle-check-big-C4SeEZDM.js";import{E as w}from"./eye-Ca9RHTLD.js";import{C as O}from"./clock-B-h1W_zW.js";import{S as U}from"./square-pen-D0qhqqDk.js";import{T as K}from"./trash-2-DgMOpCcU.js";/* empty css            */import"./index-D2AugiGI.js";import"./index-DZ-wJQli.js";import"./index-B8KDMt0s.js";import"./index-D8C8_OyU.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],G=A("FileUp",Z),J={draft:{label:"Borrador",color:"bg-gray-100 text-gray-800",icon:O},active:{label:"Activa",color:"bg-green-100 text-green-800",icon:C},archived:{label:"Archivada",color:"bg-blue-100 text-blue-800",icon:w},obsolete:{label:"Obsoleta",color:"bg-red-100 text-red-800",icon:V}};function ue({trdTables:l,filters:d}){const[x,T]=h.useState(d.search||""),[m,S]=h.useState(d.status||""),[j,D]=h.useState(d.entity_code||""),u=()=>{o.get("/trd",{search:x||void 0,status:m||void 0,entity_code:j||void 0},{preserveState:!0,replace:!0})},R=s=>{confirm(`¿Está seguro de eliminar la TRD "${s.name}"?`)&&o.delete(`/trd/${s.id}`)},_=s=>{confirm(`¿Está seguro de aprobar la TRD "${s.name}"?`)&&o.get("/trd",{params:{id:s.id,approve:!0}})};return e.jsxs(B,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Tablas de Retención Documental (TRD)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{href:"/trd/import",children:e.jsxs(a,{variant:"outline",size:"sm",children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Importar"]})}),e.jsx(c,{href:"/trd/create",children:e.jsxs(a,{size:"sm",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Nueva TRD"]})})]})]}),e.jsx(E,{title:"Tablas de Retención Documental"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs(p,{className:"mb-6",children:[e.jsxs(f,{children:[e.jsx(g,{children:"Filtros"}),e.jsx($,{children:"Busque y filtre las Tablas de Retención Documental"})]}),e.jsx(N,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(v,{placeholder:"Buscar por nombre, código o entidad...",value:x,onChange:s=>T(s.target.value),onKeyPress:s=>s.key==="Enter"&&u()})}),e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs(I,{value:m,onValueChange:S,children:[e.jsx(z,{children:e.jsx(H,{placeholder:"Estado"})}),e.jsxs(F,{children:[e.jsx(n,{value:"",children:"Todos los estados"}),e.jsx(n,{value:"draft",children:"Borrador"}),e.jsx(n,{value:"active",children:"Activa"}),e.jsx(n,{value:"archived",children:"Archivada"}),e.jsx(n,{value:"obsolete",children:"Obsoleta"})]})]})}),e.jsx("div",{className:"w-full sm:w-48",children:e.jsx(v,{placeholder:"Código entidad",value:j,onChange:s=>D(s.target.value)})}),e.jsx(a,{onClick:u,children:"Filtrar"})]})})]}),e.jsxs(p,{children:[e.jsx(f,{children:e.jsxs(g,{children:["Tablas de Retención Documental (",l.meta?.total||0,")"]})}),e.jsx(N,{children:l?.data?.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(q,{children:[e.jsx(M,{children:e.jsxs(b,{children:[e.jsx(r,{children:"Código"}),e.jsx(r,{children:"Nombre"}),e.jsx(r,{children:"Entidad"}),e.jsx(r,{children:"Versión"}),e.jsx(r,{children:"Estado"}),e.jsx(r,{children:"Creada por"}),e.jsx(r,{children:"Fecha creación"}),e.jsx(r,{className:"text-right",children:"Acciones"})]})}),e.jsx(P,{children:l?.data?.map(s=>{const i=J[s.status],k=i.icon;return e.jsxs(b,{children:[e.jsx(t,{className:"font-mono text-sm",children:s.code}),e.jsx(t,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),s.entity_code&&e.jsx("div",{className:"text-sm text-gray-500",children:s.entity_code})]})}),e.jsx(t,{children:s.entity_name}),e.jsxs(t,{className:"font-mono",children:["v",s.version]}),e.jsx(t,{children:e.jsxs(L,{variant:"secondary",className:i.color,children:[e.jsx(k,{className:"w-3 h-3 mr-1"}),i.label]})}),e.jsx(t,{children:s.creator.name}),e.jsx(t,{children:new Date(s.created_at).toLocaleDateString()}),e.jsx(t,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(c,{href:`/trd/${s.id}`,children:e.jsx(a,{variant:"ghost",size:"sm",children:e.jsx(w,{className:"w-4 h-4"})})}),e.jsx(c,{href:`/trd/${s.id}/edit`,children:e.jsx(a,{variant:"ghost",size:"sm",children:e.jsx(U,{className:"w-4 h-4"})})}),s.status==="draft"&&e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>_(s),className:"text-green-600 hover:text-green-700",children:e.jsx(C,{className:"w-4 h-4"})}),e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>R(s),className:"text-red-600 hover:text-red-700",children:e.jsx(K,{className:"w-4 h-4"})})]})})]},s.id)})})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-500 mb-4",children:"No se encontraron Tablas de Retención Documental"}),e.jsx(c,{href:"/trd/create",children:e.jsxs(a,{children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Crear primera TRD"]})})]})})]}),l?.links&&l.links.length>3&&e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx("div",{className:"flex gap-2",children:l.links.map((s,i)=>e.jsx(a,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url,onClick:()=>s.url&&o.get(s.url),dangerouslySetInnerHTML:{__html:s.label}},i))})})]})})]})}export{ue as default};
