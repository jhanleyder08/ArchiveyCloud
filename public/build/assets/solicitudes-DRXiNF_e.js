import{r as A,j as e,H as U,L as o,a as d}from"./app-B0qTBAke.js";import{A as k,c as M,F as g,d as z,C as f,a as O}from"./app-sidebar-layout-DFKjANJB.js";import{B as n}from"./app-logo-icon-BPz3oRny.js";import{C as v,a as N,b,d as y,c as R}from"./card-D4UBhCKF.js";import{I as q}from"./label-CjHZv5e4.js";import{S as w,a as T,b as C,c as S,d as c}from"./select-bkkBUc_4.js";import{B as m}from"./badge-BfEjTxB-.js";import{T as G,a as X,b as F,c as l,d as $,e as i}from"./table-CE6luIq3.js";import{T as J,a as K,b as x,c as Q}from"./tabs-CT2fp8nO.js";import{P as B}from"./plus-ElTEKlBd.js";import{F as W}from"./filter-Bq0vzlQW.js";import{E as Y}from"./eye-Ddf6P-1T.js";import{C as Z}from"./circle-x-DnCpljQ6.js";import{C as ee}from"./circle-check-big-CLyWiRXH.js";/* empty css            */import"./index-DDzTzhRc.js";import"./index-D-todNvr.js";import"./index-C5MwE6sO.js";import"./check-dE-FsShf.js";function Ne({solicitudes:a,filtros:t,estados:h}){const[j,_]=A.useState(t.vista||"general"),V=s=>{switch(s){case"completada":return"secondary";case"en_proceso":return"default";case"pendiente":return"outline";case"cancelada":case"vencida":return"destructive";default:return"outline"}},E=s=>{switch(s){case"urgente":return"text-red-600 bg-red-100";case"alta":return"text-orange-600 bg-orange-100";case"normal":return"text-blue-600 bg-blue-100";case"baja":return"text-gray-600 bg-gray-100";default:return"text-gray-600 bg-gray-100"}},L=s=>{switch(s){case"completada":return e.jsx(ee,{className:"h-4 w-4 text-green-500"});case"en_proceso":return e.jsx(f,{className:"h-4 w-4 text-blue-500"});case"pendiente":return e.jsx(O,{className:"h-4 w-4 text-yellow-500"});case"cancelada":case"vencida":return e.jsx(Z,{className:"h-4 w-4 text-red-500"});default:return e.jsx(f,{className:"h-4 w-4 text-gray-500"})}},u=(s,r)=>{const I=route("admin.firmas.solicitudes",{...t,[s]:r==="all"?"":r,page:1});d.get(I)},P=s=>{const r=route("admin.firmas.solicitudes",{...t,buscar:s,page:1});d.get(r)},D=s=>{_(s);const r=route("admin.firmas.solicitudes",{...t,vista:s,page:1});d.get(r)},H=s=>new Date(s).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),p=s=>new Date(s)<new Date;return e.jsxs(k,{children:[e.jsx(U,{title:"Solicitudes de Firma"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Solicitudes de Firma"}),e.jsx("p",{className:"text-muted-foreground",children:"Gestiona las solicitudes de firma digital de documentos"})]}),e.jsx(o,{href:route("admin.firmas.solicitudes.crear"),children:e.jsxs(n,{children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Nueva Solicitud"]})})]}),e.jsxs(J,{value:j,onValueChange:D,children:[e.jsxs(K,{children:[e.jsx(x,{value:"general",children:"Todas"}),e.jsx(x,{value:"pendientes",children:"Pendientes de Firmar"}),e.jsx(x,{value:"mis_solicitudes",children:"Mis Solicitudes"})]}),e.jsxs(Q,{value:j,className:"space-y-4",children:[e.jsxs(v,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center",children:[e.jsx(W,{className:"h-5 w-5 mr-2"}),"Filtros"]})}),e.jsx(y,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Búsqueda"}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(q,{placeholder:"Buscar solicitudes...",defaultValue:t.buscar,className:"pl-9",onChange:s=>{clearTimeout(window.searchTimeout),window.searchTimeout=setTimeout(()=>{P(s.target.value)},500)}})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Estado"}),e.jsxs(w,{value:t.estado||"all",onValueChange:s=>u("estado",s),children:[e.jsx(T,{children:e.jsx(C,{placeholder:"Todos los estados"})}),e.jsxs(S,{children:[e.jsx(c,{value:"all",children:"Todos los estados"}),Object.entries(h).map(([s,r])=>e.jsx(c,{value:s,children:r},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Prioridad"}),e.jsxs(w,{value:t.prioridad||"all",onValueChange:s=>u("prioridad",s),children:[e.jsx(T,{children:e.jsx(C,{placeholder:"Todas las prioridades"})}),e.jsxs(S,{children:[e.jsx(c,{value:"all",children:"Todas las prioridades"}),e.jsx(c,{value:"urgente",children:"Urgente"}),e.jsx(c,{value:"alta",children:"Alta"}),e.jsx(c,{value:"normal",children:"Normal"}),e.jsx(c,{value:"baja",children:"Baja"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(n,{variant:"outline",onClick:()=>window.location.reload(),children:"Limpiar Filtros"})})]})})]}),e.jsxs(v,{children:[e.jsxs(N,{children:[e.jsxs(b,{children:["Solicitudes (",a.meta?.total||0,")"]}),e.jsxs(R,{children:["Mostrando ",a.meta?.from||0," a ",a.meta?.to||0," de ",a.meta?.total||0," solicitudes"]})]}),e.jsxs(y,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(G,{children:[e.jsx(X,{children:e.jsxs(F,{children:[e.jsx(l,{children:"Estado"}),e.jsx(l,{children:"Título"}),e.jsx(l,{children:"Documento"}),e.jsx(l,{children:"Solicitante"}),e.jsx(l,{children:"Prioridad"}),e.jsx(l,{children:"Progreso"}),e.jsx(l,{children:"Fecha Límite"}),e.jsx(l,{children:"Acciones"})]})}),e.jsx($,{children:a.data.map(s=>e.jsxs(F,{children:[e.jsx(i,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[L(s.estado),e.jsx(m,{variant:V(s.estado),children:h[s.estado]||s.estado})]})}),e.jsx(i,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.titulo}),s.descripcion&&e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:s.descripcion})]})}),e.jsx(i,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium",children:s.documento.nombre})]})}),e.jsx(i,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{children:s.solicitante.name})]})}),e.jsx(i,{children:e.jsx(m,{className:E(s.prioridad),children:s.prioridad})}),e.jsx(i,{children:s.progreso&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-sm",children:[s.progreso.completadas,"/",s.progreso.total," firmantes"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${s.progreso.porcentaje}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.progreso.porcentaje,"%"]})]})}),e.jsx(i,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:p(s.fecha_limite)?"text-red-600 font-medium":"",children:H(s.fecha_limite)}),p(s.fecha_limite)&&e.jsx(m,{variant:"destructive",className:"text-xs",children:"Vencida"})]})}),e.jsx(i,{children:e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(o,{href:route("admin.firmas.solicitud",s.id),children:e.jsxs(n,{variant:"outline",size:"sm",children:[e.jsx(Y,{className:"h-4 w-4 mr-1"}),"Ver"]})})})})]},s.id))})]})}),a.data.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(g,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay solicitudes"}),e.jsx("p",{className:"text-gray-600 mb-4",children:Object.keys(t).length>0?"No se encontraron solicitudes con los filtros aplicados":"No hay solicitudes de firma registradas"}),e.jsx(o,{href:route("admin.firmas.solicitudes.crear"),children:e.jsxs(n,{children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Crear Primera Solicitud"]})})]}),(a.meta?.last_page||0)>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Mostrando ",a.meta?.from||0," a ",a.meta?.to||0," de ",a.meta?.total||0," resultados"]}),e.jsx("div",{className:"flex space-x-1",children:(a.links||[]).map((s,r)=>e.jsx(n,{variant:s.active?"default":"outline",size:"sm",onClick:()=>s.url&&d.get(s.url),disabled:!s.url,dangerouslySetInnerHTML:{__html:s.label}},r))})]})]})]})]})]})]})]})}export{Ne as default};
