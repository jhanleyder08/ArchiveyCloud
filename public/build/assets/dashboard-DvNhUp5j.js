import{r as N,j as e,H as M,L as d}from"./app-B0qTBAke.js";import{A as R,p as E,s as b,b as k,C as A,a as B,F as v,e as O}from"./app-sidebar-layout-DFKjANJB.js";import{B as m}from"./app-logo-icon-BPz3oRny.js";import{C as t,a as r,b as i,d as l,c as o}from"./card-D4UBhCKF.js";import{B as w}from"./badge-BfEjTxB-.js";import{P as V}from"./progress-BJrAwEC1.js";import{A as z}from"./activity-CyjuVwPD.js";import{P as y}from"./plus-ElTEKlBd.js";import{P as j}from"./play-0t7jn6oq.js";import{C as D}from"./circle-check-big-CLyWiRXH.js";import{R as C,T as _}from"./CategoricalChart-CLtTfdna.js";import{P as G,a as H}from"./PieChart-2tmSnxMh.js";import{C as K}from"./tooltipContext-yYpDDHz9.js";import{A as X,a as U}from"./AreaChart-ILOKZRIJ.js";import{C as Y,X as J,Y as q}from"./CartesianChart-ChuDHmPr.js";import{C as Q}from"./circle-x-DnCpljQ6.js";/* empty css            */import"./index-DDzTzhRc.js";import"./label-CjHZv5e4.js";import"./index-D-todNvr.js";import"./ActivePoints-DjRnBxyn.js";const F=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"],h={expedientes:"Expedientes",documentos:"Documentos",series:"Series Documentales",subseries:"Subseries",usuarios:"Usuarios",trd:"TRD",certificados:"Certificados",mixto:"Mixto"},W={pendiente:{icon:A,color:"bg-yellow-100 text-yellow-800",label:"Pendiente"},procesando:{icon:j,color:"bg-blue-100 text-blue-800",label:"Procesando"},completada:{icon:D,color:"bg-green-100 text-green-800",label:"Completada"},fallida:{icon:Q,color:"bg-red-100 text-red-800",label:"Fallida"},cancelada:{icon:B,color:"bg-gray-100 text-gray-800",label:"Cancelada"}};function be({estadisticas:n,estadisticasPorTipo:P,velocidad:p,importacionesRecientes:u,importacionesProcesando:f}){const[c,I]=N.useState(!0);N.useEffect(()=>{if(!c)return;const s=setInterval(()=>{window.location.reload()},3e4);return()=>clearInterval(s)},[c]);const g=Object.entries(P).map(([s,a])=>({name:h[s]||s,value:a,tipo:s})),T=[{dia:"Lun",importaciones:12},{dia:"Mar",importaciones:8},{dia:"Mié",importaciones:15},{dia:"Jue",importaciones:20},{dia:"Vie",importaciones:18},{dia:"Sáb",importaciones:5},{dia:"Dom",importaciones:3}],S=s=>{if(s<60)return`${s}s`;if(s<3600){const $=Math.floor(s/60),L=s%60;return`${$}m ${L}s`}const a=Math.floor(s/3600),x=Math.floor(s%3600/60);return`${a}h ${x}m`};return e.jsxs(R,{children:[e.jsx(M,{title:"Sistema de Migración e Importación"}),e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx(E,{className:"h-8 w-8 text-blue-600"}),"Sistema de Migración e Importación"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Gestiona la importación de datos desde diferentes fuentes y formatos"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:`h-4 w-4 ${c?"text-green-500":"text-gray-400"}`}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Auto-refresh ",c?"ON":"OFF"]}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>I(!c),children:c?"Pausar":"Activar"})]}),e.jsx(m,{asChild:!0,children:e.jsxs(d,{href:"/admin/importaciones/crear",children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Nueva Importación"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Total Importaciones"}),e.jsx(b,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.total}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",n.hoy," hoy"]})]})]}),e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"En Procesamiento"}),e.jsx(j,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n.procesando}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.pendientes," pendientes"]})]})]}),e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Completadas"}),e.jsx(D,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.completadas}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(n.completadas/n.total*100).toFixed(1),"% del total"]})]})]}),e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Velocidad Promedio"}),e.jsx(k,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:p.registros_por_minuto?Math.round(p.registros_por_minuto):0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"registros/min"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(i,{children:"Distribución por Tipo"}),e.jsx(o,{children:"Importaciones por tipo de datos"})]}),e.jsx(l,{children:e.jsx(C,{width:"100%",height:300,children:e.jsxs(G,{children:[e.jsx(H,{data:g,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:a})=>`${s} ${(a*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:g.map((s,a)=>e.jsx(K,{fill:F[a%F.length]},`cell-${a}`))}),e.jsx(_,{})]})})})]}),e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(i,{children:"Actividad de la Semana"}),e.jsx(o,{children:"Importaciones realizadas por día"})]}),e.jsx(l,{children:e.jsx(C,{width:"100%",height:300,children:e.jsxs(X,{data:T,children:[e.jsx(Y,{strokeDasharray:"3 3"}),e.jsx(J,{dataKey:"dia"}),e.jsx(q,{}),e.jsx(_,{}),e.jsx(U,{type:"monotone",dataKey:"importaciones",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6})]})})})]})]}),f.length>0&&e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5 text-blue-600"}),"Importaciones en Procesamiento"]}),e.jsx(o,{children:"Estado actual de las importaciones en curso"})]}),e.jsx(l,{children:e.jsx("div",{className:"space-y-4",children:f.map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{href:`/admin/importaciones/${s.id}`,className:"font-medium hover:underline",children:s.nombre}),e.jsx(w,{variant:"outline",children:h[s.tipo]})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.usuario.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{children:["Progreso: ",s.registros_procesados," / ",s.total_registros]}),e.jsxs("span",{className:"font-medium",children:[s.porcentaje_avance.toFixed(1),"%"]})]}),e.jsx(V,{value:s.porcentaje_avance,className:"h-2"}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Tiempo transcurrido: ",S(s.tiempo_transcurrido||0)]}),e.jsxs("span",{children:["Iniciado: ",new Date(s.fecha_inicio).toLocaleString()]})]})]})]},s.id))})})]}),e.jsxs(t,{children:[e.jsx(r,{children:e.jsxs(i,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5"}),"Importaciones Recientes"]}),e.jsx(d,{href:"/admin/importaciones/listado",children:e.jsx(m,{variant:"outline",size:"sm",children:"Ver todas"})})]})}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-3",children:[u.map(s=>{const a=W[s.estado],x=a?.icon||v;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx(d,{href:`/admin/importaciones/${s.id}`,className:"font-medium hover:underline",children:s.nombre}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{children:h[s.tipo]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:s.usuario.name}),e.jsx("span",{children:"•"}),e.jsx("span",{children:new Date(s.created_at).toLocaleDateString()})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right text-sm",children:[s.estado==="completada"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-green-600 font-medium",children:[s.registros_exitosos," exitosos"]}),s.registros_fallidos>0&&e.jsxs("div",{className:"text-red-600",children:[s.registros_fallidos," fallidos"]})]}),s.estado==="procesando"&&e.jsxs("div",{className:"text-blue-600 font-medium",children:[s.porcentaje_avance.toFixed(1),"%"]})]}),e.jsx(w,{className:a?.color,children:a?.label||s.estado})]})]},s.id)}),u.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(b,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No hay importaciones recientes"}),e.jsx("p",{className:"text-sm",children:"Crea tu primera importación para comenzar"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(t,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(d,{href:"/admin/importaciones/crear",children:e.jsxs(r,{className:"text-center",children:[e.jsx(y,{className:"h-8 w-8 mx-auto text-blue-600"}),e.jsx(i,{className:"text-lg",children:"Nueva Importación"}),e.jsx(o,{children:"Crear una nueva importación de datos"})]})})}),e.jsx(t,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(d,{href:"/admin/importaciones/listado",children:e.jsxs(r,{className:"text-center",children:[e.jsx(O,{className:"h-8 w-8 mx-auto text-green-600"}),e.jsx(i,{className:"text-lg",children:"Ver Todas"}),e.jsx(o,{children:"Gestionar todas las importaciones"})]})})}),e.jsx(t,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(d,{href:"/admin/documentos",children:e.jsxs(r,{className:"text-center",children:[e.jsx(v,{className:"h-8 w-8 mx-auto text-purple-600"}),e.jsx(i,{className:"text-lg",children:"Ver Documentos"}),e.jsx(o,{children:"Revisar documentos importados"})]})})})]})]})]})}export{be as default};
