import{r as j,j as e,H as E,b as g}from"./app-1TbR1aNv.js";import{A as R,S as A,t as m}from"./app-sidebar-layout-EVqXnw4l.js";import{B as i}from"./button-Bh8HL4t-.js";import{C as d,a as C,b,c as l,d as B}from"./card-CjIDma1Z.js";import{B as N}from"./badge-CahYhPrs.js";import{S as L}from"./switch-Dka0ICH_.js";import{A as G}from"./arrow-left-D4dywRtW.js";import{R as v}from"./rotate-ccw-8R-atUx2.js";import{S as y}from"./save-DD4v5MIX.js";import{S as H}from"./triangle-alert-Csu15FGV.js";import{U as T}from"./users-KtdTbN4b.js";/* empty css            */import"./index-DaDMCySO.js";import"./Combination-Bg4lGtaS.js";import"./index-DV8Rt-0p.js";import"./index-12rucE5D.js";import"./x-BA_bLoEE.js";import"./index-B37z7FM4.js";import"./app-logo-icon-D5sKSL8w.js";import"./input-B9S_DJNe.js";import"./label-CB51Zwfa.js";import"./user-Eo78Nm40.js";import"./mail-Dw8iYVcL.js";import"./folder-BrHeBlTR.js";import"./search-BY4VdWrh.js";import"./index-BRmIzMxm.js";function me({roles:o,configuraciones:U,configuracionesRoles:x}){const k=[{title:"Administración",href:"/admin"},{title:"Configuración",href:"/admin/configuracion"},{title:"Configuración por Roles",href:"/admin/configuracion/roles"}],[t,p]=j.useState(x),[u,c]=j.useState(!1),w=[{modulo:"documentos",nombre:"Gestión de Documentos",icon:e.jsx(H,{className:"h-5 w-5"}),configuraciones:[{key:"documentos_crear",nombre:"Crear documentos"},{key:"documentos_editar",nombre:"Editar documentos"},{key:"documentos_eliminar",nombre:"Eliminar documentos"},{key:"documentos_aprobar",nombre:"Aprobar documentos"}]},{modulo:"expedientes",nombre:"Expedientes Electrónicos",icon:e.jsx(T,{className:"h-5 w-5"}),configuraciones:[{key:"expedientes_crear",nombre:"Crear expedientes"},{key:"expedientes_cerrar",nombre:"Cerrar expedientes"},{key:"expedientes_transferir",nombre:"Transferir expedientes"}]},{modulo:"configuracion",nombre:"Configuración del Sistema",icon:e.jsx(A,{className:"h-5 w-5"}),configuraciones:[{key:"config_sistema",nombre:"Configuración del sistema"},{key:"config_usuarios",nombre:"Gestión de usuarios"},{key:"config_roles",nombre:"Configuración de roles"}]}],S=(s,a,r)=>{p(n=>({...n,[s]:{...n[s],[a]:r}})),c(!0)},f=()=>{g.put("/admin/configuracion/roles/update",{configuraciones:t},{onSuccess:()=>{m.success("Configuraciones guardadas exitosamente"),c(!1)},onError:()=>{m.error("Error al guardar las configuraciones")}})},h=()=>{p(x),c(!1),m.info("Cambios revertidos")},_=(s,a)=>t[s]?.[a]||!1;return e.jsxs(R,{breadcrumbs:k,children:[e.jsx(E,{title:"Configuración por Roles"}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(i,{variant:"outline",size:"icon",onClick:()=>g.visit("/admin/configuracion"),children:e.jsx(G,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Configuración por Roles"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Configura permisos específicos para cada rol del sistema"})]})]}),u&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{variant:"outline",onClick:h,children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Revertir"]}),e.jsxs(i,{onClick:f,children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Guardar Cambios"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:o.map(s=>e.jsxs(d,{children:[e.jsx(C,{className:"pb-2",children:e.jsx(b,{className:"text-sm font-medium text-gray-600",children:s.name})}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Object.values(t[s.id]||{}).filter(Boolean).length}),e.jsx("p",{className:"text-xs text-gray-500",children:"Permisos activos"})]})]},s.id))}),e.jsx("div",{className:"space-y-6",children:w.map(s=>e.jsxs(d,{children:[e.jsxs(C,{children:[e.jsxs(b,{className:"flex items-center gap-2",children:[s.icon,s.nombre]}),e.jsxs(B,{children:["Configuraciones específicas para el módulo de ",s.nombre.toLowerCase()]})]}),e.jsx(l,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Configuración"}),o.map(a=>e.jsx("th",{className:"text-center py-3 px-4 font-medium min-w-32",children:e.jsx(N,{variant:"outline",children:a.name})},a.id))]})}),e.jsx("tbody",{children:s.configuraciones.map(a=>e.jsxs("tr",{className:"border-b",children:[e.jsxs("td",{className:"py-3 px-4",children:[e.jsx("div",{className:"font-medium",children:a.nombre}),e.jsx("div",{className:"text-sm text-gray-500",children:a.key})]}),o.map(r=>e.jsx("td",{className:"py-3 px-4 text-center",children:e.jsx(L,{checked:_(r.id,a.key),onCheckedChange:n=>S(r.id,a.key,n)})},r.id))]},a.key))})]})})})]},s.modulo))}),u&&e.jsx(d,{children:e.jsx(l,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"destructive",children:"Cambios sin guardar"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Tienes cambios pendientes por guardar"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{variant:"outline",onClick:h,children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Revertir Cambios"]}),e.jsxs(i,{onClick:f,children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Guardar Configuraciones"]})]})]})})})]})]})}export{me as default};
