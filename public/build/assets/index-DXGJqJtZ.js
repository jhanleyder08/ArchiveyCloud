import{r as n,j as e,H as ce,b as g}from"./app-CsGFQ9fo.js";import{t as o,D as T,g as ne,a as k,b as A,c as O,d as I,T as R,e as M,k as v,l as b,m as N,n as f}from"./app-sidebar-layout-DRoVZ8H9.js";import{A as oe}from"./app-layout-DtYB-9J7.js";import{B as de}from"./badge-CGEk1Z-h.js";import{B as c}from"./button-C354X_oJ.js";import{I as y}from"./input-Ci5QH-R5.js";import{L as i}from"./label-jEdPJl0e.js";import{S as w,a as S,b as _,c as C,d as x}from"./select-Daz1HSyo.js";import{F as V}from"./Combination-DpDJaHHU.js";import{P as me}from"./plus-DD7N9Jcb.js";import{T as P,a as H}from"./toggle-right-CASfH_Ca.js";import{S as xe}from"./search-CxAGUSSs.js";import{D as he}from"./users-Csc6ExCa.js";import{E as pe}from"./eye-raWYdSr2.js";import{S as ue}from"./square-pen-C-ZBV5MC.js";import{C as je}from"./copy-DxIIZjxI.js";import{T as ge}from"./trash-2-CrniV93e.js";/* empty css            */import"./index-DVLoub_T.js";import"./index-DCumGQuK.js";import"./index-zDZkFwf-.js";import"./x-CofVFViK.js";import"./index-BJyWeQrl.js";import"./app-logo-icon-CeRHrYtQ.js";import"./user-B2EfEEQ1.js";import"./triangle-alert-CQKwObCB.js";import"./folder-BNTGtE4_.js";import"./index-DINk-cxY.js";import"./check-Syp36_sr.js";function Ue({data:h,series:$,areas:G,flash:u}){const[Q,U]=n.useState(""),[J,K]=n.useState("all"),[W,X]=n.useState("all"),[Y,Z]=n.useState("all"),[D,E]=n.useState(null),[ee,q]=n.useState(!1),[r,F]=n.useState(null),[t,z]=n.useState(null),[d,p]=n.useState({codigo:"",nombre:"",descripcion:"",serie_id:"",tiempo_archivo_gestion:0,tiempo_archivo_central:0,disposicion_final:"conservacion_permanente",area_responsable:"",procedimiento:"",metadatos_especificos:null,tipologias_documentales:null,observaciones:"",activa:!0}),[m,j]=n.useState({codigo:"",nombre:"",descripcion:"",serie_id:"",tiempo_archivo_gestion:0,tiempo_archivo_central:0,disposicion_final:"conservacion_permanente",area_responsable:"",procedimiento:"",metadatos_especificos:null,tipologias_documentales:null,observaciones:"",activa:!0});n.useEffect(()=>{u?.message&&o.success(u.message),u?.error&&o.error(u.error)},[u]),n.useEffect(()=>{r&&j({codigo:r.codigo||"",nombre:r.nombre||"",descripcion:r.descripcion||"",serie_id:r.serie_documental_id?.toString()||"",tiempo_archivo_gestion:r.tiempo_archivo_gestion||0,tiempo_archivo_central:r.tiempo_archivo_central||0,disposicion_final:r.disposicion_final||"conservacion_permanente",area_responsable:r.area_responsable||"",procedimiento:"",metadatos_especificos:null,tipologias_documentales:null,observaciones:r.observaciones||"",activa:r.activa??!0})},[r]);const se=[{title:"Dashboard",href:"/admin"},{title:"Subseries Documentales",href:"/admin/subseries"}],ae=s=>{g.delete(`/admin/subseries/${s.id}`,{onSuccess:()=>{E(null),o.success("Subserie documental eliminada exitosamente")},onError:a=>{const l=typeof a=="object"?Object.values(a)[0]:"Error al eliminar la subserie";o.error(l)}})},ie=s=>{g.post(`/admin/subseries/${s.id}/duplicate`,{},{onSuccess:()=>{o.success("Subserie documental duplicada exitosamente")},onError:a=>{const l=typeof a=="object"?Object.values(a)[0]:"Error al duplicar la subserie";o.error(l)}})},te=s=>{g.patch(`/admin/subseries/${s.id}/toggle-active`,{},{onSuccess:()=>{const a=s.activa?"desactivada":"activada";o.success(`Subserie documental ${a} exitosamente`)},onError:a=>{const l=typeof a=="object"?Object.values(a)[0]:"Error al cambiar el estado";o.error(l)}})},L=s=>s?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Activa"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Inactiva"}),re=s=>{const a={conservacion_permanente:"bg-green-100 text-green-800",eliminacion:"bg-red-100 text-red-800",seleccion:"bg-yellow-100 text-yellow-800",microfilmacion:"bg-blue-100 text-blue-800"};return e.jsx(de,{className:a[s]||"bg-gray-100 text-gray-800",children:s.replace("_"," ").toUpperCase()})},le=s=>new Date(s).toLocaleDateString("es-CO",{year:"numeric",month:"short",day:"numeric"});return e.jsxs(oe,{breadcrumbs:se,children:[e.jsx(ce,{title:"Subseries Documentales"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(V,{className:"h-6 w-6 text-[#2a3d83]"}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Gestión de Subseries Documentales"})]}),e.jsxs(T,{open:ee,onOpenChange:q,children:[e.jsx(ne,{asChild:!0,children:e.jsxs(c,{className:"flex items-center gap-2 px-4 py-2 bg-[#2a3d83] text-white rounded-lg hover:bg-[#1e2b5f] transition-colors",children:[e.jsx(me,{className:"h-4 w-4"}),"Nueva Subserie Documental"]})}),e.jsxs(k,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-scroll [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:[e.jsxs(A,{children:[e.jsx(O,{className:"text-xl font-semibold text-gray-900",children:"Crear Nueva Subserie Documental"}),e.jsx(I,{className:"text-sm text-gray-600",children:"Complete los siguientes datos para crear una nueva Subserie Documental."})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),g.post("/admin/subseries",d,{onSuccess:()=>{q(!1),p({codigo:"",nombre:"",descripcion:"",serie_id:"",tiempo_archivo_gestion:0,tiempo_archivo_central:0,disposicion_final:"conservacion_permanente",area_responsable:"",procedimiento:"",metadatos_especificos:null,tipologias_documentales:null,observaciones:"",activa:!0}),o.success("Subserie documental creada exitosamente")},onError:a=>{Object.keys(a).forEach(l=>{const B=Array.isArray(a[l])?a[l][0]:a[l];o.error(`Error en ${l}: ${B}`)})}})},className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"create-codigo",children:"Código"}),e.jsx(y,{id:"create-codigo",type:"text",value:d.codigo,onChange:s=>p({...d,codigo:s.target.value}),placeholder:"Ej: SER-001-001 (opcional, se genera automático)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"create-serie",children:"Serie Documental Asociada *"}),e.jsxs(w,{value:d.serie_id,onValueChange:s=>p({...d,serie_id:s}),children:[e.jsx(S,{children:e.jsx(_,{placeholder:"Seleccionar Serie"})}),e.jsx(C,{children:$.map(s=>e.jsxs(x,{value:s.id.toString(),children:[s.codigo," - ",s.nombre]},s.id))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"create-nombre",children:"Nombre *"}),e.jsx(y,{id:"create-nombre",type:"text",value:d.nombre,onChange:s=>p({...d,nombre:s.target.value}),placeholder:"Nombre de la subserie documental",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"create-descripcion",children:"Descripción *"}),e.jsx(R,{id:"create-descripcion",value:d.descripcion,onChange:s=>p({...d,descripcion:s.target.value}),placeholder:"Descripción de la subserie documental",rows:3,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"create-observaciones",children:"Observaciones"}),e.jsx(R,{id:"create-observaciones",value:d.observaciones,onChange:s=>p({...d,observaciones:s.target.value}),placeholder:"Observaciones adicionales (opcional)",rows:2})]}),e.jsxs(M,{children:[e.jsx(c,{type:"button",variant:"outline",onClick:()=>q(!1),children:"Cancelar"}),e.jsx(c,{type:"submit",className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",children:"Crear Subserie Documental"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Subseries"}),e.jsx("p",{className:"text-2xl font-bold text-[#2a3d83]",children:h.total})]}),e.jsx(V,{className:"h-8 w-8 text-[#2a3d83]"})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Activas"}),e.jsx("p",{className:"text-2xl font-bold text-[#2a3d83]",children:h.stats?.activas||0})]}),e.jsx(P,{className:"h-8 w-8 text-[#2a3d83]"})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Inactivas"}),e.jsx("p",{className:"text-2xl font-bold text-[#2a3d83]",children:h.stats?.inactivas||0})]}),e.jsx(H,{className:"h-8 w-8 text-[#2a3d83]"})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Con Expedientes"}),e.jsx("p",{className:"text-2xl font-bold text-[#2a3d83]",children:h.stats?.con_expedientes||0})]}),e.jsx(V,{className:"h-8 w-8 text-[#2a3d83]"})]})})]}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(y,{type:"text",placeholder:"Buscar por código, nombre o descripción...",value:Q,onChange:s=>U(s.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(w,{value:J,onValueChange:K,children:[e.jsx(S,{className:"w-full sm:w-48",children:e.jsx(_,{placeholder:"Filtrar por Serie"})}),e.jsxs(C,{children:[e.jsx(x,{value:"all",children:"Todas las Series"}),$.map(s=>e.jsxs(x,{value:s.id.toString(),children:[s.codigo," - ",s.nombre]},s.id))]})]}),e.jsxs(w,{value:W,onValueChange:X,children:[e.jsx(S,{className:"w-full sm:w-40",children:e.jsx(_,{placeholder:"Estado"})}),e.jsxs(C,{children:[e.jsx(x,{value:"all",children:"Todos los estados"}),e.jsx(x,{value:"activa",children:"Activa"}),e.jsx(x,{value:"inactiva",children:"Inactiva"})]})]}),e.jsxs(w,{value:Y,onValueChange:Z,children:[e.jsx(S,{className:"w-full sm:w-48",children:e.jsx(_,{placeholder:"Área Responsable"})}),e.jsxs(C,{children:[e.jsx(x,{value:"all",children:"Todas las áreas"}),G.map(s=>e.jsx(x,{value:s,children:s},s))]})]}),e.jsxs(c,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4"}),"Exportar"]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subserie Documental"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Serie Asociada"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expedientes"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(V,{className:"h-8 w-8 text-gray-300"}),e.jsx("p",{children:"No se encontraron subseries documentales"})]})})}):h.data.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.codigo}),e.jsx("div",{className:"text-sm text-gray-600 line-clamp-2",children:s.nombre})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900",children:s.serie?.codigo}),e.jsx("div",{className:"text-xs text-gray-500 line-clamp-1",children:s.serie?.nombre})]}),e.jsx("td",{className:"px-6 py-4",children:L(s.activa)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[s.expedientes_count||0," expedientes"]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(v,{children:e.jsxs(b,{children:[e.jsx(N,{asChild:!0,children:e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>z(s),children:e.jsx(pe,{className:"h-4 w-4"})})}),e.jsx(f,{children:"Ver detalles"})]})}),e.jsx(v,{children:e.jsxs(b,{children:[e.jsx(N,{asChild:!0,children:e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>F(s),children:e.jsx(ue,{className:"h-4 w-4"})})}),e.jsx(f,{children:"Editar"})]})}),e.jsx(v,{children:e.jsxs(b,{children:[e.jsx(N,{asChild:!0,children:e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>ie(s),children:e.jsx(je,{className:"h-4 w-4"})})}),e.jsx(f,{children:"Duplicar"})]})}),e.jsx(v,{children:e.jsxs(b,{children:[e.jsx(N,{asChild:!0,children:e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>te(s),children:s.activa?e.jsx(H,{className:"h-4 w-4 text-gray-500"}):e.jsx(P,{className:"h-4 w-4 text-green-500"})})}),e.jsx(f,{children:s.activa?"Desactivar":"Activar"})]})}),e.jsx(v,{children:e.jsxs(b,{children:[e.jsx(N,{asChild:!0,children:e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>E(s),className:"text-red-600 hover:text-red-700",children:e.jsx(ge,{className:"h-4 w-4"})})}),e.jsx(f,{children:"Eliminar"})]})})]})})]},s.id))})]})})}),r&&e.jsx(T,{open:!!r,onOpenChange:()=>F(null),children:e.jsxs(k,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-scroll [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:[e.jsxs(A,{children:[e.jsx(O,{children:"Editar Subserie Documental"}),e.jsx(I,{children:"Modifique los datos de la subserie documental."})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),g.patch(`/admin/subseries/${r.id}`,m,{onSuccess:()=>{F(null),o.success("Subserie documental actualizada exitosamente")},onError:a=>{Object.keys(a).forEach(l=>{const B=Array.isArray(a[l])?a[l][0]:a[l];o.error(`Error en ${l}: ${B}`)})}})},className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"edit-codigo",children:"Código *"}),e.jsx(y,{id:"edit-codigo",type:"text",value:m.codigo,onChange:s=>j({...m,codigo:s.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"edit-serie",children:"Serie Documental Asociada *"}),e.jsxs(w,{value:m.serie_id,onValueChange:s=>j({...m,serie_id:s}),children:[e.jsx(S,{children:e.jsx(_,{placeholder:"Seleccionar Serie"})}),e.jsx(C,{children:$.map(s=>e.jsxs(x,{value:s.id.toString(),children:[s.codigo," - ",s.nombre]},s.id))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"edit-nombre",children:"Nombre *"}),e.jsx(y,{id:"edit-nombre",type:"text",value:m.nombre,onChange:s=>j({...m,nombre:s.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"edit-descripcion",children:"Descripción *"}),e.jsx(R,{id:"edit-descripcion",value:m.descripcion,onChange:s=>j({...m,descripcion:s.target.value}),rows:3,required:!0})]}),e.jsxs(M,{children:[e.jsx(c,{type:"button",variant:"outline",onClick:()=>F(null),children:"Cancelar"}),e.jsx(c,{type:"submit",className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",children:"Actualizar Subserie"})]})]})]})}),t&&e.jsx(T,{open:!!t,onOpenChange:()=>z(null),children:e.jsxs(k,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-scroll [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:[e.jsxs(A,{children:[e.jsx(O,{children:"Detalles de la Subserie Documental"}),e.jsx(I,{children:"Información completa de la subserie documental."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-500",children:"Código"}),e.jsx("p",{className:"text-sm text-gray-900",children:t.codigo})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-500",children:"Estado"}),e.jsx("div",{className:"mt-1",children:L(t.activa)})]})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-500",children:"Nombre"}),e.jsx("p",{className:"text-sm text-gray-900",children:t.nombre})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-500",children:"Descripción"}),e.jsx("p",{className:"text-sm text-gray-900",children:t.descripcion})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-500",children:"Serie Documental Asociada"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[t.serie?.codigo," - ",t.serie?.nombre]}),t.serie?.trd&&e.jsxs("p",{className:"text-xs text-gray-500",children:["TRD: ",t.serie.trd.codigo," - ",t.serie.trd.nombre]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-500",children:"Tiempo Archivo Gestión"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[t.tiempo_archivo_gestion," años"]})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-500",children:"Tiempo Archivo Central"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[t.tiempo_archivo_central," años"]})]})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-500",children:"Disposición Final"}),e.jsx("div",{className:"mt-1",children:re(t.disposicion_final)})]}),t.area_responsable&&e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-500",children:"Área Responsable"}),e.jsx("p",{className:"text-sm text-gray-900",children:t.area_responsable})]}),t.observaciones&&e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-500",children:"Observaciones"}),e.jsx("p",{className:"text-sm text-gray-900",children:t.observaciones})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-500",children:"Expedientes"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[t.expedientes_count||0," expedientes"]})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-500",children:"Fecha de Creación"}),e.jsx("p",{className:"text-sm text-gray-900",children:le(t.created_at)})]})]})]}),e.jsx(M,{children:e.jsx(c,{onClick:()=>z(null),children:"Cerrar"})})]})}),D&&e.jsx(T,{open:!!D,onOpenChange:()=>E(null),children:e.jsxs(k,{className:"sm:max-w-[400px]",children:[e.jsxs(A,{children:[e.jsx(O,{className:"text-red-600",children:"Confirmar Eliminación"}),e.jsxs(I,{children:['¿Está seguro de que desea eliminar la subserie documental "',D.nombre,'"? Esta acción no se puede deshacer.']})]}),e.jsxs(M,{children:[e.jsx(c,{variant:"outline",onClick:()=>E(null),children:"Cancelar"}),e.jsx(c,{variant:"destructive",onClick:()=>ae(D),children:"Eliminar"})]})]})})]})]})}export{Ue as default};
