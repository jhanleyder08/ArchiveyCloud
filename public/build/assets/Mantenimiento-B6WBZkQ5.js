import{r as h,j as e,H as $,a as w}from"./app-B-PXR1Ni.js";import{A as Z,r as _,C as G,s as T,a as y,D as A,g as J,h as B,i as H,j as O,k as L,q as R,T as K,t as C,Z as Q}from"./app-sidebar-layout-D9ulO2li.js";import{c as I,B as n}from"./app-logo-icon-BLsuM4IN.js";import{C as c,a as o,b as d,d as l,c as k}from"./card-Dmlm_cpt.js";import{B as W}from"./badge-CNo-IL5x.js";import{P as S}from"./progress-CUNoMPit.js";import{A as X,a as Y}from"./alert-CjcJnkq6.js";import{A as ee}from"./arrow-left-DbMIHj5m.js";import{R as j}from"./refresh-cw-3XorCIzG.js";import{A as se}from"./activity-C6UpYrzU.js";import{T as ae}from"./trash-2-v8S4Iyw0.js";/* empty css            */import"./index-DsJw0RIA.js";import"./label-CcIhawib.js";import"./index-DARluDlH.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],re=I("Link",te);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]],g=I("Terminal",ie);function be({estadisticas_cache:q,comandos_disponibles:F}){const[u,f]=h.useState(null),[P,p]=h.useState(""),[U,N]=h.useState(!1),[t,V]=h.useState({php_version:"",laravel_version:"",node_version:"",database_size:0,storage_size:0,uptime:"",memory_usage:0,disk_usage:0}),m=q||{cache_size:0,cache_hits:0,cache_misses:0},v=F||{},E=s=>{if(s===0)return"0 Bytes";const a=1024,r=["Bytes","KB","MB","GB","TB"],i=Math.floor(Math.log(s)/Math.log(a));return parseFloat((s/Math.pow(a,i)).toFixed(2))+" "+r[i]},x=()=>{const s=m.cache_hits+m.cache_misses;return s===0?0:Math.round(m.cache_hits/s*100)},D=async s=>{const a=v[s];if(a){f(s),p(`Ejecutando comando...
`);try{await w.post(route("admin.configuracion.mantenimiento.comando"),{comando:a.comando},{onSuccess:r=>{p(i=>i+`
Comando ejecutado exitosamente!`),C.success(`Comando '${a.nombre}' ejecutado correctamente`)},onError:r=>{console.error("Command execution errors:",r),p(i=>i+`
Error ejecutando comando: `+JSON.stringify(r)),C.error(`Error ejecutando comando: ${a.nombre}`)},onFinish:()=>{f(null),N(!0)}})}catch(r){console.error("Error executing command:",r),p(i=>i+`
Error inesperado: `+r),C.error("Error inesperado ejecutando comando"),f(null)}}},b=s=>{switch(s){case"cache_clear":return e.jsx(ae,{className:"h-4 w-4"});case"config_cache":return e.jsx(_,{className:"h-4 w-4"});case"route_cache":return e.jsx(j,{className:"h-4 w-4"});case"optimize":return e.jsx(Q,{className:"h-4 w-4"});case"storage_link":return e.jsx(re,{className:"h-4 w-4"});default:return e.jsx(g,{className:"h-4 w-4"})}},M=s=>s.peligroso?"destructive":s.comando.includes("clear")?"secondary":"default",z=async()=>{V({php_version:"8.2.0",laravel_version:"10.0.0",node_version:"18.17.0",database_size:1024*1024*15,storage_size:1024*1024*250,uptime:"2 días, 14 horas",memory_usage:65,disk_usage:45})};return h.useEffect(()=>{z()},[]),e.jsxs(Z,{title:"Mantenimiento del Sistema",children:[e.jsx($,{title:"Mantenimiento del Sistema"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(n,{variant:"ghost",onClick:()=>w.get(route("admin.configuracion.index")),children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Volver"]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Mantenimiento del Sistema"}),e.jsx("p",{className:"text-muted-foreground",children:"Herramientas de optimización, caché y mantenimiento"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{variant:"outline",onClick:z,children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Actualizar Info"]}),e.jsxs(n,{variant:"outline",onClick:()=>w.reload(),children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Recargar"]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(c,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"PHP Version"}),e.jsx(_,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.php_version}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Runtime environment"})]})]}),e.jsxs(c,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Laravel Version"}),e.jsx(_,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.laravel_version}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Framework version"})]})]}),e.jsxs(c,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Uptime"}),e.jsx(G,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.uptime}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Sistema activo"})]})]}),e.jsxs(c,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Base de Datos"}),e.jsx(T,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:E(t.database_size)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tamaño total"})]})]})]}),e.jsxs(c,{children:[e.jsxs(o,{children:[e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5"}),"Estado del Sistema"]}),e.jsx(k,{children:"Monitoreo en tiempo real de recursos críticos"})]}),e.jsxs(l,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Uso de Memoria"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[t.memory_usage,"%"]})]}),e.jsx(S,{value:t.memory_usage,className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Uso de Disco"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[t.disk_usage,"%"]})]}),e.jsx(S,{value:t.disk_usage,className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Hit Rate de Cache"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[x(),"%"]})]}),e.jsx(S,{value:x(),className:"w-full"})]})]})]}),e.jsxs(c,{children:[e.jsxs(o,{children:[e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5"}),"Estadísticas de Cache"]}),e.jsx(k,{children:"Información sobre el rendimiento del sistema de caché"})]}),e.jsx(l,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:m.cache_hits.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Cache Hits"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:m.cache_misses.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Cache Misses"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:E(m.cache_size)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tamaño Total"})]})]})})]}),e.jsxs(c,{children:[e.jsxs(o,{children:[e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5"}),"Comandos de Mantenimiento"]}),e.jsx(k,{children:"Herramientas para optimización y mantenimiento del sistema"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"grid gap-4 md:grid-cols-1 lg:grid-cols-2",children:Object.entries(v).map(([s,a])=>e.jsx(c,{className:a.peligroso?"border-red-200":"",children:e.jsxs(l,{className:"pt-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[b(s),e.jsx("h4",{className:"font-medium",children:a.nombre}),a.peligroso&&e.jsxs(W,{variant:"destructive",className:"text-xs",children:[e.jsx(y,{className:"h-3 w-3 mr-1"}),"Cuidado"]})]})}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:a.descripcion}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("code",{className:"text-xs bg-muted px-2 py-1 rounded",children:a.comando}),a.peligroso?e.jsxs(A,{children:[e.jsx(J,{asChild:!0,children:e.jsxs(n,{variant:M(a),size:"sm",disabled:u===s,children:[u===s?e.jsx(j,{className:"h-4 w-4 animate-spin mr-2"}):b(s),"Ejecutar"]})}),e.jsxs(B,{children:[e.jsxs(H,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5 text-red-500"}),"Confirmar Comando Peligroso"]}),e.jsxs(L,{children:["Estás a punto de ejecutar: ",e.jsx("strong",{children:a.nombre}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("code",{className:"bg-muted p-2 rounded block mt-2",children:a.comando}),e.jsx("br",{}),a.descripcion,e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"¿Estás seguro de continuar?"})]})]}),e.jsxs(R,{children:[e.jsx(n,{variant:"outline",children:"Cancelar"}),e.jsx(n,{onClick:()=>D(s),className:"bg-red-600 hover:bg-red-700",children:"Sí, Ejecutar"})]})]})]}):e.jsxs(n,{variant:M(a),size:"sm",onClick:()=>D(s),disabled:u===s,children:[u===s?e.jsx(j,{className:"h-4 w-4 animate-spin mr-2"}):b(s),"Ejecutar"]})]})]})},s))}),Object.keys(v).length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(g,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No hay comandos disponibles"}),e.jsx("p",{className:"text-muted-foreground",children:"No se han configurado comandos de mantenimiento"})]})]})]}),(t.memory_usage>80||t.disk_usage>80||x()<70)&&e.jsxs(X,{className:"border-orange-200 bg-orange-50",children:[e.jsx(y,{className:"h-4 w-4"}),e.jsxs(Y,{children:[e.jsx("strong",{children:"Advertencias del sistema detectadas:"}),e.jsxs("ul",{className:"list-disc ml-4 mt-2",children:[t.memory_usage>80&&e.jsxs("li",{children:["Uso de memoria alto (",t.memory_usage,"%)"]}),t.disk_usage>80&&e.jsxs("li",{children:["Uso de disco alto (",t.disk_usage,"%)"]}),x()<70&&e.jsxs("li",{children:["Hit rate de cache bajo (",x(),"%)"]})]})]})]}),e.jsx(A,{open:U,onOpenChange:N,children:e.jsxs(B,{className:"max-w-2xl",children:[e.jsxs(H,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5"}),"Resultado del Comando"]}),e.jsx(L,{children:"Output de la ejecución del comando"})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(K,{value:P,readOnly:!0,className:"min-h-[200px] font-mono text-sm",placeholder:"No hay output disponible..."})}),e.jsx(R,{children:e.jsx(n,{onClick:()=>N(!1),children:"Cerrar"})})]})})]})]})}export{be as default};
