import{c as $e,r as l,j as e,H as Me,b as B,t as o}from"./app-BwzY5mdP.js";import{A as Te}from"./app-layout-9wS50XJ4.js";import{c as Re,B as a}from"./button-BuG7hErd.js";import{C as c,a as d,b as x,c as j,d as X}from"./card-R_fDv6wV.js";import{B as h}from"./badge-Bvq7KAn2.js";import{A as ze,G as R,F as se,D as S,a as D,b as E,c as V,d as k,T as Z,e as _,s as Ie,o as Le}from"./app-sidebar-layout-V4G_4O_u.js";import{I as F}from"./input-DBPsNB4E.js";import{L as m}from"./label-COs3lnS9.js";import{S as re,a as ae,b as ie,c as ne,d as v,C as qe}from"./select-FIAkf9pv.js";import{C as K}from"./circle-check-big-GkZlNnbA.js";import{C as Q}from"./circle-alert-DUM8TW_W.js";import{R as le}from"./rotate-ccw-DI8QOq8x.js";import{T as oe}from"./trash-2-Vuv8g9Jx.js";import{F as A}from"./Combination-DMdRKDdc.js";import{F as H}from"./folder-BDmHn7zE.js";import{D as te}from"./users-Bd_tJWgh.js";import{P as ce}from"./plus-BOYqNwH5.js";import{F as Oe}from"./file-spreadsheet-DtUzV4v6.js";import{S as Pe}from"./square-pen-B4ZLMNUx.js";import{F as Be}from"./folder-open-DBtEH33O.js";/* empty css            */import"./index-C39PKzMR.js";import"./index-BQN2DSxF.js";import"./index-DRfaZ5bA.js";import"./x-yj7I5XB9.js";import"./app-logo-icon-CWh3FBC5.js";import"./user-CGcDW0oZ.js";import"./mail-DcAASWb1.js";import"./triangle-alert-CwolSKvH.js";import"./search-DYmQja4G.js";import"./BrandingProvider-C7c3UgBn.js";import"./index-BeU68MN8.js";import"./check-BLssxijV.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],Je=Re("FileJson",He),de=({node:r,onEdit:$,onDelete:b,onAddChild:p})=>{const[f,M]=l.useState(!0),g=r.hijos&&r.hijos.length>0,J=u=>{switch(u){case"fondo":return e.jsx(Be,{className:"h-4 w-4 text-blue-600"});case"seccion":return e.jsx(H,{className:"h-4 w-4 text-green-600"});case"subseccion":return e.jsx(H,{className:"h-4 w-4 text-yellow-600"});case"serie":return e.jsx(A,{className:"h-4 w-4 text-purple-600"});case"subserie":return e.jsx(A,{className:"h-4 w-4 text-pink-600"});default:return e.jsx(A,{className:"h-4 w-4 text-gray-600"})}},w=u=>({fondo:"bg-blue-100 text-blue-800",seccion:"bg-green-100 text-green-800",subseccion:"bg-yellow-100 text-yellow-800",serie:"bg-purple-100 text-purple-800",subserie:"bg-pink-100 text-pink-800"})[u]||"bg-gray-100 text-gray-800";return e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"flex items-center gap-2 py-2 group hover:bg-gray-50 rounded-md px-2",children:[e.jsx("button",{onClick:()=>M(!f),className:"p-0.5 hover:bg-gray-200 rounded",disabled:!g,children:g?f?e.jsx(qe,{className:"h-4 w-4"}):e.jsx(Le,{className:"h-4 w-4"}):e.jsx("div",{className:"w-4 h-4"})}),J(r.tipo_nivel),e.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-sm",children:r.nombre}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",r.codigo,")"]}),e.jsx(h,{variant:"outline",className:`text-xs ${w(r.tipo_nivel)}`,children:r.tipo_nivel}),!r.activo&&e.jsx(h,{variant:"outline",className:"text-xs bg-red-100 text-red-800",children:"Inactivo"})]}),e.jsxs("div",{className:"hidden group-hover:flex items-center gap-1",children:[e.jsx(a,{size:"sm",variant:"ghost",onClick:()=>p(r),className:"h-7 w-7 p-0",children:e.jsx(ce,{className:"h-3 w-3"})}),e.jsx(a,{size:"sm",variant:"ghost",onClick:()=>$(r),className:"h-7 w-7 p-0",children:e.jsx(Pe,{className:"h-3 w-3"})}),e.jsx(a,{size:"sm",variant:"ghost",onClick:()=>b(r),className:"h-7 w-7 p-0 hover:bg-red-100 hover:text-red-600",children:e.jsx(oe,{className:"h-3 w-3"})})]})]}),f&&g&&e.jsx("div",{className:"border-l-2 border-gray-200 ml-2",children:r.hijos.map(u=>e.jsx(de,{node:u,onEdit:$,onDelete:b,onAddChild:p},u.id))})]})};function Ss({ccd:r,estructura:$,estadisticas:b,errores_validacion:p,trds_relacionadas:f=[],series_relacionadas:M=[]}){const g=$e({only:["ccd","estructura","estadisticas","errores_validacion","trds_relacionadas","series_relacionadas"]}),[J,w]=l.useState(!1),[u,T]=l.useState(!1),[xe,z]=l.useState(!1),[me,I]=l.useState(!1),[he,W]=l.useState(!1),[G,je]=l.useState(null),[U,ve]=l.useState(null),[pe,L]=l.useState(!1),[ge,q]=l.useState(!1),[N,O]=l.useState(null),[i,t]=l.useState({codigo:"",nombre:"",descripcion:"",tipo_nivel:"fondo",orden:0,activo:!0}),[C,P]=l.useState({version:"",cambios:""}),ue=[{title:"Dashboard",href:"/admin"},{title:"CCD",href:"/admin/ccd"},{title:r.nombre,href:`/admin/ccd/${r.id}`}],Y=s=>({borrador:"bg-gray-100 text-gray-800",activo:"bg-green-100 text-green-800",inactivo:"bg-red-100 text-red-800",archivado:"bg-yellow-100 text-yellow-800"})[s]||"bg-gray-100 text-gray-800",ee=(s=null)=>{je(s),t({codigo:"",nombre:"",descripcion:"",tipo_nivel:s?"seccion":"fondo",orden:0,activo:!0}),w(!0)},Ne=s=>{ve(s),t({codigo:s.codigo,nombre:s.nombre,descripcion:s.descripcion||"",tipo_nivel:s.tipo_nivel,orden:s.orden,activo:s.activo}),T(!0)},be=s=>{if(s.hijos&&s.hijos.length>0){o.error("No se puede eliminar un nivel que tiene hijos");return}g.destroy(`/admin/ccd/nivel/${s.id}`,{confirmMessage:`¿Está seguro de eliminar el nivel "${s.nombre}"?`,successMessage:"Nivel eliminado exitosamente",errorMessage:"Error al eliminar el nivel"})},fe=()=>{g.create(`/admin/ccd/${r.id}/nivel`,{...i,parent_id:G?.id||null},{successMessage:"Nivel agregado exitosamente",errorMessage:"Error al agregar nivel",onSuccess:()=>{w(!1),t({codigo:"",nombre:"",descripcion:"",tipo_nivel:"fondo",orden:0,activo:!0})}})},Ce=()=>{U&&g.update(`/admin/ccd/nivel/${U.id}`,i,{successMessage:"Nivel actualizado exitosamente",errorMessage:"Error al actualizar nivel",onSuccess:()=>{T(!1)}})},ye=()=>{if(p.length>0){o.error("No se puede aprobar: "+p.join(", "));return}g.create(`/admin/ccd/${r.id}/aprobar`,{},{successMessage:"CCD aprobado exitosamente",errorMessage:"Error al aprobar el CCD"})},we=async s=>{W(!0);try{const n=`/admin/ccd/${r.id}/exportar?formato=${s}`,y=document.createElement("a");y.href=n,y.download=`CCD_${r.codigo}_v${r.version}.${s==="excel"?"xlsx":s}`,document.body.appendChild(y),y.click(),document.body.removeChild(y),o.success(`Exportación en formato ${s.toUpperCase()} iniciada`),z(!1)}catch(n){console.error("Error al exportar:",n),o.error("Error al exportar el CCD")}finally{W(!1)}},Se=[{id:"json",name:"JSON",description:"Formato de datos estructurado, ideal para integración con otros sistemas",icon:Je,color:"text-yellow-600 bg-yellow-50"},{id:"csv",name:"CSV",description:"Valores separados por comas, compatible con Excel y hojas de cálculo",icon:A,color:"text-green-600 bg-green-50"},{id:"excel",name:"Excel (XLSX)",description:"Hoja de cálculo con formato y colores por tipo de nivel",icon:Oe,color:"text-emerald-600 bg-emerald-50"},{id:"pdf",name:"PDF",description:"Documento portable para impresión y archivo",icon:Ie,color:"text-red-600 bg-red-50"}],De=()=>{const n=(r.version||"1.0").split("."),y=parseInt(n[1]||"0")+1,Ae=`${n[0]}.${y}`;P({version:Ae,cambios:""}),I(!0)},Ee=()=>{if(!C.version.trim()){o.error("La versión es requerida");return}if(!C.cambios.trim()){o.error("Debe describir los cambios realizados");return}B.post(`/admin/ccd/${r.id}/version`,C,{onSuccess:()=>{o.success("Nueva versión creada exitosamente. El CCD requiere nueva aprobación."),I(!1),P({version:"",cambios:""})},onError:s=>{console.error("Errores:",s),o.error("Error al crear la nueva versión")}})},Ve=(s,n)=>{O({id:s,version:n}),L(!0)},ke=()=>{N&&B.delete(`/admin/ccd/version/${N.id}`,{onSuccess:()=>{o.success(`Versión ${N.version} eliminada exitosamente`),L(!1),O(null)},onError:()=>{o.error("Error al eliminar la versión")}})},_e=(s,n)=>{O({id:s,version:n}),q(!0)},Fe=()=>{N&&B.post(`/admin/ccd/${r.id}/revertir/${N.id}`,{},{onSuccess:()=>{o.success(`CCD revertido a versión ${N.version}`),q(!1),O(null)},onError:()=>{o.error("Error al revertir la versión")}})};return e.jsxs(Te,{breadcrumbs:ue,children:[e.jsx(Me,{title:`CCD - ${r.nombre}`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(a,{variant:"outline",onClick:()=>B.visit("/admin/ccd"),children:[e.jsx(ze,{className:"h-4 w-4 mr-2"}),"Volver"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:r.nombre}),e.jsxs("p",{className:"text-sm text-gray-500",children:[r.codigo," • Versión ",r.version]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:Y(r.estado),children:r.estado}),r.vigente&&e.jsxs(h,{className:"bg-green-100 text-green-800",children:[e.jsx(K,{className:"h-3 w-3 mr-1"}),"Vigente"]})]})]}),p.length>0&&e.jsxs(c,{className:"border-red-200 bg-red-50",children:[e.jsx(d,{children:e.jsxs(x,{className:"text-red-800 flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5"}),"Errores de Validación"]})}),e.jsx(j,{children:e.jsx("ul",{className:"list-disc list-inside space-y-1",children:p.map((s,n)=>e.jsx("li",{className:"text-sm text-red-700",children:s},n))})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(c,{children:[e.jsx(d,{className:"pb-2",children:e.jsx(x,{className:"text-sm font-medium text-gray-600",children:"Total Niveles"})}),e.jsx(j,{children:e.jsx("div",{className:"text-2xl font-bold text-[#2a3d83]",children:b.total_niveles})})]}),e.jsxs(c,{children:[e.jsx(d,{className:"pb-2",children:e.jsx(x,{className:"text-sm font-medium text-gray-600",children:"Niveles Activos"})}),e.jsx(j,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:b.niveles_activos})})]}),e.jsxs(c,{children:[e.jsx(d,{className:"pb-2",children:e.jsx(x,{className:"text-sm font-medium text-gray-600",children:"Profundidad Máxima"})}),e.jsx(j,{children:e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:b.profundidad_maxima})})]}),e.jsxs(c,{children:[e.jsx(d,{className:"pb-2",children:e.jsx(x,{className:"text-sm font-medium text-gray-600",children:"Vocabularios"})}),e.jsx(j,{children:e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:b.total_vocabularios})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(c,{className:r.estado==="borrador"?"border-orange-300 bg-orange-50":"border-green-300 bg-green-50",children:[e.jsx(d,{children:e.jsx(x,{className:"flex items-center gap-2",children:r.estado==="borrador"?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"h-5 w-5 text-orange-600"}),e.jsx("span",{className:"text-orange-800",children:"Versión en Borrador"})]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-green-800",children:"Versión Aprobada"})]})})}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Versión:"}),e.jsxs(h,{className:"bg-purple-100 text-purple-800 text-lg px-3",children:["v",r.version]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Estado:"}),e.jsx(h,{className:Y(r.estado),children:r.estado==="borrador"?"Pendiente de Aprobación":r.estado})]}),r.fecha_aprobacion&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Fecha Aprobación:"}),e.jsx("span",{className:"text-sm",children:new Date(r.fecha_aprobacion).toLocaleDateString("es-ES")})]}),r.aprobador&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Aprobado por:"}),e.jsx("span",{className:"text-sm",children:r.aprobador.name})]}),r.estado==="borrador"&&e.jsx("div",{className:"mt-4 p-3 bg-orange-100 rounded-lg",children:e.jsxs("p",{className:"text-sm text-orange-800",children:[e.jsx("strong",{children:"⚠️ Esta versión requiere aprobación."})," Una vez aprobada, estará disponible para su uso en el sistema."]})})]})})]}),e.jsxs(c,{children:[e.jsx(d,{children:e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5 text-[#2a3d83]"}),"Historial de Versiones"]})}),e.jsx(j,{children:r.versiones&&r.versiones.length>0?e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:r.versiones.map((s,n)=>e.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg ${s.version_nueva===r.version?"bg-orange-50 border border-orange-200":"bg-gray-50"}`,children:[e.jsx("div",{className:`flex-shrink-0 w-8 h-8 text-white rounded-full flex items-center justify-center text-xs font-bold ${s.version_nueva===r.version?"bg-orange-500":"bg-[#2a3d83]"}`,children:n+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{variant:"outline",className:"text-xs",children:["v",s.version_anterior," → v",s.version_nueva]}),s.version_nueva===r.version&&e.jsx(h,{className:"bg-orange-100 text-orange-800 text-xs",children:"Actual"}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(s.created_at).toLocaleDateString("es-ES")})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(a,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-blue-600 hover:text-blue-800 hover:bg-blue-50",onClick:()=>_e(s.id,s.version_anterior),title:`Revertir a v${s.version_anterior}`,children:e.jsx(le,{className:"h-3.5 w-3.5"})}),e.jsx(a,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-red-600 hover:text-red-800 hover:bg-red-50",onClick:()=>Ve(s.id,s.version_nueva),title:"Eliminar versión",children:e.jsx(oe,{className:"h-3.5 w-3.5"})})]})]}),e.jsx("p",{className:"text-sm text-gray-700 mt-1",children:s.cambios}),s.modificador&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Por: ",s.modificador.name]})]})]},s.id))}):e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(R,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No hay historial de versiones"}),e.jsx("p",{className:"text-xs",children:"Esta es la versión inicial del CCD"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(c,{children:[e.jsx(d,{className:"flex flex-row items-center justify-between",children:e.jsxs("div",{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5 text-[#2a3d83]"}),"TRDs Relacionadas"]}),e.jsxs(X,{children:["Tablas de Retención vinculadas a este CCD (",f.length,")"]})]})}),e.jsx(j,{children:f.length>0?e.jsx("div",{className:"space-y-2",children:f.map(s=>e.jsxs("a",{href:`/admin/trd/${s.id}`,className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 hover:border-[#2a3d83] transition-all",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.nombre}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.codigo," • v",s.version]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{variant:"secondary",className:"text-xs",children:[s.series_count," series"]}),e.jsx(h,{className:s.estado==="vigente"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:s.estado})]})]},s.id))}):e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(A,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"text-sm",children:"No hay TRDs relacionadas"}),e.jsx("a",{href:"/admin/trd",className:"text-[#2a3d83] text-sm hover:underline mt-1 inline-block",children:"Ver todas las TRDs"})]})})]}),e.jsxs(c,{children:[e.jsx(d,{className:"flex flex-row items-center justify-between",children:e.jsxs("div",{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5 text-purple-600"}),"Series Relacionadas"]}),e.jsxs(X,{children:["Series documentales vinculadas a este CCD (",M.length,")"]})]})}),e.jsx(j,{children:M.length>0?e.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:M.map(s=>e.jsxs("a",{href:`/admin/series/${s.id}`,className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 hover:border-purple-300 transition-all",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.nombre}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.codigo," • ",s.trd_nombre]})]}),e.jsxs(h,{variant:"secondary",className:"text-xs",children:[s.subseries_count," subseries"]})]},s.id))}):e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(H,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"text-sm",children:"No hay series relacionadas"}),e.jsx("a",{href:"/admin/series",className:"text-purple-600 text-sm hover:underline mt-1 inline-block",children:"Ver todas las series"})]})})]})]}),e.jsx(c,{children:e.jsx(d,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(x,{children:"Acciones"}),e.jsxs("div",{className:"flex items-center gap-2",children:[r.estado==="borrador"&&p.length===0&&e.jsxs(a,{onClick:ye,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),r.versiones&&r.versiones.length>0?"Aprobar Versión":"Aprobar CCD"]}),e.jsxs(a,{variant:"outline",onClick:()=>z(!0),children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Exportar"]}),e.jsxs(a,{variant:"outline",onClick:De,children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Nueva Versión"]})]})]})})}),e.jsxs(c,{children:[e.jsx(d,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5"}),"Estructura Jerárquica"]}),e.jsx(X,{children:"Gestione la estructura del cuadro de clasificación documental"})]}),e.jsxs(a,{onClick:()=>ee(null),className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),"Agregar Nivel Raíz"]})]})}),e.jsx(j,{children:$.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(se,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No hay niveles configurados aún"}),e.jsx("p",{className:"text-sm",children:"Comience agregando un nivel raíz (Fondo)"})]}):e.jsx("div",{className:"space-y-1",children:$.map(s=>e.jsx(de,{node:s,onEdit:Ne,onDelete:be,onAddChild:ee},s.id))})})]}),e.jsx(S,{open:J,onOpenChange:w,children:e.jsxs(D,{children:[e.jsxs(E,{children:[e.jsx(V,{children:"Agregar Nuevo Nivel"}),e.jsx(k,{children:G?`Agregar nivel hijo a: ${G.nombre}`:"Agregar nivel raíz al CCD"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Código*"}),e.jsx(F,{value:i.codigo,onChange:s=>t({...i,codigo:s.target.value}),placeholder:"Ej: FOND-01"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Tipo*"}),e.jsxs(re,{value:i.tipo_nivel,onValueChange:s=>t({...i,tipo_nivel:s}),children:[e.jsx(ae,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(v,{value:"fondo",children:"Fondo"}),e.jsx(v,{value:"seccion",children:"Sección"}),e.jsx(v,{value:"subseccion",children:"Subsección"}),e.jsx(v,{value:"serie",children:"Serie"}),e.jsx(v,{value:"subserie",children:"Subserie"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Nombre*"}),e.jsx(F,{value:i.nombre,onChange:s=>t({...i,nombre:s.target.value}),placeholder:"Nombre del nivel"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Descripción"}),e.jsx(Z,{value:i.descripcion,onChange:s=>t({...i,descripcion:s.target.value}),placeholder:"Descripción opcional",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Orden"}),e.jsx(F,{type:"number",value:i.orden,onChange:s=>t({...i,orden:parseInt(s.target.value)||0})})]})]}),e.jsxs(_,{children:[e.jsx(a,{variant:"outline",onClick:()=>w(!1),children:"Cancelar"}),e.jsx(a,{onClick:fe,className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",children:"Agregar Nivel"})]})]})}),e.jsx(S,{open:u,onOpenChange:T,children:e.jsxs(D,{children:[e.jsxs(E,{children:[e.jsx(V,{children:"Editar Nivel"}),e.jsxs(k,{children:["Modificar información del nivel ",U?.nombre]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Código*"}),e.jsx(F,{value:i.codigo,onChange:s=>t({...i,codigo:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Tipo*"}),e.jsxs(re,{value:i.tipo_nivel,onValueChange:s=>t({...i,tipo_nivel:s}),children:[e.jsx(ae,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(v,{value:"fondo",children:"Fondo"}),e.jsx(v,{value:"seccion",children:"Sección"}),e.jsx(v,{value:"subseccion",children:"Subsección"}),e.jsx(v,{value:"serie",children:"Serie"}),e.jsx(v,{value:"subserie",children:"Subserie"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Nombre*"}),e.jsx(F,{value:i.nombre,onChange:s=>t({...i,nombre:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Descripción"}),e.jsx(Z,{value:i.descripcion,onChange:s=>t({...i,descripcion:s.target.value}),rows:3})]})]}),e.jsxs(_,{children:[e.jsx(a,{variant:"outline",onClick:()=>T(!1),children:"Cancelar"}),e.jsx(a,{onClick:Ce,className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",children:"Actualizar Nivel"})]})]})}),e.jsx(S,{open:xe,onOpenChange:z,children:e.jsxs(D,{className:"sm:max-w-md",children:[e.jsxs(E,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5 text-[#2a3d83]"}),"Exportar CCD"]}),e.jsx(k,{children:"Seleccione el formato en el que desea exportar el Cuadro de Clasificación Documental"})]}),e.jsx("div",{className:"grid gap-3 py-4",children:Se.map(s=>{const n=s.icon;return e.jsxs("button",{onClick:()=>we(s.id),disabled:he,className:"flex items-start gap-4 p-4 border rounded-lg hover:border-[#2a3d83] hover:bg-gray-50 transition-all text-left disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.color}`,children:e.jsx(n,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.description})]})]},s.id)})}),e.jsx(_,{children:e.jsx(a,{variant:"outline",onClick:()=>z(!1),children:"Cancelar"})})]})}),e.jsx(S,{open:me,onOpenChange:I,children:e.jsxs(D,{className:"sm:max-w-md",children:[e.jsxs(E,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5 text-[#2a3d83]"}),"Crear Nueva Versión"]}),e.jsxs(k,{children:['Cree una nueva versión del CCD "',r.nombre,'". La versión actual es ',r.version,"."]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"version",children:"Nueva Versión *"}),e.jsx(F,{id:"version",value:C.version,onChange:s=>P({...C,version:s.target.value}),placeholder:"Ej: 2.0, 1.1, etc."}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Versión actual: ",r.version]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"cambios",children:"Descripción de Cambios *"}),e.jsx(Z,{id:"cambios",value:C.cambios,onChange:s=>P({...C,cambios:s.target.value}),placeholder:"Describa los cambios realizados en esta versión...",rows:4})]})]}),e.jsxs(_,{children:[e.jsx(a,{variant:"outline",onClick:()=>I(!1),children:"Cancelar"}),e.jsxs(a,{onClick:Ee,className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Crear Versión"]})]})]})}),e.jsx(S,{open:pe,onOpenChange:L,children:e.jsxs(D,{children:[e.jsxs(E,{children:[e.jsxs(V,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(Q,{className:"h-5 w-5"}),"Eliminar Versión"]}),e.jsxs(k,{children:["¿Está seguro de eliminar la versión ",e.jsx("strong",{children:N?.version}),"?",e.jsx("br",{}),e.jsx("br",{}),"Esta acción no se puede deshacer. Si es la versión actual, el CCD volverá al estado de la versión anterior."]})]}),e.jsxs(_,{children:[e.jsx(a,{variant:"outline",onClick:()=>L(!1),children:"Cancelar"}),e.jsx(a,{onClick:ke,variant:"destructive",children:"Sí, eliminar versión"})]})]})}),e.jsx(S,{open:ge,onOpenChange:q,children:e.jsxs(D,{children:[e.jsxs(E,{children:[e.jsxs(V,{className:"flex items-center gap-2 text-blue-600",children:[e.jsx(le,{className:"h-5 w-5"}),"Revertir a Versión Anterior"]}),e.jsxs(k,{children:["¿Está seguro de revertir a la versión ",e.jsx("strong",{children:N?.version}),"?",e.jsx("br",{}),e.jsx("br",{}),"Se creará un nuevo registro de versión. El CCD volverá a estado ",e.jsx("strong",{children:"borrador"})," y requerirá nueva aprobación."]})]}),e.jsxs(_,{children:[e.jsx(a,{variant:"outline",onClick:()=>q(!1),children:"Cancelar"}),e.jsx(a,{onClick:Fe,className:"bg-blue-600 hover:bg-blue-700",children:"Sí, revertir versión"})]})]})})]})]})}export{Ss as default};
