import{j as e,H as k}from"./app-BQTi1tix.js";import{A as K}from"./app-layout-DInPGpPa.js";import{C as i,a as l,b as d,c as n,d as o}from"./card-DT9hPMwR.js";import{B as y}from"./badge-C3VR8LKO.js";import{P as j}from"./progress-D6Jm_8uJ.js";import{T as H,a as I,b as x,c as m}from"./tabs-SdbgyzCY.js";import{A as v}from"./activity-pAdlqtfO.js";import{j as _,C as O}from"./app-sidebar-layout-BqUV8IOl.js";import{F as P}from"./Combination-ChugFezL.js";import{C as T}from"./circle-check-big-DxPUV4j7.js";import{H as $}from"./hard-drive-CblqU4RF.js";import{R as u,T as p}from"./CategoricalChart-CeKCnDHq.js";import{A as G,a as X}from"./AreaChart-Dsrqvjmv.js";import{C,X as w,Y as f}from"./CartesianChart-DK22leoQ.js";import{L as A}from"./Legend-lr_cnlQR.js";import{P as Y,a as z}from"./PieChart-DzLFISn5.js";import{C as U}from"./tooltipContext-C8hvsWFx.js";import{L as V}from"./LineChart-CumTZ0NB.js";import{B as q}from"./barSelectors-B-Dlt3XR.js";import{L as J}from"./Line-DXjIKgsc.js";/* empty css            */import"./button-jbMTrknk.js";import"./index-CG-EXtn0.js";import"./index-P1psqDm4.js";import"./index-GsiYYk_T.js";import"./x-BCECMJer.js";import"./index-Cr43teK3.js";import"./app-logo-icon-D5w3FSZ6.js";import"./input-Cc9jF3XX.js";import"./label-DM-KQF7g.js";import"./user-DhAq0Tlb.js";import"./triangle-alert-BhoOSpsi.js";import"./users-DiCSiRim.js";import"./folder-PlDrKnWl.js";import"./search-912_Z_K3.js";import"./ActivePoints-CpyGtpkr.js";const D=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"],B={abierto:"#22C55E",tramite:"#3B82F6",revision:"#F59E0B",cerrado:"#6B7280",archivado:"#8B5CF6"};function Re({metricas:a,expedientesPorEstado:h,documentosPorTipo:b,seriesMasUsadas:E,actividadReciente:M,cumplimientoTrd:t,estadisticasAlmacenamiento:F}){const L=Object.keys(h).reduce((s,r)=>(h[r].forEach(c=>{const g=s.find(S=>S.mes===c.mes);g?g[r]=c.total:s.push({mes:c.mes,[r]:c.total})}),s),[]).sort((s,r)=>s.mes.localeCompare(r.mes)),R=F.map(s=>({mes:s.mes,documentos:s.documentos,tamaño_mb:Math.round(s.tamaño_total/(1024*1024))})),N=Math.round(t.series_documentadas/t.total_series*100);return e.jsxs(K,{children:[e.jsx(k,{title:"Dashboard Ejecutivo - Reportes"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard Ejecutivo"}),e.jsx("p",{className:"text-muted-foreground",children:"Métricas y estadísticas del sistema documental"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(y,{variant:"outline",className:"flex items-center space-x-1",children:[e.jsx(v,{className:"h-3 w-3"}),e.jsx("span",{children:"Tiempo real"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[e.jsxs(i,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Total Expedientes"}),e.jsx(_,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.total_expedientes.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.expedientes_abiertos," abiertos"]})]})]}),e.jsxs(i,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Total Documentos"}),e.jsx(P,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.total_documentos.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",a.documentos_mes_actual," este mes"]})]})]}),e.jsxs(i,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Expedientes Abiertos"}),e.jsx(T,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.expedientes_abiertos}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(a.expedientes_abiertos/a.total_expedientes*100),"% del total"]})]})]}),e.jsxs(i,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Expedientes Cerrados"}),e.jsx(_,{className:"h-4 w-4 text-gray-500"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.expedientes_cerrados}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(a.expedientes_cerrados/a.total_expedientes*100),"% del total"]})]})]}),e.jsxs(i,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Almacenamiento"}),e.jsx($,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[a.tamaño_total_gb," GB"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(a.tamaño_total_gb/a.total_documentos*1024)," MB promedio"]})]})]}),e.jsxs(i,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Cumplimiento TRD"}),e.jsx(O,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[N,"%"]}),e.jsx(j,{value:N,className:"mt-1"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsx(d,{children:"Expedientes por Estado (Últimos 12 meses)"}),e.jsx(o,{children:"Evolución temporal de los expedientes"})]}),e.jsx(n,{children:e.jsx(u,{width:"100%",height:300,children:e.jsxs(G,{data:L,children:[e.jsx(C,{strokeDasharray:"3 3"}),e.jsx(w,{dataKey:"mes"}),e.jsx(f,{}),e.jsx(p,{}),e.jsx(A,{}),Object.keys(h).map((s,r)=>e.jsx(X,{type:"monotone",dataKey:s,stackId:"1",stroke:B[s],fill:B[s],fillOpacity:.6},s))]})})})]}),e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsx(d,{children:"Documentos por Tipo"}),e.jsx(o,{children:"Distribución de tipos documentales"})]}),e.jsx(n,{children:e.jsx(u,{width:"100%",height:300,children:e.jsxs(Y,{children:[e.jsx(z,{data:b.slice(0,6),cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:r})=>`${s}: ${(r*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"total",children:b.slice(0,6).map((s,r)=>e.jsx(U,{fill:D[r%D.length]},`cell-${r}`))}),e.jsx(p,{})]})})})]})]}),e.jsxs(H,{defaultValue:"series",className:"space-y-4",children:[e.jsxs(I,{className:"grid w-full grid-cols-4",children:[e.jsx(x,{value:"series",children:"Series más usadas"}),e.jsx(x,{value:"actividad",children:"Actividad reciente"}),e.jsx(x,{value:"cumplimiento",children:"Cumplimiento TRD"}),e.jsx(x,{value:"almacenamiento",children:"Almacenamiento"})]}),e.jsx(m,{value:"series",className:"space-y-4",children:e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsx(d,{children:"Series Documentales más Utilizadas"}),e.jsx(o,{children:"Series con mayor número de expedientes"})]}),e.jsx(n,{children:e.jsx("div",{className:"space-y-3",children:E.slice(0,10).map((s,r)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-primary text-primary-foreground rounded-full text-sm",children:r+1}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.codigo}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.nombre})]})]}),e.jsxs(y,{variant:"secondary",children:[s.expedientes_count," expedientes"]})]},s.id))})})]})}),e.jsx(m,{value:"actividad",className:"space-y-4",children:e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsx(d,{children:"Actividad Reciente"}),e.jsx(o,{children:"Últimas 20 acciones en el sistema"})]}),e.jsx(n,{children:e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:M.slice(0,20).map(s=>e.jsxs("div",{className:"flex items-start space-x-3 pb-3 border-b last:border-b-0",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(v,{className:"h-4 w-4 text-muted-foreground mt-1"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium",children:s.accion}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.fecha_relativa})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Por: ",s.usuario," en ",s.tabla_afectada]}),s.descripcion&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s.descripcion})]})]},s.id))})})]})}),e.jsx(m,{value:"cumplimiento",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsx(d,{children:"Cumplimiento de Series"}),e.jsx(o,{children:"Series documentadas vs. total"})]}),e.jsxs(n,{children:[e.jsxs("div",{className:"text-3xl font-bold mb-2",children:[t.series_documentadas," / ",t.total_series]}),e.jsx(j,{value:t.series_documentadas/t.total_series*100,className:"mb-2"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[Math.round(t.series_documentadas/t.total_series*100),"% de series tienen expedientes"]})]})]}),e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsx(d,{children:"Cumplimiento de Subseries"}),e.jsx(o,{children:"Subseries documentadas vs. total"})]}),e.jsxs(n,{children:[e.jsxs("div",{className:"text-3xl font-bold mb-2",children:[t.subseries_documentadas," / ",t.total_subseries]}),e.jsx(j,{value:t.subseries_documentadas/t.total_subseries*100,className:"mb-2"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[Math.round(t.subseries_documentadas/t.total_subseries*100),"% de subseries tienen expedientes"]})]})]})]})}),e.jsx(m,{value:"almacenamiento",className:"space-y-4",children:e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsx(d,{children:"Crecimiento de Almacenamiento"}),e.jsx(o,{children:"Evolución del almacenamiento por mes"})]}),e.jsx(n,{children:e.jsx(u,{width:"100%",height:300,children:e.jsxs(V,{data:R,children:[e.jsx(C,{strokeDasharray:"3 3"}),e.jsx(w,{dataKey:"mes"}),e.jsx(f,{yAxisId:"left"}),e.jsx(f,{yAxisId:"right",orientation:"right"}),e.jsx(p,{}),e.jsx(A,{}),e.jsx(q,{yAxisId:"left",dataKey:"documentos",fill:"#8884d8",name:"Documentos"}),e.jsx(J,{yAxisId:"right",type:"monotone",dataKey:"tamaño_mb",stroke:"#82ca9d",name:"Tamaño (MB)"})]})})})]})})]})]})]})}export{Re as default};
