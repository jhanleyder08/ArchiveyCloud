import{r as C,u as M,j as e,H as z,L as F,b as N}from"./app-D_nhLBVs.js";import{A as G}from"./app-layout-BBCk8sLf.js";import{B as l}from"./button-5PO8E2Gr.js";import{I as m}from"./input-C2DVpLXz.js";import{L as d}from"./label-pwez-fjR.js";import{D as K,f as R,a as U,b as J,c as Q,d as W,T as X,e as Y,t as y,F as Z}from"./app-sidebar-layout-Ch1OLC1D.js";import{B as x}from"./badge-CUC0ivSm.js";import{C as h,a as p,b as j,c as g}from"./card-B0XBXBK_.js";import{S as E,a as T,b as B,c as A,d as u}from"./select-CTAVPAs1.js";import{P as ee}from"./plus-CZubTfOl.js";import{S as se}from"./save-dTP6nM3L.js";import{C as ae}from"./circle-check-big-ppNis1UI.js";import{C as re}from"./circle-alert-X_P8kcFn.js";import{T as te}from"./users-ChWb6yQC.js";import{S as ie}from"./search-CR_HWK70.js";import{F as ce}from"./Combination-BBrg-2vl.js";import{E as le}from"./eye-xEYv2O5o.js";import{S as oe}from"./square-pen-B5nyQAIH.js";/* empty css            */import"./index-Cs15bWbc.js";import"./index-BhyfJTRb.js";import"./index-DRZUzGnC.js";import"./x-DhhaTQBb.js";import"./index-DBT7swVZ.js";import"./app-logo-icon-6Gcvl5L8.js";import"./user-yM4TaNEp.js";import"./triangle-alert-LpuN_XKs.js";import"./folder-Dj6_UGEO.js";import"./index-BkxHgMIv.js";import"./check-CcswVI2x.js";function Pe({ccds:r,estadisticas:v,filters:_,opciones:k}){const[o,I]=C.useState(_?.search||""),[c,H]=C.useState(_?.estado||"all"),[L,b]=C.useState(!1),{data:i,setData:n,post:V,processing:D,errors:a,reset:w}=M({codigo:"",nombre:"",descripcion:"",version:"",fecha_vigencia_inicio:"",fecha_vigencia_fin:"",estado:"borrador"}),$=k||{estados:[{value:"borrador",label:"Borrador"},{value:"activo",label:"Activo"},{value:"inactivo",label:"Inactivo"},{value:"historico",label:"Histórico"}]},S=()=>{const s={};o.trim()&&(s.search=o.trim()),c&&c!=="all"&&(s.estado=c),N.get("/admin/ccd",s,{preserveState:!1,preserveScroll:!1,replace:!0})},O=s=>{H(s);const t={};o.trim()&&(t.search=o.trim()),s&&s!=="all"&&(t.estado=s),N.get("/admin/ccd",t,{preserveState:!1,preserveScroll:!1,replace:!0})},P=s=>({borrador:e.jsx(x,{variant:"secondary",className:"bg-gray-100 text-gray-800",children:"Borrador"}),activo:e.jsx(x,{variant:"default",className:"bg-green-100 text-green-800",children:"Activo"}),inactivo:e.jsx(x,{variant:"destructive",className:"bg-red-100 text-red-800",children:"Inactivo"}),historico:e.jsx(x,{variant:"outline",className:"bg-blue-100 text-blue-800",children:"Histórico"})})[s]||e.jsx(x,{children:s});return e.jsxs(G,{children:[e.jsx(z,{title:"Cuadros de Clasificación Documental"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Cuadros de Clasificación Documental"}),e.jsx("p",{className:"text-muted-foreground",children:"Gestión de cuadros de clasificación documental del sistema"})]}),e.jsxs(K,{open:L,onOpenChange:b,children:[e.jsx(R,{asChild:!0,children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),"Nuevo CCD"]})}),e.jsxs(U,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(J,{children:[e.jsx(Q,{className:"text-xl font-semibold text-gray-900",children:"Crear Nuevo Cuadro de Clasificación Documental"}),e.jsx(W,{className:"text-sm text-gray-600",children:"Complete los siguientes datos para crear un nuevo CCD."})]}),e.jsxs("form",{onSubmit:s=>{if(s.preventDefault(),!i.codigo||!i.nombre){y.error("Por favor complete los campos requeridos");return}V("/admin/ccd",{onSuccess:()=>{b(!1),w(),y.success("CCD creado exitosamente")},onError:t=>{console.error("Error al crear CCD:",t),t&&Object.keys(t).forEach(f=>{const q=Array.isArray(t[f])?t[f][0]:t[f];y.error(`Error en ${f}: ${q}`)})}})},className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"create-codigo",children:"Código *"}),e.jsx(m,{id:"create-codigo",type:"text",value:i.codigo,onChange:s=>n("codigo",s.target.value),placeholder:"Ej: CCD-001",required:!0,className:a.codigo?"border-red-500":""}),a.codigo&&e.jsx("p",{className:"text-sm text-red-600",children:a.codigo})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"create-version",children:"Versión"}),e.jsx(m,{id:"create-version",type:"text",value:i.version,onChange:s=>n("version",s.target.value),placeholder:"Ej: 1.0",className:a.version?"border-red-500":""}),a.version&&e.jsx("p",{className:"text-sm text-red-600",children:a.version})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"create-nombre",children:"Nombre *"}),e.jsx(m,{id:"create-nombre",type:"text",value:i.nombre,onChange:s=>n("nombre",s.target.value),placeholder:"Nombre del CCD",required:!0,className:a.nombre?"border-red-500":""}),a.nombre&&e.jsx("p",{className:"text-sm text-red-600",children:a.nombre})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"create-descripcion",children:"Descripción"}),e.jsx(X,{id:"create-descripcion",value:i.descripcion,onChange:s=>n("descripcion",s.target.value),placeholder:"Descripción del CCD",rows:3,className:a.descripcion?"border-red-500":""}),a.descripcion&&e.jsx("p",{className:"text-sm text-red-600",children:a.descripcion})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"create-fecha-vigencia-inicio",children:"Fecha Vigencia Inicio"}),e.jsx(m,{id:"create-fecha-vigencia-inicio",type:"date",value:i.fecha_vigencia_inicio,onChange:s=>n("fecha_vigencia_inicio",s.target.value),className:a.fecha_vigencia_inicio?"border-red-500":""}),a.fecha_vigencia_inicio&&e.jsx("p",{className:"text-sm text-red-600",children:a.fecha_vigencia_inicio})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"create-fecha-vigencia-fin",children:"Fecha Vigencia Fin"}),e.jsx(m,{id:"create-fecha-vigencia-fin",type:"date",value:i.fecha_vigencia_fin,onChange:s=>n("fecha_vigencia_fin",s.target.value),className:a.fecha_vigencia_fin?"border-red-500":""}),a.fecha_vigencia_fin&&e.jsx("p",{className:"text-sm text-red-600",children:a.fecha_vigencia_fin})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"create-estado",children:"Estado *"}),e.jsxs(E,{value:i.estado,onValueChange:s=>n("estado",s),children:[e.jsx(T,{className:a.estado?"border-red-500":"",children:e.jsx(B,{placeholder:"Seleccionar estado"})}),e.jsx(A,{children:$.estados.map(s=>e.jsx(u,{value:s.value,children:s.label},s.value))})]}),a.estado&&e.jsx("p",{className:"text-sm text-red-600",children:a.estado})]}),e.jsxs(Y,{children:[e.jsx(l,{type:"button",variant:"outline",onClick:()=>{b(!1),w()},children:"Cancelar"}),e.jsxs(l,{type:"submit",disabled:D,className:"bg-[#2a3d83] hover:bg-[#1e2b5f] flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4"}),D?"Guardando...":"Crear CCD"]})]})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(h,{children:[e.jsxs(p,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(j,{className:"text-sm font-medium",children:"Total CCDs"}),e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(g,{children:e.jsx("div",{className:"text-2xl font-bold",children:v?.total||0})})]}),e.jsxs(h,{children:[e.jsxs(p,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(j,{className:"text-sm font-medium",children:"Activos"}),e.jsx(ae,{className:"h-4 w-4 text-green-600"})]}),e.jsx(g,{children:e.jsx("div",{className:"text-2xl font-bold",children:v?.activos||0})})]}),e.jsxs(h,{children:[e.jsxs(p,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(j,{className:"text-sm font-medium",children:"Borradores"}),e.jsx(re,{className:"h-4 w-4 text-yellow-600"})]}),e.jsx(g,{children:e.jsx("div",{className:"text-2xl font-bold",children:v?.borradores||0})})]}),e.jsxs(h,{children:[e.jsxs(p,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(j,{className:"text-sm font-medium",children:"Vigentes"}),e.jsx(te,{className:"h-4 w-4 text-blue-600"})]}),e.jsx(g,{children:e.jsx("div",{className:"text-2xl font-bold",children:v?.vigentes||0})})]})]}),e.jsxs(h,{children:[e.jsx(p,{children:e.jsx(j,{children:"Filtros"})}),e.jsx(g,{children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(m,{placeholder:"Buscar por código o nombre...",value:o,onChange:s=>I(s.target.value),onKeyPress:s=>{s.key==="Enter"&&(s.preventDefault(),S())}})}),e.jsxs(E,{value:c,onValueChange:O,children:[e.jsx(T,{className:"w-48",children:e.jsx(B,{placeholder:"Estado"})}),e.jsxs(A,{children:[e.jsx(u,{value:"all",children:"Todos los estados"}),e.jsx(u,{value:"borrador",children:"Borrador"}),e.jsx(u,{value:"activo",children:"Activo"}),e.jsx(u,{value:"inactivo",children:"Inactivo"}),e.jsx(u,{value:"historico",children:"Histórico"})]})]}),e.jsxs(l,{onClick:S,type:"button",children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),"Buscar"]})]})})]}),e.jsxs(h,{children:[e.jsx(p,{children:e.jsx(j,{children:"Lista de CCDs"})}),e.jsx(g,{children:r.data.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ce,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mt-2 text-sm font-semibold text-gray-900",children:"No hay CCDs"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No se encontraron cuadros de clasificación documental."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-3 px-4",children:"Código"}),e.jsx("th",{className:"text-left py-3 px-4",children:"Nombre"}),e.jsx("th",{className:"text-left py-3 px-4",children:"Estado"}),e.jsx("th",{className:"text-left py-3 px-4",children:"Niveles"}),e.jsx("th",{className:"text-left py-3 px-4",children:"Creado"}),e.jsx("th",{className:"text-right py-3 px-4",children:"Acciones"})]})}),e.jsx("tbody",{children:r.data.map(s=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 font-medium",children:s.codigo}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.nombre}),s.descripcion&&e.jsx("div",{className:"text-sm text-gray-500",children:s.descripcion})]})}),e.jsx("td",{className:"py-3 px-4",children:P(s.estado)}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs(x,{variant:"outline",children:[s.niveles_count||0," niveles"]})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString()}),e.jsx("td",{className:"py-3 px-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(F,{href:`/admin/ccd/${s.id}`,children:e.jsx(l,{variant:"outline",size:"sm",children:e.jsx(le,{className:"h-4 w-4"})})}),e.jsx(F,{href:`/admin/ccd/${s.id}/edit`,children:e.jsx(l,{variant:"outline",size:"sm",children:e.jsx(oe,{className:"h-4 w-4"})})})]})})]},s.id))})]})})})]}),r.last_page>1&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Mostrando ",(r.current_page-1)*r.per_page+1," a"," ",Math.min(r.current_page*r.per_page,r.total)," de ",r.total," resultados"]}),e.jsxs("div",{className:"flex gap-2",children:[r.current_page>1&&e.jsx(l,{variant:"outline",onClick:()=>N.get(`/admin/ccd?page=${r.current_page-1}`,{search:o,estado:c!=="all"?c:void 0}),children:"Anterior"}),r.current_page<r.last_page&&e.jsx(l,{variant:"outline",onClick:()=>N.get(`/admin/ccd?page=${r.current_page+1}`,{search:o,estado:c!=="all"?c:void 0}),children:"Siguiente"})]})]})]})]})}export{Pe as default};
