import{r as t,u as z,j as e,H as R,L}from"./app-5lvxmL5N.js";import{A as J}from"./app-layout-B1y3wsna.js";import{B as v}from"./app-logo-icon-DTg4XN8t.js";import{L as d,I as u}from"./label-BhumWj7F.js";import{A as E,g as F,p as M,T as A}from"./app-sidebar-layout-CKEzWS_J.js";import{C as h,a as j,b as f,d as P,c as b}from"./card-LPn6WdOe.js";import{A as V,a as G}from"./alert-xVXVWRMh.js";import{A as K}from"./arrow-left-DCwFbykQ.js";import{S as N}from"./search-CI28N6LW.js";import{C as g}from"./circle-check-big-BsqZqApd.js";import{C as Q}from"./calendar-BujtKO7i.js";import{S as W}from"./save-BZ9Zm8lX.js";/* empty css            */import"./index-DrDC_1PC.js";import"./index-Cgyyrey8.js";const X=[{value:"conservacion_permanente",label:"Conservación Permanente"},{value:"eliminacion_controlada",label:"Eliminación Controlada"},{value:"transferencia_historica",label:"Transferencia Histórica"},{value:"digitalizacion",label:"Digitalización"},{value:"microfilmacion",label:"Microfilmación"}];function xe({expedientes:m,documentos:p,usuarios:x,errors:a}){const[l,B]=t.useState(""),[c,k]=t.useState(""),[n,y]=t.useState(""),[$,_]=t.useState([]),[T,C]=t.useState([]),[q,w]=t.useState([]),{data:i,setData:r,post:I,processing:S,isDirty:H}=z({tipo_item:"expediente",expediente_id:"",documento_id:"",tipo_disposicion:"",justificacion:"",observaciones:"",fecha_propuesta:"",responsable_id:""});t.useEffect(()=>{if(l){const s=m.filter(o=>o.numero_expediente.toLowerCase().includes(l.toLowerCase())||o.titulo.toLowerCase().includes(l.toLowerCase())).slice(0,10);_(s)}else _(m.slice(0,10))},[l,m]),t.useEffect(()=>{if(c){const s=p.filter(o=>o.nombre.toLowerCase().includes(c.toLowerCase())||o.expediente.numero_expediente.toLowerCase().includes(c.toLowerCase())).slice(0,10);C(s)}else C(p.slice(0,10))},[c,p]),t.useEffect(()=>{if(n){const s=x.filter(o=>o.name.toLowerCase().includes(n.toLowerCase())||o.email.toLowerCase().includes(n.toLowerCase())).slice(0,10);w(s)}else w(x.slice(0,10))},[n,x]),m.find(s=>s.id.toString()===i.expediente_id),p.find(s=>s.id.toString()===i.documento_id);const D=x.find(s=>s.id.toString()===i.responsable_id),O=s=>{s.preventDefault(),I(route("admin.disposiciones.store"))},U=new Date().toISOString().split("T")[0];return e.jsxs(J,{children:[e.jsx(R,{title:"Nueva Disposición Final"}),e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(v,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(L,{href:route("admin.disposiciones.index"),children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Volver"]})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"Nueva Disposición Final"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Crear una nueva propuesta de disposición final documental"})]})]})}),e.jsxs("form",{onSubmit:O,className:"space-y-6",children:[e.jsxs(h,{children:[e.jsxs(j,{children:[e.jsx(f,{children:"Tipo de Item"}),e.jsx(P,{children:"Selecciona si la disposición se aplicará a un expediente o documento"})]}),e.jsx(b,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("button",{type:"button",onClick:()=>r("tipo_item","expediente"),className:`p-4 border rounded-lg text-left transition-colors ${i.tipo_item==="expediente"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(E,{className:`h-6 w-6 ${i.tipo_item==="expediente"?"text-primary":"text-muted-foreground"}`}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Expediente Completo"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Aplicar a expediente completo"})]})]})}),e.jsx("button",{type:"button",onClick:()=>r("tipo_item","documento"),className:`p-4 border rounded-lg text-left transition-colors ${i.tipo_item==="documento"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(F,{className:`h-6 w-6 ${i.tipo_item==="documento"?"text-primary":"text-muted-foreground"}`}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Documento Individual"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Aplicar a documento específico"})]})]})})]})})]}),e.jsxs(h,{children:[e.jsx(j,{children:e.jsxs(f,{className:"flex items-center space-x-2",children:[i.tipo_item==="expediente"?e.jsx(E,{className:"h-5 w-5"}):e.jsx(F,{className:"h-5 w-5"}),e.jsxs("span",{children:["Seleccionar ",i.tipo_item==="expediente"?"Expediente":"Documento"]})]})}),e.jsx(b,{className:"space-y-4",children:i.tipo_item==="expediente"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Buscar Expediente"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"}),e.jsx(u,{placeholder:"Buscar por código o nombre...",value:l,onChange:s=>B(s.target.value),className:"pl-10"})]})]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:$.map(s=>e.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${i.expediente_id===s.id.toString()?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>r("expediente_id",s.id.toString()),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:s.numero_expediente}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.titulo}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-muted-foreground mt-1",children:[e.jsxs("span",{children:["Serie: ",s.serie_documental]}),e.jsxs("span",{children:["Estado: ",s.estado_ciclo_vida]})]})]}),i.expediente_id===s.id.toString()&&e.jsx(g,{className:"h-5 w-5 text-primary"})]})},s.id))}),a.expediente_id&&e.jsx("p",{className:"text-sm text-red-500",children:a.expediente_id})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Buscar Documento"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"}),e.jsx(u,{placeholder:"Buscar por nombre...",value:c,onChange:s=>k(s.target.value),className:"pl-10"})]})]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:T.map(s=>e.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${i.documento_id===s.id.toString()?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>r("documento_id",s.id.toString()),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:s.nombre}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Expediente: ",s.expediente.numero_expediente]})]}),i.documento_id===s.id.toString()&&e.jsx(g,{className:"h-5 w-5 text-primary"})]})},s.id))}),a.documento_id&&e.jsx("p",{className:"text-sm text-red-500",children:a.documento_id})]})})]}),e.jsxs(h,{children:[e.jsx(j,{children:e.jsx(f,{children:"Tipo de Disposición Final"})}),e.jsxs(b,{children:[e.jsx("div",{className:"space-y-3",children:X.map(s=>e.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors ${i.tipo_disposicion===s.value?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>r("tipo_disposicion",s.value),children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${i.tipo_disposicion===s.value?"bg-primary border-primary":"border-gray-300"}`}),e.jsx("span",{className:"font-medium",children:s.label})]})},s.value))}),a.tipo_disposicion&&e.jsx("p",{className:"text-sm text-red-500 mt-2",children:a.tipo_disposicion})]})]}),e.jsxs(h,{children:[e.jsx(j,{children:e.jsxs(f,{className:"flex items-center space-x-2",children:[e.jsx(M,{className:"h-5 w-5"}),e.jsx("span",{children:"Información de la Disposición"})]})}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Responsable *"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"}),e.jsx(u,{placeholder:"Buscar usuario...",value:n,onChange:s=>y(s.target.value),className:"pl-10"})]}),n&&e.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto border rounded p-2",children:q.map(s=>e.jsxs("div",{className:`p-2 rounded cursor-pointer transition-colors ${i.responsable_id===s.id.toString()?"bg-primary/10 border border-primary":"hover:bg-muted"}`,onClick:()=>{r("responsable_id",s.id.toString()),y(s.name)},children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email})]},s.id))}),D&&e.jsxs(V,{children:[e.jsx(g,{className:"h-4 w-4"}),e.jsxs(G,{children:[e.jsx("strong",{children:"Responsable:"})," ",D.name]})]}),a.responsable_id&&e.jsx("p",{className:"text-sm text-red-500",children:a.responsable_id})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"h-4 w-4"}),e.jsx("span",{children:"Fecha de Propuesta *"})]}),e.jsx(u,{type:"date",min:U,value:i.fecha_propuesta,onChange:s=>r("fecha_propuesta",s.target.value),className:a.fecha_propuesta?"border-red-500":""}),a.fecha_propuesta&&e.jsx("p",{className:"text-sm text-red-500",children:a.fecha_propuesta})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Justificación *"}),e.jsx(A,{placeholder:"Justifica la necesidad...",value:i.justificacion,onChange:s=>r("justificacion",s.target.value),className:`min-h-[100px] ${a.justificacion?"border-red-500":""}`}),a.justificacion&&e.jsx("p",{className:"text-sm text-red-500",children:a.justificacion})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Observaciones"}),e.jsx(A,{placeholder:"Observaciones adicionales (opcional)",value:i.observaciones,onChange:s=>r("observaciones",s.target.value),className:"min-h-[80px]"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(v,{type:"button",variant:"outline",asChild:!0,children:e.jsx(L,{href:route("admin.disposiciones.index"),children:"Cancelar"})}),e.jsxs(v,{type:"submit",disabled:S||!H,children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),S?"Creando...":"Crear Disposición"]})]})]})]})}export{xe as default};
