import{r as w,j as e,H as G}from"./app-BuJooCB2.js";import{C as t,a as r,b as n,c as i,d}from"./card-Dm8Sxxxu.js";import{B as x}from"./badge-CLhckl5I.js";import{B as P}from"./button-o7sDTR10.js";import{A as S,a as L}from"./alert-D3DVPO65.js";import{P as U}from"./progress-Cvp-ttpz.js";import{T as V,a as $,b as h,c as p}from"./tabs-CihxgkAA.js";import{A as z}from"./app-layout-CSvwa8Xt.js";import{R as H}from"./refresh-cw-CWWjz2ZX.js";import{D as O,U as q}from"./users-B1PaIWsM.js";import{F as M}from"./Combination-BNwokkeO.js";import{F as X,C as Y}from"./folder-Cr7M8TWf.js";import{h as W,C as k}from"./app-sidebar-layout-CNDt14fj.js";import{C as b}from"./circle-check-big-CuB9eUpY.js";import{T as _}from"./triangle-alert-DGPIiAMo.js";import{R as N,T as v}from"./CategoricalChart-BLkwwXum.js";import{P as J,a as Q}from"./PieChart-DvoM5FuN.js";import{C as Z}from"./tooltipContext-Bh1wcbwU.js";import{A as ee,a as T}from"./AreaChart-gazRE_fo.js";import{C,X as A,Y as D}from"./CartesianChart-DfnHZPD6.js";import{B as E}from"./BarChart-gEmlYlc_.js";import{B as R}from"./barSelectors-BJILn9Gg.js";/* empty css            */import"./index-Bdl-WcJK.js";import"./index-CCv8Isyn.js";import"./index-DmZWXubS.js";import"./x-BWy7YUo4.js";import"./index-B32rHSx8.js";import"./app-logo-icon-BDSQZXaI.js";import"./input-BTIJ4r9q.js";import"./label-zUIVNhJD.js";import"./user-yB-EHhJt.js";import"./search-BRBLXc6Q.js";import"./ActivePoints-CvWXU_Ah.js";const F=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"];function Ge({metricas_generales:j,kpis_criticos:a,alertas_criticas:f,cumplimiento:l,tendencias:m,usuarios_activos:B,distribucion_trabajo:g}){const[o,I]=w.useState(!1),[K,se]=w.useState(new Date);w.useEffect(()=>{let s;return o&&(s=setInterval(()=>{window.location.reload()},3e5)),()=>clearInterval(s)},[o]);const c=s=>new Intl.NumberFormat("es-CO").format(s),y=s=>s>=90?"text-green-600":s>=70?"text-yellow-600":"text-red-600";return e.jsxs(z,{children:[e.jsx(G,{title:"Dashboard Ejecutivo"}),e.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200",children:"Dashboard Ejecutivo"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Visión integral del sistema de gestión documental"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["Actualizado: ",K.toLocaleTimeString()]}),e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>I(!o),className:o?"bg-green-50 border-green-200":"",children:[e.jsx(H,{className:`h-4 w-4 ${o?"animate-spin":""}`}),o?"Auto":"Manual"]}),e.jsxs(P,{variant:"outline",size:"sm",children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Exportar PDF"]})]})]})}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-6 mb-8",children:[e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Documentos"}),e.jsx(M,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c(j.total_documentos)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",c(a.documentos_procesados_semana)," esta semana"]})]})]}),e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Expedientes"}),e.jsx(X,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c(j.total_expedientes)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",c(a.expedientes_creados_semana)," esta semana"]})]})]}),e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Usuarios Activos"}),e.jsx(q,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c(j.total_usuarios)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[c(B.length)," productivos este mes"]})]})]}),e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Series Documentales"}),e.jsx(W,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(i,{children:e.jsx("div",{className:"text-2xl font-bold",children:c(j.total_series)})})]}),e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Almacenamiento"}),e.jsx(k,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[j.almacenamiento_total," GB"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Proy. 12m: ",m.proyeccion_almacenamiento?.proyeccion_12_meses," GB"]})]})]}),e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Cumplimiento"}),e.jsx(b,{className:`h-4 w-4 ${y(l.porcentaje_cumplimiento_general)}`})]}),e.jsx(i,{children:e.jsxs("div",{className:`text-2xl font-bold ${y(l.porcentaje_cumplimiento_general)}`,children:[l.porcentaje_cumplimiento_general,"%"]})})]})]}),(a.expedientes_vencidos>0||a.workflows_vencidos>0||a.prestamos_vencidos>0)&&e.jsxs(S,{className:"mb-8 border-red-200 bg-red-50",children:[e.jsx(_,{className:"h-4 w-4 text-red-600"}),e.jsx(L,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"font-medium text-red-800",children:"Atención requerida:"}),a.expedientes_vencidos>0&&e.jsxs("span",{className:"text-red-700",children:[a.expedientes_vencidos," expedientes vencidos"]}),a.workflows_vencidos>0&&e.jsxs("span",{className:"text-red-700",children:[a.workflows_vencidos," workflows vencidos"]}),a.prestamos_vencidos>0&&e.jsxs("span",{className:"text-red-700",children:[a.prestamos_vencidos," préstamos vencidos"]})]})})]}),e.jsxs(V,{defaultValue:"resumen",className:"space-y-6",children:[e.jsxs($,{className:"grid w-full grid-cols-5",children:[e.jsx(h,{value:"resumen",children:"Resumen Ejecutivo"}),e.jsx(h,{value:"cumplimiento",children:"Cumplimiento"}),e.jsx(h,{value:"productividad",children:"Productividad"}),e.jsx(h,{value:"tendencias",children:"Tendencias"}),e.jsx(h,{value:"alertas",children:"Alertas"})]}),e.jsxs(p,{value:"resumen",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(n,{children:"KPIs del Sistema"}),e.jsx(d,{children:"Indicadores clave de rendimiento"})]}),e.jsx(i,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Workflows Pendientes"}),e.jsx(x,{variant:a.workflows_pendientes>10?"destructive":"secondary",children:a.workflows_pendientes})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Préstamos Activos"}),e.jsx(x,{variant:"outline",children:a.prestamos_activos})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Disposiciones Pendientes"}),e.jsx(x,{variant:a.disposiciones_pendientes>5?"destructive":"secondary",children:a.disposiciones_pendientes})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Exp. Próx. Vencimiento"}),e.jsx(x,{variant:a.expedientes_proximo_vencimiento>0?"secondary":"outline",children:a.expedientes_proximo_vencimiento})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Expedientes Vencidos"}),e.jsx(x,{variant:a.expedientes_vencidos>0?"destructive":"outline",children:a.expedientes_vencidos})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Préstamos Vencidos"}),e.jsx(x,{variant:a.prestamos_vencidos>0?"destructive":"outline",children:a.prestamos_vencidos})]})]})]})})]}),e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(n,{children:"Distribución de Expedientes"}),e.jsx(d,{children:"Por estado actual"})]}),e.jsx(i,{children:e.jsx(N,{width:"100%",height:200,children:e.jsxs(J,{children:[e.jsx(Q,{data:g.expedientes_por_estado,cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",dataKey:"total",nameKey:"estado",children:g.expedientes_por_estado.map((s,u)=>e.jsx(Z,{fill:F[u%F.length]},`cell-${u}`))}),e.jsx(v,{})]})})})]})]}),e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(n,{children:"Tendencia de Crecimiento"}),e.jsx(d,{children:"Documentos y expedientes por mes"})]}),e.jsx(i,{children:e.jsx(N,{width:"100%",height:300,children:e.jsxs(ee,{data:m.crecimiento_mensual,children:[e.jsx(C,{strokeDasharray:"3 3"}),e.jsx(A,{dataKey:"mes"}),e.jsx(D,{}),e.jsx(v,{}),e.jsx(T,{type:"monotone",dataKey:"documentos",stackId:"1",stroke:"#8884d8",fill:"#8884d8"}),e.jsx(T,{type:"monotone",dataKey:"expedientes",stackId:"1",stroke:"#82ca9d",fill:"#82ca9d"})]})})})]})]}),e.jsx(p,{value:"cumplimiento",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(t,{children:[e.jsx(r,{children:e.jsx(n,{children:"Estado General"})}),e.jsx(i,{children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:`text-4xl font-bold ${y(l.porcentaje_cumplimiento_general)}`,children:[l.porcentaje_cumplimiento_general,"%"]}),e.jsx(U,{value:l.porcentaje_cumplimiento_general,className:"w-full"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[l.expedientes_en_regla," de ",l.expedientes_en_regla+l.expedientes_con_alertas," expedientes en regla"]})]})})]}),e.jsxs(t,{className:"col-span-2",children:[e.jsxs(r,{children:[e.jsx(n,{children:"Cumplimiento por Series"}),e.jsx(d,{children:"Top 10 series documentales"})]}),e.jsx(i,{children:e.jsx(N,{width:"100%",height:250,children:e.jsxs(E,{data:l.cumplimiento_por_series,children:[e.jsx(C,{strokeDasharray:"3 3"}),e.jsx(A,{dataKey:"nombre",angle:-45,textAnchor:"end",height:100}),e.jsx(D,{}),e.jsx(v,{}),e.jsx(R,{dataKey:"porcentaje",fill:"#8884d8"})]})})})]})]})}),e.jsx(p,{value:"productividad",className:"space-y-6",children:e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(n,{children:"Usuarios Más Activos"}),e.jsx(d,{children:"Actividad de los últimos 30 días"})]}),e.jsx(i,{children:e.jsx("div",{className:"space-y-4",children:B.slice(0,10).map((s,u)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-100 rounded-full",children:e.jsxs("span",{className:"text-sm font-medium text-blue-800",children:["#",u+1]})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.email})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:[parseInt(s.documentos_creados)+parseInt(s.expedientes_gestionados)+parseInt(s.workflows_iniciados)," acciones"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.documentos_creados," docs, ",s.expedientes_gestionados," exp, ",s.workflows_iniciados," wf"]})]})]},s.id))})})]})}),e.jsx(p,{value:"tendencias",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(n,{children:"Proyección de Almacenamiento"}),e.jsx(d,{children:"Estimación de crecimiento"})]}),e.jsx(i,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Actual"}),e.jsxs("span",{className:"font-medium",children:[m.proyeccion_almacenamiento?.actual_gb," GB"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"3 meses"}),e.jsxs("span",{className:"font-medium",children:[m.proyeccion_almacenamiento?.proyeccion_3_meses," GB"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"6 meses"}),e.jsxs("span",{className:"font-medium",children:[m.proyeccion_almacenamiento?.proyeccion_6_meses," GB"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"12 meses"}),e.jsxs("span",{className:"font-medium text-orange-600",children:[m.proyeccion_almacenamiento?.proyeccion_12_meses," GB"]})]})]})})]}),e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(n,{children:"Tipos de Documentos"}),e.jsx(d,{children:"Distribución por extensión"})]}),e.jsx(i,{children:e.jsx(N,{width:"100%",height:200,children:e.jsxs(E,{data:g.documentos_por_tipo,children:[e.jsx(C,{strokeDasharray:"3 3"}),e.jsx(A,{dataKey:"extension"}),e.jsx(D,{}),e.jsx(v,{}),e.jsx(R,{dataKey:"total",fill:"#82ca9d"})]})})})]})]})}),e.jsx(p,{value:"alertas",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsxs(n,{className:"flex items-center space-x-2",children:[e.jsx(_,{className:"h-5 w-5 text-red-500"}),e.jsx("span",{children:"Expedientes Urgentes"})]}),e.jsx(d,{children:"Próximos a vencer (7 días)"})]}),e.jsx(i,{children:e.jsx("div",{className:"space-y-3",children:f.expedientes_urgentes.length>0?f.expedientes_urgentes.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-orange-200 rounded-lg bg-orange-50",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.codigo}),e.jsx("div",{className:"text-sm text-gray-600",children:s.asunto})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(x,{variant:"destructive",children:"Urgente"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s.serie_documental?.nombre})]})]},s.id)):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(b,{className:"h-12 w-12 mx-auto mb-4 text-green-500"}),e.jsx("p",{children:"No hay expedientes próximos a vencer"})]})})})]}),e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsxs(n,{className:"flex items-center space-x-2",children:[e.jsx(Y,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{children:"Notificaciones Críticas"})]}),e.jsx(d,{children:"Requieren atención inmediata"})]}),e.jsx(i,{children:e.jsx("div",{className:"space-y-3",children:f.notificaciones_criticas.length>0?f.notificaciones_criticas.map(s=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 border border-red-200 rounded-lg bg-red-50",children:[e.jsx(_,{className:"h-4 w-4 text-red-500 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-red-800",children:s.titulo}),e.jsx("div",{className:"text-sm text-red-700",children:s.mensaje}),e.jsxs("div",{className:"text-xs text-red-600 mt-1",children:[s.tipo," • ",new Date(s.created_at).toLocaleDateString()]})]})]},s.id)):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(b,{className:"h-12 w-12 mx-auto mb-4 text-green-500"}),e.jsx("p",{children:"No hay notificaciones críticas"})]})})})]})]})})]})]})})]})}export{Ge as default};
