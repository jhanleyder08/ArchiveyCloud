import{r as h,u as M,j as e,H,b as f,t as l}from"./app-BwzY5mdP.js";import{f as R,A as U}from"./app-sidebar-layout-V4G_4O_u.js";import{B as i}from"./button-BuG7hErd.js";import{C as N,a as _,b as C,c as y,d as D}from"./card-R_fDv6wV.js";import{I as g}from"./input-DBPsNB4E.js";import{L as d}from"./label-COs3lnS9.js";import{S as O,a as $,b as J,c as q,d as K}from"./select-FIAkf9pv.js";import{E as F}from"./eye-E-jSZuXN.js";import{S as u}from"./save-CeVmYB5T.js";import{U as j}from"./upload-DZRf0CS6.js";import{T as S}from"./trash-2-Vuv8g9Jx.js";import{I as E}from"./image-Bm2wMxpQ.js";import{R as k}from"./refresh-cw-C7vckRPH.js";import{M as Q}from"./monitor-D9D92Yjc.js";import{M as W,S as X}from"./sun-xugIwbz8.js";/* empty css            */import"./index-C39PKzMR.js";import"./Combination-DMdRKDdc.js";import"./index-DRfaZ5bA.js";import"./index-BQN2DSxF.js";import"./x-yj7I5XB9.js";import"./app-logo-icon-CWh3FBC5.js";import"./user-CGcDW0oZ.js";import"./mail-DcAASWb1.js";import"./users-Bd_tJWgh.js";import"./folder-BDmHn7zE.js";import"./triangle-alert-CwolSKvH.js";import"./search-DYmQja4G.js";import"./BrandingProvider-C7c3UgBn.js";import"./index-BeU68MN8.js";import"./check-BLssxijV.js";function ke({configuraciones:p={},temas_disponibles:P={}}){const[b,T]=h.useState(!1),[c,z]=h.useState({}),o={logo_principal:h.useRef(null),logo_secundario:h.useRef(null),favicon:h.useRef(null)},[r,L]=h.useState({app_name:p.app_name?.valor||"ArchiveyCloud",app_description:p.app_description?.valor||"Sistema de Gestión Documental",color_primario:p.color_primario?.valor||"#3b82f6",color_secundario:p.color_secundario?.valor||"#64748b",tema_predeterminado:p.tema_predeterminado?.valor||"light"});M({archivo:null,tipo:""});const m=(a,s)=>{L(x=>({...x,[a]:s}))},v=async(a,s)=>{try{await f.put(route("admin.configuracion.actualizar",a),{valor:s,activo:!0}),l.success("Configuración actualizada exitosamente")}catch(x){console.error("Error saving configuration:",x),l.error("Error al actualizar configuración")}},G=async()=>{try{const a=Object.entries(r).map(([s,x])=>f.put(route("admin.configuracion.actualizar",s),{valor:x,activo:!0}));await Promise.all(a),l.success("Configuración de branding guardada exitosamente")}catch(a){console.error("Error saving branding config:",a),l.error("Error al guardar configuración de branding")}},w=async a=>{const s=o[a].current?.files?.[0];if(!s){l.error("Selecciona un archivo");return}const x=2*1024*1024;if(s.size>x){l.error("El archivo no puede ser mayor a 2MB");return}if(!(a==="favicon"?["image/x-icon","image/png","image/svg+xml"]:["image/png","image/jpeg","image/jpg","image/svg+xml"]).includes(s.type)){l.error(`Tipo de archivo no válido para ${a}`);return}z(n=>({...n,[a]:!0}));try{const n=new FormData;n.append("archivo",s),n.append("tipo",a),await f.post(route("admin.configuracion.branding.upload"),n,{forceFormData:!0,onSuccess:()=>{l.success(`${a.replace("_"," ")} subido exitosamente`),o[a].current&&(o[a].current.value="")},onError:I=>{console.error("Upload errors:",I),l.error("Error al subir archivo")}})}catch(n){console.error("Error uploading file:",n),l.error("Error al subir archivo")}finally{z(n=>({...n,[a]:!1}))}},t=a=>{const s=p[a];return s?.valor?`/storage/${s.valor}`:null},A=async a=>{try{await f.put(route("admin.configuracion.actualizar",a),{valor:"",activo:!0}),l.success("Archivo eliminado exitosamente")}catch(s){console.error("Error removing file:",s),l.error("Error al eliminar archivo")}},B=a=>{switch(a){case"light":return e.jsx(X,{className:"h-4 w-4"});case"dark":return e.jsx(W,{className:"h-4 w-4"});default:return e.jsx(Q,{className:"h-4 w-4"})}},V={"--primary":r.color_primario,"--secondary":r.color_secundario};return e.jsxs(R,{title:"Branding y Personalización",children:[e.jsx(H,{title:"Branding y Personalización"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(i,{variant:"ghost",onClick:()=>f.get(route("admin.configuracion.index")),children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Volver"]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Branding y Personalización"}),e.jsx("p",{className:"text-muted-foreground",children:"Personaliza la apariencia, logos y colores del sistema"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{variant:"outline",onClick:()=>T(!b),children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),b?"Salir Vista Previa":"Vista Previa"]}),e.jsxs(i,{onClick:G,children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),"Guardar Todo"]})]})]}),b&&e.jsxs(N,{className:"border-orange-500 bg-orange-50 dark:bg-orange-900/20",children:[e.jsx(_,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),"Vista Previa"]})}),e.jsx(y,{children:e.jsxs("div",{style:V,className:"p-6 bg-white rounded-lg border shadow-sm space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[t("logo_principal")&&e.jsx("img",{src:t("logo_principal"),alt:"Logo Principal",className:"h-12 w-auto"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",style:{color:r.color_primario},children:r.app_name}),e.jsx("p",{className:"text-sm",style:{color:r.color_secundario},children:r.app_description})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-16 h-8 rounded border",style:{backgroundColor:r.color_primario},title:"Color Primario"}),e.jsx("div",{className:"w-16 h-8 rounded border",style:{backgroundColor:r.color_secundario},title:"Color Secundario"})]})]})})]}),e.jsxs(N,{children:[e.jsxs(_,{children:[e.jsx(C,{children:"Información General"}),e.jsx(D,{children:"Configura el nombre y descripción de la aplicación"})]}),e.jsx(y,{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"app_name",children:"Nombre de la Aplicación"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{id:"app_name",value:r.app_name,onChange:a=>m("app_name",a.target.value),placeholder:"ArchiveyCloud"}),e.jsx(i,{size:"sm",variant:"ghost",onClick:()=>v("app_name",r.app_name),children:e.jsx(u,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"app_description",children:"Descripción"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{id:"app_description",value:r.app_description,onChange:a=>m("app_description",a.target.value),placeholder:"Sistema de Gestión Documental"}),e.jsx(i,{size:"sm",variant:"ghost",onClick:()=>v("app_description",r.app_description),children:e.jsx(u,{className:"h-4 w-4"})})]})]})]})})]}),e.jsxs(N,{children:[e.jsxs(_,{children:[e.jsx(C,{children:"Logos y Archivos"}),e.jsx(D,{children:"Sube los logos y favicon de tu organización"})]}),e.jsx(y,{children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(d,{className:"text-sm font-medium",children:"Logo Principal"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG, SVG (max 2MB)"})]}),e.jsx("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:t("logo_principal")?e.jsxs("div",{className:"space-y-2",children:[e.jsx("img",{src:t("logo_principal"),alt:"Logo Principal",className:"h-16 w-auto mx-auto"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(i,{size:"sm",variant:"outline",onClick:()=>o.logo_principal.current?.click(),disabled:c.logo_principal,children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Cambiar"]}),e.jsxs(AlertDialog,{children:[e.jsx(AlertDialogTrigger,{asChild:!0,children:e.jsxs(i,{size:"sm",variant:"destructive",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Eliminar"]})}),e.jsxs(AlertDialogContent,{children:[e.jsxs(AlertDialogHeader,{children:[e.jsx(AlertDialogTitle,{children:"¿Eliminar logo principal?"}),e.jsx(AlertDialogDescription,{children:"Esta acción no se puede deshacer. El logo será eliminado permanentemente."})]}),e.jsxs(AlertDialogFooter,{children:[e.jsx(AlertDialogCancel,{children:"Cancelar"}),e.jsx(AlertDialogAction,{onClick:()=>A("logo_principal"),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Eliminar"})]})]})]})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{className:"h-12 w-12 mx-auto text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No hay logo configurado"}),e.jsx(i,{onClick:()=>o.logo_principal.current?.click(),disabled:c.logo_principal,children:c.logo_principal?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"h-4 w-4 mr-2 animate-spin"}),"Subiendo..."]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Subir Logo"]})})]})}),e.jsx("input",{ref:o.logo_principal,type:"file",accept:"image/png,image/jpeg,image/jpg,image/svg+xml",className:"hidden",onChange:()=>w("logo_principal")})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(d,{className:"text-sm font-medium",children:"Logo Secundario"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG, SVG (max 2MB)"})]}),e.jsx("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:t("logo_secundario")?e.jsxs("div",{className:"space-y-2",children:[e.jsx("img",{src:t("logo_secundario"),alt:"Logo Secundario",className:"h-16 w-auto mx-auto"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(i,{size:"sm",variant:"outline",onClick:()=>o.logo_secundario.current?.click(),disabled:c.logo_secundario,children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Cambiar"]}),e.jsxs(AlertDialog,{children:[e.jsx(AlertDialogTrigger,{asChild:!0,children:e.jsxs(i,{size:"sm",variant:"destructive",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Eliminar"]})}),e.jsxs(AlertDialogContent,{children:[e.jsxs(AlertDialogHeader,{children:[e.jsx(AlertDialogTitle,{children:"¿Eliminar logo secundario?"}),e.jsx(AlertDialogDescription,{children:"Esta acción no se puede deshacer. El logo será eliminado permanentemente."})]}),e.jsxs(AlertDialogFooter,{children:[e.jsx(AlertDialogCancel,{children:"Cancelar"}),e.jsx(AlertDialogAction,{onClick:()=>A("logo_secundario"),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Eliminar"})]})]})]})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{className:"h-12 w-12 mx-auto text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No hay logo configurado"}),e.jsx(i,{onClick:()=>o.logo_secundario.current?.click(),disabled:c.logo_secundario,children:c.logo_secundario?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"h-4 w-4 mr-2 animate-spin"}),"Subiendo..."]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Subir Logo"]})})]})}),e.jsx("input",{ref:o.logo_secundario,type:"file",accept:"image/png,image/jpeg,image/jpg,image/svg+xml",className:"hidden",onChange:()=>w("logo_secundario")})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(d,{className:"text-sm font-medium",children:"Favicon"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"ICO, PNG, SVG (max 2MB)"})]}),e.jsx("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:t("favicon")?e.jsxs("div",{className:"space-y-2",children:[e.jsx("img",{src:t("favicon"),alt:"Favicon",className:"h-8 w-8 mx-auto"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(i,{size:"sm",variant:"outline",onClick:()=>o.favicon.current?.click(),disabled:c.favicon,children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Cambiar"]}),e.jsxs(AlertDialog,{children:[e.jsx(AlertDialogTrigger,{asChild:!0,children:e.jsxs(i,{size:"sm",variant:"destructive",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Eliminar"]})}),e.jsxs(AlertDialogContent,{children:[e.jsxs(AlertDialogHeader,{children:[e.jsx(AlertDialogTitle,{children:"¿Eliminar favicon?"}),e.jsx(AlertDialogDescription,{children:"Esta acción no se puede deshacer. El favicon será eliminado permanentemente."})]}),e.jsxs(AlertDialogFooter,{children:[e.jsx(AlertDialogCancel,{children:"Cancelar"}),e.jsx(AlertDialogAction,{onClick:()=>A("favicon"),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Eliminar"})]})]})]})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{className:"h-8 w-8 mx-auto text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No hay favicon configurado"}),e.jsx(i,{size:"sm",onClick:()=>o.favicon.current?.click(),disabled:c.favicon,children:c.favicon?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"h-4 w-4 mr-2 animate-spin"}),"Subiendo..."]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Subir Favicon"]})})]})}),e.jsx("input",{ref:o.favicon,type:"file",accept:"image/x-icon,image/png,image/svg+xml",className:"hidden",onChange:()=>w("favicon")})]})]})})]}),e.jsxs(N,{children:[e.jsxs(_,{children:[e.jsx(C,{children:"Colores y Tema"}),e.jsx(D,{children:"Personaliza los colores del sistema y el tema predeterminado"})]}),e.jsxs(y,{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"color_primario",children:"Color Primario"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{id:"color_primario",type:"color",value:r.color_primario,onChange:a=>m("color_primario",a.target.value),className:"w-16 h-10"}),e.jsx(g,{value:r.color_primario,onChange:a=>m("color_primario",a.target.value),placeholder:"#3b82f6",className:"flex-1"}),e.jsx(i,{size:"sm",variant:"ghost",onClick:()=>v("color_primario",r.color_primario),children:e.jsx(u,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"color_secundario",children:"Color Secundario"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{id:"color_secundario",type:"color",value:r.color_secundario,onChange:a=>m("color_secundario",a.target.value),className:"w-16 h-10"}),e.jsx(g,{value:r.color_secundario,onChange:a=>m("color_secundario",a.target.value),placeholder:"#64748b",className:"flex-1"}),e.jsx(i,{size:"sm",variant:"ghost",onClick:()=>v("color_secundario",r.color_secundario),children:e.jsx(u,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Tema Predeterminado"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{value:r.tema_predeterminado,onValueChange:a=>m("tema_predeterminado",a),children:[e.jsx($,{className:"flex-1",children:e.jsx(J,{})}),e.jsx(q,{children:Object.entries(P).map(([a,s])=>e.jsx(K,{value:a,children:e.jsxs("div",{className:"flex items-center gap-2",children:[B(a),s]})},a))})]}),e.jsx(i,{size:"sm",variant:"ghost",onClick:()=>v("tema_predeterminado",r.tema_predeterminado),children:e.jsx(u,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Los usuarios pueden cambiar su tema individual en sus preferencias"})]})]})]})]})]})}export{ke as default};
