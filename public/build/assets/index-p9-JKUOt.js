import{c as C,e as E,r as x,j as e,H as F,L as c,b as j}from"./app-Be2NIB2H.js";import{A as B}from"./app-layout-DHTHIChL.js";import{B as h}from"./button-C1GrR9cU.js";import{I as A}from"./input-24R50_m1.js";import{S as T,a as D,b as P,c as I,d as u}from"./select-_uH33fCN.js";import{B as t}from"./badge-BVjECMjg.js";import{F as L}from"./folder-open-D93MtrRG.js";import{P as M}from"./plus-DTfW9Ecn.js";import{i as g}from"./app-sidebar-layout-C1-E2pGB.js";import{C as $}from"./circle-check-big-CfIQE29r.js";import{C as O}from"./calendar-yDVbSjWY.js";import{S as b}from"./search-wNjxNmJi.js";import{E as V}from"./eye-CEbkVK4b.js";import{S as G}from"./square-pen-BEnA-J6p.js";import{D as H}from"./users-B9-adLxA.js";/* empty css            */import"./index-CK_0-_3e.js";import"./Combination-D1DozOQU.js";import"./index-CNzVxF2C.js";import"./index-I7BRYdPe.js";import"./check-DlCBqHlt.js";import"./index-DZ5tZN_U.js";import"./x-ChuOuJ63.js";import"./app-logo-icon-Bcyq4pGc.js";import"./label-BjQcBBi6.js";import"./user-BCWJiZ5C.js";import"./mail-MZdQZL0f.js";import"./folder-C3ZUkl8_.js";import"./triangle-alert-CVZeQdJv.js";import"./BrandingProvider-NItUcqNL.js";const R=[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Expedientes",href:"/admin/expedientes"}];function _e({expedientes:r,estadisticas:d,opciones:f,filtros:l}){const N=C(),{flash:Q}=E().props,[q,z]=x.useState(l?.search||""),[K,U]=x.useState(!1),[n,o]=x.useState({search:l?.search||"",estado:l?.estado||"all",tipo_expediente:l?.tipo_expediente||"all",serie_id:l?.serie_id||"all",area_responsable:l?.area_responsable||"all",proximidad_vencimiento:l?.proximidad_vencimiento||"all"}),y=()=>{const s=new URLSearchParams;Object.entries(n).forEach(([a,i])=>{i&&i!=="all"&&s.append(a,i)}),j.get("/admin/expedientes",Object.fromEntries(s))},v=()=>{o({search:"",estado:"all",tipo_expediente:"all",serie_id:"all",area_responsable:"all",proximidad_vencimiento:"all"}),j.get("/admin/expedientes")},w=s=>({abierto:e.jsx(t,{variant:"default",className:"bg-green-100 text-green-800",children:"Abierto"}),cerrado:e.jsx(t,{variant:"secondary",children:"Cerrado"}),transferido:e.jsx(t,{variant:"default",className:"bg-blue-100 text-blue-800",children:"Transferido"}),archivado:e.jsx(t,{variant:"default",className:"bg-purple-100 text-purple-800",children:"Archivado"}),en_disposicion:e.jsx(t,{variant:"destructive",children:"En Disposición"})})[s]||e.jsx(t,{variant:"outline",children:s}),_=s=>({electronico:e.jsx(t,{variant:"default",className:"bg-indigo-100 text-indigo-800",children:"Electrónico"}),fisico:e.jsx(t,{variant:"default",className:"bg-gray-100 text-gray-800",children:"Físico"}),hibrido:e.jsx(t,{variant:"default",className:"bg-yellow-100 text-yellow-800",children:"Híbrido"})})[s]||e.jsx(t,{variant:"outline",children:s}),m=s=>new Date(s).toLocaleDateString("es-CO",{year:"numeric",month:"short",day:"2-digit"}),S=s=>{if(s===0)return"0 B";const a=1024,i=["B","KB","MB","GB"],p=Math.floor(Math.log(s)/Math.log(a));return parseFloat((s/Math.pow(a,p)).toFixed(2))+" "+i[p]};return e.jsxs(B,{breadcrumbs:R,children:[e.jsx(F,{title:"Gestión de Expedientes"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-6 w-6 text-[#2a3d83]"}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Gestión de Expedientes"})]}),e.jsxs(h,{onClick:()=>N.visit("/admin/expedientes/create"),className:"flex items-center gap-2 px-4 py-2 bg-[#2a3d83] text-white rounded-lg hover:bg-[#1e2b5f] transition-colors",children:[e.jsx(M,{className:"h-4 w-4"}),"Crear Expediente"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Expedientes"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:d.total})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(g,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Abiertos"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:d.abiertos})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx($,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Cerrados"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:d.cerrados})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(g,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Próx. Vencer"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:d.proximos_vencer})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(O,{className:"h-6 w-6 text-[#2a3d83]"})})]})})]}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4 w-full sm:w-auto",children:e.jsxs("div",{className:"relative flex-1 sm:w-80",children:[e.jsx(b,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(A,{placeholder:"Buscar expedientes...",value:n.search,onChange:s=>o(a=>({...a,search:s.target.value})),className:"pl-10"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(T,{value:n.estado,onValueChange:s=>o(a=>({...a,estado:s})),children:[e.jsx(D,{className:"w-[180px]",children:e.jsx(P,{placeholder:"Todos los estados"})}),e.jsxs(I,{children:[e.jsx(u,{value:"all",children:"Todos los estados"}),f.estados.map(s=>e.jsx(u,{value:s.value,children:s.label},s.value))]})]}),e.jsxs(h,{onClick:y,className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Buscar"]}),e.jsx(h,{variant:"outline",onClick:v,children:"Limpiar"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg border overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Expediente"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Serie/Subserie"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Estado/Tipo"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Responsable"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Volumen/Folios"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Fechas"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:r.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"py-8 px-6 text-center text-gray-500",children:"No se encontraron expedientes."})}):r.data.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("p",{className:"font-medium text-gray-900",children:s.codigo})}),e.jsx("p",{className:"text-sm text-gray-600",children:s.titulo}),s.descripcion&&e.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:s.descripcion})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"space-y-1",children:[s.serie&&e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[s.serie.codigo," - ",s.serie.nombre]}),s.subserie&&e.jsxs("p",{className:"text-xs text-gray-600",children:[s.subserie.codigo," - ",s.subserie.nombre]})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"space-y-2",children:[w(s.estado),_(s.tipo_expediente)]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("div",{className:"space-y-1",children:s.responsable?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.responsable.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.responsable.email})]}):e.jsx("p",{className:"text-sm text-gray-400",children:"Sin asignar"})})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[s.numero_documentos||0," documentos"]}),e.jsx("p",{className:"text-xs text-gray-500",children:S(s.tamano_total_bytes||0)})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-xs text-gray-600",children:[e.jsx("strong",{children:"Apertura:"}),e.jsx("br",{}),m(s.fecha_apertura)]}),s.fecha_cierre&&e.jsxs("p",{className:"text-xs text-gray-600",children:[e.jsx("strong",{children:"Cierre:"}),e.jsx("br",{}),m(s.fecha_cierre)]}),s.fecha_eliminacion&&e.jsxs("p",{className:"text-xs text-orange-600",children:[e.jsx("strong",{children:"Disposicion:"}),e.jsx("br",{}),m(s.fecha_eliminacion)]})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{href:`/admin/expedientes/${s.id}`,children:e.jsx("button",{className:"p-2 rounded-md text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50 transition-colors",children:e.jsx(V,{className:"h-4 w-4"})})}),e.jsx(c,{href:`/admin/expedientes/${s.id}/edit`,children:e.jsx("button",{className:"p-2 rounded-md text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50 transition-colors",children:e.jsx(G,{className:"h-4 w-4"})})}),e.jsx("button",{className:"p-2 rounded-md text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50 transition-colors",onClick:()=>{window.open(`/admin/expedientes/${s.id}/exportar-directorio?formato=json`,"_blank")},children:e.jsx(H,{className:"h-4 w-4"})})]})})]},s.id))})]})}),r.data.length>0&&e.jsxs("div",{className:"flex items-center justify-between bg-white border rounded-lg px-6 py-3",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando ",e.jsx("span",{className:"font-medium",children:r.from||0})," a"," ",e.jsx("span",{className:"font-medium",children:r.to||0})," de"," ",e.jsx("span",{className:"font-medium",children:r.total||0})," expedientes"]}),e.jsx("div",{className:"flex items-center gap-2",children:r.links.map((s,a)=>s.label.includes("Previous")?e.jsx(c,{href:s.url||"#",preserveState:!0,className:`px-3 py-2 border border-gray-300 rounded-md text-sm font-medium ${s.url?"text-gray-700 hover:bg-gray-50":"text-gray-300 cursor-not-allowed"}`,children:"Anterior"},a):s.label.includes("Next")?e.jsx(c,{href:s.url||"#",preserveState:!0,className:`px-3 py-2 border border-gray-300 rounded-md text-sm font-medium ${s.url?"text-gray-700 hover:bg-gray-50":"text-gray-300 cursor-not-allowed"}`,children:"Siguiente"},a):isNaN(Number(s.label))?null:e.jsx(c,{href:s.url||"#",preserveState:!0,className:`px-3 py-2 rounded-md text-sm font-medium ${s.active?"bg-[#2a3d83] text-white":"border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:s.label},a))})]})]})]})]})}export{_e as default};
