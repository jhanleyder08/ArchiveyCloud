import{j as e,H as T,L as N}from"./app-DmFTQNHU.js";import{A}from"./app-layout-CF5PBVMg.js";import{B as o}from"./button-B9uqYTIR.js";import{C as a,c as r,a as c,b as d,d as n}from"./card-98qlzFSI.js";import{A as D,C as E,i as y}from"./app-sidebar-layout-B4-tSBlc.js";import{F as g}from"./Combination-DB4vhy5A.js";import{C as _}from"./folder-CyqBlkrb.js";import{T as v}from"./triangle-alert-Qv0vinvY.js";import{C as F}from"./circle-check-big-DyCuRV4E.js";import{C as L}from"./calendar-B2HHxpzZ.js";import{T as R,U as $}from"./users-CA6jkooN.js";/* empty css            */import"./index-6lxVY5DU.js";import"./index-D6-3VAHV.js";import"./index-BBDU3XkM.js";import"./x-D4OXCe6m.js";import"./app-logo-icon-B1r3bsQj.js";import"./input-CXpCTHGE.js";import"./label-CYYsus1F.js";import"./user-2vHAz8tr.js";import"./mail-i7usF0Qz.js";import"./search-BECONtiU.js";import"./BrandingProvider-BKZadETt.js";function ae({estadisticas:l,prestamosPorTipo:b,prestamosPorEstado:w,prestamosPorMes:h,expedientesMasPrestados:j,usuariosMasSolicitan:p,prestamosVencidos:f,tiempoPromedio:C}){const u=s=>new Date(s).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),x=(s,t)=>t>0?(s/t*100).toFixed(1):"0";return e.jsxs(A,{breadcrumbs:[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Préstamos",href:"/admin/prestamos"},{title:"Reportes",href:"/admin/prestamos/reportes"}],children:[e.jsx(T,{title:"Reportes de Préstamos"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(o,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(N,{href:"/admin/prestamos",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Volver"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Reportes y Estadísticas"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Análisis completo del sistema de préstamos"})]})]}),e.jsx(o,{variant:"outline",asChild:!0,children:e.jsxs("a",{href:"/admin/prestamos/reportes/pdf",target:"_blank",children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Exportar PDF"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsx(a,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Préstamos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.total})]}),e.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(g,{className:"h-6 w-6 text-blue-600"})})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Activos"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:l.activos}),e.jsxs("p",{className:"text-xs text-gray-500",children:[x(l.activos,l.total),"% del total"]})]}),e.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(_,{className:"h-6 w-6 text-blue-600"})})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Vencidos"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:l.vencidos}),e.jsxs("p",{className:"text-xs text-gray-500",children:[x(l.vencidos,l.total),"% del total"]})]}),e.jsx("div",{className:"h-12 w-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(v,{className:"h-6 w-6 text-red-600"})})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Devueltos"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:l.devueltos}),e.jsxs("p",{className:"text-xs text-gray-500",children:[x(l.devueltos,l.total),"% del total"]})]}),e.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(F,{className:"h-6 w-6 text-green-600"})})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Por Vencer"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:l.proximos_vencer}),e.jsx("p",{className:"text-xs text-gray-500",children:"Próximos 7 días"})]}),e.jsx("div",{className:"h-12 w-12 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx(L,{className:"h-6 w-6 text-yellow-600"})})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(a,{children:[e.jsxs(c,{children:[e.jsx(d,{children:"Préstamos por Tipo"}),e.jsx(n,{children:"Distribución de expedientes vs documentos"})]}),e.jsx(r,{children:e.jsx("div",{className:"space-y-4",children:Object.entries(b).map(([s,t])=>{const i=x(t,l.total);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[s==="expediente"?e.jsx(y,{className:"h-4 w-4 text-blue-600"}):e.jsx(g,{className:"h-4 w-4 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium capitalize",children:s})]}),e.jsxs("span",{className:"text-sm font-bold",children:[t," (",i,"%)"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${s==="expediente"?"bg-blue-600":"bg-purple-600"}`,style:{width:`${i}%`}})})]},s)})})})]}),e.jsxs(a,{children:[e.jsxs(c,{children:[e.jsx(d,{children:"Préstamos por Estado"}),e.jsx(n,{children:"Estado actual de los préstamos"})]}),e.jsx(r,{children:e.jsx("div",{className:"space-y-4",children:Object.entries(w).map(([s,t])=>{const i=x(t,l.total),m=s==="prestado"?"blue":s==="devuelto"?"green":"red";return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium capitalize",children:s}),e.jsxs("span",{className:"text-sm font-bold",children:[t," (",i,"%)"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full bg-${m}-600`,style:{width:`${i}%`}})})]},s)})})})]})]}),e.jsxs(a,{children:[e.jsxs(c,{children:[e.jsxs(d,{className:"flex items-center space-x-2",children:[e.jsx(R,{className:"h-5 w-5"}),e.jsx("span",{children:"Tendencia de Préstamos (Últimos 6 Meses)"})]}),e.jsx(n,{children:"Evolución mensual del número de préstamos"})]}),e.jsx(r,{children:e.jsx("div",{className:"h-64 flex items-end justify-between space-x-2",children:h.map((s,t)=>{const i=Math.max(...h.map(P=>P.total)),m=s.total/i*100;return e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsxs("div",{className:"w-full flex flex-col items-center justify-end h-full",children:[e.jsx("span",{className:"text-xs font-bold mb-1",children:s.total}),e.jsx("div",{className:"w-full bg-blue-600 rounded-t transition-all hover:bg-blue-700",style:{height:`${m}%`,minHeight:"20px"}})]}),e.jsx("span",{className:"text-xs text-gray-600 mt-2",children:s.mes})]},t)})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(a,{children:[e.jsxs(c,{children:[e.jsxs(d,{className:"flex items-center space-x-2",children:[e.jsx(y,{className:"h-5 w-5"}),e.jsx("span",{children:"Expedientes Más Prestados"})]}),e.jsx(n,{children:"Top 10 expedientes con más préstamos"})]}),e.jsx(r,{children:e.jsx("div",{className:"space-y-3",children:j.length>0?j.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-100 rounded-full",children:e.jsx("span",{className:"text-sm font-bold text-blue-600",children:t+1})}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.expediente})]}),e.jsx("span",{className:"text-sm font-bold text-blue-600",children:s.total})]},t)):e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No hay datos disponibles"})})})]}),e.jsxs(a,{children:[e.jsxs(c,{children:[e.jsxs(d,{className:"flex items-center space-x-2",children:[e.jsx($,{className:"h-5 w-5"}),e.jsx("span",{children:"Usuarios Más Activos"})]}),e.jsx(n,{children:"Top 10 usuarios con más solicitudes"})]}),e.jsx(r,{children:e.jsx("div",{className:"space-y-3",children:p.length>0?p.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-purple-100 rounded-full",children:e.jsx("span",{className:"text-sm font-bold text-purple-600",children:t+1})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.usuario}),e.jsx("p",{className:"text-xs text-gray-500",children:s.email})]})]}),e.jsx("span",{className:"text-sm font-bold text-purple-600",children:s.total})]},t)):e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No hay datos disponibles"})})})]})]}),e.jsxs(a,{children:[e.jsxs(c,{children:[e.jsx(d,{children:"Tiempo Promedio de Préstamo"}),e.jsx(n,{children:"Duración promedio desde el préstamo hasta la devolución"})]}),e.jsx(r,{children:e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-5xl font-bold text-blue-600",children:C}),e.jsx("p",{className:"text-lg text-gray-600 mt-2",children:"días promedio"})]})})})]}),f.length>0&&e.jsxs(a,{children:[e.jsxs(c,{children:[e.jsxs(d,{className:"flex items-center space-x-2 text-red-600",children:[e.jsx(v,{className:"h-5 w-5"}),e.jsx("span",{children:"Préstamos Vencidos - Requieren Atención"})]}),e.jsx(n,{children:"Listado de préstamos que han superado su fecha de devolución"})]}),e.jsx(r,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-900",children:"ID"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-900",children:"Item"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-900",children:"Solicitante"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-900",children:"Fecha Préstamo"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-900",children:"Debía Devolver"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-900",children:"Días Vencido"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-900",children:"Acción"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:f.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"py-3 px-4 text-sm",children:["#",s.id]}),e.jsx("td",{className:"py-3 px-4 text-sm font-medium",children:s.item}),e.jsx("td",{className:"py-3 px-4 text-sm",children:s.solicitante}),e.jsx("td",{className:"py-3 px-4 text-sm",children:u(s.fecha_prestamo)}),e.jsx("td",{className:"py-3 px-4 text-sm",children:u(s.fecha_devolucion_esperada)}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[s.dias_vencido," días"]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(o,{variant:"outline",size:"sm",asChild:!0,children:e.jsx(N,{href:`/admin/prestamos/${s.id}`,children:"Ver"})})})]},s.id))})]})})})]})]})]})}export{ae as default};
