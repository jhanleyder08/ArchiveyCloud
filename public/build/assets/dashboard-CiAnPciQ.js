import{j as e,H as g,L as l}from"./app-BbVLMN3n.js";import{A as v}from"./app-layout-DuNHQXNu.js";import{C as a,c as r,a as n,b as x,d}from"./card-hfjFfd5W.js";import{B as i}from"./button-BEz-MgZu.js";import{B as y}from"./badge-CZI992Ye.js";import{A as b}from"./arrow-left-CGDukZvc.js";import{P as h}from"./plus-B9o2rXGW.js";import{K as m}from"./app-sidebar-layout-BIS9SqYZ.js";import{C as k}from"./circle-check-big-DxvwWdVi.js";import{A as j}from"./activity-COWzl6vu.js";import{U as w,T as p}from"./users-rAqieR2R.js";import{C as f}from"./folder-7O3yw5aM.js";import{T as A}from"./triangle-alert-Io9SLanW.js";import{R as T,T as C}from"./CategoricalChart-BaFOddB8.js";import{A as q,a as _}from"./AreaChart-DMc6VAgX.js";import{C as P,X as R,Y as D}from"./CartesianChart-CeGLS41v.js";/* empty css            */import"./index-BlDwMgsO.js";import"./Combination-DraFMRJO.js";import"./index-ClobGRcr.js";import"./index-BpOsTcxU.js";import"./x-2KhbMD4M.js";import"./index-DELq0D43.js";import"./app-logo-icon-BDzeXjyj.js";import"./input-B3XDVtNm.js";import"./label-CZ21H2wZ.js";import"./user-D_yXJePI.js";import"./search-ChknRy4m.js";import"./ActivePoints-Cp6v6bMp.js";function ne({estadisticas:s,tokens_mas_usados:o,actividad_diaria:N}){const u=Object.entries(N).map(([t,c])=>({fecha:t,requests:c,fechaFormateada:new Date(t).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit"})}));return e.jsxs(v,{children:[e.jsx(g,{title:"Dashboard - API Tokens - ArchiveyCloud"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(l,{href:"/admin/api-tokens",children:e.jsxs(i,{variant:"outline",size:"sm",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Volver a Tokens"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard API Tokens"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Análisis y estadísticas de uso de tokens API"})]})]}),e.jsx(l,{href:"/admin/api-tokens/create",children:e.jsxs(i,{children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Crear Token"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(a,{children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(m,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tokens"}),e.jsx("p",{className:"text-2xl font-bold",children:s.tokens.total})]})]})})}),e.jsx(a,{children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tokens Activos"}),e.jsx("p",{className:"text-2xl font-bold",children:s.tokens.activos}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.tokens.total>0?Math.round(s.tokens.activos/s.tokens.total*100):0,"% del total"]})]})]})})}),e.jsx(a,{children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(j,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Requests Hoy"}),e.jsx("p",{className:"text-2xl font-bold",children:s.uso_reciente.requests_hoy}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.uso_reciente.requests_semana," esta semana"]})]})]})})}),e.jsx(a,{children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{className:"h-8 w-8 text-orange-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Usuarios Activos"}),e.jsx("p",{className:"text-2xl font-bold",children:s.uso_reciente.usuarios_activos}),e.jsx("p",{className:"text-xs text-gray-500",children:"Última semana"})]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(a,{children:e.jsxs(r,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tokens Expirados"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:s.tokens.expirados})]}),e.jsx(f,{className:"h-8 w-8 text-red-600"})]}),s.tokens.expirados>0&&e.jsx("div",{className:"mt-4",children:e.jsx(y,{className:"bg-red-100 text-red-800",children:"Requieren atención"})})]})}),e.jsx(a,{children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tokens Inactivos"}),e.jsx("p",{className:"text-3xl font-bold text-gray-600",children:s.tokens.inactivos})]}),e.jsx(A,{className:"h-8 w-8 text-gray-600"})]})})}),e.jsx(a,{children:e.jsxs(r,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tasa de Uso"}),e.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[s.tokens.activos>0?Math.round(s.uso_reciente.usuarios_activos/s.tokens.activos*100):0,"%"]})]}),e.jsx(p,{className:"h-8 w-8 text-blue-600"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Tokens con actividad reciente"})]})})]}),e.jsxs(a,{children:[e.jsxs(n,{children:[e.jsxs(x,{className:"flex items-center",children:[e.jsx(j,{className:"h-5 w-5 mr-2"}),"Actividad de API (Últimos 30 días)"]}),e.jsx(d,{children:"Número de requests realizados por día"})]}),e.jsx(r,{children:e.jsx("div",{className:"h-80",children:e.jsx(T,{width:"100%",height:"100%",children:e.jsxs(q,{data:u,children:[e.jsx(P,{strokeDasharray:"3 3"}),e.jsx(R,{dataKey:"fechaFormateada",tick:{fontSize:12}}),e.jsx(D,{tick:{fontSize:12}}),e.jsx(C,{labelFormatter:t=>`Fecha: ${t}`,formatter:(t,c)=>[t,"Requests"]}),e.jsx(_,{type:"monotone",dataKey:"requests",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.2})]})})})})]}),e.jsxs(a,{children:[e.jsxs(n,{children:[e.jsxs(x,{className:"flex items-center",children:[e.jsx(p,{className:"h-5 w-5 mr-2"}),"Tokens Más Usados (Último mes)"]}),e.jsx(d,{children:"Ranking de tokens por número de requests"})]}),e.jsx(r,{children:e.jsx("div",{className:"space-y-4",children:o.length>0?o.map((t,c)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-600 rounded-full font-bold",children:c+1}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:t.nombre}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Por: ",t.usuario.name]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t.logs_count}),e.jsx("p",{className:"text-xs text-gray-500",children:"requests"})]})]},t.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(m,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay actividad"}),e.jsx("p",{className:"text-gray-600",children:"No se han registrado requests en el último mes"})]})})})]}),e.jsxs(a,{children:[e.jsxs(n,{children:[e.jsx(x,{children:"Acciones Rápidas"}),e.jsx(d,{children:"Gestión rápida de tokens API"})]}),e.jsx(r,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(l,{href:"/admin/api-tokens/create",children:e.jsxs(i,{className:"w-full h-20 flex flex-col items-center justify-center space-y-2",children:[e.jsx(h,{className:"h-6 w-6"}),e.jsx("span",{children:"Crear Token"})]})}),e.jsx(l,{href:"/admin/api-tokens?estado=expirado",children:e.jsxs(i,{variant:"outline",className:"w-full h-20 flex flex-col items-center justify-center space-y-2",children:[e.jsx(f,{className:"h-6 w-6"}),e.jsx("span",{children:"Ver Expirados"})]})}),e.jsx(l,{href:"/admin/api-tokens",children:e.jsxs(i,{variant:"outline",className:"w-full h-20 flex flex-col items-center justify-center space-y-2",children:[e.jsx(m,{className:"h-6 w-6"}),e.jsx("span",{children:"Gestionar Todos"})]})})]})})]})]})]})}export{ne as default};
