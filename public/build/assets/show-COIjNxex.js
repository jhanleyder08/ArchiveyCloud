import{r as f,u as R,j as e,H as k,L as i}from"./app-DmFTQNHU.js";import{A as L}from"./app-layout-CF5PBVMg.js";import{c as V,B as r}from"./button-B9uqYTIR.js";import{C as l,a as c,b as d,c as m}from"./card-98qlzFSI.js";import{B as j,F as b}from"./Combination-DB4vhy5A.js";import{A as $,q as _,i as o,D as H,a as T,b as M,c as U,d as I,T as q,e as B}from"./app-sidebar-layout-B4-tSBlc.js";import{L as y}from"./label-CYYsus1F.js";import{C as O}from"./checkbox-aJFP73X7.js";import{S as P}from"./square-pen-CQEvGVzK.js";import{C as u}from"./circle-x-Cbxwk3Mf.js";import{C as g}from"./circle-check-big-DyCuRV4E.js";import{L as w}from"./loader-circle-C7HaNpOf.js";import{D as J}from"./users-CA6jkooN.js";import{T as D}from"./triangle-alert-Qv0vinvY.js";import{M as C}from"./map-pin-BNcqedd4.js";import{C as p}from"./calendar-B2HHxpzZ.js";import{E as z}from"./eye-CevU9AUM.js";import{U as E}from"./user-2vHAz8tr.js";import{C as G}from"./folder-CyqBlkrb.js";/* empty css            */import"./index-6lxVY5DU.js";import"./index-BBDU3XkM.js";import"./index-D6-3VAHV.js";import"./x-D4OXCe6m.js";import"./app-logo-icon-B1r3bsQj.js";import"./input-CXpCTHGE.js";import"./mail-i7usF0Qz.js";import"./search-BECONtiU.js";import"./BrandingProvider-BKZadETt.js";import"./index-_200N-9v.js";import"./check-kl6Xjmwn.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],K=V("History",X),Q={pendiente:"bg-gray-100 text-gray-800 border-gray-200",en_revision:"bg-blue-100 text-blue-800 border-blue-200",aprobado:"bg-green-100 text-green-800 border-green-200",rechazado:"bg-red-100 text-red-800 border-red-200",ejecutado:"bg-purple-100 text-purple-800 border-purple-200",cancelado:"bg-gray-100 text-gray-600 border-gray-200"},W={conservacion_permanente:"bg-emerald-100 text-emerald-800 border-emerald-200",eliminacion_controlada:"bg-red-100 text-red-800 border-red-200",transferencia_historica:"bg-blue-100 text-blue-800 border-blue-200",digitalizacion:"bg-indigo-100 text-indigo-800 border-indigo-200",microfilmacion:"bg-violet-100 text-violet-800 border-violet-200"},Y={pendiente:e.jsx(G,{className:"h-4 w-4"}),en_revision:e.jsx(z,{className:"h-4 w-4"}),aprobado:e.jsx(g,{className:"h-4 w-4"}),rechazado:e.jsx(u,{className:"h-4 w-4"}),ejecutado:e.jsx(o,{className:"h-4 w-4"}),cancelado:e.jsx(D,{className:"h-4 w-4"})};function Se({disposicion:a}){const[F,x]=f.useState(!1),[v,N]=f.useState(!1),s=R({validacion_legal:"",cumple_normativa:!1,documentos_soporte:[]}),h=t=>new Date(t).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),n=t=>new Date(t).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}),S=()=>{N(!0),window.location.href=route("admin.disposiciones.exportar-pdf",a.id),setTimeout(()=>N(!1),2e3)},A=t=>{t.preventDefault(),s.put(route("admin.disposiciones.enviar-revision",a.id),{onSuccess:()=>{x(!1),s.reset()}})};return e.jsxs(L,{children:[e.jsx(k,{title:`Disposición Final #${a.id}`}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(r,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(i,{href:route("admin.disposiciones.index"),children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Volver"]})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:["Disposición Final #",a.id]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Detalles de la propuesta de disposición final"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[a.estado==="pendiente"&&e.jsxs(e.Fragment,{children:[e.jsx(r,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(i,{href:route("admin.disposiciones.edit",a.id),children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Editar"]})}),e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>x(!0),children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Enviar a Revisión"]})]}),a.estado==="en_revision"&&e.jsxs(e.Fragment,{children:[e.jsxs(r,{variant:"outline",size:"sm",children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Rechazar"]}),e.jsxs(r,{size:"sm",children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Aprobar"]})]}),a.estado==="aprobado"&&e.jsxs(r,{size:"sm",children:[e.jsx(o,{className:"h-4 w-4 mr-2"}),"Ejecutar"]}),e.jsxs(r,{variant:"outline",size:"sm",onClick:S,disabled:v,children:[v?e.jsx(w,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(J,{className:"h-4 w-4 mr-2"}),"Exportar PDF"]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j,{variant:"outline",className:`${Q[a.estado]} text-base py-2 px-4`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[Y[a.estado],e.jsx("span",{children:a.estado_label})]})}),e.jsx(j,{variant:"outline",className:`${W[a.tipo_disposicion]} text-base py-2 px-4`,children:a.tipo_disposicion_label}),a.esta_vencida&&e.jsxs(j,{variant:"outline",className:"bg-red-100 text-red-800 border-red-200 text-base py-2 px-4",children:[e.jsx(D,{className:"h-4 w-4 mr-1"}),"¡Vencida!"]})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Creada: ",h(a.created_at)]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center space-x-2",children:[a.expediente?e.jsx(o,{className:"h-5 w-5 text-blue-500"}):e.jsx(b,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{children:"Item Afectado"})]})}),e.jsx(m,{children:a.expediente?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:a.expediente.codigo}),e.jsx("p",{className:"text-gray-600 mt-1",children:a.expediente.titulo})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Serie Documental:"}),e.jsx("p",{children:a.expediente.serie?`${a.expediente.serie.codigo} - ${a.expediente.serie.nombre}`:"No especificada"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Estado del Expediente:"}),e.jsx("p",{children:a.expediente.estado||a.expediente.estado_ciclo_vida})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Ubicación Física:"}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(C,{className:"h-4 w-4 mr-1 text-gray-400"}),a.expediente.ubicacion_fisica]})]}),a.fecha_vencimiento_retencion&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Vencimiento de Retención:"}),e.jsxs("p",{className:`flex items-center ${a.esta_vencida?"text-red-600 font-medium":""}`,children:[e.jsx(p,{className:"h-4 w-4 mr-1 text-gray-400"}),n(a.fecha_vencimiento_retencion)]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Años en Archivo Central:"}),e.jsxs("p",{className:"font-semibold",children:[a.expediente.anos_retencion_archivo_central," años"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Años en Archivo Histórico:"}),e.jsxs("p",{className:"font-semibold",children:[a.expediente.anos_retencion_archivo_historico," años"]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(r,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(i,{href:route("admin.expedientes.show",a.expediente.id),children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Ver Expediente"]})})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:a.documento?.nombre}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Expediente: ",a.documento?.expediente.codigo," - ",a.documento?.expediente.titulo]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Serie Documental:"}),e.jsx("p",{children:a.documento?.expediente.serie?`${a.documento.expediente.serie.codigo} - ${a.documento.expediente.serie.nombre}`:"No especificada"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Ubicación Física:"}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(C,{className:"h-4 w-4 mr-1 text-gray-400"}),a.documento?.ubicacion_fisica]})]}),a.fecha_vencimiento_retencion&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Vencimiento de Retención:"}),e.jsxs("p",{className:`flex items-center ${a.esta_vencida?"text-red-600 font-medium":""}`,children:[e.jsx(p,{className:"h-4 w-4 mr-1 text-gray-400"}),n(a.fecha_vencimiento_retencion)]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(r,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(i,{href:route("admin.expedientes.show",a.documento?.expediente.id),children:[e.jsx(o,{className:"h-4 w-4 mr-2"}),"Ver Expediente"]})}),e.jsx(r,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(i,{href:route("admin.documentos.show",a.documento?.id),children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Ver Documento"]})})]})]})})]}),e.jsxs(l,{children:[e.jsx(c,{children:e.jsx(d,{children:"Justificación y Observaciones"})}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Justificación"}),e.jsx("p",{className:"text-gray-600 bg-gray-50 p-3 rounded-lg",children:a.justificacion})]}),a.observaciones&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Observaciones Generales"}),e.jsx("p",{className:"text-gray-600 bg-gray-50 p-3 rounded-lg",children:a.observaciones})]}),a.observaciones_aprobacion&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-700 mb-2",children:"Observaciones de Aprobación"}),e.jsx("p",{className:"text-green-600 bg-green-50 p-3 rounded-lg border border-green-200",children:a.observaciones_aprobacion})]}),a.observaciones_rechazo&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-red-700 mb-2",children:"Observaciones de Rechazo"}),e.jsx("p",{className:"text-red-600 bg-red-50 p-3 rounded-lg border border-red-200",children:a.observaciones_rechazo})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center space-x-2",children:[e.jsx(p,{className:"h-5 w-5"}),e.jsx("span",{children:"Cronología"})]})}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Fecha de Propuesta:"}),e.jsx("p",{className:"text-sm",children:n(a.fecha_propuesta)})]}),a.fecha_aprobacion&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-green-600",children:"Fecha de Aprobación:"}),e.jsx("p",{className:"text-sm",children:n(a.fecha_aprobacion)})]}),a.fecha_rechazo&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-red-600",children:"Fecha de Rechazo:"}),e.jsx("p",{className:"text-sm",children:n(a.fecha_rechazo)})]}),a.fecha_ejecucion&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-purple-600",children:"Fecha de Ejecución:"}),e.jsx("p",{className:"text-sm",children:n(a.fecha_ejecucion)})]}),a.fecha_vencimiento_retencion&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Vencimiento de Retención:"}),e.jsx("p",{className:`text-sm ${a.esta_vencida?"text-red-600 font-medium":""}`,children:n(a.fecha_vencimiento_retencion)}),a.dias_para_vencimiento<=30&&a.dias_para_vencimiento>0&&e.jsxs("p",{className:"text-xs text-orange-600 mt-1",children:["Vence en ",a.dias_para_vencimiento," días"]}),a.esta_vencida&&e.jsx("p",{className:"text-xs text-red-600 font-medium mt-1",children:"¡Esta disposición está vencida!"})]})]})]}),e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"h-5 w-5"}),e.jsx("span",{children:"Usuarios Involucrados"})]})}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Responsable:"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(E,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:a.responsable?.name||"Sin responsable asignado"}),e.jsx("p",{className:"text-xs text-gray-500",children:a.responsable?.email||"Email no disponible"})]})]})]}),a.aprobado_por&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-green-600",children:"Aprobado por:"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(g,{className:"h-4 w-4 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:a.aprobado_por?.name||"Usuario no disponible"}),e.jsx("p",{className:"text-xs text-gray-500",children:a.aprobado_por?.email||"Email no disponible"})]})]})]}),a.rechazado_por&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-red-600",children:"Rechazado por:"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(u,{className:"h-4 w-4 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:a.rechazado_por?.name||"Usuario no disponible"}),e.jsx("p",{className:"text-xs text-gray-500",children:a.rechazado_por?.email||"Email no disponible"})]})]})]})]})]}),e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center space-x-2",children:[e.jsx(K,{className:"h-5 w-5"}),e.jsx("span",{children:"Historial"})]})}),e.jsxs(m,{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:"font-medium",children:"Creada"})]}),e.jsx("p",{className:"text-xs text-gray-500 ml-4",children:h(a.created_at)})]}),a.updated_at!==a.created_at&&e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"font-medium",children:"Última modificación"})]}),e.jsx("p",{className:"text-xs text-gray-500 ml-4",children:h(a.updated_at)})]})]})]})]})]})]}),e.jsx(H,{open:F,onOpenChange:x,children:e.jsxs(T,{className:"sm:max-w-[500px]",children:[e.jsxs(M,{children:[e.jsx(U,{children:"Enviar a Revisión"}),e.jsx(I,{children:"Complete la información legal requerida para enviar esta disposición a revisión."})]}),e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"validacion_legal",children:"Validación Legal *"}),e.jsx(q,{id:"validacion_legal",placeholder:"Ingrese la justificación legal para esta disposición (mínimo 20 caracteres)...",value:s.data.validacion_legal,onChange:t=>s.setData("validacion_legal",t.target.value),className:"min-h-[100px]"}),s.errors.validacion_legal&&e.jsx("p",{className:"text-sm text-red-500",children:s.errors.validacion_legal})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(O,{id:"cumple_normativa",checked:s.data.cumple_normativa,onCheckedChange:t=>s.setData("cumple_normativa",t===!0)}),e.jsx(y,{htmlFor:"cumple_normativa",className:"text-sm font-normal",children:"Confirmo que esta disposición cumple con la normativa vigente"})]}),s.errors.cumple_normativa&&e.jsx("p",{className:"text-sm text-red-500",children:s.errors.cumple_normativa}),e.jsxs(B,{children:[e.jsx(r,{type:"button",variant:"outline",onClick:()=>x(!1),children:"Cancelar"}),e.jsx(r,{type:"submit",disabled:s.processing,children:s.processing?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"h-4 w-4 mr-2 animate-spin"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Enviar a Revisión"]})})]})]})]})})]})}export{Se as default};
