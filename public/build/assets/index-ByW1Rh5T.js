import{b as H,r as t,a as J,j as e,H as Q}from"./app-D5ty85UD.js";import{A as k}from"./app-layout-BldlUZtG.js";import{B as i}from"./app-logo-icon-CER8Okyj.js";import{I as q}from"./label-52xU_9U9.js";import{S as x,a as h,b as m,c as p,d as l}from"./select-DED6Pjgm.js";import{B as _}from"./badge-CRDWS41x.js";import{t as D,j as g,k as f,l as N,m as v,n as b}from"./app-sidebar-layout-DA_3G3Md.js";import{P as K}from"./plus-CDwBELFr.js";import{S as R}from"./search-CUyRoyD4.js";import{F as $}from"./filter-DTt4t6hj.js";import{E as U}from"./eye-Bqo5at20.js";import{S as W}from"./square-pen-B_ZCkr0m.js";import{T as Y}from"./trash-2-ChZQK6ga.js";/* empty css            */import"./index-BoLQYjiW.js";import"./index-C_kE6Ds7.js";import"./check-D4Ehe9Dv.js";import"./index-C_bZVMS5.js";const Z=[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Documentos",href:"/admin/documentos"}];function Te({documentos:r,stats:j,flash:ee,expedientes:T,tipologias:se}){const{flash:o}=H().props,[u,E]=t.useState(""),[d,w]=t.useState("all"),[c,M]=t.useState("all"),[te,B]=t.useState(null),[ae,A]=t.useState(!1),[le,P]=t.useState(null),[re,ie]=t.useState(null),[y,V]=t.useState(!1),[S,X]=t.useState({search:"",estado:"all",tipo_soporte:"all",expediente_id:"all"}),z={borrador:"Borrador",activo:"Activo",archivado:"Archivado"},C={fisico:"Físico",electronico:"Electrónico",hibrido:"Híbrido"},G={PDF:"PDF",DOC:"DOC",DOCX:"DOCX",XLS:"XLS",XLSX:"XLSX",JPG:"JPG",PNG:"PNG"};t.useEffect(()=>{o?.success&&D.success(o.success),o?.error&&D.error(o.error)},[o]),t.useEffect(()=>{const s=setTimeout(()=>{J.get("/admin/documentos",{search:u||void 0,estado:d==="all"?void 0:d,formato:c==="all"?void 0:c},{preserveState:!0,replace:!0})},500);return()=>clearTimeout(s)},[u,d,c]);const[oe,de]=t.useState({codigo_documento:"",titulo:"",descripcion:"",expediente_id:"",tipologia_id:"",estado:"borrador"}),[ce,ne]=t.useState({codigo_documento:"",titulo:"",descripcion:"",expediente_id:"",tipologia_id:"",estado:"borrador"}),F=(s,a)=>{X(n=>({...n,[s]:a})),s==="estado"&&w(a)},I=s=>({borrador:"bg-gray-100 text-gray-800",pendiente:"bg-yellow-100 text-yellow-800",aprobado:"bg-blue-100 text-blue-800",activo:"bg-green-100 text-green-800",archivado:"bg-purple-100 text-purple-800",obsoleto:"bg-red-100 text-red-800"})[s]||"bg-gray-100 text-gray-800",L=s=>({electronico:"bg-blue-100 text-blue-800",fisico:"bg-orange-100 text-orange-800",hibrido:"bg-purple-100 text-purple-800"})[s]||"bg-gray-100 text-gray-800",O=s=>{if(!s)return"N/A";const a=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(s)/Math.log(1024));return Math.round(s/Math.pow(1024,n)*100)/100+" "+a[n]};return e.jsxs(k,{breadcrumbs:Z,children:[e.jsx(Q,{title:"Gestión de Documentos"}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-6 w-6 text-[#2a3d83]"}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Gestión de Documentos"})]}),e.jsxs(i,{onClick:()=>A(!0),className:"flex items-center gap-2 px-4 py-2 bg-[#2a3d83] text-white rounded-lg hover:bg-[#1e2b5f] transition-colors",children:[e.jsx(K,{className:"h-4 w-4"}),"Nuevo Documento"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Documentos"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:j?.total||0})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(g,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Documentos Activos"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:j?.activos||0})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx("div",{className:"h-6 w-6 bg-[#2a3d83] rounded-full flex items-center justify-center",children:e.jsx("div",{className:"h-2 w-2 bg-white rounded-full"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Borradores"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:j?.borradores||0})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx("div",{className:"h-6 w-6 bg-[#2a3d83] rounded-full flex items-center justify-center",children:e.jsx("div",{className:"h-2 w-2 bg-white rounded-full"})})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4 w-full sm:w-auto",children:e.jsxs("div",{className:"relative flex-1 sm:w-80",children:[e.jsx(R,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(q,{type:"text",value:u,onChange:s=>E(s.target.value),placeholder:"Buscar documentos...",className:"pl-10"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(x,{value:d,onValueChange:w,children:[e.jsx(h,{className:"w-[180px]",children:e.jsx(m,{placeholder:"Filtro por estado"})}),e.jsxs(p,{children:[e.jsx(l,{value:"all",children:"Todos los estados"}),e.jsx(l,{value:"activo",children:"Activo"}),e.jsx(l,{value:"borrador",children:"Borrador"}),e.jsx(l,{value:"archivado",children:"Archivado"})]})]}),e.jsx(i,{variant:"outline",size:"icon",onClick:()=>V(!y),children:e.jsx($,{className:"h-4 w-4"})})]})]}),y&&e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(x,{value:S.tipo_soporte,onValueChange:s=>F("tipo_soporte",s),children:[e.jsx(h,{children:e.jsx(m,{placeholder:"Tipo de Soporte"})}),e.jsxs(p,{children:[e.jsx(l,{value:"all",children:"Todos los soportes"}),Object.entries(C).map(([s,a])=>e.jsx(l,{value:s,children:a},s))]})]}),e.jsxs(x,{value:c,onValueChange:M,children:[e.jsx(h,{children:e.jsx(m,{placeholder:"Formato"})}),e.jsxs(p,{children:[e.jsx(l,{value:"all",children:"Todos los formatos"}),Object.entries(G).map(([s,a])=>e.jsx(l,{value:s,children:a},s))]})]}),e.jsxs(x,{value:S.expediente_id,onValueChange:s=>F("expediente_id",s),children:[e.jsx(h,{children:e.jsx(m,{placeholder:"Expediente"})}),e.jsxs(p,{children:[e.jsx(l,{value:"all",children:"Todos los expedientes"}),T.map(s=>e.jsx(l,{value:s.id.toString(),children:s.titulo},s.id))]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 font-medium text-sm text-gray-900",children:"Documento"}),e.jsx("th",{className:"text-left p-4 font-medium text-sm text-gray-900",children:"Expediente"}),e.jsx("th",{className:"text-left p-4 font-medium text-sm text-gray-900",children:"Estado"}),e.jsx("th",{className:"text-left p-4 font-medium text-sm text-gray-900",children:"Formato"}),e.jsx("th",{className:"text-left p-4 font-medium text-sm text-gray-900",children:"Tamaño"}),e.jsx("th",{className:"text-left p-4 font-medium text-sm text-gray-900",children:"Fecha"}),e.jsx("th",{className:"text-right p-4 font-medium text-sm text-gray-900",children:"Acciones"})]})}),e.jsx("tbody",{children:!r?.data||r.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"p-8 text-center text-gray-500",children:"No hay documentos disponibles"})}):r?.data?.map(s=>e.jsxs("tr",{className:"border-b hover:bg-gray-50/50",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(g,{className:"h-5 w-5 text-[#2a3d83]"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.titulo}),e.jsx("div",{className:"text-sm text-gray-500",children:s.codigo_documento})]})]})}),e.jsx("td",{className:"p-4",children:s.expediente?e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.expediente.titulo}),e.jsx("div",{className:"text-sm text-gray-500",children:s.expediente.numero_expediente})]}):e.jsx("span",{className:"text-sm text-gray-400",children:"Sin expediente"})}),e.jsx("td",{className:"p-4",children:e.jsx(_,{className:I(s.estado),children:z[s.estado]||s.estado})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{className:L(s.tipo_soporte),children:C[s.tipo_soporte]||s.tipo_soporte}),e.jsx("span",{className:"text-xs text-gray-500 uppercase",children:s.formato})]})}),e.jsx("td",{className:"p-4 text-sm text-gray-900",children:O(s.tamaño)}),e.jsx("td",{className:"p-4 text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString("es-ES")}),e.jsx("td",{className:"p-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(f,{children:e.jsxs(N,{children:[e.jsx(v,{asChild:!0,children:e.jsx(i,{variant:"ghost",size:"icon",onClick:()=>window.location.href=`/admin/documentos/${s.id}`,className:"h-8 w-8",children:e.jsx(U,{className:"h-4 w-4"})})}),e.jsx(b,{children:e.jsx("p",{children:"Ver detalle"})})]})}),e.jsx(f,{children:e.jsxs(N,{children:[e.jsx(v,{asChild:!0,children:e.jsx(i,{variant:"ghost",size:"icon",onClick:()=>P(s),className:"h-8 w-8",children:e.jsx(W,{className:"h-4 w-4"})})}),e.jsx(b,{children:e.jsx("p",{children:"Editar"})})]})}),e.jsx(f,{children:e.jsxs(N,{children:[e.jsx(v,{asChild:!0,children:e.jsx(i,{variant:"ghost",size:"icon",onClick:()=>B(s),className:"h-8 w-8 text-red-600 hover:text-red-700",children:e.jsx(Y,{className:"h-4 w-4"})})}),e.jsx(b,{children:e.jsx("p",{children:"Eliminar"})})]})})]})})]},s.id))})]})}),r?.last_page&&r.last_page>1&&e.jsxs("div",{className:"mt-6 flex items-center justify-between px-6 pb-6",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Mostrando ",e.jsx("span",{className:"font-medium",children:r?.from||0})," a"," ",e.jsx("span",{className:"font-medium",children:r?.to||0})," de"," ",e.jsx("span",{className:"font-medium",children:r?.total||0})," documentos"]}),e.jsx("div",{className:"flex gap-2",children:r?.links?.map(s=>e.jsx(i,{variant:s.active?"default":"outline",size:"sm",onClick:()=>s.url&&(window.location.href=s.url),disabled:!s.url,children:e.jsx("span",{dangerouslySetInnerHTML:{__html:s.label}})},s.label))})]})]})]})]})}export{Te as default};
