import{c as P,r as y,j as e,H as z,L as _,a as w}from"./app-B-PXR1Ni.js";import{A as I}from"./app-layout-DJutQZnN.js";import{B as n}from"./app-logo-icon-BLsuM4IN.js";import{I as L}from"./label-CcIhawib.js";import{C as k,S as p,a as g,b as u,c as N,d as r}from"./select-B6s0-YwG.js";import{B as l}from"./badge-CNo-IL5x.js";import{C as t,d as i,a as D,b as H}from"./card-Dmlm_cpt.js";import{F as O}from"./folder-open-DVjE30P7.js";import{P as $}from"./plus-DmrOjBIx.js";import{v,F as R,a as G,c as q,p as Q}from"./app-sidebar-layout-D9ulO2li.js";import{C as K}from"./circle-check-big-vwlwSDoT.js";import{C as U}from"./calendar-CQqh5lbn.js";import{F as J}from"./filter-CRdJDhgp.js";import{E as W}from"./eye-m25VD-li.js";import{S as X}from"./square-pen-gP4PZLVJ.js";/* empty css            */import"./index-DsJw0RIA.js";import"./index-CQZ_TJph.js";import"./check-BUuVkhmq.js";import"./index-DARluDlH.js";const Y=[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Expedientes",href:"/admin/expedientes"}];function ye({expedientes:d,estadisticas:c,opciones:h,filtros:x}){const{flash:Z}=P().props,[ee,se]=y.useState(x.search||""),[f,E]=y.useState(!1),[o,m]=y.useState({search:x.search||"",estado:x.estado||"all",tipo_expediente:x.tipo_expediente||"all",serie_id:x.serie_id||"all",area_responsable:x.area_responsable||"all",proximidad_vencimiento:x.proximidad_vencimiento||"all"}),B=()=>{const s=new URLSearchParams;Object.entries(o).forEach(([a,j])=>{j&&j!=="all"&&s.append(a,j)}),w.get("/admin/expedientes",Object.fromEntries(s))},T=()=>{m({search:"",estado:"all",tipo_expediente:"all",serie_id:"all",area_responsable:"all",proximidad_vencimiento:"all"}),w.get("/admin/expedientes")},V=s=>({abierto:e.jsx(l,{variant:"default",className:"bg-green-100 text-green-800",children:"Abierto"}),cerrado:e.jsx(l,{variant:"secondary",children:"Cerrado"}),transferido:e.jsx(l,{variant:"default",className:"bg-blue-100 text-blue-800",children:"Transferido"}),archivado:e.jsx(l,{variant:"default",className:"bg-purple-100 text-purple-800",children:"Archivado"}),en_disposicion:e.jsx(l,{variant:"destructive",children:"En Disposición"})})[s]||e.jsx(l,{variant:"outline",children:s}),A=s=>({electronico:e.jsx(l,{variant:"default",className:"bg-indigo-100 text-indigo-800",children:"Electrónico"}),fisico:e.jsx(l,{variant:"default",className:"bg-gray-100 text-gray-800",children:"Físico"}),hibrido:e.jsx(l,{variant:"default",className:"bg-yellow-100 text-yellow-800",children:"Híbrido"})})[s]||e.jsx(l,{variant:"outline",children:s}),M=s=>({publica:e.jsx(l,{variant:"outline",className:"text-green-600 border-green-600",children:"Pública"}),interna:e.jsx(l,{variant:"outline",className:"text-blue-600 border-blue-600",children:"Interna"}),confidencial:e.jsx(l,{variant:"outline",className:"text-orange-600 border-orange-600",children:"Confidencial"}),reservada:e.jsx(l,{variant:"outline",className:"text-red-600 border-red-600",children:"Reservada"}),clasificada:e.jsx(l,{variant:"destructive",children:"Clasificada"})})[s]||e.jsx(l,{variant:"outline",children:s}),b=s=>new Date(s).toLocaleDateString("es-CO",{year:"numeric",month:"short",day:"2-digit"}),C=s=>{if(s===0)return"0 B";const a=1024,j=["B","KB","MB","GB"],S=Math.floor(Math.log(s)/Math.log(a));return parseFloat((s/Math.pow(a,S)).toFixed(2))+" "+j[S]},F=(s,a)=>Math.round(s/a*100);return e.jsxs(I,{breadcrumbs:Y,children:[e.jsx(z,{title:"Gestión de Expedientes"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{className:"h-6 w-6 text-[#2a3d83]"}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Gestión de Expedientes"})]}),e.jsx(_,{href:"/admin/expedientes/create",children:e.jsxs(n,{className:"bg-[#2a3d83] hover:bg-[#1e2b5f] flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4"}),"Crear Expediente"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-8 gap-4",children:[e.jsx(t,{children:e.jsx(i,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(v,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.total}),e.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Total"})]})]})})}),e.jsx(t,{children:e.jsx(i,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(K,{className:"h-4 w-4 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.abiertos}),e.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Abiertos"})]})]})})}),e.jsx(t,{children:e.jsx(i,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:e.jsx(v,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.cerrados}),e.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Cerrados"})]})]})})}),e.jsx(t,{children:e.jsx(i,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:e.jsx(R,{className:"h-4 w-4 text-indigo-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.electronicos}),e.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Electrónicos"})]})]})})}),e.jsx(t,{children:e.jsx(i,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:e.jsx(v,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.fisicos}),e.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Físicos"})]})]})})}),e.jsx(t,{children:e.jsx(i,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(v,{className:"h-4 w-4 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.hibridos}),e.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Híbridos"})]})]})})}),e.jsx(t,{children:e.jsx(i,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(U,{className:"h-4 w-4 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.proximos_vencer}),e.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Próx. Vencer"})]})]})})}),e.jsx(t,{children:e.jsx(i,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(G,{className:"h-4 w-4 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.vencidos}),e.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Vencidos"})]})]})})})]}),e.jsxs(t,{children:[e.jsx(D,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(H,{children:"Filtros de Búsqueda"}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>E(!f),className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),"Filtros Avanzados",e.jsx(k,{className:`h-4 w-4 transition-transform ${f?"rotate-180":""}`})]})]})}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(L,{placeholder:"Buscar por código, nombre o descripción...",value:o.search,onChange:s=>m(a=>({...a,search:s.target.value})),className:"w-full"})}),e.jsxs(p,{value:o.estado,onValueChange:s=>m(a=>({...a,estado:s})),children:[e.jsx(g,{className:"w-[200px]",children:e.jsx(u,{placeholder:"Estado"})}),e.jsxs(N,{children:[e.jsx(r,{value:"all",children:"Todos los estados"}),h.estados.map(s=>e.jsx(r,{value:s.value,children:s.label},s.value))]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{onClick:B,className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),"Buscar"]}),e.jsx(n,{variant:"outline",onClick:T,children:"Limpiar"})]})]}),f&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 pt-4 border-t",children:[e.jsxs(p,{value:o.tipo_expediente,onValueChange:s=>m(a=>({...a,tipo_expediente:s})),children:[e.jsx(g,{children:e.jsx(u,{placeholder:"Tipo"})}),e.jsxs(N,{children:[e.jsx(r,{value:"all",children:"Todos los tipos"}),h.tipos.map(s=>e.jsx(r,{value:s.value,children:s.label},s.value))]})]}),e.jsxs(p,{value:o.serie_id,onValueChange:s=>m(a=>({...a,serie_id:s})),children:[e.jsx(g,{children:e.jsx(u,{placeholder:"Serie"})}),e.jsxs(N,{children:[e.jsx(r,{value:"all",children:"Todas las series"}),h.series_disponibles.map(s=>e.jsxs(r,{value:s.id.toString(),children:[s.codigo," - ",s.nombre]},s.id))]})]}),e.jsxs(p,{value:o.area_responsable,onValueChange:s=>m(a=>({...a,area_responsable:s})),children:[e.jsx(g,{children:e.jsx(u,{placeholder:"Área"})}),e.jsxs(N,{children:[e.jsx(r,{value:"all",children:"Todas las áreas"}),h.areas_disponibles.map(s=>e.jsx(r,{value:s.value,children:s.label},s.value))]})]}),e.jsxs(p,{value:o.proximidad_vencimiento,onValueChange:s=>m(a=>({...a,proximidad_vencimiento:s})),children:[e.jsx(g,{children:e.jsx(u,{placeholder:"Vencimiento"})}),e.jsxs(N,{children:[e.jsx(r,{value:"all",children:"Sin filtro de vencimiento"}),h.proximidad_vencimiento.map(s=>e.jsx(r,{value:s.value,children:s.label},s.value))]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 font-medium text-sm text-gray-900",children:"Expediente"}),e.jsx("th",{className:"text-left p-4 font-medium text-sm text-gray-900",children:"Serie/Subserie"}),e.jsx("th",{className:"text-left p-4 font-medium text-sm text-gray-900",children:"Estado/Tipo"}),e.jsx("th",{className:"text-left p-4 font-medium text-sm text-gray-900",children:"Responsable"}),e.jsx("th",{className:"text-left p-4 font-medium text-sm text-gray-900",children:"Volumen/Folios"}),e.jsx("th",{className:"text-left p-4 font-medium text-sm text-gray-900",children:"Fechas"}),e.jsx("th",{className:"text-right p-4 font-medium text-sm text-gray-900",children:"Acciones"})]})}),e.jsx("tbody",{children:d.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"p-8 text-center text-gray-500",children:"No hay expedientes disponibles"})}):d.data.map(s=>e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.codigo}),M(s.confidencialidad)]}),e.jsx("p",{className:"text-sm text-gray-600",children:s.nombre}),s.descripcion&&e.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:s.descripcion})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"space-y-1",children:[s.serie&&e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[s.serie.codigo," - ",s.serie.nombre]}),s.subserie&&e.jsxs("p",{className:"text-xs text-gray-600",children:[s.subserie.codigo," - ",s.subserie.nombre]}),e.jsx("p",{className:"text-xs text-gray-500",children:s.area_responsable})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[V(s.estado),A(s.tipo_expediente)]})}),e.jsx("td",{className:"p-4",children:e.jsx("div",{className:"space-y-1",children:s.usuario_responsable&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.usuario_responsable.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.usuario_responsable.email})]})})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${F(s.volumen_actual,s.volumen_maximo)}%`}})}),e.jsxs("span",{className:"text-xs text-gray-500",children:[F(s.volumen_actual,s.volumen_maximo),"%"]})]}),e.jsxs("p",{className:"text-xs text-gray-600",children:[C(s.volumen_actual)," / ",C(s.volumen_maximo)]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.numero_folios," folios"]})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-xs text-gray-600",children:[e.jsx("strong",{children:"Apertura:"}),e.jsx("br",{}),b(s.fecha_apertura)]}),s.fecha_cierre&&e.jsxs("p",{className:"text-xs text-gray-600",children:[e.jsx("strong",{children:"Cierre:"}),e.jsx("br",{}),b(s.fecha_cierre)]}),s.fecha_vencimiento_disposicion&&e.jsxs("p",{className:"text-xs text-orange-600",children:[e.jsx("strong",{children:"Vence:"}),e.jsx("br",{}),b(s.fecha_vencimiento_disposicion)]})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(_,{href:`/admin/expedientes/${s.id}`,children:e.jsx(n,{variant:"ghost",size:"sm",title:"Ver expediente",children:e.jsx(W,{className:"h-4 w-4"})})}),e.jsx(_,{href:`/admin/expedientes/${s.id}/edit`,children:e.jsx(n,{variant:"ghost",size:"sm",title:"Editar expediente",children:e.jsx(X,{className:"h-4 w-4"})})}),e.jsx(n,{variant:"ghost",size:"sm",title:"Exportar directorio",onClick:()=>{window.open(`/admin/expedientes/${s.id}/exportar-directorio?formato=json`,"_blank")},children:e.jsx(Q,{className:"h-4 w-4"})})]})})]},s.id))})]})}),d.last_page>1&&e.jsx("div",{className:"px-4 py-3 border-t bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Mostrando ",d.from," a ",d.to," de ",d.total," expedientes"]}),e.jsx("div",{className:"flex space-x-1",children:d.links.map((s,a)=>e.jsx(n,{variant:s.active?"default":"outline",size:"sm",onClick:()=>s.url&&w.get(s.url),disabled:!s.url,dangerouslySetInnerHTML:{__html:s.label}},a))})]})})]})]})]})}export{ye as default};
