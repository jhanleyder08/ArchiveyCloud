import{r as p,u as A,j as e,H as E,L as g}from"./app-C5ckqBIp.js";import{A as k}from"./app-layout-DGpHzsZj.js";import{B as n}from"./button-C_wizhg3.js";import{I as y}from"./input-DjB33T14.js";import{L as d}from"./label-D9bm4s2r.js";import{A as F,i as T,T as C}from"./app-sidebar-layout-B-YWzudl.js";import{C as x,a as h,b as u,d as B,c as j}from"./card-C_VOERQk.js";import{A as _,a as w}from"./alert-DyllTe_s.js";import{F as I}from"./Combination-CIeNRLzY.js";import{U}from"./user-2UwuEIUF.js";import{S as z}from"./search-CVtN_EcY.js";import{C as H}from"./circle-check-big-BhkhaQeQ.js";import{C as $}from"./calendar-DWIY_Qm5.js";import{S as O}from"./save-C6AcJQoX.js";/* empty css            */import"./index-D_U0JQiI.js";import"./index-C72nIoIT.js";import"./index-z-hyAKzV.js";import"./x-Cc5GKSP1.js";import"./app-logo-icon-EYLFXuBA.js";import"./mail-DhzsRTCw.js";import"./users-Bu6eepbM.js";import"./folder-9RT5E6CU.js";import"./triangle-alert-c3kReHiM.js";import"./BrandingProvider-ZsHKNxl6.js";const q=[{value:"conservacion_permanente",label:"Conservación Permanente"},{value:"eliminacion_controlada",label:"Eliminación Controlada"},{value:"transferencia_historica",label:"Transferencia Histórica"},{value:"digitalizacion",label:"Digitalización"},{value:"microfilmacion",label:"Microfilmación"}];function xe({disposicion:a,usuarios:c,errors:i}){const[r,o]=p.useState(""),[f,b]=p.useState([]),{data:t,setData:l,put:D,processing:v,isDirty:S}=A({tipo_disposicion:a.tipo_disposicion,justificacion:a.justificacion,observaciones:a.observaciones||"",fecha_propuesta:a.fecha_propuesta.split("T")[0],responsable_id:a.responsable?.id?.toString()||""});p.useEffect(()=>{if(r){const s=c.filter(N=>N.name.toLowerCase().includes(r.toLowerCase())||N.email.toLowerCase().includes(r.toLowerCase())).slice(0,10);b(s)}else b(c.slice(0,10))},[r,c]);const m=c.find(s=>s.id.toString()===t.responsable_id),L=s=>{s.preventDefault(),D(route("admin.disposiciones.update",a.id))};return e.jsxs(k,{children:[e.jsx(E,{title:`Editar Disposición #${a.id}`}),e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(n,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(g,{href:route("admin.disposiciones.show",a.id),children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Volver"]})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:["Editar Disposición #",a.id]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Modificar la propuesta de disposición final"})]})]})}),e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsxs(u,{className:"flex items-center space-x-2",children:[a.expediente?e.jsx(T,{className:"h-5 w-5 text-blue-500"}):e.jsx(I,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{children:"Item Afectado"})]}),e.jsx(B,{children:"Este campo no puede ser modificado"})]}),e.jsx(j,{children:e.jsx(_,{className:"bg-muted",children:e.jsx(w,{children:a.expediente?e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.expediente.codigo}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.expediente.titulo})]}):a.documento?e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.documento.nombre}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Expediente: ",a.documento.expediente.codigo]})]}):e.jsx("p",{children:"Item no disponible"})})})})]}),e.jsxs(x,{children:[e.jsx(h,{children:e.jsx(u,{children:"Tipo de Disposición Final"})}),e.jsxs(j,{children:[e.jsx("div",{className:"space-y-3",children:q.map(s=>e.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors ${t.tipo_disposicion===s.value?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>l("tipo_disposicion",s.value),children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${t.tipo_disposicion===s.value?"bg-primary border-primary":"border-gray-300"}`}),e.jsx("span",{className:"font-medium",children:s.label})]})},s.value))}),i.tipo_disposicion&&e.jsx("p",{className:"text-sm text-red-500 mt-2",children:i.tipo_disposicion})]})]}),e.jsxs(x,{children:[e.jsx(h,{children:e.jsxs(u,{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"h-5 w-5"}),e.jsx("span",{children:"Información de la Disposición"})]})}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(d,{children:"Responsable"}),m?e.jsxs(_,{className:"bg-primary/5 border-primary",children:[e.jsx(H,{className:"h-4 w-4 text-primary"}),e.jsxs(w,{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:m.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:m.email})]}),e.jsx(n,{type:"button",variant:"ghost",size:"sm",onClick:()=>{l("responsable_id",""),o("")},children:"Cambiar"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"}),e.jsx(y,{placeholder:"Buscar usuario registrado...",value:r,onChange:s=>o(s.target.value),className:"pl-10"})]}),r&&f.length>0&&e.jsx("div",{className:"space-y-1 max-h-60 overflow-y-auto border rounded-lg p-2 bg-background shadow-lg",children:f.map(s=>e.jsxs("div",{className:"p-3 rounded-lg cursor-pointer transition-colors hover:bg-primary/10 border border-transparent hover:border-primary",onClick:()=>{l("responsable_id",s.id.toString()),o("")},children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email})]},s.id))})]}),i.responsable_id&&e.jsx("p",{className:"text-sm text-red-500",children:i.responsable_id})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{className:"flex items-center space-x-2",children:[e.jsx($,{className:"h-4 w-4"}),e.jsx("span",{children:"Fecha de Propuesta *"})]}),e.jsx(y,{type:"date",value:t.fecha_propuesta,onChange:s=>l("fecha_propuesta",s.target.value),className:i.fecha_propuesta?"border-red-500":""}),i.fecha_propuesta&&e.jsx("p",{className:"text-sm text-red-500",children:i.fecha_propuesta})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Justificación *"}),e.jsx(C,{placeholder:"Justifica la necesidad...",value:t.justificacion,onChange:s=>l("justificacion",s.target.value),className:`min-h-[100px] ${i.justificacion?"border-red-500":""}`}),i.justificacion&&e.jsx("p",{className:"text-sm text-red-500",children:i.justificacion})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Observaciones"}),e.jsx(C,{placeholder:"Observaciones adicionales (opcional)",value:t.observaciones,onChange:s=>l("observaciones",s.target.value),className:"min-h-[80px]"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(n,{type:"button",variant:"outline",asChild:!0,children:e.jsx(g,{href:route("admin.disposiciones.show",a.id),children:"Cancelar"})}),e.jsxs(n,{type:"submit",disabled:v||!S,children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),v?"Guardando...":"Guardar Cambios"]})]})]})]})}export{xe as default};
