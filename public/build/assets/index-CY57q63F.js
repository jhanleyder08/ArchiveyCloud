import{r as F,j as e,H as B,L as j,b as d}from"./app-91m9kwyU.js";import{A as P}from"./app-layout-DZp0sNzN.js";import{B as o}from"./button-CoFcodqQ.js";import{I as _}from"./input-JBRHZ7QZ.js";import{S as u,a as g,b as N,c as b,d as a}from"./select-Wrwv2RZt.js";import{B as i}from"./bell-DOxDP5vm.js";import{C as c}from"./circle-check-big-GF6EQRBn.js";import{S as w,B as I,j as x}from"./app-sidebar-layout-CLv5ko0D.js";import{T as C}from"./triangle-alert-B8VDP-oe.js";import{S as f}from"./search-DaK7IuzH.js";import{E as H}from"./eye-xXNHm9-c.js";import{U as R}from"./user-aQnMVpKS.js";import{C as y}from"./folder-C92Ox93S.js";import{C as v}from"./calendar-Dx7_WEl0.js";/* empty css            */import"./index-Dt_6hCNO.js";import"./index-CGEZD_4Y.js";import"./Combination-CDT0PLPo.js";import"./index-CeBSh6Va.js";import"./check-Cn3I3pUy.js";import"./index-Dc4Xr8Yn.js";import"./x-CyP9uxNW.js";import"./index-Baz-24-5.js";import"./app-logo-icon-CUlPqTXW.js";import"./label-BZUr6K3X.js";import"./mail-CViPbZpD.js";import"./users-DKdb_1gz.js";const $={baja:"bg-blue-100 text-blue-800 border-blue-200",media:"bg-yellow-100 text-yellow-800 border-yellow-200",alta:"bg-orange-100 text-orange-800 border-orange-200",critica:"bg-red-100 text-red-800 border-red-200"},q={pendiente:"bg-gray-100 text-gray-800 border-gray-200",leida:"bg-green-100 text-green-800 border-green-200",archivada:"bg-gray-100 text-gray-600 border-gray-200"},K={"calendar-x":v,"calendar-warning":v,"clock-x":y,"clock-warning":y,archive:x,"check-circle":c,"file-plus":x,"user-plus":R,settings:w,"shield-alert":C,bell:i};function pe({notificaciones:h,estadisticas:l,filtros:n}){const[t,m]=F.useState({estado:n.estado||"todos",tipo:n.tipo||"todos",prioridad:n.prioridad||"todos"}),S=()=>{const s={estado:t.estado==="todos"?"":t.estado,tipo:t.tipo==="todos"?"":t.tipo,prioridad:t.prioridad==="todos"?"":t.prioridad};d.get("/admin/notificaciones",s,{preserveState:!0,preserveScroll:!0})},A=()=>{m({estado:"todos",tipo:"todos",prioridad:"todos"}),d.visit("/admin/notificaciones")},T=async s=>{try{await fetch(`/admin/notificaciones/${s}/marcar-leida`,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}}),d.reload({preserveScroll:!0})}catch(r){console.error("Error al marcar como leída:",r)}},k=async()=>{try{await fetch("/admin/notificaciones/marcar-todas-leidas",{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}}),d.reload()}catch(s){console.error("Error al marcar todas como leídas:",s)}},E=async s=>{try{await fetch(`/admin/notificaciones/${s}/archivar`,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}}),d.reload({preserveScroll:!0})}catch(r){console.error("Error al archivar:",r)}},p=s=>new Date(s).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),L=s=>K[s]||i;return e.jsxs(P,{breadcrumbs:[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Notificaciones",href:"/admin/notificaciones"}],children:[e.jsx(B,{title:"Notificaciones"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"h-6 w-6 text-[#2a3d83]"}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Centro de Notificaciones"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[l.pendientes>0&&e.jsxs(o,{onClick:k,variant:"outline",children:[e.jsx(c,{className:"h-4 w-4 mr-2 text-[#2a3d83]"}),"Marcar todas como leídas"]}),e.jsx(o,{variant:"outline",asChild:!0,children:e.jsxs(j,{href:"/admin/notificaciones/admin",children:[e.jsx(w,{className:"h-4 w-4 mr-2 text-[#2a3d83]"}),"Panel Admin"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:l.total})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(i,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pendientes"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:l.pendientes})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(I,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Leídas"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:l.leidas})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(c,{className:"h-6 w-6 text-[#2a3d83]"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Críticas"}),e.jsx("p",{className:"text-2xl font-semibold text-[#2a3d83]",children:l.criticas})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(C,{className:"h-6 w-6 text-[#2a3d83]"})})]})})]}),e.jsx("div",{className:"bg-white rounded-lg border p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4 w-full sm:w-auto",children:e.jsxs("div",{className:"relative flex-1 sm:w-80",children:[e.jsx(f,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(_,{type:"text",placeholder:"Buscar notificaciones...",className:"pl-10"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(u,{value:t.estado,onValueChange:s=>m({...t,estado:s}),children:[e.jsx(g,{className:"w-[180px]",children:e.jsx(N,{placeholder:"Todos los estados"})}),e.jsxs(b,{children:[e.jsx(a,{value:"todos",children:"Todos los estados"}),e.jsx(a,{value:"pendiente",children:"Pendientes"}),e.jsx(a,{value:"leida",children:"Leídas"}),e.jsx(a,{value:"archivada",children:"Archivadas"})]})]}),e.jsxs(u,{value:t.prioridad,onValueChange:s=>m({...t,prioridad:s}),children:[e.jsx(g,{className:"w-[180px]",children:e.jsx(N,{placeholder:"Todas las prioridades"})}),e.jsxs(b,{children:[e.jsx(a,{value:"todos",children:"Todas las prioridades"}),e.jsx(a,{value:"baja",children:"Baja"}),e.jsx(a,{value:"media",children:"Media"}),e.jsx(a,{value:"alta",children:"Alta"}),e.jsx(a,{value:"critica",children:"Crítica"})]})]}),e.jsxs(o,{onClick:S,className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Aplicar Filtros"]}),e.jsx(o,{variant:"outline",onClick:A,children:"Limpiar"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Notificación"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Prioridad"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Estado"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Fecha"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-900",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:h.data.length>0?h.data.map(s=>{const r=L(s.icono);return e.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${s.estado==="pendiente"?"bg-blue-50":""}`,children:[e.jsx("td",{className:"py-4 px-6",children:e.jsx("div",{className:"p-2 rounded-lg bg-blue-100",children:e.jsx(r,{className:"h-4 w-4 text-[#2a3d83]"})})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.titulo}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s.mensaje}),s.creado_por&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Por: ",s.creado_por.name]})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${$[s.prioridad]}`,children:s.prioridad.charAt(0).toUpperCase()+s.prioridad.slice(1)})}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${q[s.estado]}`,children:s.estado==="pendiente"?"Pendiente":s.estado==="leida"?"Leída":"Archivada"})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"text-sm text-gray-600",children:[p(s.created_at),s.leida_en&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Leída: ",p(s.leida_en)]})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.accion_url&&e.jsx(j,{href:s.accion_url,children:e.jsx("button",{className:"p-2 rounded-md text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50 transition-colors",children:e.jsx(H,{className:"h-4 w-4"})})}),s.estado==="pendiente"&&e.jsx("button",{onClick:()=>T(s.id),className:"p-2 rounded-md text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50 transition-colors",children:e.jsx(c,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>E(s.id),className:"p-2 rounded-md text-[#2a3d83] hover:text-[#1e2b5f] hover:bg-blue-50 transition-colors",children:e.jsx(x,{className:"h-4 w-4"})})]})})]},s.id)}):e.jsx("tr",{children:e.jsxs("td",{colSpan:6,className:"py-8 px-6 text-center text-gray-500",children:[e.jsx(i,{className:"h-12 w-12 text-[#2a3d83] mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay notificaciones"}),e.jsx("p",{className:"text-gray-500",children:"No tienes notificaciones que coincidan con los criterios seleccionados."})]})})})]})})})]})]})}export{pe as default};
