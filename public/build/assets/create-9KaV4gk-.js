import{r as u,j as e,H as w,L as y,b as A}from"./app-B_OG_Vza.js";import{A as L}from"./app-layout-DOCwYxKT.js";import{B as p}from"./button-BSbSEU_p.js";import{I as v}from"./input-Dh6-5mRd.js";import{A as I,T as b}from"./app-sidebar-layout-fWJRkDcF.js";import{S as f,a as g,b as N,c as C,d as i}from"./select-BxqyTJob.js";import{C as m,a as _,b as S,d as T,c as x}from"./card-cumjxZex.js";import{L as t}from"./label-rVSvqjBQ.js";import{F as R}from"./Combination-C0EFkMHe.js";import{S as J}from"./save-DXs1jlgh.js";/* empty css            */import"./index-CmTcU35r.js";import"./index-CeYb-gwX.js";import"./index-COOtV0Sn.js";import"./x-Di-LOll0.js";import"./app-logo-icon-A0O4A2TN.js";import"./user-Bso3zvdg.js";import"./mail-DIqKJEVK.js";import"./users-B-Ei4AUw.js";import"./folder-B9vwnN7g.js";import"./triangle-alert-3stdfBS0.js";import"./search-CCssNLWg.js";import"./BrandingProvider-BDq7LIZa.js";import"./index-DIzNZfaR.js";import"./check-B3a6KT7v.js";const O=[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Tablas de Retención Documental",href:"/admin/trd"},{title:"Crear TRD",href:"/admin/trd/create"}];function le({estados:V,ccds:h=[]}){const[r,F]=u.useState({codigo:"",ccd_id:"",nombre:"",descripcion:"",justificacion:"",version:"1.0",estado:"borrador",formato_archivo:"XML",metadatos_asociados:""}),[s,o]=u.useState({}),[j,l]=u.useState(!1),E=a=>{a.preventDefault(),l(!0),o({});let n=null;if(r.metadatos_asociados.trim())try{n=JSON.parse(r.metadatos_asociados)}catch{o({metadatos_asociados:"Formato JSON inválido"}),l(!1);return}const d={...r,metadatos_asociados:n};A.post("/admin/trd",d,{preserveScroll:!0,onError:D=>{o(D),l(!1)},onFinish:()=>{l(!1)}})},c=(a,n)=>{F(d=>({...d,[a]:n})),s[a]&&o(d=>({...d,[a]:""}))};return e.jsxs(L,{breadcrumbs:O,children:[e.jsx(w,{title:"Crear TRD - Tablas de Retención Documental"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(y,{href:"/admin/trd",children:e.jsxs(p,{variant:"outline",size:"sm",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Volver"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Crear Nueva TRD"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Complete la información para crear una nueva Tabla de Retención Documental"})]})]})}),e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs(m,{children:[e.jsxs(_,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5 text-[#2a3d83]"}),"Información Básica"]}),e.jsx(T,{children:"Datos principales de la Tabla de Retención Documental"})]}),e.jsxs(x,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx(t,{htmlFor:"ccd_id",className:"text-[#2a3d83] font-semibold",children:"Cuadro de Clasificación Documental (CCD) *"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Seleccione el CCD al cual estará asociada esta TRD"}),e.jsxs(f,{value:r.ccd_id,onValueChange:a=>c("ccd_id",a),children:[e.jsx(g,{className:`bg-white ${s.ccd_id?"border-red-500":""}`,children:e.jsx(N,{placeholder:"Seleccione un CCD..."})}),e.jsx(C,{children:h.length===0?e.jsx(i,{value:"none",disabled:!0,children:"No hay CCDs disponibles"}):h.map(a=>e.jsxs(i,{value:a.id.toString(),children:[a.codigo," - ",a.nombre," (v",a.version,")"]},a.id))})]}),s.ccd_id&&e.jsx("p",{className:"text-sm text-red-600",children:s.ccd_id}),h.length===0&&e.jsxs("p",{className:"text-sm text-amber-600",children:["⚠️ Debe crear un CCD primero. ",e.jsx("a",{href:"/admin/ccd/create",className:"underline text-[#2a3d83]",children:"Crear CCD"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"codigo",children:"Código *"}),e.jsx(v,{id:"codigo",type:"text",value:r.codigo,onChange:a=>c("codigo",a.target.value),placeholder:"Ej: TRD-2024-001",required:!0,className:s.codigo?"border-red-500":""}),s.codigo&&e.jsx("p",{className:"text-sm text-red-600",children:s.codigo})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"version",children:"Versión *"}),e.jsx(v,{id:"version",type:"text",value:r.version,onChange:a=>c("version",a.target.value),placeholder:"Ej: 1.0, 2.1",required:!0,className:s.version?"border-red-500":""}),s.version&&e.jsx("p",{className:"text-sm text-red-600",children:s.version})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"nombre",children:"Nombre de la TRD *"}),e.jsx(v,{id:"nombre",type:"text",value:r.nombre,onChange:a=>c("nombre",a.target.value),placeholder:"Ej: TRD General Administrativa 2024",required:!0,className:s.nombre?"border-red-500":""}),s.nombre&&e.jsx("p",{className:"text-sm text-red-600",children:s.nombre})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"descripcion",children:"Descripción"}),e.jsx(b,{id:"descripcion",value:r.descripcion,onChange:a=>c("descripcion",a.target.value),placeholder:"Describa el propósito y alcance de esta TRD",rows:4,className:s.descripcion?"border-red-500":""}),s.descripcion&&e.jsx("p",{className:"text-sm text-red-600",children:s.descripcion})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"justificacion",children:"Justificación"}),e.jsx(b,{id:"justificacion",value:r.justificacion,onChange:a=>c("justificacion",a.target.value),placeholder:"Justifique la creación o modificación de esta TRD",rows:3,className:s.justificacion?"border-red-500":""}),s.justificacion&&e.jsx("p",{className:"text-sm text-red-600",children:s.justificacion})]})]})]}),e.jsxs(m,{children:[e.jsxs(_,{children:[e.jsx(S,{children:"Configuración y Estado"}),e.jsx(T,{children:"Establezca el estado inicial y configuraciones técnicas"})]}),e.jsxs(x,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"estado",children:"Estado *"}),e.jsxs(f,{value:r.estado,onValueChange:a=>c("estado",a),children:[e.jsx(g,{className:s.estado?"border-red-500":"",children:e.jsx(N,{placeholder:"Selecciona un estado"})}),e.jsxs(C,{children:[e.jsx(i,{value:"borrador",children:"Borrador"}),e.jsx(i,{value:"activa",children:"Activa"}),e.jsx(i,{value:"inactiva",children:"Inactiva"}),e.jsx(i,{value:"archivada",children:"Archivada"})]})]}),s.estado&&e.jsx("p",{className:"text-sm text-red-600",children:s.estado})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"formato_archivo",children:"Formato de Archivo"}),e.jsxs(f,{value:r.formato_archivo,onValueChange:a=>c("formato_archivo",a),children:[e.jsx(g,{children:e.jsx(N,{placeholder:"Selecciona formato"})}),e.jsxs(C,{children:[e.jsx(i,{value:"XML",children:"XML"}),e.jsx(i,{value:"JSON",children:"JSON"}),e.jsx(i,{value:"PDF",children:"PDF"}),e.jsx(i,{value:"EXCEL",children:"Excel"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"metadatos_asociados",children:"Metadatos Asociados (JSON)"}),e.jsx(b,{id:"metadatos_asociados",value:r.metadatos_asociados,onChange:a=>c("metadatos_asociados",a.target.value),placeholder:'{"categoria": "administrativa", "nivel_acceso": "publico", "palabras_clave": ["gestion", "documental"]}',rows:4,className:`font-mono text-sm ${s.metadatos_asociados?"border-red-500":""}`}),e.jsx("p",{className:"text-xs text-gray-500",children:"Opcional: Ingrese metadatos adicionales en formato JSON válido"}),s.metadatos_asociados&&e.jsx("p",{className:"text-sm text-red-600",children:s.metadatos_asociados})]})]})]}),e.jsx(m,{children:e.jsx(x,{className:"pt-6",children:e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(y,{href:"/admin/trd",children:e.jsx(p,{type:"button",variant:"outline",disabled:j,children:"Cancelar"})}),e.jsx(p,{type:"submit",className:"bg-[#2a3d83] hover:bg-[#1e2b5f]",disabled:j,children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Crear TRD"]})})]})})})]}),e.jsx(m,{className:"bg-blue-50 border-blue-200",children:e.jsx(x,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-blue-100 rounded-full p-2 flex-shrink-0",children:e.jsx(R,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Información sobre TRDs"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"• El código debe ser único y seguir la nomenclatura establecida"}),e.jsx("li",{children:'• Las TRDs en estado "Borrador" pueden ser modificadas libremente'}),e.jsx("li",{children:'• Solo las TRDs "Aprobadas" pueden marcarse como vigentes'}),e.jsx("li",{children:"• Los metadatos ayudan a la clasificación y búsqueda de la TRD"}),e.jsx("li",{children:"• Una vez creada, se generará automáticamente un identificador único"})]})]})]})})})]})]})}export{le as default};
